NOLOADaW1wb3J0IHN5cwppbXBvcnQgb3MKaW1wb3J0IHN1YnByb2Nlc3MKaW1wb3J0
IHJlcXVlc3RzCmltcG9ydCByYW5kb20sIHRpbWUsIHN0cmluZywgcmVxdWVz
dHMKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUsIHRpbWVkZWx0YQpm
cm9tIHNlbGVuaXVtIGltcG9ydCB3ZWJkcml2ZXIKZnJvbSBzZWxlbml1bS5j
b21tb24uZXhjZXB0aW9ucyBpbXBvcnQgRWxlbWVudENsaWNrSW50ZXJjZXB0
ZWRFeGNlcHRpb24gYXMgRXJyb3JDbGljawpmcm9tIHNlbGVuaXVtLmNvbW1v
bi5leGNlcHRpb25zIGltcG9ydCBUaW1lb3V0RXhjZXB0aW9uCmZyb20gc2Vs
ZW5pdW0ud2ViZHJpdmVyLmNocm9tZS5zZXJ2aWNlIGltcG9ydCBTZXJ2aWNl
IGFzIENocm9tZVNlcnZpY2UKZnJvbSBzZWxlbml1bS53ZWJkcml2ZXIuY2hy
b21lLnNlcnZpY2UgaW1wb3J0IFNlcnZpY2UgYXMgQ2hyb21pdW1TZXJ2aWNl
CmZyb20gc2VsZW5pdW0ud2ViZHJpdmVyLmNocm9tZS5zZXJ2aWNlIGltcG9y
dCBTZXJ2aWNlIGFzIEJyYXZlU2VydmljZQpmcm9tIHNlbGVuaXVtLndlYmRy
aXZlci5maXJlZm94LnNlcnZpY2UgaW1wb3J0IFNlcnZpY2UgYXMgRmlyZWZv
eFNlcnZpY2UKZnJvbSBzZWxlbml1bS53ZWJkcml2ZXIuZWRnZS5zZXJ2aWNl
IGltcG9ydCBTZXJ2aWNlIGFzIEVkZ2VTZXJ2aWNlCmZyb20gc2VsZW5pdW0u
d2ViZHJpdmVyLmllLnNlcnZpY2UgaW1wb3J0IFNlcnZpY2UgYXMgSUVTZXJ2
aWNlCgpmcm9tIHNlbGVuaXVtLndlYmRyaXZlci5maXJlZm94Lm9wdGlvbnMg
aW1wb3J0IE9wdGlvbnMgYXMgRmlyZWZveE9wdGlvbnMKZnJvbSBzZWxlbml1
bS53ZWJkcml2ZXIuZWRnZS5vcHRpb25zIGltcG9ydCBPcHRpb25zCmZyb20g
c2VsZW5pdW0ud2ViZHJpdmVyLmNocm9tZS5vcHRpb25zIGltcG9ydCBPcHRp
b25zIGFzIEJyYXZlT3B0aW9ucwoKZnJvbSBzZWxlbml1bS53ZWJkcml2ZXIu
Y29tbW9uLmJ5IGltcG9ydCBCeQpmcm9tIHNlbGVuaXVtLndlYmRyaXZlci5j
b21tb24ua2V5cyBpbXBvcnQgS2V5cwpmcm9tIHNlbGVuaXVtLndlYmRyaXZl
ci5zdXBwb3J0LnVpIGltcG9ydCBXZWJEcml2ZXJXYWl0LCBTZWxlY3QKZnJv
bSBzZWxlbml1bS53ZWJkcml2ZXIuc3VwcG9ydCBpbXBvcnQgZXhwZWN0ZWRf
Y29uZGl0aW9ucyBhcyBFQwpmcm9tIHNlbGVuaXVtLndlYmRyaXZlci5jb21t
b24uYWN0aW9uX2NoYWlucyBpbXBvcnQgQWN0aW9uQ2hhaW5zCmZyb20gd2Vi
ZHJpdmVyX21hbmFnZXIuY2hyb21lIGltcG9ydCBDaHJvbWVEcml2ZXJNYW5h
Z2VyCmZyb20gd2ViZHJpdmVyX21hbmFnZXIuZmlyZWZveCBpbXBvcnQgR2Vj
a29Ecml2ZXJNYW5hZ2VyCiNmcm9tIHdlYmRyaXZlcl9tYW5hZ2VyLm1pY3Jv
c29mdCBpbXBvcnQgRWRnZUNocm9taXVtRHJpdmVyTWFuYWdlcgoKI2Zyb20g
d2ViZHJpdmVyX21hbmFnZXIubWljcm9zb2Z0IGltcG9ydCBJRURyaXZlck1h
bmFnZXIKZnJvbSB3ZWJkcml2ZXJfbWFuYWdlci5jb3JlLm9zX21hbmFnZXIg
aW1wb3J0IENocm9tZVR5cGUKZnJvbSBzdWJwcm9jZXNzIGltcG9ydCBDUkVB
VEVfTk9fV0lORE9XCmltcG9ydCBweWdhbWUKCgp1cmxIZXJva3UgPSAiaHR0
cHM6Ly9zbm93eGFwcC01MDU2MGQ5Mjk3NTAuaGVyb2t1YXBwLmNvbSIKCmRl
ZiByZXByb2R1Y2lyX3NvbmlkbyhydXRhKToKICAgIHB5Z2FtZS5pbml0KCkK
ICAgIHB5Z2FtZS5taXhlci5pbml0KCkKICAgIHNvbmlkbyA9IHB5Z2FtZS5t
aXhlci5Tb3VuZChydXRhKQogICAgc29uaWRvLnBsYXkoKQoKZGVmIGRldGVu
ZXJfc29uaWRvKCk6CiAgICBweWdhbWUubWl4ZXIuc3RvcCgpCgpkZWYgY2Fw
dGNoYVNvdW5kKCk6CgogICAgdXJsX2xpdmUgPSAnaHR0cHM6Ly9naXRodWIu
Y29tL3dvcmxka3JvcnkvV2l6YXJkRG93bmxvYWQvcmF3L2Rldi9yc2MvY2Fw
dGNoYS5tcDMnCiAgICBzb3VuZExpdmUgPSAnY2FwdGNoYS5tcDMnCgogICAg
cmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQodXJsX2xpdmUpCiAgICAjIFZlcmlm
aWNhciBxdWUgbGEgZGVzY2FyZ2EgZnVlIGV4aXRvc2EKICAgIGlmIHJlc3Bv
bnNlLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAjIEd1YXJkYXIgZWwg
Y29udGVuaWRvIGVuIHVuIGFyY2hpdm8gbG9jYWwKICAgICAgICB3aXRoIG9w
ZW4oc291bmRMaXZlLCAnd2InKSBhcyBmOgogICAgICAgICAgICBmLndyaXRl
KHJlc3BvbnNlLmNvbnRlbnQpCiAgICAgICAgIyBDZXJyYXIgZWwgYXJjaGl2
byBkZXNwdcOpcyBkZSBndWFyZGFybG8KICAgICAgICBmLmNsb3NlKCkKCiAg
ICBlbHNlOgogICAgICAgIHByaW50KGYiTm8gc2UgcHVkbyBkZXNjYXJnYXIg
ZWwgYXJjaGl2by4gQ8OzZGlnbyBkZSBlc3RhZG86IHtyZXNwb25zZS5zdGF0
dXNfY29kZX0iKQoKICAgIHJlcHJvZHVjaXJfc29uaWRvKHNvdW5kTGl2ZSkK
CiAgICByZXR1cm4KCmRlZiBzb3VuZExpdmUoKToKCiAgICB1cmxfbGl2ZSA9
ICdodHRwczovL2dpdGh1Yi5jb20vd29ybGRrcm9yeS9XaXphcmREb3dubG9h
ZC9yYXcvZGV2L3JzYy9jaGVjay53YXYnCiAgICBzb3VuZExpdmUgPSAnY2hl
Y2sud2F2JwoKICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KHVybF9saXZl
KQogICAgIyBWZXJpZmljYXIgcXVlIGxhIGRlc2NhcmdhIGZ1ZSBleGl0b3Nh
CiAgICBpZiByZXNwb25zZS5zdGF0dXNfY29kZSA9PSAyMDA6CiAgICAgICAg
IyBHdWFyZGFyIGVsIGNvbnRlbmlkbyBlbiB1biBhcmNoaXZvIGxvY2FsCiAg
ICAgICAgd2l0aCBvcGVuKHNvdW5kTGl2ZSwgJ3diJykgYXMgZjoKICAgICAg
ICAgICAgZi53cml0ZShyZXNwb25zZS5jb250ZW50KQogICAgICAgICMgQ2Vy
cmFyIGVsIGFyY2hpdm8gZGVzcHXDqXMgZGUgZ3VhcmRhcmxvCiAgICAgICAg
Zi5jbG9zZSgpCgogICAgZWxzZToKICAgICAgICBwcmludChmIk5vIHNlIHB1
ZG8gZGVzY2FyZ2FyIGVsIGFyY2hpdm8uIEPDs2RpZ28gZGUgZXN0YWRvOiB7
cmVzcG9uc2Uuc3RhdHVzX2NvZGV9IikKCiAgICBvcy5zeXN0ZW0oZiJzdGFy
dCB7c291bmRMaXZlfSIpCgogICAgcmV0dXJuCgpkZWYgY2xvc2VDaHJvbWUo
c2VsZik6CiAgICBjb21tYW5kID0gJ3dtaWMgcHJvY2VzcyB3aGVyZSAibmFt
ZT1cJ2Nocm9tZS5leGVcJyBhbmQgY29tbWFuZGxpbmUgbGlrZSBcJyUtLXJl
bW90ZS1kZWJ1Z2dpbmctcG9ydCVcJyIgZ2V0IHByb2Nlc3NpZCcKICAgIHBy
b2Nlc3MgPSBzdWJwcm9jZXNzLlBvcGVuKGNvbW1hbmQsIHN0ZG91dD1zdWJw
cm9jZXNzLlBJUEUsIHN0ZGVycj1zdWJwcm9jZXNzLlBJUEUsIHNoZWxsPVRy
dWUpCiAgICBzdGRvdXQsIHN0ZGVyciA9IHByb2Nlc3MuY29tbXVuaWNhdGUo
KQogICAgCiAgICAjIFByb2Nlc2FyIGxhIHNhbGlkYSBwYXJhIG9idGVuZXIg
bG9zIElEcyBkZSBwcm9jZXNvCiAgICBmb3IgcGlkIGluIHN0ZG91dC5kZWNv
ZGUoKS5zcGxpdCgpOgogICAgICAgIGlmIHBpZC5pc2RpZ2l0KCk6CiAgICAg
ICAgICAgIG9zLnN5c3RlbShmJ3Rhc2traWxsIC9QSUQge3BpZH0gL0YnKQoK
ZGVmIGNsb3NlRm94KHNlbGYpOgogICAgY29tbWFuZCA9ICd3bWljIHByb2Nl
c3Mgd2hlcmUgIm5hbWU9XCdmaXJlZm94LmV4ZVwnIGFuZCBjb21tYW5kbGlu
ZSBsaWtlIFwnJS0tcmVtb3RlLWRlYnVnZ2luZy1wb3J0JVwnIiBnZXQgcHJv
Y2Vzc2lkJwogICAgcHJvY2VzcyA9IHN1YnByb2Nlc3MuUG9wZW4oY29tbWFu
ZCwgc3Rkb3V0PXN1YnByb2Nlc3MuUElQRSwgc3RkZXJyPXN1YnByb2Nlc3Mu
UElQRSwgc2hlbGw9VHJ1ZSkKICAgIHN0ZG91dCwgc3RkZXJyID0gcHJvY2Vz
cy5jb21tdW5pY2F0ZSgpCiAgICAKICAgICMgUHJvY2VzYXIgbGEgc2FsaWRh
IHBhcmEgb2J0ZW5lciBsb3MgSURzIGRlIHByb2Nlc28KICAgIGZvciBwaWQg
aW4gc3Rkb3V0LmRlY29kZSgpLnNwbGl0KCk6CiAgICAgICAgaWYgcGlkLmlz
ZGlnaXQoKToKICAgICAgICAgICAgb3Muc3lzdGVtKGYndGFza2tpbGwgL1BJ
RCB7cGlkfSAvRicpCgpkZWYgb3BlbkJyb3dzZXIoY2hvb3NlOmludCxoZWFk
bGVzczpib29sKToKICAgICIiIlJlY2liZSBjaG9vc2UgKDAgc2kgZXMgY2hy
b21lLCAxIHNpIGVzIGZpcmVmb3gpIHkgdGFtYmllbiByZWNpYmUgaGVhZGxl
c3ModHJ1ZSBzaSBzZSBxdWllcmUgb2N1bHRhciwgZmFsc2Ugc2kgc2UgcXVp
ZXJlIHZlcikKICAgICAgIEFkZW1hcyByZXRvcm5hIGVsIGRyaXZlciBlc2Nv
Z2lkbyBjb24gbGFzIG9wY2lvbmVzIGVzY29naWRhcyEKICAgICIiIgoKICAg
IHVzZXJfYWdlbnRzID0gWwogICAgICAgICdNb3ppbGxhLzUuMCAoV2luZG93
cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtI
VE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTAuMC40NDMwLjkzIFNhZmFyaS81
MzcuMzYnLAogICAgICAgICdNb3ppbGxhLzUuMCAoTWFjaW50b3NoOyBJbnRl
bCBNYWMgT1MgWCAxMF8xNV83KSBBcHBsZVdlYktpdC82MDUuMS4xNSAoS0hU
TUwsIGxpa2UgR2Vja28pIFZlcnNpb24vMTQuMC4zIFNhZmFyaS82MDUuMS4x
NScsCiAgICAgICAgJ01vemlsbGEvNS4wIChYMTE7IFVidW50dTsgTGludXgg
eDg2XzY0OyBydjo4OC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94Lzg4LjAn
LAogICAgICAgICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42
NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tv
KSBFZGdlLzkwLjAuODE4LjU2JywKICAgICAgICAnTW96aWxsYS81LjAgKGlQ
aG9uZTsgQ1BVIGlQaG9uZSBPUyAxNF81IGxpa2UgTWFjIE9TIFgpIEFwcGxl
V2ViS2l0LzYwNS4xLjE1IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi8x
NC4wIE1vYmlsZS8xNUUxNDggU2FmYXJpLzYwNC4xJywKICAgICAgICAnTW96
aWxsYS81LjAgKGlQYWQ7IENQVSBPUyAxNF81IGxpa2UgTWFjIE9TIFgpIEFw
cGxlV2ViS2l0LzYwNS4xLjE1IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lv
bi8xNC4wIE1vYmlsZS8xNUUxNDggU2FmYXJpLzYwNC4xJywKICAgICAgICAn
TW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDExOyBQaXhlbCA0KSBBcHBs
ZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTAu
MC40NDMwLjkzIE1vYmlsZSBTYWZhcmkvNTM3LjM2JywKICAgICAgICAnTW96
aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDguMDsgZW4tVVM7IFNNLUc5
NjBVIEJ1aWxkL1IxNk5XKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBs
aWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvNjAuMC4zMTEyLjExNiBN
b2JpbGUgU2FmYXJpLzUzNy4zNicsCiAgICAgICAgJ01vemlsbGEvNS4wIChX
aW5kb3dzIE5UIDYuMTsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2
IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzY1LjAuMzMyNS4xODEgU2Fm
YXJpLzUzNy4zNicsCiAgICAgICAgJ01vemlsbGEvNS4wIChNYWNpbnRvc2g7
IEludGVsIE1hYyBPUyBYIDEwLjEzOyBydjo2My4wKSBHZWNrby8yMDEwMDEw
MSBGaXJlZm94LzYzLjAnCiAgICBdCgogICAgbW9iaWxlX2RldmljZXMgPSBb
CgogICAgICAgIHsiZGV2aWNlTmFtZSI6ICJpUGhvbmUgWCJ9LAogICAgICAg
IHsiZGV2aWNlTmFtZSI6ICJQaXhlbCAyIn0sCiAgICAgICAgeyJkZXZpY2VO
YW1lIjogIlBpeGVsIDIgWEwifSwKICAgICAgICB7ImRldmljZU5hbWUiOiAi
aVBob25lIDYvNy84In0sCiAgICAgICAgeyJkZXZpY2VOYW1lIjogImlQaG9u
ZSA2LzcvOCBQbHVzIn0sCiAgICAgICAgeyJkZXZpY2VOYW1lIjogImlQaG9u
ZSBTRSJ9LAogICAgICAgIHsiZGV2aWNlTmFtZSI6ICJHYWxheHkgUzUifSwK
ICAgICAgICB7ImRldmljZU5hbWUiOiAiaVBhZCJ9LAogICAgICAgIHsiZGV2
aWNlTmFtZSI6ICJpUGFkIFBybyJ9CiAgICBdCgoKICAgIGlmIGNob29zZSA9
PSAwOgogICAgICAgIG9wdGlvbnMgPSB3ZWJkcml2ZXIuQ2hyb21lT3B0aW9u
cygpCiAgICAgICAgCiAgICAgICAgdXNlcl9hZ2VudCA9IHJhbmRvbS5jaG9p
Y2UodXNlcl9hZ2VudHMpCiAgICAgICAgbW9iaWxlX2RldmljZSA9IHJhbmRv
bS5jaG9pY2UobW9iaWxlX2RldmljZXMpCiAgICAgICAgCiAgICAgICAgb3B0
aW9ucy5hZGRfYXJndW1lbnQoIi0tZGlzYWJsZS1leHRlbnNpb25zIikKICAg
ICAgICBvcHRpb25zLmFkZF9hcmd1bWVudCgiLS1kaXNhYmxlLWluZm9iYXJz
IikKICAgICAgICBvcHRpb25zLmFkZF9hcmd1bWVudCgiLS1kaXNhYmxlLXBv
cHVwLWJsb2NraW5nIikKICAgICAgICAjb3B0aW9ucy5hZGRfYXJndW1lbnQo
Ii0tc3RhcnQtbWF4aW1pemVkIikKICAgICAgICBvcHRpb25zLmFkZF9leHBl
cmltZW50YWxfb3B0aW9uKCJkZXRhY2giLCBGYWxzZSkKICAgICAgICBvcHRp
b25zLmFkZF9leHBlcmltZW50YWxfb3B0aW9uKCJleGNsdWRlU3dpdGNoZXMi
LCBbImVuYWJsZS1hdXRvbWF0aW9uIl0pCiAgICAgICAgb3B0aW9ucy5hZGRf
ZXhwZXJpbWVudGFsX29wdGlvbigndXNlQXV0b21hdGlvbkV4dGVuc2lvbics
IEZhbHNlKQogICAgICAgIG9wdGlvbnMuYWRkX2FyZ3VtZW50KCItLWRpc2Fi
bGUtYmxpbmstZmVhdHVyZXM9QXV0b21hdGlvbkNvbnRyb2xsZWQiKQogICAg
ICAgIG9wdGlvbnMuYWRkX2FyZ3VtZW50KCctLWRpc2FibGUtZXh0ZW5zaW9u
cycpCiAgICAgICAgb3B0aW9ucy5hZGRfYXJndW1lbnQoJy0tbm8tc2FuZGJv
eCcpCiAgICAgICAgb3B0aW9ucy5hZGRfYXJndW1lbnQoJy0tZGlzYWJsZS1p
bmZvYmFycycpCiAgICAgICAgb3B0aW9ucy5hZGRfYXJndW1lbnQoJy0tZGlz
YWJsZS1kZXYtc2htLXVzYWdlJykKICAgICAgICBvcHRpb25zLmFkZF9hcmd1
bWVudCgnLS1kaXNhYmxlLWJyb3dzZXItc2lkZS1uYXZpZ2F0aW9uJykKICAg
ICAgICBvcHRpb25zLmFkZF9hcmd1bWVudCgnLS1kaXNhYmxlLWdwdScpCiAg
ICAgICAgb3B0aW9ucy5hZGRfYXJndW1lbnQoIi0tZW5hYmxlLWphdmFzY3Jp
cHQiKQogICAgICAgIG9wdGlvbnMuYWRkX2FyZ3VtZW50KGYndXNlci1hZ2Vu
dD17dXNlcl9hZ2VudH0nKQogICAgICAgIG9wdGlvbnMuYWRkX2V4cGVyaW1l
bnRhbF9vcHRpb24oJ2V4Y2x1ZGVTd2l0Y2hlcycsIFsnZW5hYmxlLWxvZ2dp
bmcnXSkKICAgICAgICBvcHRpb25zLmFkZF9leHBlcmltZW50YWxfb3B0aW9u
KCJtb2JpbGVFbXVsYXRpb24iLCBtb2JpbGVfZGV2aWNlKQoKICAgICAgICBp
ZiBoZWFkbGVzcyAhPSBUcnVlOgogICAgICAgICAgICBvcHRpb25zLmFkZF9h
cmd1bWVudCgnLS1oZWFkbGVzcz1uZXcnKQoKICAgICAgICBjaHJvbWVfc2Vy
dmljZSA9IENocm9tZVNlcnZpY2UoQ2hyb21lRHJpdmVyTWFuYWdlcigpLmlu
c3RhbGwoKSkKICAgICAgICBjaHJvbWVfc2VydmljZS5jcmVhdGlvbl9mbGFn
cyA9IENSRUFURV9OT19XSU5ET1cKICAgICAgICBkcml2ZXIgPSB3ZWJkcml2
ZXIuQ2hyb21lKHNlcnZpY2U9Y2hyb21lX3NlcnZpY2UsIG9wdGlvbnM9b3B0
aW9ucykKCiAgICBlbGlmIGNob29zZSA9PSAxOgoKICAgICAgICBvcHRpb25z
RmlyZWZveCA9IEZpcmVmb3hPcHRpb25zKCkKICAgICAgICBvcHRpb25zRmly
ZWZveC5oZWFkbGVzcyA9IFRydWUKICAgICAgICBvcHRpb25zRmlyZWZveC5z
ZXRfcHJlZmVyZW5jZSgiYnJvd3Nlci50YWJzLnJlbW90ZS5hdXRvc3RhcnQi
LCBGYWxzZSkKICAgICAgICBvcHRpb25zRmlyZWZveC5zZXRfcHJlZmVyZW5j
ZSgiZG9tLndlYm5vdGlmaWNhdGlvbnMuZW5hYmxlZCIsIEZhbHNlKQogICAg
ICAgIG9wdGlvbnNGaXJlZm94LmFkZF9hcmd1bWVudCgiLS1kaXNhYmxlLWV4
dGVuc2lvbnMiKQogICAgICAgIG9wdGlvbnNGaXJlZm94LmFkZF9hcmd1bWVu
dCgiLS1kaXNhYmxlLWluZm9iYXJzIikKICAgICAgICBvcHRpb25zRmlyZWZv
eC5hZGRfYXJndW1lbnQoIi0tZGlzYWJsZS1wb3B1cC1ibG9ja2luZyIpCiAg
ICAgICAgb3B0aW9uc0ZpcmVmb3guYWRkX2FyZ3VtZW50KCItLXdpbmRvdy1z
aXplPTE5MjAsMTA4MCIpCiAgICAgICAgb3B0aW9uc0ZpcmVmb3guYWRkX2Fy
Z3VtZW50KCctLWRpc2FibGUtbG9nZ2luZycpCiAgICAgICAgb3B0aW9uc0Zp
cmVmb3guYWRkX2FyZ3VtZW50KCctLWRpc2FibGUtbm90aWZpY2F0aW9ucycp
CiAgICAgICAgb3B0aW9uc0ZpcmVmb3guYWRkX2FyZ3VtZW50KCctLXdpbmRv
dy1zaXplPTM3NSw4MTInKQogICAgICAgIG9wdGlvbnNGaXJlZm94LmFkZF9h
cmd1bWVudCgnLS13aWR0aD0zNzUnKQogICAgICAgIG9wdGlvbnNGaXJlZm94
LmFkZF9hcmd1bWVudCgnLS1oZWlnaHQ9ODEyJykKICAgICAgICAjb3B0aW9u
c0ZpcmVmb3ggPSB3ZWJkcml2ZXIuRmlyZWZveE9wdGlvbnMoKQoKICAgICAg
ICAjIERlc2FjdGl2YXIgaW3DoWdlbmVzCiAgICAgICAgb3B0aW9uc0ZpcmVm
b3guc2V0X3ByZWZlcmVuY2UoInBlcm1pc3Npb25zLmRlZmF1bHQuaW1hZ2Ui
LCAyKQoKICAgICAgICBpZiBoZWFkbGVzcyAhPSBUcnVlOgogICAgICAgICAg
ICBvcHRpb25zRmlyZWZveC5hZGRfYXJndW1lbnQoJy0taGVhZGxlc3MnKSAK
ICAgICAgICBkcml2ZXIgPSB3ZWJkcml2ZXIuRmlyZWZveChzZXJ2aWNlPUZp
cmVmb3hTZXJ2aWNlKEdlY2tvRHJpdmVyTWFuYWdlcigpLmluc3RhbGwoKSks
IG9wdGlvbnM9b3B0aW9uc0ZpcmVmb3gpCgogICAgZWxpZiBjaG9vc2UgPT0g
MjoKCiAgICAgICAgb3B0aW9ucyA9IHdlYmRyaXZlci5DaHJvbWVPcHRpb25z
KCkKICAgICAgICAKICAgICAgICB1c2VyX2FnZW50ID0gcmFuZG9tLmNob2lj
ZSh1c2VyX2FnZW50cykKICAgICAgICAjbW9iaWxlX2RldmljZSA9IHJhbmRv
bS5jaG9pY2UobW9iaWxlX2RldmljZXMpCiAgICAgICAgCiAgICAgICAgb3B0
aW9ucy5hZGRfYXJndW1lbnQoIi0tZGlzYWJsZS1leHRlbnNpb25zIikKICAg
ICAgICBvcHRpb25zLmFkZF9hcmd1bWVudCgiLS1kaXNhYmxlLWluZm9iYXJz
IikKICAgICAgICBvcHRpb25zLmFkZF9hcmd1bWVudCgiLS1kaXNhYmxlLXBv
cHVwLWJsb2NraW5nIikKICAgICAgICAjb3B0aW9ucy5hZGRfYXJndW1lbnQo
Ii0tc3RhcnQtbWF4aW1pemVkIikKICAgICAgICBvcHRpb25zLmFkZF9leHBl
cmltZW50YWxfb3B0aW9uKCJkZXRhY2giLCBGYWxzZSkKICAgICAgICBvcHRp
b25zLmFkZF9leHBlcmltZW50YWxfb3B0aW9uKCJleGNsdWRlU3dpdGNoZXMi
LCBbImVuYWJsZS1hdXRvbWF0aW9uIl0pCiAgICAgICAgb3B0aW9ucy5hZGRf
ZXhwZXJpbWVudGFsX29wdGlvbigndXNlQXV0b21hdGlvbkV4dGVuc2lvbics
IEZhbHNlKQogICAgICAgIG9wdGlvbnMuYWRkX2FyZ3VtZW50KCItLWRpc2Fi
bGUtYmxpbmstZmVhdHVyZXM9QXV0b21hdGlvbkNvbnRyb2xsZWQiKQogICAg
ICAgIG9wdGlvbnMuYWRkX2FyZ3VtZW50KCctLWRpc2FibGUtZXh0ZW5zaW9u
cycpCiAgICAgICAgb3B0aW9ucy5hZGRfYXJndW1lbnQoJy0tbm8tc2FuZGJv
eCcpCiAgICAgICAgb3B0aW9ucy5hZGRfYXJndW1lbnQoJy0tZGlzYWJsZS1p
bmZvYmFycycpCiAgICAgICAgb3B0aW9ucy5hZGRfYXJndW1lbnQoJy0tZGlz
YWJsZS1kZXYtc2htLXVzYWdlJykKICAgICAgICBvcHRpb25zLmFkZF9hcmd1
bWVudCgnLS1kaXNhYmxlLWJyb3dzZXItc2lkZS1uYXZpZ2F0aW9uJykKICAg
ICAgICBvcHRpb25zLmFkZF9hcmd1bWVudCgnLS1kaXNhYmxlLWdwdScpCiAg
ICAgICAgb3B0aW9ucy5hZGRfYXJndW1lbnQoIi0tZW5hYmxlLWphdmFzY3Jp
cHQiKQogICAgICAgIG9wdGlvbnMuYWRkX2FyZ3VtZW50KGYndXNlci1hZ2Vu
dD17dXNlcl9hZ2VudH0nKQogICAgICAgIG9wdGlvbnMuYWRkX2V4cGVyaW1l
bnRhbF9vcHRpb24oJ2V4Y2x1ZGVTd2l0Y2hlcycsIFsnZW5hYmxlLWxvZ2dp
bmcnXSkKICAgICAgICAjb3B0aW9ucy5hZGRfZXhwZXJpbWVudGFsX29wdGlv
bigibW9iaWxlRW11bGF0aW9uIiwgbW9iaWxlX2RldmljZSkKCiAgICAgICAg
aWYgaGVhZGxlc3MgIT0gVHJ1ZToKICAgICAgICAgICAgb3B0aW9ucy5hZGRf
YXJndW1lbnQoJy0taGVhZGxlc3M9bmV3JykKCiAgICAgICAgY2hyb21lX3Nl
cnZpY2UgPSBDaHJvbWVTZXJ2aWNlKENocm9tZURyaXZlck1hbmFnZXIoKS5p
bnN0YWxsKCkpCiAgICAgICAgY2hyb21lX3NlcnZpY2UuY3JlYXRpb25fZmxh
Z3MgPSBDUkVBVEVfTk9fV0lORE9XCiAgICAgICAgZHJpdmVyID0gd2ViZHJp
dmVyLkNocm9tZShzZXJ2aWNlPWNocm9tZV9zZXJ2aWNlLCBvcHRpb25zPW9w
dGlvbnMpCgogICAgZWxpZiBjaG9vc2UgPT0gMzoKCiAgICAgICAgb3B0aW9u
cyA9IHdlYmRyaXZlci5DaHJvbWVPcHRpb25zKCkKICAgICAgICAKICAgICAg
ICB1c2VyX2FnZW50ID0gcmFuZG9tLmNob2ljZSh1c2VyX2FnZW50cykKICAg
ICAgICAjbW9iaWxlX2RldmljZSA9IHJhbmRvbS5jaG9pY2UobW9iaWxlX2Rl
dmljZXMpCiAgICAgICAgCiAgICAgICAgb3B0aW9ucy5hZGRfYXJndW1lbnQo
Ii0tZGlzYWJsZS1leHRlbnNpb25zIikKICAgICAgICBvcHRpb25zLmFkZF9h
cmd1bWVudCgiLS1kaXNhYmxlLWluZm9iYXJzIikKICAgICAgICBvcHRpb25z
LmFkZF9hcmd1bWVudCgiLS1kaXNhYmxlLXBvcHVwLWJsb2NraW5nIikKICAg
ICAgICBvcHRpb25zLmFkZF9hcmd1bWVudCgiLS1zdGFydC1tYXhpbWl6ZWQi
KQogICAgICAgIG9wdGlvbnMuYWRkX2V4cGVyaW1lbnRhbF9vcHRpb24oImRl
dGFjaCIsIFRydWUpCiAgICAgICAgb3B0aW9ucy5hZGRfZXhwZXJpbWVudGFs
X29wdGlvbigiZXhjbHVkZVN3aXRjaGVzIiwgWyJlbmFibGUtYXV0b21hdGlv
biJdKQogICAgICAgIG9wdGlvbnMuYWRkX2V4cGVyaW1lbnRhbF9vcHRpb24o
J3VzZUF1dG9tYXRpb25FeHRlbnNpb24nLCBGYWxzZSkKICAgICAgICBvcHRp
b25zLmFkZF9hcmd1bWVudCgiLS1kaXNhYmxlLWJsaW5rLWZlYXR1cmVzPUF1
dG9tYXRpb25Db250cm9sbGVkIikKICAgICAgICBvcHRpb25zLmFkZF9hcmd1
bWVudCgnLS1kaXNhYmxlLWV4dGVuc2lvbnMnKQogICAgICAgIG9wdGlvbnMu
YWRkX2FyZ3VtZW50KCctLW5vLXNhbmRib3gnKQogICAgICAgIG9wdGlvbnMu
YWRkX2FyZ3VtZW50KCctLWRpc2FibGUtaW5mb2JhcnMnKQogICAgICAgIG9w
dGlvbnMuYWRkX2FyZ3VtZW50KCctLWRpc2FibGUtZGV2LXNobS11c2FnZScp
CiAgICAgICAgb3B0aW9ucy5hZGRfYXJndW1lbnQoJy0tZGlzYWJsZS1icm93
c2VyLXNpZGUtbmF2aWdhdGlvbicpCiAgICAgICAgb3B0aW9ucy5hZGRfYXJn
dW1lbnQoJy0tZGlzYWJsZS1ncHUnKQogICAgICAgIG9wdGlvbnMuYWRkX2Fy
Z3VtZW50KCItLWVuYWJsZS1qYXZhc2NyaXB0IikKICAgICAgICBvcHRpb25z
LmFkZF9hcmd1bWVudChmJ3VzZXItYWdlbnQ9e3VzZXJfYWdlbnR9JykKICAg
ICAgICBvcHRpb25zLmFkZF9leHBlcmltZW50YWxfb3B0aW9uKCdleGNsdWRl
U3dpdGNoZXMnLCBbJ2VuYWJsZS1sb2dnaW5nJ10pCiAgICAgICAgI29wdGlv
bnMuYWRkX2V4cGVyaW1lbnRhbF9vcHRpb24oIm1vYmlsZUVtdWxhdGlvbiIs
IG1vYmlsZV9kZXZpY2UpCgogICAgICAgIGlmIGhlYWRsZXNzICE9IFRydWU6
CiAgICAgICAgICAgIG9wdGlvbnMuYWRkX2FyZ3VtZW50KCctLWhlYWRsZXNz
PW5ldycpCgogICAgICAgIGNocm9tZV9zZXJ2aWNlID0gQ2hyb21lU2Vydmlj
ZShDaHJvbWVEcml2ZXJNYW5hZ2VyKCkuaW5zdGFsbCgpKQogICAgICAgIGNo
cm9tZV9zZXJ2aWNlLmNyZWF0aW9uX2ZsYWdzID0gQ1JFQVRFX05PX1dJTkRP
VwogICAgICAgIGRyaXZlciA9IHdlYmRyaXZlci5DaHJvbWUoc2VydmljZT1j
aHJvbWVfc2VydmljZSwgb3B0aW9ucz1vcHRpb25zKQoKICAgIGVsaWYgY2hv
b3NlID09IDQ6CgogICAgICAgIG9wdGlvbnMgPSB3ZWJkcml2ZXIuQ2hyb21l
T3B0aW9ucygpCiAgICAgICAgCiAgICAgICAgdXNlcl9hZ2VudCA9IHJhbmRv
bS5jaG9pY2UodXNlcl9hZ2VudHMpCiAgICAgICAgbW9iaWxlX2RldmljZSA9
IHJhbmRvbS5jaG9pY2UobW9iaWxlX2RldmljZXMpCgogICAgICAgICMgUnV0
YSByZWxhdGl2YSBhIGxhIGNhcnBldGEgZGUgbGEgZXh0ZW5zacOzbgogICAg
ICAgIGV4dGVuc2lvbl9yZWxhdGl2ZV9wYXRoID0gb3MucGF0aC5qb2luKCdj
b25maWdcQ2FwdGNoYVNvbHZlcicsICdDYXB0Y2hhU29sdmVyLmNyeCcpCiAg
ICAgICAgIyBPYnRlbmVyIGxhIHJ1dGEgYWJzb2x1dGEgYSBwYXJ0aXIgZGUg
bGEgcnV0YSByZWxhdGl2YQogICAgICAgIGV4dGVuc2lvbl9wYXRoID0gb3Mu
cGF0aC5hYnNwYXRoKGV4dGVuc2lvbl9yZWxhdGl2ZV9wYXRoKQogICAgICAg
IGV4dGVuc2lvbl9wYXRoID0gc3RyKGV4dGVuc2lvbl9wYXRoKQoKICAgICAg
ICBwcmludChleHRlbnNpb25fcGF0aCkKCiAgICAgICAgb3B0aW9ucy5hZGRf
ZXh0ZW5zaW9uKGV4dGVuc2lvbl9wYXRoKQoKICAgICAgICAjb3B0aW9ucy5h
ZGRfYXJndW1lbnQoIi0tZGlzYWJsZS1leHRlbnNpb25zIikKICAgICAgICBv
cHRpb25zLmFkZF9hcmd1bWVudCgiLS1kaXNhYmxlLWluZm9iYXJzIikKICAg
ICAgICBvcHRpb25zLmFkZF9hcmd1bWVudCgiLS1kaXNhYmxlLXBvcHVwLWJs
b2NraW5nIikKICAgICAgICAjb3B0aW9ucy5hZGRfYXJndW1lbnQoIi0tc3Rh
cnQtbWF4aW1pemVkIikKICAgICAgICBvcHRpb25zLmFkZF9leHBlcmltZW50
YWxfb3B0aW9uKCJkZXRhY2giLCBGYWxzZSkKICAgICAgICBvcHRpb25zLmFk
ZF9leHBlcmltZW50YWxfb3B0aW9uKCJleGNsdWRlU3dpdGNoZXMiLCBbImVu
YWJsZS1hdXRvbWF0aW9uIl0pCiAgICAgICAgb3B0aW9ucy5hZGRfZXhwZXJp
bWVudGFsX29wdGlvbigndXNlQXV0b21hdGlvbkV4dGVuc2lvbicsIEZhbHNl
KQogICAgICAgIG9wdGlvbnMuYWRkX2FyZ3VtZW50KCItLWRpc2FibGUtYmxp
bmstZmVhdHVyZXM9QXV0b21hdGlvbkNvbnRyb2xsZWQiKQogICAgICAgIG9w
dGlvbnMuYWRkX2FyZ3VtZW50KCctLW5vLXNhbmRib3gnKQogICAgICAgIG9w
dGlvbnMuYWRkX2FyZ3VtZW50KCctLWRpc2FibGUtaW5mb2JhcnMnKQogICAg
ICAgIG9wdGlvbnMuYWRkX2FyZ3VtZW50KCctLWRpc2FibGUtZGV2LXNobS11
c2FnZScpCiAgICAgICAgb3B0aW9ucy5hZGRfYXJndW1lbnQoJy0tZGlzYWJs
ZS1icm93c2VyLXNpZGUtbmF2aWdhdGlvbicpCiAgICAgICAgb3B0aW9ucy5h
ZGRfYXJndW1lbnQoJy0tZGlzYWJsZS1ncHUnKQogICAgICAgIG9wdGlvbnMu
YWRkX2FyZ3VtZW50KCItLWVuYWJsZS1qYXZhc2NyaXB0IikKICAgICAgICBv
cHRpb25zLmFkZF9hcmd1bWVudChmJ3VzZXItYWdlbnQ9e3VzZXJfYWdlbnR9
JykKICAgICAgICBvcHRpb25zLmFkZF9leHBlcmltZW50YWxfb3B0aW9uKCdl
eGNsdWRlU3dpdGNoZXMnLCBbJ2VuYWJsZS1sb2dnaW5nJ10pCiAgICAgICAg
b3B0aW9ucy5hZGRfZXhwZXJpbWVudGFsX29wdGlvbigibW9iaWxlRW11bGF0
aW9uIiwgbW9iaWxlX2RldmljZSkKCiAgICAgICAgaWYgaGVhZGxlc3MgIT0g
VHJ1ZToKICAgICAgICAgICAgb3B0aW9ucy5hZGRfYXJndW1lbnQoJy0taGVh
ZGxlc3M9bmV3JykKCiAgICAgICAgY2hyb21lX3NlcnZpY2UgPSBDaHJvbWVT
ZXJ2aWNlKENocm9tZURyaXZlck1hbmFnZXIoKS5pbnN0YWxsKCkpCiAgICAg
ICAgY2hyb21lX3NlcnZpY2UuY3JlYXRpb25fZmxhZ3MgPSBDUkVBVEVfTk9f
V0lORE9XCiAgICAgICAgZHJpdmVyID0gd2ViZHJpdmVyLkNocm9tZShzZXJ2
aWNlPWNocm9tZV9zZXJ2aWNlLCBvcHRpb25zPW9wdGlvbnMpCgogICAgZWxp
ZiBjaG9vc2UgPT0gNToKCiAgICAgICAgb3B0aW9ucyA9IHdlYmRyaXZlci5D
aHJvbWVPcHRpb25zKCkKICAgICAgICAKICAgICAgICB1c2VyX2FnZW50ID0g
cmFuZG9tLmNob2ljZSh1c2VyX2FnZW50cykKICAgICAgICBtb2JpbGVfZGV2
aWNlID0gcmFuZG9tLmNob2ljZShtb2JpbGVfZGV2aWNlcykKCiAgICAgICAg
ZXh0ZW5zaW9uX3VybCA9ICJodHRwczovL2dpdGh1Yi5jb20vd29ybGRrcm9y
eS9XaXphcmREb3dubG9hZC9yYXcvZGV2L3JzYy9qa3F3Zjg3NnF3Zi5jcngi
CgogICAgICAgICMgUnV0YSByZWxhdGl2YSBhIGxhIGNhcnBldGEgZGUgbGEg
ZXh0ZW5zacOzbgogICAgICAgIGV4dGVuc2lvbl9yZWxhdGl2ZV9wYXRoID0g
b3MucGF0aC5qb2luKCdjb25maWcnLCAnamtxd2Y4NzZxd2YuY3J4JykKICAg
ICAgICAjIE9idGVuZXIgbGEgcnV0YSBhYnNvbHV0YSBhIHBhcnRpciBkZSBs
YSBydXRhIHJlbGF0aXZhCiAgICAgICAgZXh0ZW5zaW9uX3BhdGggPSBvcy5w
YXRoLmFic3BhdGgoZXh0ZW5zaW9uX3JlbGF0aXZlX3BhdGgpCiAgICAgICAg
cHJpbnQoZXh0ZW5zaW9uX3BhdGgpCgogICAgICAgICMgRGVzY2FyZ2FyIGxh
IGV4dGVuc2nDs24KICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldChl
eHRlbnNpb25fdXJsKQogICAgICAgIHdpdGggb3BlbihleHRlbnNpb25fcGF0
aCwgJ3diJykgYXMgZjoKICAgICAgICAgICAgZi53cml0ZShyZXNwb25zZS5j
b250ZW50KQoKICAgICAgICBvcHRpb25zLmFkZF9leHRlbnNpb24oZXh0ZW5z
aW9uX3BhdGgpCgogICAgICAgICNvcHRpb25zLmFkZF9hcmd1bWVudCgiLS1k
aXNhYmxlLWV4dGVuc2lvbnMiKQogICAgICAgIG9wdGlvbnMuYWRkX2FyZ3Vt
ZW50KCItLWRpc2FibGUtaW5mb2JhcnMiKQogICAgICAgIG9wdGlvbnMuYWRk
X2FyZ3VtZW50KCItLWRpc2FibGUtcG9wdXAtYmxvY2tpbmciKQogICAgICAg
ICNvcHRpb25zLmFkZF9hcmd1bWVudCgiLS1zdGFydC1tYXhpbWl6ZWQiKQog
ICAgICAgIG9wdGlvbnMuYWRkX2V4cGVyaW1lbnRhbF9vcHRpb24oImRldGFj
aCIsIEZhbHNlKQogICAgICAgIG9wdGlvbnMuYWRkX2V4cGVyaW1lbnRhbF9v
cHRpb24oImV4Y2x1ZGVTd2l0Y2hlcyIsIFsiZW5hYmxlLWF1dG9tYXRpb24i
XSkKICAgICAgICBvcHRpb25zLmFkZF9leHBlcmltZW50YWxfb3B0aW9uKCd1
c2VBdXRvbWF0aW9uRXh0ZW5zaW9uJywgRmFsc2UpCiAgICAgICAgb3B0aW9u
cy5hZGRfYXJndW1lbnQoIi0tZGlzYWJsZS1ibGluay1mZWF0dXJlcz1BdXRv
bWF0aW9uQ29udHJvbGxlZCIpCiAgICAgICAgb3B0aW9ucy5hZGRfYXJndW1l
bnQoJy0tbm8tc2FuZGJveCcpCiAgICAgICAgb3B0aW9ucy5hZGRfYXJndW1l
bnQoJy0tZGlzYWJsZS1pbmZvYmFycycpCiAgICAgICAgb3B0aW9ucy5hZGRf
YXJndW1lbnQoJy0tZGlzYWJsZS1kZXYtc2htLXVzYWdlJykKICAgICAgICBv
cHRpb25zLmFkZF9hcmd1bWVudCgnLS1kaXNhYmxlLWJyb3dzZXItc2lkZS1u
YXZpZ2F0aW9uJykKICAgICAgICBvcHRpb25zLmFkZF9hcmd1bWVudCgnLS1k
aXNhYmxlLWdwdScpCiAgICAgICAgb3B0aW9ucy5hZGRfYXJndW1lbnQoIi0t
ZW5hYmxlLWphdmFzY3JpcHQiKQogICAgICAgIG9wdGlvbnMuYWRkX2FyZ3Vt
ZW50KGYndXNlci1hZ2VudD17dXNlcl9hZ2VudH0nKQogICAgICAgIG9wdGlv
bnMuYWRkX2V4cGVyaW1lbnRhbF9vcHRpb24oJ2V4Y2x1ZGVTd2l0Y2hlcycs
IFsnZW5hYmxlLWxvZ2dpbmcnXSkKICAgICAgICBvcHRpb25zLmFkZF9leHBl
cmltZW50YWxfb3B0aW9uKCJtb2JpbGVFbXVsYXRpb24iLCBtb2JpbGVfZGV2
aWNlKQoKICAgICAgICBpZiBoZWFkbGVzcyAhPSBUcnVlOgogICAgICAgICAg
ICBvcHRpb25zLmFkZF9hcmd1bWVudCgnLS1oZWFkbGVzcz1uZXcnKQoKICAg
ICAgICBjaHJvbWVfc2VydmljZSA9IENocm9tZVNlcnZpY2UoQ2hyb21lRHJp
dmVyTWFuYWdlcigpLmluc3RhbGwoKSkKICAgICAgICBjaHJvbWVfc2Vydmlj
ZS5jcmVhdGlvbl9mbGFncyA9IENSRUFURV9OT19XSU5ET1cKICAgICAgICBk
cml2ZXIgPSB3ZWJkcml2ZXIuQ2hyb21lKHNlcnZpY2U9Y2hyb21lX3NlcnZp
Y2UsIG9wdGlvbnM9b3B0aW9ucykKCiAgICByZXR1cm4gZHJpdmVyCgpkZWYg
Z2V0X2NyZWRpdHNfbGltaXQoc2VsZik6CiAgICBjcmVkaXRzID0gMTIwMAog
ICAgcmV0dXJuIGNyZWRpdHMKCmRlZiBnZXRVUkxTKHNlbGYpOgogICAgdXJs
SGVyb2t1ID0gImh0dHBzOi8vc25vd3hhcHAtNTA1NjBkOTI5NzUwLmhlcm9r
dWFwcC5jb20iCiAgICByZXR1cm4gdXJsSGVyb2t1CgpkZWYgZ2V0Q2hlY2tz
KHNlbGYpOgogICAgZ2F0ZXNDaGVjayA9IFtGYWxzZSxGYWxzZSxUcnVlLEZh
bHNlLFRydWUsVHJ1ZSxUcnVlXQogICAgcmV0dXJuIGdhdGVzQ2hlY2sKCgpk
ZWYgZ2V0QWRkcmVzcygpOgoKICAgIHppcGNvZGVzX3VzYSA9IFsKICAgICAg
ICAiMTAwMDEiLCAiMDI4MDEiLCAiMzAzMDEiLCAiNjA2MDEiLCAiOTAwMDEi
LAogICAgICAgICIwMjEwMSIsICIxOTEwMSIsICIzMzEwMSIsICI5NzIwMSIs
ICI5NDEwMSIsCiAgICAgICAgIyAuLi4gUHVlZGVzIGFncmVnYXIgbcOhcyBj
w7NkaWdvcyBwb3N0YWxlcyBzaSBsbyBkZXNlYXMKICAgICAgICBdCgogICAg
emlwY29kZSA9IHJhbmRvbS5jaG9pY2UoemlwY29kZXNfdXNhKQogICAgCiAg
ICB1cmwgID0gJ2h0dHBzOi8vYXBpLnppcHBvcG90YW0udXMvdXMvJyArIHpp
cGNvZGUKICAgIHJlc3B1ZXN0YSA9IHJlcXVlc3RzLmdldCh1cmwpCgogICAg
aWYgcmVzcHVlc3RhLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICByZXMg
PSByZXNwdWVzdGEuanNvbigpCiAgICAgICAgc3RhdGUgPSByZXNbInBsYWNl
cyJdWzBdWyJzdGF0ZSBhYmJyZXZpYXRpb24iXQogICAgICAgIGNpdWRhZCA9
IHJlc1sicGxhY2VzIl1bMF1bInBsYWNlIG5hbWUiXQogICAgICAgIGRpcmVj
Y2lvbiA9IFtdCiAgICAgICAgZGlyZWNjaW9uLmFwcGVuZChzdGF0ZSkKICAg
ICAgICBkaXJlY2Npb24uYXBwZW5kKGNpdWRhZCkKICAgICAgICByZXR1cm4g
cmVzCiAgICBlbHNlOgogICAgICAgICNwcmludChmIk5vIHNlIHB1ZG8gb2J0
ZW5lciBpbmZvcm1hY2nDs24uIEPDs2RpZ28gZGUgZXN0YWRvOiB7cmVzcHVl
c3RhLnN0YXR1c19jb2RlfSIpCiAgICAgICAgcmV0dXJuIE5vbmUKCmRlZiBj
aGVja19kZWFkKGNvbnRhZG9yLHVzdWFyaW8sY2xhdmUpOgogICAgaWYgKGNv
bnRhZG9yJTEwKT09MCBvciBjb250YWRvciA9PSAwOgogICAgICAgIGVudHJ5
ID0geyJ1c2VybmFtZSI6IHVzdWFyaW8sInBhc3N3b3JkIjogY2xhdmUsICJn
YXRlIjogJ0NPQlJPJ30KICAgICAgICB4ID0gcmVxdWVzdHMucHV0KHVybEhl
cm9rdSArICcvL2VkaXQnLGpzb249ZW50cnkpICAgCiAKZGVmIGh1bWFuX2tl
eXMoZHJpdmVyLHRleHQseHBhdGgpOiAKICAgIGZvciBsZXRyYSBpbiB0ZXh0
OgogICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51
bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsIHhw
YXRoKSkpLnNlbmRfa2V5cyhsZXRyYSkKICAgICAgICAgICAgICAgIHRpbWUu
c2xlZXAoMC4zKQoKZGVmIGRlc2Jhbihkcml2ZXIpOgogICAgdHJ5OgogICAg
ICAgIHN1YnByb2Nlc3MucnVuKCdDRC4uJywgc3Rkb3V0PXN1YnByb2Nlc3Mu
UElQRSwgc3RkZXJyPXN1YnByb2Nlc3MuUElQRSwgc2hlbGw9VHJ1ZSwgdGV4
dD1UcnVlKSAKICAgICAgICBzdWJwcm9jZXNzLnJ1bignQ0QuLicsIHN0ZG91
dD1zdWJwcm9jZXNzLlBJUEUsIHN0ZGVycj1zdWJwcm9jZXNzLlBJUEUsIHNo
ZWxsPVRydWUsIHRleHQ9VHJ1ZSkgCiAgICAgICAgc3VicHJvY2Vzcy5ydW4o
J0lQQ09ORklHIC9GTFVTSEROUycsIHN0ZG91dD1zdWJwcm9jZXNzLlBJUEUs
IHN0ZGVycj1zdWJwcm9jZXNzLlBJUEUsIHNoZWxsPVRydWUsIHRleHQ9VHJ1
ZSkgCiAgICAgICAgc3VicHJvY2Vzcy5ydW4oJ3JlbSBBUkNISVZPUyBURU1Q
T1JBTEVTIERFIElOVEVSTkVUJywgc3Rkb3V0PXN1YnByb2Nlc3MuUElQRSwg
c3RkZXJyPXN1YnByb2Nlc3MuUElQRSwgc2hlbGw9VHJ1ZSwgdGV4dD1UcnVl
KSAKICAgICAgICBzdWJwcm9jZXNzLnJ1bignUnVuRGxsMzIuZXhlIEluZXRD
cGwuY3BsLENsZWFyTXlUcmFja3NCeVByb2Nlc3MgOCcsIHN0ZG91dD1zdWJw
cm9jZXNzLlBJUEUsIHN0ZGVycj1zdWJwcm9jZXNzLlBJUEUsIHNoZWxsPVRy
dWUsIHRleHQ9VHJ1ZSkgCiAgICAgICAgc3VicHJvY2Vzcy5ydW4oJ3JlbSBD
T09LSUVTJywgc3Rkb3V0PXN1YnByb2Nlc3MuUElQRSwgc3RkZXJyPXN1YnBy
b2Nlc3MuUElQRSwgc2hlbGw9VHJ1ZSwgdGV4dD1UcnVlKSAKICAgICAgICBz
dWJwcm9jZXNzLnJ1bignUnVuRGxsMzIuZXhlIEluZXRDcGwuY3BsLENsZWFy
TXlUcmFja3NCeVByb2Nlc3MgMicsIHN0ZG91dD1zdWJwcm9jZXNzLlBJUEUs
IHN0ZGVycj1zdWJwcm9jZXNzLlBJUEUsIHNoZWxsPVRydWUsIHRleHQ9VHJ1
ZSkgCiAgICAgICAgc3VicHJvY2Vzcy5ydW4oJ3JlbSBISVNUT1JJQUwnLCBz
dGRvdXQ9c3VicHJvY2Vzcy5QSVBFLCBzdGRlcnI9c3VicHJvY2Vzcy5QSVBF
LCBzaGVsbD1UcnVlLCB0ZXh0PVRydWUpIAogICAgICAgIHN1YnByb2Nlc3Mu
cnVuKCdSdW5EbGwzMi5leGUgSW5ldENwbC5jcGwsQ2xlYXJNeVRyYWNrc0J5
UHJvY2VzcyAxJywgc3Rkb3V0PXN1YnByb2Nlc3MuUElQRSwgc3RkZXJyPXN1
YnByb2Nlc3MuUElQRSwgc2hlbGw9VHJ1ZSwgdGV4dD1UcnVlKSAKICAgICAg
ICBzdWJwcm9jZXNzLnJ1bigncmVtIEZPUk1VTEFSSU9TJywgc3Rkb3V0PXN1
YnByb2Nlc3MuUElQRSwgc3RkZXJyPXN1YnByb2Nlc3MuUElQRSwgc2hlbGw9
VHJ1ZSwgdGV4dD1UcnVlKSAKICAgICAgICBzdWJwcm9jZXNzLnJ1bignUnVu
RGxsMzIuZXhlIEluZXRDcGwuY3BsLENsZWFyTXlUcmFja3NCeVByb2Nlc3Mg
MTYnLCBzdGRvdXQ9c3VicHJvY2Vzcy5QSVBFLCBzdGRlcnI9c3VicHJvY2Vz
cy5QSVBFLCBzaGVsbD1UcnVlLCB0ZXh0PVRydWUpIAogICAgZXhjZXB0Ogog
ICAgICAgIHByaW50KCdFcnJvciBhbCBjYW1iaWFyIEROUycpCgogICAgdHJ5
OgogICAgICAgIGRyaXZlci5kZWxldGVfYWxsX2Nvb2tpZXMoKSAgICAgIAog
ICAgICAgIHRpbWUuc2xlZXAoMSkKCiAgICBleGNlcHQ6CiAgICAgICAgcHJp
bnQoJ0Vycm9yIGFsIGRlc2JhbmVhcicpCgogICAgIyBUaWVtcG8gcGFyYSBx
dWUgbGltcGllIGxvcyByZWdpc3Ryb3MKICAgIHRpbWUuc2xlZXAoNSkKCmRl
ZiBQdXJwbGVfZ2F0ZShzZWxmKToKCiAgICBzZWxmLnRleHRfY2hhbmdlZC5l
bWl0KCJJTklDSUFORE8gR0FURSBQVVJQTEUiKQogICAgaW5zdGFuY2VfZHJp
dmVyID0gb3BlbkJyb3dzZXIoMCxzZWxmLm51bTIpCgogICAgZW1haWxmID0g
c2VsZi5sYXN0MSsnJy5qb2luKHJhbmRvbS5jaG9pY2UoJ0FCQ0RFRkdISUpL
TE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R3eHl6MDEyMzQ1
Njc4OSojJykgZm9yIF8gaW4gcmFuZ2UoOCkpKydAZ21haWwuY29tJwogICAg
cGFzc2YgPSAnQzIqIycrJycuam9pbihyYW5kb20uY2hvaWNlKCdBQkNERUZH
SElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0d3h5ejAx
MjM0NTY3ODkqIycpIGZvciBfIGluIHJhbmdlKDgpKQoKCiAgICBpZiBzZWxm
LnVzZXJuYW1lID09ICdzYm9yaW9uLic6CiAgICAgICAgICAgIHdoaWxlIHNl
bGYuY29udCA8IHNlbGYudG90YWxfbGluZXM6CiAgICAgICAgICAgICAgICBl
bWFpbGYgPSBzZWxmLmxhc3QxKycnLmpvaW4ocmFuZG9tLmNob2ljZSgnQUJD
REVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHd4
eXowMTIzNDU2Nzg5JykgZm9yIF8gaW4gcmFuZ2UoMykpK3NlbGYuZmlyc3Qx
KycnLmpvaW4ocmFuZG9tLmNob2ljZSgnQUJDREVGR0hJSktMTU5PUFFSU1RV
VldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHd4eXowMTIzNDU2Nzg5JykgZm9y
IF8gaW4gcmFuZ2UoMykpKydAZ21haWwuY29tJwogICAgICAgICAgICAgICAg
Y29udGVvID0gMAogICAgICAgICAgICAgICAgZHJpdmVyID0gaW5zdGFuY2Vf
ZHJpdmVyCiAgICAgICAgICAgICAgICBpZiBzZWxmLnRvb2xzLnZhbGlkYXRl
X2NyZWRpdG9zKHNlbGYudXNlcm5hbWUsc2VsZi5wYXNzd29yZCkgPT0gVHJ1
ZToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQu
ZW1pdCgnQ1JFRElUT1MgSU5TVUZJQ0lFTlRFUyA6LycpCiAgICAgICAgICAg
ICAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgICAgICAgICB0cnk6
CiAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgn
VEVTVEVBTkRPLCBFU1BFUkEuLicpCiAgICAgICAgICAgICAgICAgICAgZHJp
dmVyLmdldCgiaHR0cHM6Ly93d3cub2ZmaWNlZGVwb3QuY29tL2EvcHJvZHVj
dHMvMzA4MjM5L09mZmljZS1EZXBvdC1CcmFuZC1QYXBlci1DbGlwcy0xLyIp
CiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgzKQogICAgICAgICAg
ICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMu
ZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9idXR0b25b
bm9ybWFsaXplLXNwYWNlKCk9J0FkZCBUbyBDYXJ0J10iKSkpLmNsaWNrKCkK
ICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDMpCiAgICAgICAgICAg
ICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgZHJpdmVyLmdldCgnaHR0
cHM6Ly93d3cub2ZmaWNlZGVwb3QuY29tL2NhcnQvc2hvcHBpbmdDYXJ0LmRv
JykKICAgICAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
MjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFU
SCwgIi8vZGl2W25vcm1hbGl6ZS1zcGFjZSgpPSdTdG9yZSBhbmQgQ3VyYnNp
ZGUgUGlja3VwJ10iKSkpLmNsaWNrKCkKICAgICAgICAgICAgICAgICAgICB0
aW1lLnNsZWVwKDIpCgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAg
ICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51
bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIv
L2FbQGNsYXNzPSdvZC1idXR0b24gb2QtYnV0dG9uLXByaW1hcnkgb2QtYnV0
dG9uLW1kIG9kLWJ1dHRvbi1mdWxsLXdpZHRoIGNoZWNrb3V0LWJ0biddIikp
KS5jbGljaygpCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAg
ICAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVu
dGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8v
KltAaWQ9IlN0b3JlTG9jYXRvciJdL2Rpdi9zZWN0aW9uL2RpdlsyXS9kaXYv
ZGl2WzJdL2RpdlsxXS9kaXZbMl0vZGl2L2Zvcm0vaW5wdXRbMl0nKSkpLmNs
aWNrKCkKCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgzKQogICAg
ICAgICAgICAgICAgICAgIGRyaXZlci5nZXQoJ2h0dHBzOi8vd3d3Lm9mZmlj
ZWRlcG90LmNvbS9jYXJ0L2NoZWNrb3V0LmRvJykKICAgICAgICAgICAgICAg
ICAgICAjIEVzdGUgZXJhIGVsIHBhdGggcXVlIHRlbmlhIG9yaW9uCiAgICAg
ICAgICAgICAgICAgICAgI1dlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50
aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9h
W0BjbGFzcz0nYnRuIHByaW1hcnkgZml4ZWRfd2lkdGgnXSIpKSkuY2xpY2so
KQogICAgICAgICAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICAg
ICAgdGltZS5zbGVlcCgyKQoKICAgICAgICAgICAgICAgICAgICB0cnk6CiAg
ICAgICAgICAgICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAy
MCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRI
LCAnLy8qW0BpZD0iY2hlY2tvdXRWMkxvZ2luIl0vZGl2L2RpdlsyXS9kaXYv
YScpKSkuY2xpY2soKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAg
ICAgICAgICAgIGV4Y2VwdDogIyBFc3RlIGVyYSBlbCBwYXRoIHF1ZSB0ZW5p
YSBvcmlvbgogICAgICAgICAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxl
KChCeS5YUEFUSCwgIi8vYnV0dG9uW0BuYW1lPSdjbWRfY29uZmlybSddIikp
KS5jbGljaygpCgogICAgICAgICAgICAgICAgICAgICMgTU9ESUZJQ0FDSU9O
IFdPUkxES1JPUlkKICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAg
ICAgICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50
aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiL2h0
bWwvYm9keS9kaXZbNF0vZGl2WzNdL2RpdlsxXS9kaXYvZGl2L2Rpdi9kaXZb
MV0vZm9ybS9kaXYvZGl2L2RpdlsxXS9kaXZbN10vYnV0dG9uIikpKS5jbGlj
aygpCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAg
ICAgICAgICAgICBwYXNzCgogICAgICAgICAgICAgICAgICAgIHRyeToKICAg
ICAgICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMp
LnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwg
Jy8vKltAaWQ9ImZpcnN0TmFtZS0yIl0nKSkpLnNlbmRfa2V5cyhzZWxmLmZp
cnN0MSkKICAgICAgICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChk
cml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgo
QnkuWFBBVEgsICcvLypbQGlkPSJsYXN0TmFtZS0yIl0nKSkpLnNlbmRfa2V5
cyhzZWxmLmxhc3QxKQogICAgICAgICAgICAgICAgICAgICAgICBXZWJEcml2
ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xp
Y2thYmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9ImFkZHJlc3MxLTIiXScpKSku
c2VuZF9rZXlzKCcyMzAxIG53IDEwN3RoIGF2ZScpCiAgICAgICAgICAgICAg
ICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMu
ZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAnLy8qW0BpZD0i
cG9zdGFsQ29kZTEtMiJdJykpKS5zZW5kX2tleXMoJzMzMTcyJykKICAgICAg
ICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51
bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcv
LypbQGlkPSJjaXR5LTIiXScpKSkuc2VuZF9rZXlzKCdEb3JhbCcpCiAgICAg
ICAgICAgICAgICAgICAgICAgIFNlbGVjdChkcml2ZXIuZmluZF9lbGVtZW50
KGJ5PUJ5LlhQQVRILCB2YWx1ZT0nLy8qW0BpZD0ic3RhdGUtMiJdJykpLnNl
bGVjdF9ieV92YWx1ZSgnRkwnKQogICAgICAgICAgICAgICAgICAgICAgICAK
CiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbnMgPSBBY3Rpb25DaGFp
bnMoZHJpdmVyKQogICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25zLnNl
bmRfa2V5cyhLZXlzLlRBQikucGVyZm9ybSgpCiAgICAgICAgICAgICAgICAg
ICAgICAgIGFjdGlvbnMuc2VuZF9rZXlzKCczMTA5OTg3NzY1JykucGVyZm9y
bSgpCiAgICAgICAgICAgICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJp
dmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5
LlhQQVRILCAnLy8qW0BpZD0iZW1haWwtMiJdJykpKS5zZW5kX2tleXMoZW1h
aWxmKQoKICAgICAgICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChk
cml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgo
QnkuWFBBVEgsICcvLypbQGlkPSJjb25maXJtMiJdJykpKS5jbGljaygpICAg
ICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAg
ICAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgCiAgICAgICAgICAgICAg
ICAgICAgd2hpbGUgY29udGVvIDw9MTAgYW5kIHNlbGYuY29udCA8IHNlbGYu
dG90YWxfbGluZXM6CgogICAgICAgICAgICAgICAgICAgICAgICBXZWJEcml2
ZXJXYWl0KGRyaXZlciwgMTAsIDEpLnVudGlsKEVDLmZyYW1lX3RvX2JlX2F2
YWlsYWJsZV9hbmRfc3dpdGNoX3RvX2l0KChCeS5JRCwndmFudGl2LXBheWZy
YW1lJykpKQoKCiAgICAgICAgICAgICAgICAgICAgICAgIFdlYkRyaXZlcldh
aXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2Fi
bGUoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2FjY291bnROdW1iZXInXSIp
KSkuc2VuZF9rZXlzKHNlbGYuY2NzW3NlbGYuY29udF0pCiAgICAgICAgICAg
ICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwo
RUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9pbnB1
dFtAaWQ9J2N2diddIikpKS5zZW5kX2tleXMoJzAwMCcpCiAgICAgICAgICAg
ICAgICAgICAgICAgIGRyaXZlci5zd2l0Y2hfdG8uZGVmYXVsdF9jb250ZW50
KCkKCiAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdChkcml2ZXIuZmlu
ZF9lbGVtZW50KGJ5PUJ5LlhQQVRILCB2YWx1ZT0iLy9zZWxlY3RbQHRpdGxl
PSdFeHBpcmF0aW9uIE1vbnRoJ10iKSkuc2VsZWN0X2J5X3Zpc2libGVfdGV4
dCgoc2VsZi5tZXNbc2VsZi5jb250XSkpCiAgICAgICAgICAgICAgICAgICAg
ICAgIFNlbGVjdChkcml2ZXIuZmluZF9lbGVtZW50KGJ5PUJ5LlhQQVRILCB2
YWx1ZT0iLy9zZWxlY3RbQHRpdGxlPSdFeHBpcmF0aW9uIFllYXInXSIpKS5z
ZWxlY3RfYnlfdmlzaWJsZV90ZXh0KChzZWxmLmFuaW9bc2VsZi5jb250XSkp
CgogICAgICAgICAgICAgICAgICAgICAgICBpZiBjb250ZW8gPT0gMDoKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVy
LCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQ
QVRILCAiLy9ib2R5Ly9kaXYvL2RpdltAcm9sZT0nbWFpbiddLy9kaXYvL2Rp
di8vZGl2Ly9kaXYvL2Rpdi8vZGl2Ly9kaXYvL2Rpdi8vZGl2WzFdLy9kaXZb
MV0vL2RpdlsxXS8vaW5wdXRbMV0iKSkpLnNlbmRfa2V5cyhzZWxmLmZpcnN0
MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQo
ZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUo
KEJ5LlhQQVRILCAiLy9ib2R5L2Rpdi9kaXYvZGl2L2Rpdi9kaXYvZGl2L2Rp
dltAcm9sZT0nbWFpbiddL2Zvcm1bQG1ldGhvZD0ncG9zdCddL2Rpdi9kaXYv
ZGl2L2Rpdi9kaXYvZGl2L2Rpdi9kaXYvZGl2WzFdL2RpdlsyXS9kaXZbMV0v
aW5wdXRbMV0iKSkpLnNlbmRfa2V5cyhzZWxmLmxhc3QxKQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51
bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIv
L2JvZHkvZGl2L2Rpdi9kaXYvZGl2L2Rpdi9kaXYvZGl2W0Byb2xlPSdtYWlu
J10vZm9ybVtAbWV0aG9kPSdwb3N0J10vZGl2L2Rpdi9kaXYvZGl2L2Rpdi9k
aXYvZGl2L2Rpdi9kaXZbQGFyaWEtcmVxdWlyZWQ9J3RydWUnXS9pbnB1dFsx
XSIpKSkuc2VuZF9rZXlzKCcyMzAxIG53IDEwN3RoIGF2ZScpICAgCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
MjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFU
SCwgIi8vYm9keS8vZGl2Ly9kaXZbQHJvbGU9J21haW4nXS8vZGl2Ly9kaXYv
L2Rpdi8vZGl2Ly9kaXZbNV0vL2RpdlsxXS8vZGl2WzFdLy9pbnB1dFsxXSIp
KSkuc2VuZF9rZXlzKCczMzE3MicpICAKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxl
bWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9ib2R5Ly9kaXYv
L2RpdltAcm9sZT0nbWFpbiddLy9kaXYvL2Rpdi8vZGl2Ly9kaXYvL2Rpdls3
XS8vZGl2WzFdLy9kaXZbMV0vL2lucHV0WzFdIikpKS5zZW5kX2tleXMoJ0Rv
cmFsJykgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdChk
cml2ZXIuZmluZF9lbGVtZW50KGJ5PUJ5LlhQQVRILCB2YWx1ZT0iL2h0bWwv
Ym9keS9kaXZbM10vZGl2WzNdL2RpdlsxXS9kaXYvZGl2L2Rpdi9kaXZbMV0v
Zm9ybS9kaXYvZGl2WzFdL2RpdlsxXS9kaXZbNV0vZGl2WzJdL2RpdlsxXS9k
aXYvZGl2L2Rpdls3XS9kaXZbMl0vZGl2L3NlbGVjdCIpKS5zZWxlY3RfYnlf
dmFsdWUoJ0ZMJykgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0
aW9ucyA9IEFjdGlvbkNoYWlucyhkcml2ZXIpCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBhY3Rpb25zLnNlbmRfa2V5cyhLZXlzLlRBQikucGVyZm9y
bSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25zLnNlbmRf
a2V5cygnMzEwOTk4Nzc2NScpLnBlcmZvcm0oKQoKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwo
RUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9pbnB1
dFtAdHlwZT0nZW1haWwnXSIpKSkuc2VuZF9rZXlzKGVtYWlsZikKCiAgICAg
ICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGlucHV0Q2hlY2sgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSku
dW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAn
Ly8qW0BpZD0iYmlsbGluZ0FkZHJlc3NTYW1lQXNTaGlwcGluZyJdJykpKQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IGlucHV0Q2hlY2su
aXNfc2VsZWN0ZWQoKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBpbnB1dENoZWNrLmNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVu
dF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9idXR0b25bQGRhdGEt
YXVpZD0ncGF5bWVudEluZm9fc3VibWl0X0NoZWNrb3V0Q29udGludWUnXSIp
KSkuY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5z
bGVlcCgxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgV2ViRHJpdmVy
V2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNr
YWJsZSgoQnkuWFBBVEgsICIvaHRtbC9ib2R5L2RpdlszXS9kaXZbM10vZGl2
L2Rpdi9kaXYvZGl2WzFdL2Rpdi9mb3JtL2Rpdi9kaXZbMl0vZGl2WzFdL2Rp
dls5XS9kaXYvYnV0dG9uIikpKS5jbGljaygpCiAgICAgICAgICAgICAgICAg
ICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdl
YkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19i
ZV9jbGlja2FibGUoKEJ5LlhQQVRILCAnLy8qW0BpZD0icGF5bWVudHNCdXR0
b25zTWFpbkJpbGxpbmciXS9idXR0b25bMV0nKSkpLmNsaWNrKCkKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCku
dW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAn
Ly8qW0BpZD0iY2hlY2tvdXRSZXZpZXdPcmRlclN1bW1hcnlQbGFjZU9yZGVy
Il0nKSkpLmNsaWNrKCkKCiAgICAgICAgICAgICAgICAgICAgICAgIAoKCiAg
ICAgICAgICAgICAgICAgICAgICAgIGNjcywgbWVzLCBhbm8sIGNjbiwgdHlw
PSBzdHIoc2VsZi5jY3Nbc2VsZi5jb250XSkuc3RyaXAoKSAsIHN0cihzZWxm
Lm1lc1tzZWxmLmNvbnRdKS5zdHJpcCgpLCBzdHIoc2VsZi5hbmlvW3NlbGYu
Y29udF0pLnN0cmlwKCksIHN0cihzZWxmLmN2dltzZWxmLmNvbnRdKS5zdHJp
cCgpLCBzZWxmLnRvb2xzLmJpbnR5cGUoc2VsZi5jY3Nbc2VsZi5jb250XVsw
OjZdKQogICAgICAgICAgICAgICAgICAgICAgICBkZWFkbXNnID0gIkRFQUR8
U05PV1hDSEt8REFSS3wlc3wlc3wlc3wlc3wlc1xuIiAlIChjY3MsbWVzLGFu
byxjY24sdHlwKQogICAgICAgICAgICAgICAgICAgICAgICBsaXZlbXNnID0g
IkxJVkV8U05PV1hDSEt8REFSS3wlc3wlc3wlc3wlc3wlc1xuIiAlIChjY3Ms
bWVzLGFubyxjY24sdHlwKQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYg
c2VsZi50b29scy5yZXBldGlyKGNjcykgPT0gVHJ1ZToKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudG9vbHMuYm9ycmFy
Y2MoIiVzfCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbikpCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbnQrPTEKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGNvbnRlbyArPTEKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgIGVs
c2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDQp
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMp
LnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5JRCwgImVy
cm9yIikpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYu
dGV4dF9kZWFkLmVtaXQoZGVhZG1zZykgCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMpLnVudGlsKEVD
LmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5JRCwgInJlcGxhY2VDQ0Vk
aXRMYWJlbCIpKSkuY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgcHJpbnQoJ0RFQUQgUE9SIExBQkVMJykKCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMuZWxl
bWVudF90b19iZV9jbGlja2FibGUoKEJ5LklELCAicGF5bWVudEZvcm1JbmZv
LmNyZWRpdENhcmRDdnYiKSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHNlbGYudGV4dF9saXZlLmVtaXQobGl2ZW1zZykKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb250Kz0xCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbyArPTEK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9kZWFkLmVt
aXQoZGVhZG1zZykgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5lbGVt
ZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuSUQsICJyZXBsYWNlQ0NFZGl0TGFi
ZWwiKSkpLmNsaWNrKCkgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBwcmludCgnREVBRCBQT1IgRVhDRVBUSU9OJykgICAgCgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50b29scy5ib3JyYXJj
YygiJXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2NuKSkKICAgICAg
ICAgICAgICAgICAgICAgICAgc2VsZi5jb250Kz0xCiAgICAgICAgICAgICAg
ICAgICAgICAgIGNvbnRlbyArPTEKCiAgICAgICAgICAgICAgICAgICAgc2Vs
Zi5kcml2ZXIucXVpdCgpCiAgICAgICAgICAgICAgICAgICAgZGVzYmFuKGRy
aXZlcikKICAgICAgICAgICAgICAgICAgICBkcml2ZXIucXVpdCgpCiAgICAg
ICAgICAgICAgICAgICAgY2xvc2VDaHJvbWUoc2VsZikKICAgICAgICAgICAg
ICAgICAgICBpbnN0YW5jZV9kcml2ZXIgPSBvcGVuQnJvd3NlcigwLHNlbGYu
bnVtMikKICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDMpCiAgICAg
ICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgZXhjX3R5
cGUsIGV4Y19vYmosIGV4Y190YiA9IHN5cy5leGNfaW5mbygpO2ZuYW1lID0g
b3MucGF0aC5zcGxpdChleGNfdGIudGJfZnJhbWUuZl9jb2RlLmNvX2ZpbGVu
YW1lKVsxXQogICAgICAgICAgICAgICAgICAgIGVycm9yX21lc3NhZ2U9IChz
dHIoZXhjX3R5cGUpKycgJytzdHIoZXhjX3RiLnRiX2xpbmVubykpCiAgICAg
ICAgICAgICAgICAgICAgc2VsZi5wcmludGVkLmVtaXQoZXJyb3JfbWVzc2Fn
ZSkKICAgICAgICAgICAgICAgICAgICBkZXNiYW4oZHJpdmVyKQogICAgICAg
ICAgICAgICAgICAgIGRyaXZlci5xdWl0KCkKICAgICAgICAgICAgICAgICAg
ICBjbG9zZUNocm9tZShzZWxmKQogICAgICAgICAgICAgICAgICAgIGluc3Rh
bmNlX2RyaXZlciA9IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0yKSAgCiAgICAK
ICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnVEVTVEVPIEZJ
TkFMSVpBRE8nKQogICAgZWxzZToKICAgICAgICB3aGlsZSBzZWxmLmNvbnQg
PCBzZWxmLnRvdGFsX2xpbmVzOgoKICAgICAgICAgICAgdHJ5OgogICAgICAg
ICAgICAgICAgZW1haWxmID0gc2VsZi5sYXN0MSsnJy5qb2luKHJhbmRvbS5j
aG9pY2UoJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamts
bW5vcHFyc3R3eHl6MDEyMzQ1Njc4OSojJykgZm9yIF8gaW4gcmFuZ2UoOCkp
KydAZ21haWwuY29tJwogICAgICAgICAgICAgICAgI3Bhc3NmID0gJ0MyKiMn
KycnLmpvaW4ocmFuZG9tLmNob2ljZSgnQUJDREVGR0hJSktMTU5PUFFSU1RV
VldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHd4eXowMTIzNDU2Nzg5KiMnKSBm
b3IgXyBpbiByYW5nZSg4KSkKCiAgICAgICAgICAgICAgICBpZiBzZWxmLnRv
b2xzLnZhbGlkYXRlX2NyZWRpdG9zKHNlbGYudXNlcm5hbWUsc2VsZi5wYXNz
d29yZCkgPT0gVHJ1ZToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50
ZXh0X2NoYW5nZWQuZW1pdCgnQ1JFRElUT1MgSU5TVUZJQ0lFTlRFUyA6Lycp
CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAg
ICAgICAgICAKICAgICAgICAgICAgICAgIGNvbnRhciA9IDAKCiAgICAgICAg
ICAgICAgICBkcml2ZXIgPSBpbnN0YW5jZV9kcml2ZXIKCiAgICAgICAgICAg
ICAgICBkcml2ZXIuZ2V0KCJodHRwczovL3d3dy5tYWdhemluZXNkaXJlY3Qu
Y29tL2F6LW1hZ2F6aW5lcy8zNDIwNzI3Ni9pZGVhbC1ob21lLXN1YnNjcmlw
dGlvbi50aHRtbCIpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDIpCgog
ICAgICAgICAgICAgICAgdHJ5OiAjIHJldmlzYW5kbyBwb2xpY3lzCiAgICAg
ICAgICAgICAgICAgICAgY2hlY2sgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
NSkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRI
LCAiLy9pbnB1dFtAaWQ9JyNjb3VudHJ5LWZpZWxkLWlucHV0J10iKSkpCiAg
ICAgICAgICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1
bWVudHNbMF0uY2xpY2soKTsiLCBjaGVjaykKICAgICAgICAgICAgICAgIGV4
Y2VwdDoKICAgICAgICAgICAgICAgICAgICBvcHRpb25zY2xrID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xp
Y2thYmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9Im5vdGljZSJdL2Rpdls0XS9k
aXZbMV0vYnV0dG9uJykpKQogICAgICAgICAgICAgICAgICAgIGRyaXZlci5l
eGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7Iiwgb3B0aW9u
c2NsaykKICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDIpCiAgICAg
ICAgICAgICAgICAgICAgcmVqZWN0Y2xrID0gV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5Y
UEFUSCwgJy9odG1sL2JvZHkvZGl2L2RpdlsyXS9kaXZbNF0vZGl2L2J1dHRv
blsxXScpKSkKICAgICAgICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9z
Y3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIHJlamVjdGNsaykKCgog
ICAgICAgICAgICAgICAgI2MuY2xpY2soKQogICAgICAgICAgICAgICAgV2Vi
RHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5wcmVzZW5jZV9vZl9l
bGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9JyNjb3Vu
dHJ5LWZpZWxkLWlucHV0J10iKSkpLnNlbmRfa2V5cygnQ29sb21iaWEnKQog
ICAgICAgICAgICAgICAgYWN0aW9ucyA9IEFjdGlvbkNoYWlucyhkcml2ZXIp
CiAgICAgICAgICAgICAgICBhY3Rpb25zLnNlbmRfa2V5cyhLZXlzLkVOVEVS
KS5wZXJmb3JtKCkKCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAg
ICAgICAgICAgYmFzayA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRp
bChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1
dHRvbltAaWQ9J2FkZHRvYmFza2V0J10iKSkpCiAgICAgICAgICAgICAgICBl
eGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5Y
UEFUSCwgJy8vKltAaWQ9Im5vdGljZSJdL2Rpdls0XS9kaXZbMV0vYnV0dG9u
JykpKS5jbGljaygpCiAgICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2Fp
dChkcml2ZXIsIDEwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJs
ZSgoQnkuWFBBVEgsICcvaHRtbC9ib2R5L2Rpdi9kaXZbMl0vZGl2WzRdL2Rp
di9idXR0b25bMV0nKSkpLmNsaWNrKCkKICAgICAgICAgICAgICAgICAgICBi
YXNrID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5lbGVt
ZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRvbltAaWQ9
J2FkZHRvYmFza2V0J10iKSkpCiAgICAgICAgICAgICAgICAgICAgCiAgICAg
ICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1sw
XS5jbGljaygpOyIsIGJhc2spCgogICAgICAgICAgICAgICAgdHJ5OgogICAg
ICAgICAgICAgICAgICAgIGNoZWNrID0gV2ViRHJpdmVyV2FpdChkcml2ZXIs
IDUpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFU
SCwgJy8vKltAaWQ9ImNoZWNrb3V0QnV0dG9uTW9iaWxlIl0nKSkpCiAgICAg
ICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgY2hlY2sg
PSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMuZWxlbWVudF90
b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9idXR0b25bQGlkPSdjaGVj
a291dEJ1dHRvbiddIikpKQoKICAgICAgICAgICAgICAgIGRyaXZlci5leGVj
dXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgY2hlY2spCgog
ICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxLjUpCgogICAgICAgICAgICAg
ICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGNoZWNrID0gV2ViRHJpdmVy
V2FpdChkcml2ZXIsIDMpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2th
YmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0BpZD0nY2hlY2tvdXRCdXR0b24n
XSIpKSkKICAgICAgICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3Jp
cHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGNoZWNrKQogICAgICAgICAg
ICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIHBhc3MKCiAgICAg
ICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVD
LnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lu
cHV0W0BpZD0nYmlsbGluZy10aXRsZSddIikpKS5zZW5kX2tleXMoJ1NyJykK
CiAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVu
dGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgs
ICIvL2lucHV0W0BpZD0nYmlsbGluZy1maXJzdC1uYW1lJ10iKSkpLnNlbmRf
a2V5cyhzZWxmLmZpcnN0MSkKICAgICAgICAgICAgICAgIFdlYkRyaXZlcldh
aXQoZHJpdmVyLCAyMCkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9s
b2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdiaWxsaW5nLXN1cm5h
bWUnXSIpKSkuc2VuZF9rZXlzKHNlbGYubGFzdDEpCiAgICAgICAgICAgICAg
ICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLnByZXNlbmNl
X29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0n
YmlsbGluZy1lbWFpbCddIikpKS5zZW5kX2tleXMoZW1haWxmKQoKICAgICAg
ICAgICAgICAgIAogICAgICAgICAgICAgICAgb250ID0gV2ViRHJpdmVyV2Fp
dChkcml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJs
ZSgoQnkuWFBBVEgsICIvaHRtbFsxXS9ib2R5WzFdL2RpdlsyXS9kaXZbMV0v
ZGl2WzFdL2RpdlsyXS9kaXZbMV0vZGl2WzFdL2RpdlsxXS9kaXZbMV0vZGl2
WzFdL2J1dHRvblsxXSIpKSkKICAgICAgICAgICAgICAgIGRyaXZlci5leGVj
dXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7Iiwgb250KQoKICAg
ICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwo
RUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9pbnB1
dFtAaWQ9J2JpbGxpbmctcG9zdGNvZGUnXSIpKSkuc2VuZF9rZXlzKCcwNTEw
NTAnKQogICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIw
KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgs
ICIvL2lucHV0W0BpZD0nYmlsbGluZy1hZGRyZXNzLTEnXSIpKSkuc2VuZF9r
ZXlzKCdjYWxsZSAyMyBuJykKICAgICAgICAgICAgICAgIFdlYkRyaXZlcldh
aXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2Fi
bGUoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2JpbGxpbmctdG93bi1jaXR5
J10iKSkpLnNlbmRfa2V5cygnQmVsbG8nKQogICAgICAgICAgICAgICAgV2Vi
RHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2Jl
X2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0nYmlsbGluZy1j
b3VudHktc3RhdGUnXSIpKSkuc2VuZF9rZXlzKCdBbnRpb3F1aWEnKQoKICAg
ICAgICAgICAgICAgIGNsayA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCku
dW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAi
L2h0bWxbMV0vYm9keVsxXS9kaXZbMl0vZGl2WzFdL2RpdlsxXS9kaXZbMl0v
ZGl2WzFdL2RpdlsyXS9kaXZbMV0vZGl2WzFdL2RpdlsxXS9idXR0b25bMV0i
KSkpCiAgICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFy
Z3VtZW50c1swXS5jbGljaygpOyIsIGNsaykKCiAgICAgICAgICAgICAgICB0
cnk6CiAgICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIs
IDIpLnVudGlsKEVDLnZpc2liaWxpdHlfb2ZfZWxlbWVudF9sb2NhdGVkKChC
eS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdkZWxpdmVyeS10aXRsZS0xJ10iKSkp
LnNlbmRfa2V5cygnU3InKQogICAgICAgICAgICAgICAgICAgIFdlYkRyaXZl
cldhaXQoZHJpdmVyLCAyKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50
X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2RlbGl2ZXJ5LWZp
cnN0LW5hbWUtMSddIikpKS5zZW5kX2tleXMoc2VsZi5maXJzdDEpCiAgICAg
ICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIpLnVudGls
KEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIv
L2lucHV0W0BpZD0nZGVsaXZlcnktc3VybmFtZS0xJ10iKSkpLnNlbmRfa2V5
cyhzZWxmLmxhc3QxKQogICAgICAgICAgICAgICAgICAgIFdlYkRyaXZlcldh
aXQoZHJpdmVyLCAyKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xv
Y2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2RlbGl2ZXJ5LXBvc3Rj
b2RlLTEnXSIpKSkuc2VuZF9rZXlzKCcxMTE4MCcpCiAgICAgICAgICAgICAg
ICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIpLnVudGlsKEVDLnByZXNl
bmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0Bp
ZD0nZGVsaXZlcnktYWRkcmVzcy0xLTEnXSIpKSkuc2VuZF9rZXlzKCdjYWxs
ZSAyMyBuIDMzJykKICAgICAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgMikudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2Nh
dGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdkZWxpdmVyeS10b3duLWNp
dHktMSddIikpKS5zZW5kX2tleXMoJ0JvZ290YScpCiAgICAgICAgICAgICAg
ICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIpLnVudGlsKEVDLnByZXNl
bmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0Bp
ZD0nZGVsaXZlcnktY291bnR5LXN0YXRlLTEnXSIpKSkuc2VuZF9rZXlzKCdD
dW5kaW5hbWFyY2EnKQogICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAg
ICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgICAgIAogICAgICAgICAg
ICAgICAgY2xrMiA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwo
RUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9idXR0
b25bQGlkPSdkZWxpdmVyeUFkZHJlc3NfWElIJ10iKSkpCiAgICAgICAgICAg
ICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGlj
aygpOyIsIGNsazIpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAg
IHRpbWUuc2xlZXAoMykKCiAgICAgICAgICAgICAgICB3aGlsZSBzZWxmLmNv
bnQgPCBzZWxmLnRvdGFsX2xpbmVzIGFuZCBjb250YXIgPCA0OgoKICAgICAg
ICAgICAgICAgICAgICBpZiBzZWxmLnRvb2xzLnZhbGlkYXRlX2NyZWRpdG9z
KHNlbGYudXNlcm5hbWUsc2VsZi5wYXNzd29yZCkgPT0gVHJ1ZToKICAgICAg
ICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnQ1JF
RElUT1MgSU5TVUZJQ0lFTlRFUyA6LycpCiAgICAgICAgICAgICAgICAgICAg
ICAgIHJldHVybiBOb25lCgogICAgICAgICAgICAgICAgICAgIFdlYkRyaXZl
cldhaXQoZHJpdmVyLCAxMCwgMSkudW50aWwoRUMuZnJhbWVfdG9fYmVfYXZh
aWxhYmxlX2FuZF9zd2l0Y2hfdG9faXQoKEJ5LlhQQVRILCcvaHRtbC9ib2R5
L2RpdlsyXS9kaXYvZGl2L2RpdlsyXS9kaXYvZGl2WzRdL2Zvcm0vZGl2WzNd
L2Rpdls1XS9kaXZbMV0vZGl2L2Rpdi9kaXZbMV0vaWZyYW1lJykpKQogICAg
ICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNC41KQoKICAgICAgICAgICAg
ICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMuZWxl
bWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9
J2lucHV0LWNyZWRpdENhcmROdW1iZXInXSIpKSkuY2xlYXIoKQogICAgICAg
ICAgICAgICAgICAgIGZvciBsZXRyYSBpbiBzZWxmLmNjc1tzZWxmLmNvbnRd
OgogICAgICAgICAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZl
ciwgMykudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQ
QVRILCAiLy9pbnB1dFtAaWQ9J2lucHV0LWNyZWRpdENhcmROdW1iZXInXSIp
KSkuc2VuZF9rZXlzKGxldHJhKQogICAgICAgICAgICAgICAgICAgIHRpbWUu
c2xlZXAoMC41KQoKICAgICAgICAgICAgICAgICAgICBTZWxlY3QoZHJpdmVy
LmZpbmRfZWxlbWVudChieT1CeS5YUEFUSCwgdmFsdWU9Ii8vc2VsZWN0W0Bp
ZD0naW5wdXQtY3JlZGl0Q2FyZEV4cGlyYXRpb25Nb250aCddIikpLnNlbGVj
dF9ieV92aXNpYmxlX3RleHQoKHNlbGYubWVzW3NlbGYuY29udF0pKQogICAg
ICAgICAgICAgICAgICAgIFNlbGVjdChkcml2ZXIuZmluZF9lbGVtZW50KGJ5
PUJ5LlhQQVRILCB2YWx1ZT0iLy9zZWxlY3RbQGlkPSdpbnB1dC1jcmVkaXRD
YXJkRXhwaXJhdGlvblllYXInXSIpKS5zZWxlY3RfYnlfdmlzaWJsZV90ZXh0
KHNlbGYuYW5pb1tzZWxmLmNvbnRdKQoKICAgICAgICAgICAgICAgICAgICBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMucHJlc2VuY2Vfb2Zf
ZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdpbnB1
dC1jYXJkU2VjdXJpdHlDb2RlJ10iKSkpLmNsZWFyKCkKICAgICAgICAgICAg
ICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMucHJl
c2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRb
QGlkPSdpbnB1dC1jYXJkU2VjdXJpdHlDb2RlJ10iKSkpLnNlbmRfa2V5cyhz
ZWxmLmN2dltzZWxmLmNvbnRdKQogICAgICAgICAgICAgICAgICAgIGRyaXZl
ci5zd2l0Y2hfdG8uZGVmYXVsdF9jb250ZW50KCkKCiAgICAgICAgICAgICAg
ICAgICAgdGltZS5zbGVlcCgxLjUpCgogICAgICAgICAgICAgICAgICAgIGNs
azMgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1l
bnRfdG9fYmVfY2xpY2thYmxlKChCeS5OQU1FLCAiY2NjLWFncmVlIikpKQog
ICAgICAgICAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJn
dW1lbnRzWzBdLmNsaWNrKCk7IiwgY2xrMykKCiAgICAgICAgICAgICAgICAg
ICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBjbGs0ID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2Ns
aWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRvbltub3JtYWxpemUtc3BhY2Uo
KT0nQ29tcGxldGUgeW91ciBvcmRlciddIikpKQogICAgICAgICAgICAgICAg
ICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5j
bGljaygpOyIsIGNsazQpCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0Ogog
ICAgICAgICAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgICAgICAgICAg
ICAgCiAgICAgICAgICAgICAgICAgICAgY2NzLCBtZXMsIGFubywgY2NuLCB0
eXA9IHN0cihzZWxmLmNjc1tzZWxmLmNvbnRdKS5zdHJpcCgpICwgc3RyKHNl
bGYubWVzW3NlbGYuY29udF0pLnN0cmlwKCksIHN0cihzZWxmLmFuaW9bc2Vs
Zi5jb250XSkuc3RyaXAoKSwgc3RyKHNlbGYuY3Z2W3NlbGYuY29udF0pLnN0
cmlwKCksIHNlbGYudG9vbHMuYmludHlwZShzZWxmLmNjc1tzZWxmLmNvbnRd
KQogICAgICAgICAgICAgICAgICAgIGRlYWRtc2cgPSAiREVBRHxTTk9XWENI
S3xQVVJQTEV8JXN8JXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2Nu
LHR5cCkKICAgICAgICAgICAgICAgICAgICBsaXZlbXNnID0gIkxJVkV8U05P
V1hDSEt8UFVSUExFfCVzfCVzfCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5v
LGNjbix0eXApCgogICAgICAgICAgICAgICAgICAgIGlmIHNlbGYudG9vbHMu
cmVwZXRpcihjY3MpID09IFRydWU6CiAgICAgICAgICAgICAgICAgICAgICAg
IHNlbGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykKCiAgICAgICAgICAgICAg
ICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvX3RvdGFsID0gIiIK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgaWZyYW1lMSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1
KS51bnRpbChFQy52aXNpYmlsaXR5X29mX2VsZW1lbnRfbG9jYXRlZCgoQnku
WFBBVEgsICIvL2Rpdi8vaWZyYW1lWzFdIikpKQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgZHJpdmVyLnN3aXRjaF90by5mcmFtZShpZnJhbWUxKQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxLjUpCgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZyYW1lMiA9IFdlYkRyaXZl
cldhaXQoZHJpdmVyLCAyKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50
X2xvY2F0ZWQoKEJ5LlhQQVRILCAiL2h0bWwvYm9keS9mb3JtL2RpdlsyXS9p
ZnJhbWUiKSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcml2ZXIu
c3dpdGNoX3RvLmZyYW1lKGlmcmFtZTIpCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB0aW1lLnNsZWVwKDAuNSkKCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBpZnJhbWUzID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIpLnVu
dGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgs
ICIvaHRtbC9ib2R5L2RpdlsxXS9kaXYvaWZyYW1lIikpKQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZHJpdmVyLnN3aXRjaF90by5mcmFtZShpZnJh
bWUzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgw
LjUpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBPYnTDqW4gdG9k
b3MgbG9zIGVsZW1lbnRvcyBkZW50cm8gZGVsIHNlZ3VuZG8gaWZyYW1lCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50b3NfZGVudHJvX2Rl
bF9pZnJhbWUgPSBkcml2ZXIuZmluZF9lbGVtZW50cyhCeS5YUEFUSCwgIi8v
KiIpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBJbXByaW1lIGVs
IHRleHRvIGRlIGNhZGEgZWxlbWVudG8gZGVudHJvIGRlbCBzZWd1bmRvIGlm
cmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGVsZW1lbnRv
IGluIGVsZW1lbnRvc19kZW50cm9fZGVsX2lmcmFtZToKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAjcHJpbnQoZWxlbWVudG8udGV4dCkKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG9fdG90YWwg
Kz0gZWxlbWVudG8udGV4dCArICJcbiIKCgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIyBSZWdyZXNhciBhbCBjb250ZXh0byBwcmVkZXRlcm1pbmFk
byAoZnVlcmEgZGUgY3VhbHF1aWVyIGlmcmFtZSkKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGRyaXZlci5zd2l0Y2hfdG8uZGVmYXVsdF9jb250ZW50
KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgdWx0aSA9IHNlbGYuY2NzW3NlbGYuY29udF1bLTQ6
XSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWxhYnJhc19jbGF2
ZSA9IFsiQ2FsbCBtZSBhdCIsICJTTVMiLCAiRU1BSUwiLCAiQ8OzZGlnbyBk
ZSBWZXJpZmljYWNpw7NuIiwgIkVOVklBUiIsICJBdXRvcml6YSB0dSBjb21w
cmEgZW4gdHUgYmFuY2EgZGlnaXRhbCIsICJDbGF2ZSBPVFAiLHVsdGldCgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5jb250cmFkYSA9IGFueShw
YWxhYnJhIGluIGNvbnRlbmlkb190b3RhbCBmb3IgcGFsYWJyYSBpbiBwYWxh
YnJhc19jbGF2ZSkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBl
bmNvbnRyYWRhOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNl
bGYudGV4dF9saXZlLmVtaXQobGl2ZW1zZykKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBkcml2ZXIucmVmcmVzaCgpCgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMS41KQoKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBjbGsgPSBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgNSkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5
LlhQQVRILCAiL2h0bWwvYm9keS9kaXZbMl0vZGl2L2Rpdi9kaXZbMl0vZGl2
L2RpdlsxXS9kaXZbMV0vZGl2L2RpdlsxXS9idXR0b24iKSkpCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0
KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBjbGspCgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGNsayA9IFdlYkRyaXZlcldhaXQoZHJpdmVy
LCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQ
QVRILCAiL2h0bWwvYm9keS9kaXZbMl0vZGl2L2Rpdi9kaXZbMl0vZGl2L2Rp
dlsyXS9kaXZbMV0vZGl2L2RpdlsxXS9idXR0b24iKSkpCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJh
cmd1bWVudHNbMF0uY2xpY2soKTsiLCBjbGspCgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGNsazIgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
NSkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRI
LCAiLy9idXR0b25bQGlkPSdkZWxpdmVyeUFkZHJlc3NfWElIJ10iKSkpCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVf
c2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBjbGsyKQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNl
bGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykgICAKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBkcml2ZXIucmVmcmVzaCgpCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxLjUpCgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGNsayA9IFdlYkRyaXZlcldhaXQo
ZHJpdmVyLCA1KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgo
QnkuWFBBVEgsICIvaHRtbC9ib2R5L2RpdlsyXS9kaXYvZGl2L2RpdlsyXS9k
aXYvZGl2WzFdL2RpdlsxXS9kaXYvZGl2WzFdL2J1dHRvbiIpKSkKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3Jp
cHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGNsaykKCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgY2xrID0gV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnku
WFBBVEgsICIvaHRtbC9ib2R5L2RpdlsyXS9kaXYvZGl2L2RpdlsyXS9kaXYv
ZGl2WzJdL2RpdlsxXS9kaXYvZGl2WzFdL2J1dHRvbiIpKSkKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQo
ImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGNsaykKCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgY2xrMiA9IFdlYkRyaXZlcldhaXQoZHJpdmVy
LCA1KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBB
VEgsICIvL2J1dHRvbltAaWQ9J2RlbGl2ZXJ5QWRkcmVzc19YSUgnXSIpKSkK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0
ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGNsazIpCgogICAg
ICAgICAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBleGNfdHlwZSwgZXhjX29iaiwgZXhjX3RiID0gc3lzLmV4
Y19pbmZvKCk7Zm5hbWUgPSBvcy5wYXRoLnNwbGl0KGV4Y190Yi50Yl9mcmFt
ZS5mX2NvZGUuY29fZmlsZW5hbWUpWzFdCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBlcnJvcl9tZXNzYWdlPSAoc3RyKGV4Y190eXBlKSsnICcrc3Ry
KGV4Y190Yi50Yl9saW5lbm8pKycgSUZSQU1FIE5PIEVOQ09OVFJBRE8nKQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wcmludGVkLmVtaXQo
ZXJyb3JfbWVzc2FnZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNl
bGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykgICAKCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBkcml2ZXIucmVmcmVzaCgpCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRp
bWUuc2xlZXAoMS41KQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNs
ayA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5lbGVtZW50
X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvaHRtbC9ib2R5L2Rpdlsy
XS9kaXYvZGl2L2RpdlsyXS9kaXYvZGl2WzFdL2RpdlsxXS9kaXYvZGl2WzFd
L2J1dHRvbiIpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyaXZl
ci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgY2xr
KQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsayA9IFdlYkRyaXZl
cldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlj
a2FibGUoKEJ5LlhQQVRILCAiL2h0bWwvYm9keS9kaXZbMl0vZGl2L2Rpdi9k
aXZbMl0vZGl2L2RpdlsyXS9kaXZbMV0vZGl2L2RpdlsxXS9idXR0b24iKSkp
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9z
Y3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGNsaykKCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBjbGsyID0gV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5Y
UEFUSCwgIi8vYnV0dG9uW0BpZD0nZGVsaXZlcnlBZGRyZXNzX1hJSCddIikp
KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVf
c2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBjbGsyKQoKICAgICAg
ICAgICAgICAgICAgICBzZWxmLnRvb2xzLmJvcnJhcmNjKCIlc3wlc3wlc3wl
c1xuIiAlIChjY3MsbWVzLGFubyxjY24pKQogICAgICAgICAgICAgICAgICAg
IHNlbGYuY29udCs9MQogICAgICAgICAgICAgICAgICAgIGNvbnRhcis9MQog
ICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBkZXNiYW4oZHJpdmVy
KQogICAgICAgICAgICAgICAgZHJpdmVyLnF1aXQoKQogICAgICAgICAgICAg
ICAgY2xvc2VDaHJvbWUoc2VsZikKICAgICAgICAgICAgICAgIGluc3RhbmNl
X2RyaXZlciA9IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0yKSAgCiAgICAgICAg
ICAgICAgICAKICAgICAgICAgICAgICAgICAgICAjdGltZS5zbGVlcCgzKQog
ICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBleGNfdHlwZSwg
ZXhjX29iaiwgZXhjX3RiID0gc3lzLmV4Y19pbmZvKCk7Zm5hbWUgPSBvcy5w
YXRoLnNwbGl0KGV4Y190Yi50Yl9mcmFtZS5mX2NvZGUuY29fZmlsZW5hbWUp
WzFdCiAgICAgICAgICAgICAgICBlcnJvcl9tZXNzYWdlPSAoc3RyKGV4Y190
eXBlKSsnICcrc3RyKGV4Y190Yi50Yl9saW5lbm8pKQogICAgICAgICAgICAg
ICAgc2VsZi5wcmludGVkLmVtaXQoZXJyb3JfbWVzc2FnZSkKICAgICAgICAg
ICAgICAgIGRlc2Jhbihkcml2ZXIpCiAgICAgICAgICAgICAgICBkcml2ZXIu
cXVpdCgpCiAgICAgICAgICAgICAgICBjbG9zZUNocm9tZShzZWxmKQogICAg
ICAgICAgICAgICAgaW5zdGFuY2VfZHJpdmVyID0gb3BlbkJyb3dzZXIoMCxz
ZWxmLm51bTIpICAKICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdU
RVNURU8gRklOQUxJWkFETycpCgpkZWYgVmlvbGV0X2dhdGUoc2VsZik6Cgog
ICAgIyBBY2Nlc29zIHVzdWFyaW9zIFZJUAogICAgaWYgbm90IHNlbGYudmlw
OgoKICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdVTkVURSBBIE5V
RVNUUk8gU0VSVklDSU8gVklQIScpCiAgICAgICAgCiAgICAgICAgIyBFamVj
dXRhciBhY2Npb25lcyBlc3BlY8OtZmljYXMgcGFyYSB1c3VhcmlvcyBWSVAK
ICAgICAgICB2aXBfaW5zdGFuY2UgPSBvcGVuQnJvd3NlcigzLFRydWUpCiAg
ICAgICAgdmlwX2RyaXZlciA9IFZJUFVzZXJBY3Rpb25zKHZpcF9pbnN0YW5j
ZSkKICAgICAgICB2aXBfZHJpdmVyLm5hdmVnYXIoKQogICAgICAgIHJldHVy
biBOb25lCiAgICAKICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoIklOSUNJ
QU5ETyBHQVRFIFBBWVBBTCIpCiAgICBpbnN0YW5jZV9kcml2ZXIgPSBvcGVu
QnJvd3NlcigwLHNlbGYubnVtMikKCiAgICB3aGlsZSBzZWxmLmNvbnQgPCBz
ZWxmLnRvdGFsX2xpbmVzOgoKICAgICAgICBjb250ZW8gPSAwCgogICAgICAg
IHRyeToKICAgICAgICAgICAgaWYgc2VsZi50b29scy52YWxpZGF0ZV9jcmVk
aXRvcyhzZWxmLnVzZXJuYW1lLHNlbGYucGFzc3dvcmQpID09IFRydWU6CiAg
ICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdDUkVESVRP
UyBJTlNVRklDSUVOVEVTIDovJykKICAgICAgICAgICAgICAgIHJldHVybiBO
b25lCiAgICAgICAgICAgIAogICAgICAgICAgICBlbWFpbHggPSBzZWxmLmxh
c3QxKycnLmpvaW4ocmFuZG9tLmNob2ljZSgnQUJDREVGR0hJSktMTU5PUFFS
U1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHd4eXowMTIzNDU2Nzg5Jykg
Zm9yIF8gaW4gcmFuZ2UoMykpK3NlbGYuZmlyc3QxKycnLmpvaW4ocmFuZG9t
LmNob2ljZSgnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlq
a2xtbm9wcXJzdHd4eXowMTIzNDU2Nzg5JykgZm9yIF8gaW4gcmFuZ2UoMykp
KydAZ21haWwuY29tJwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAg
ICAgICAgCiAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ1RF
U1RFQU5ETywgRVNQRVJBLi4nKQoKICAgICAgICAgICAgZHJpdmVyID0gaW5z
dGFuY2VfZHJpdmVyCgogICAgICAgICAgICBkcml2ZXIuZ2V0KCdodHRwczov
L3d3dy5maXNjaGZ1dHRlcnRyZWZmLmRlL0Z1dHRlcnRhYmxldHRlbi1XZWxz
Y2hpcHMtTC1XZWxzZS1GaXNjaGZ1dHRlci1XZWxzdGFibGV0dGVuLUFsZ2Vu
LUNoaXBzLTUwbWwtNzJTdCcpCgogICAgICAgICAgICB0aW1lLnNsZWVwKHJh
bmRvbS5yYW5kaW50KDEsIDUpKQoKICAgICAgICAgICAgIyByZWNoYXphciBj
b29raWVzIAogICAgICAgICAgICB0ZXJtcyA9IFdlYkRyaXZlcldhaXQoZHJp
dmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5
LlhQQVRILCAiLy9idXR0b25bQGNsYXNzPSdidXR0b25fX213SiBtb2Rlcm4y
X2ZpbGxlZEJ1dHRvbl9fS283JyBhbmQgdGV4dCgpPSdsb2dpc2NoJ10iKSkp
CiAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRz
WzBdLmNsaWNrKCk7IiwgdGVybXMpCgogICAgICAgICAgICBhZGRDYXJ0ID0g
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5lbGVtZW50X3Rv
X2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRvbltAbmFtZT0naW5X
YXJlbmtvcmInXSIpKSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2Ny
aXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBhZGRDYXJ0KQoKICAgICAg
ICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgzLCA1KSkKCiAgICAg
ICAgICAgICMgZGlzY291bnQgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTAp
LnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwg
Ii8vc3ZnW0BpZD0nRWJlbmVfMSddIikpKQogICAgICAgICAgICAjIGRyaXZl
ci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgZGlz
Y291bnQpCgogICAgICAgICAgICBkcml2ZXIuZ2V0KCdodHRwczovL3d3dy5m
aXNjaGZ1dHRlcnRyZWZmLmRlL0Jlc3RlbGx2b3JnYW5nP3drPTEnKQogICAg
ICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDEsIDMpKQoKICAg
ICAgICAgICAgZ2VuZXJvcyA9IFsndycsJ20nXQogICAgICAgICAgICBnZW5l
cm8gPSByYW5kb20uY2hvaWNlKGdlbmVyb3MpCgogICAgICAgICAgICBidG5T
dWJtaXQgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVs
ZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW2Nv
bnRhaW5zKHRleHQoKSwgJ3dlaXRlcicpXSIpKSkKCiAgICAgICAgICAgIGlu
cHV0R2VucmUgPSBTZWxlY3QoZHJpdmVyLmZpbmRfZWxlbWVudChieT1CeS5Y
UEFUSCwgdmFsdWU9Ii8vc2VsZWN0W0BpZD0nc2FsdXRhdGlvbiddIikpLnNl
bGVjdF9ieV92YWx1ZShnZW5lcm8pCiAgICAgICAgICAgIG5hbWUgPSBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxl
bWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdmaXJzdE5h
bWUnXSIpKSkuc2VuZF9rZXlzKHNlbGYuZmlyc3QxKQogICAgICAgICAgICBs
YW5tZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5wcmVz
ZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtA
aWQ9J2xhc3ROYW1lJ10iKSkpLnNlbmRfa2V5cyhzZWxmLmxhc3QxKQogICAg
ICAgICAgICBzdHJlZXQgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50
aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwg
Ii8vaW5wdXRbQGlkPSdzdHJlZXQnXSIpKSkuc2VuZF9rZXlzKCdhbGVtYW5p
YScpCiAgICAgICAgICAgIHN0cmVldE51bWJlciA9IFdlYkRyaXZlcldhaXQo
ZHJpdmVyLCAzKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0
ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J3N0cmVldG51bWJlciddIikp
KS5zZW5kX2tleXMocmFuZG9tLnJhbmRpbnQoMSwgOTk5KSkKICAgICAgICAg
ICAgemlwQ29kZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAzKS51bnRpbChF
Qy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9p
bnB1dFtAaWQ9J3Bvc3Rjb2RlJ10iKSkpLnNlbmRfa2V5cygnMTAxMTUnKQog
ICAgICAgICAgICBjaXR5ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMpLnVu
dGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgs
ICIvL2lucHV0W0BpZD0nY2l0eSddIikpKS5zZW5kX2tleXMoJ0Jlcmxpbicp
CiAgICAgICAgICAgIGVtYWlsID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMp
LnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBB
VEgsICIvL2lucHV0W0BpZD0nZW1haWwnXSIpKSkuc2VuZF9rZXlzKGVtYWls
eCkKCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgY2hl
Y2tib3ggPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVs
ZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vbGFiZWxbQGZv
cj0nQ2hlY2tCb3hfMzInXSIpKSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1
dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBjaGVja2JveCkK
ICAgICAgICAgICAgdGltZS5zbGVlcCgxKQoKICAgICAgICAgICAgZHJpdmVy
LmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5T
dWJtaXQpCiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQo
MSwgMykpCgogICAgICAgICAgICBjcmVkaXRDYXJkID0gV2ViRHJpdmVyV2Fp
dChkcml2ZXIsIDEwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJs
ZSgoQnkuWFBBVEgsICIvL2RpdltAaWQ9J3phX3BwY19jYXJkX25hbWUnXSIp
KSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVu
dHNbMF0uY2xpY2soKTsiLCBjcmVkaXRDYXJkKQoKICAgICAgICAgICAgYnRu
U3VibWl0ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5l
bGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRvbltj
b250YWlucyh0ZXh0KCksICdXZWl0ZXInKV0iKSkpCiAgICAgICAgICAgIGRy
aXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7Iiwg
YnRuU3VibWl0KQoKICAgICAgICAgICAgd2hpbGUgY29udGVvIDw9MTkgYW5k
IHNlbGYuY29udCA8IHNlbGYudG90YWxfbGluZXM6CgogICAgICAgICAgICAg
ICAgY2hlY2sxID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChF
Qy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2xhYmVs
W0Bmb3I9J0NoZWNrQm94XzMyJ10iKSkpCiAgICAgICAgICAgICAgICBkcml2
ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGNo
ZWNrMSkKICAgICAgICAgICAgICAgIGNoZWNrMiA9IFdlYkRyaXZlcldhaXQo
ZHJpdmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUo
KEJ5LlhQQVRILCAiLy9sYWJlbFtAZm9yPSdDaGVja0JveF8zNSddIikpKQog
ICAgICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVu
dHNbMF0uY2xpY2soKTsiLCBjaGVjazIpCgoKICAgICAgICAgICAgICAgIGlm
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZnJhbWVfdG9f
YmVfYXZhaWxhYmxlX2FuZF9zd2l0Y2hfdG9faXQoKEJ5LlhQQVRILCIvL2lm
cmFtZVtjb250YWlucyhAbmFtZSwgJ19fem9pZF9fcGF5cGFsX2J1dHRvbnMn
KV0iKSkpOgoKICAgICAgICAgICAgICAgICAgICBidG5EZWJpdCA9IFdlYkRy
aXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9j
bGlja2FibGUoKEJ5LlhQQVRILCAiLy9kaXZbQHJvbGU9J2xpbmsnIGFuZCBA
ZGF0YS1idXR0b249JycgYW5kIEBkYXRhLWZ1bmRpbmctc291cmNlPSdjYXJk
JyBhbmQgQHRhYmluZGV4PScwJyBhbmQgQGFyaWEtbGFiZWw9J0RlYml0LSBv
ZGVyIEtyZWRpdGthcnRlJ10iKSkpCiAgICAgICAgICAgICAgICAgICAgZHJp
dmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBi
dG5EZWJpdCkKCiAgICAgICAgICAgICAgICAgICAgY2NzLCBtZXMsIGFubywg
Y2NuLCB0eXA9IHN0cihzZWxmLmNjc1tzZWxmLmNvbnRdKS5zdHJpcCgpICwg
c3RyKHNlbGYubWVzW3NlbGYuY29udF0pLnN0cmlwKCksIHN0cihzZWxmLmFu
aW9bc2VsZi5jb250XSkuc3RyaXAoKSwgc3RyKHNlbGYuY3Z2W3NlbGYuY29u
dF0pLnN0cmlwKCksIHNlbGYudG9vbHMuYmludHlwZShzZWxmLmNjc1tzZWxm
LmNvbnRdKQogICAgICAgICAgICAgICAgICAgIGRlYWRtc2cgPSAiREVBRHxT
Tk9XWENIS3xQQVlQQUx8JXN8JXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxh
bm8sY2NuLHR5cCkKICAgICAgICAgICAgICAgICAgICBsaXZlbXNnID0gIkxJ
VkV8U05PV1hDSEt8UEFZUEFMfCVzfCVzfCVzfCVzfCVzXG4iICUgKGNjcyxt
ZXMsYW5vLGNjbix0eXApCiAgICAgICAgICAgICAgICAgICAgZmVjaGEgPSBz
ZWxmLm1lc1tzZWxmLmNvbnRdICsgc2VsZi5hbmlvW3NlbGYuY29udF1bMjo0
XQogICAgICAgICAgICAgICAgICAgIG51bWUgPSBmIjMxe3JhbmRvbS5yYW5k
aW50KDAsIDkpfXsnJy5qb2luKHJhbmRvbS5jaG9pY2VzKCcwMTIzNDU2Nzg5
Jywgaz03KSl9IgoKICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKHJh
bmRvbS5yYW5kaW50KDMsIDUpKQoKICAgICAgICAgICAgICAgICAgICBpZiBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmZyYW1lX3RvX2Jl
X2F2YWlsYWJsZV9hbmRfc3dpdGNoX3RvX2l0KChCeS5YUEFUSCwiLy9pZnJh
bWVbY29udGFpbnMoQG5hbWUsICdfX3pvaWRfX3BheXBhbF9jYXJkX2Zvcm1f
XycpXSIpKSk6CgogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dENDID0g
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5wcmVzZW5jZV9v
Zl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2Ny
ZWRpdC1jYXJkLW51bWJlciddIikpKQogICAgICAgICAgICAgICAgICAgICAg
ICBpbnB1dENDLmNsZWFyKCkKICAgICAgICAgICAgICAgICAgICAgICAgaW5w
dXRDQy5zZW5kX2tleXMoc2VsZi5jY3Nbc2VsZi5jb250XSkKCiAgICAgICAg
ICAgICAgICAgICAgICAgIGlucHV0RmVjaGEgPSBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgMTApLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRl
ZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0nZXhwaXJ5LWRhdGUnXSIpKSkK
ICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRGZWNoYS5jbGVhcigpCiAg
ICAgICAgICAgICAgICAgICAgICAgIGlucHV0RmVjaGEuc2VuZF9rZXlzKGZl
Y2hhKQoKICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRDVlYgPSBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNlbmNlX29mX2Vs
ZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0nY3JlZGl0
LWNhcmQtc2VjdXJpdHknXSIpKSkKICAgICAgICAgICAgICAgICAgICAgICAg
aW5wdXRDVlYuY2xlYXIoKQogICAgICAgICAgICAgICAgICAgICAgICBpbnB1
dENWVi5zZW5kX2tleXMoc2VsZi5jdnZbc2VsZi5jb250XSkKCiAgICAgICAg
ICAgICAgICAgICAgICAgIHRyeToKCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBpbnB1dE5hbWUgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50
aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwg
Ii8vaW5wdXRbY29udGFpbnMoQGlkLCAnYmlsbGluZ0FkZHJlc3MuZ2l2ZW5O
YW1lJyldIikpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRO
YW1lLmNsZWFyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0
TmFtZS5zZW5kX2tleXMoc2VsZi5maXJzdDEpCgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgaW5wdXRMbmFtZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVy
LCAzKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5
LlhQQVRILCAiLy9pbnB1dFtjb250YWlucyhAaWQsICdiaWxsaW5nQWRkcmVz
cy5mYW1pbHlOYW1lJyldIikpKQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgaW5wdXRMbmFtZS5jbGVhcigpCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBpbnB1dExuYW1lLnNlbmRfa2V5cyhzZWxmLmxhc3QxKQoKICAgICAg
ICAgICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgcGFzcwoKICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRQ
aG9uZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5wcmVz
ZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtA
aWQ9J3Bob25lJ10iKSkpLnNlbmRfa2V5cyhudW1lKQoKICAgICAgICAgICAg
ICAgICAgICAgICAgdGltZS5zbGVlcCgxKQoKICAgICAgICAgICAgICAgICAg
ICAgICAgYnRuU3VibWl0ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51
bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIv
L2J1dHRvbltAaWQ9J3N1Ym1pdC1idXR0b24nIGFuZCB0ZXh0KCk9J0pldHp0
IGthdWZlbiddIikpKQogICAgICAgICAgICAgICAgICAgICAgICBkcml2ZXIu
ZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0blN1
Ym1pdCkKCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAocmFu
ZG9tLnJhbmRpbnQoMywgNSkpCgogICAgICAgICAgICAgICAgICAgICAgICB0
cnk6CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnRGVhZCA9IFdl
YkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9l
bGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9kaXZbY29udGFpbnMoQGNs
YXNzLCAnY3NzLW9ya3JvdicpXSIpKSkudGV4dAogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgcHJpbnQobXNnRGVhZCkKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykKICAgICAg
ICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGV4
Y2VwdDoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcml2ZXIuc3dp
dGNoX3RvLmRlZmF1bHRfY29udGVudCgpCgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdlYkRyaXZlcldh
aXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZnJhbWVfdG9fYmVfYXZhaWxhYmxl
X2FuZF9zd2l0Y2hfdG9faXQoKEJ5LlhQQVRILCcvL2lmcmFtZVtAdGl0bGU9
IlBheVBhbCBDaGVja291dCBPdmVybGF5Il0nKSkpCgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgxLCA1
KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLmZyYW1lX3RvX2JlX2F2YWls
YWJsZV9hbmRfc3dpdGNoX3RvX2l0KChCeS5YUEFUSCwnLy9pZnJhbWVbQHRp
dGxlPSJ0aHJlZV9kb21haW5fc2VjdXJlIl0nKSkpCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBwcmludCgnRXJyb3IgZW4gc2VndW5kbyBmcmFt
ZScpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcChy
YW5kb20ucmFuZGludCgxLCA1KSkKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVD
LmZyYW1lX3RvX2JlX2F2YWlsYWJsZV9hbmRfc3dpdGNoX3RvX2l0KChCeS5Y
UEFUSCwnLy9pZnJhbWVbQGlkPSJ0aHJlZWRzSWZyYW1lVjIiXScpKSkKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCdFcnJvciBlbiB0
ZXJjZXIgZnJhbWUnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdlYkRyaXZlcldh
aXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZnJhbWVfdG9fYmVfYXZhaWxhYmxl
X2FuZF9zd2l0Y2hfdG9faXQoKEJ5LlhQQVRILCcvL2lmcmFtZVtzdGFydHMt
d2l0aChAaWQsICJjYXJkaW5hbC1zdGVwVXBJZnJhbWUtIildJykpKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKHJh
bmRvbS5yYW5kaW50KDUsIDEwKSkKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgaWZyYW1lTGl2ZSA9IGRyaXZlci5maW5kX2VsZW1lbnQo
QnkuVEFHX05BTUUsICdib2R5JykKCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICMgUmV2aXNhbmRvIGxpdmUgZW4gdGV4dG8KICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnRnJhbWUgPSBpZnJh
bWVMaXZlLnRleHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVsdGkg
PSBzZWxmLmNjc1tzZWxmLmNvbnRdWy00Ol0KICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgcGFsYWJyYXNfY2xhdmUgPSBbIkNhbGwgbWUg
YXQiLCAiU01TIiwgIkVNQUlMIiwgIkPDs2RpZ28gZGUgVmVyaWZpY2FjacOz
biIsICJFTlZJQVIiLCAiQXV0b3JpemEgdHUgY29tcHJhIGVuIHR1IGJhbmNh
IGRpZ2l0YWwiLCAiQ2xhdmUgT1RQIiwgImluZ3Jlc2EgZWwgY8OzZGlnbyIs
IHVsdGldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVu
Y29udHJhZGEgPSBhbnkocGFsYWJyYSBpbiBtc2dGcmFtZSBmb3IgcGFsYWJy
YSBpbiBwYWxhYnJhc19jbGF2ZSkKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgaWYgZW5jb250cmFkYToKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGlmIHNlbGYudG9vbHMucmVwZXRpcihj
Y3MpID09IFRydWU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc2VsZi50ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxm
LnRleHRfbGl2ZS5lbWl0KGxpdmVtc2cpCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRtc2cp
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjcHJp
bnQoJ0RFQUQgUE9SIDNEJykgIAogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBkcml2ZXIuc3dpdGNoX3RvLmRlZmF1bHRfY29udGVudCgp
CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNl
cHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZXhjX3R5cGUsIGV4Y19vYmosIGV4Y190YiA9IHN5cy5leGNfaW5mbygp
O2ZuYW1lID0gb3MucGF0aC5zcGxpdChleGNfdGIudGJfZnJhbWUuZl9jb2Rl
LmNvX2ZpbGVuYW1lKVsxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBlcnJvcl9tZXNzYWdlPSAoc3RyKGV4Y190eXBlKSsnICcrc3Ry
KGV4Y190Yi50Yl9saW5lbm8pKQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBwcmludCgnRXJyb3I6JywgZXJyb3JfbWVzc2FnZSkKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ0Vycm9y
IGVuIGN1YXJ0byBmcmFtZScsIGUpCgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgZXhjZXB0OgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBwcmludCgnRnJhbWUgbm8gZW5jb250cmFkby4nKQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIG1zZ0RlYWQgPSBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgNSkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVk
KChCeS5YUEFUSCwgIi8vZGl2W2NvbnRhaW5zKEBjbGFzcywgJ2Nzcy1vcmty
b3YnKV0iKSkpLnRleHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBwcmludChtc2dEZWFkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykKCiAgICAgICAgICAg
ICAgICAgICAgc2VsZi50b29scy5ib3JyYXJjYygiJXN8JXN8JXN8JXNcbiIg
JSAoY2NzLG1lcyxhbm8sY2NuKSkKICAgICAgICAgICAgICAgICAgICBzZWxm
LmNvbnQrPTEKICAgICAgICAgICAgICAgICAgICBjb250ZW8gKz0xCiAgICAg
ICAgICAgICAgICAKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAg
ICAgICAgICAgcHJpbnQoJ0Vycm9yIGNvbiBmcmFtZSBkZSBwYWdvLicpCgog
ICAgICAgICAgICAgICAgZHJpdmVyLnN3aXRjaF90by5kZWZhdWx0X2NvbnRl
bnQoKQogICAgICAgICAgICAgICAgZHJpdmVyLnJlZnJlc2goKQogICAgICAg
ICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgxLCA1KSkKCiAg
ICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0VMSU1JTkFORE8g
UkFTVFJFQURPUkVTIScpCiAgICAgICAgICAgIGRlc2Jhbihkcml2ZXIpCiAg
ICAgICAgICAgIGRyaXZlci5xdWl0KCkKICAgICAgICAgICAgY2xvc2VDaHJv
bWUoc2VsZikKICAgICAgICAgICAgaW5zdGFuY2VfZHJpdmVyID0gb3BlbkJy
b3dzZXIoMCxzZWxmLm51bTIpCiAgICAgICAgICAgICAKICAgICAgICBleGNl
cHQ6CiAgICAgICAgICAgICNkZXNiYW4oZHJpdmVyKQogICAgICAgICAgICBk
cml2ZXIucXVpdCgpCiAgICAgICAgICAgIGNsb3NlQ2hyb21lKHNlbGYpCiAg
ICAgICAgICAgICNpbnN0YW5jZV9kcml2ZXIgPSBvcGVuQnJvd3NlcigwLHNl
bGYubnVtMikKICAgICAgICAgICAgZXhjX3R5cGUsIGV4Y19vYmosIGV4Y190
YiA9IHN5cy5leGNfaW5mbygpO2ZuYW1lID0gb3MucGF0aC5zcGxpdChleGNf
dGIudGJfZnJhbWUuZl9jb2RlLmNvX2ZpbGVuYW1lKVsxXQogICAgICAgICAg
ICBlcnJvcl9tZXNzYWdlPSAoc3RyKGV4Y190eXBlKSsnICcrc3RyKGV4Y190
Yi50Yl9saW5lbm8pKQogICAgICAgICAgICBzZWxmLnByaW50ZWQuZW1pdChl
cnJvcl9tZXNzYWdlKQogICAgICAgICAgICAjcHJveHlFcnJvciA9IHByb3h5
RXJyb3IgKyAxCiAgICAgICAgICAgIGluc3RhbmNlX2RyaXZlciA9IG9wZW5C
cm93c2VyKDAsc2VsZi5udW0yKQogICAgICAgICAgICAKICAgICAgICAgICAg
CiAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdURVNURU8gRklOQUxJWkFE
TycpCgpkZWYgRGFya19nYXRlKHNlbGYpOgoKICAgICMgQWNjZXNvcyB1c3Vh
cmlvcyBWSVAKICAgIGlmIG5vdCBzZWxmLnZpcDoKCiAgICAgICAgc2VsZi50
ZXh0X2NoYW5nZWQuZW1pdCgnVU5FVEUgQSBOVUVTVFJPIFNFUlZJQ0lPIFZJ
UCEnKQoKICAgICAgICAjIEVqZWN1dGFyIGFjY2lvbmVzIGVzcGVjw61maWNh
cyBwYXJhIHVzdWFyaW9zIFZJUAogICAgICAgIHZpcF9pbnN0YW5jZSA9IG9w
ZW5Ccm93c2VyKDMsVHJ1ZSkKICAgICAgICB2aXBfZHJpdmVyID0gVklQVXNl
ckFjdGlvbnModmlwX2luc3RhbmNlKQogICAgICAgIHZpcF9kcml2ZXIubmF2
ZWdhcigpCiAgICAgICAgcmV0dXJuIE5vbmUKICAgIAoKICAgIHNlbGYudGV4
dF9jaGFuZ2VkLmVtaXQoIklOSUNJQU5ETyBHQVRFIERBUksiKQogICAgaW5z
dGFuY2VfZHJpdmVyID0gb3BlbkJyb3dzZXIoMCxzZWxmLm51bTIpCgogICAg
aWYgc2VsZi5yZWNoZWNrID09IFRydWU6CiAgICAgICAgbXVzaWNiZWQoc2Vs
ZiwgaW5zdGFuY2VfZHJpdmVyKQogICAgICAgIHJldHVybiBOb25lCgogICAg
d2hpbGUgc2VsZi5jb250IDwgc2VsZi50b3RhbF9saW5lczoKCiAgICAgICAg
dHJ5OgoKICAgICAgICAgICAgY29udGVvID0gMAoKICAgICAgICAgICAgaWYg
c2VsZi50b29scy52YWxpZGF0ZV9jcmVkaXRvcyhzZWxmLnVzZXJuYW1lLHNl
bGYucGFzc3dvcmQpID09IFRydWU6CiAgICAgICAgICAgICAgICBzZWxmLnRl
eHRfY2hhbmdlZC5lbWl0KCdDUkVESVRPUyBJTlNVRklDSUVOVEVTIDovJykK
ICAgICAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgICAgIAogICAg
ICAgICAgICBlbWFpbGYgPSBzZWxmLmxhc3QxKycnLmpvaW4ocmFuZG9tLmNo
b2ljZSgnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xt
bm9wcXJzdHd4eXowMTIzNDU2Nzg5JykgZm9yIF8gaW4gcmFuZ2UoMykpK3Nl
bGYuZmlyc3QxKycnLmpvaW4ocmFuZG9tLmNob2ljZSgnQUJDREVGR0hJSktM
TU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHd4eXowMTIzNDU2
Nzg5JykgZm9yIF8gaW4gcmFuZ2UoMykpKydAZ21haWwuY29tJwogICAgICAg
ICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHNl
bGYudGV4dF9jaGFuZ2VkLmVtaXQoJ1RFU1RFQU5ETywgRVNQRVJBLi4nKQoK
ICAgICAgICAgICAgZHJpdmVyID0gaW5zdGFuY2VfZHJpdmVyCgogICAgICAg
ICAgICBkcml2ZXIuZ2V0KCdodHRwczovL3d3dy5iYXJrYm94LmNvbS9zdWJz
Y3JpYmUvbmFtZScpCgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAg
ICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMucHJlc2VuY2Vf
b2ZfZWxlbWVudF9sb2NhdGVkKChCeS5JRCwgJ2NoYWxsZW5nZS1ydW5uaW5n
JykpKSAgIAogICAgICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1p
dCgnSVAgQkFOISBDQU1CSUEgVFUgSVAnKQogICAgICAgICAgICAgICAgcmV0
dXJuIE5vbmUKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAg
cGFzcwoKICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVu
dGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgs
ICcvLypbQGlkPSJtYWxlLWxhYmVsIl0nKSkpCiAgICAKICAgICAgICAgICAg
dHJ5OgogICAgICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGlu
dCgxLCA1KSkKICAgICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVy
LCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5
LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2RvZy1uYW1lJ10iKSkpLnNlbmRfa2V5
cyhzZWxmLmZpcnN0MSArICdEb2cnKQogICAgICAgICAgICBleGNlcHQ6Cgog
ICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIFdlYkRy
aXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVt
ZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0iY2hhbGxlbmdlLXJ1
bm5pbmciXScpKSkKICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfY2hh
bmdlZC5lbWl0KCdCQU4gREUgSVAhJykKICAgICAgICAgICAgICAgICAgICAK
ICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdF
TElNSU5BTkRPIFJBU1RSRUFET1JFUyEnKQogICAgICAgICAgICAgICAgICAg
IGRlc2Jhbihkcml2ZXIpCiAgICAgICAgICAgICAgICAgICAgZHJpdmVyLnF1
aXQoKQogICAgICAgICAgICAgICAgICAgIGNsb3NlQ2hyb21lKHNlbGYpCiAg
ICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfZHJpdmVyID0gb3BlbkJyb3dz
ZXIoMCxzZWxmLm51bTIpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAg
ICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgV2ViRHJpdmVy
V2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRf
bG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0nZG9nLW5hbWUnXSIp
KSkuc2VuZF9rZXlzKCdKb3NlJykKCiAgICAgICAgICAgICAgICAgICAgCiAg
ICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMSwgMykpCiAg
ICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMu
ZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9sYWJlbFtA
aWQ9J21hbGUtbGFiZWwnXSIpKSkuY2xpY2soKQogICAgICAgICAgICB0aW1l
LnNsZWVwKHJhbmRvbS5yYW5kaW50KDEsIDMpKQogICAgICAgICAgICBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVf
Y2xpY2thYmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9ImZ1bm5lbC1zdGVwLWRv
Zy1uYW1lIl0vZm9ybS9kaXZbM10vZGl2L2J1dHRvbicpKSkuY2xpY2soKQog
ICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDEsIDMpKQog
ICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVD
LmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9
ImZ1bm5lbC1zdGVwLWRvZy1zaXplIl0vZGl2L2Zvcm0vZGl2WzFdL2ZpZWxk
c2V0WzFdL2xhYmVsJykpKS5jbGljaygpCiAgICAgICAgICAgIHRpbWUuc2xl
ZXAocmFuZG9tLnJhbmRpbnQoMSwgMykpCiAgICAgICAgICAgIFdlYkRyaXZl
cldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlj
a2FibGUoKEJ5LlhQQVRILCAnLy8qW0BpZD0iZnVubmVsLXN0ZXAtZG9nLXNp
emUiXS9kaXYvZm9ybS9kaXZbM10vZGl2L2J1dHRvbicpKSkuY2xpY2soKQog
ICAgICAgICAgICBkcml2ZXIuZ2V0KCdodHRwczovL3d3dy5iYXJrYm94LmNv
bS9zdWJzY3JpYmUvdHJlYXRzJykKCiAgICAgICAgICAgIHRpbWUuc2xlZXAo
cmFuZG9tLnJhbmRpbnQoMSwgNSkpCiAgICAgICAgICAgIFdlYkRyaXZlcldh
aXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2Fi
bGUoKEJ5LlhQQVRILCAnLy8qW0BpZD0iZnVubmVsLXN0ZXAtYWxsZXJnaWVz
Il0vZm9ybS9kaXZbMl0vZGl2L2J1dHRvbicpKSkKICAgICAgICAgICAgdGlt
ZS5zbGVlcChyYW5kb20ucmFuZGludCgxLCA1KSkKICAgICAgICAgICAgV2Vi
RHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2Jl
X2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvLypbQGlkPSJmdW5uZWwtc3RlcC1h
bGxlcmdpZXMiXS9mb3JtL2RpdlsyXS9kaXYvYnV0dG9uJykpKS5jbGljaygp
CgogICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgIGJ0bkNv
bnRpbnVlID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5l
bGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvLypbQGlkPSJm
dW5uZWwtc3RlcC1lbWFpbCJdL2Zvcm0vZGl2WzNdL2Rpdi9idXR0b24nKSkp
CgogICAgICAgICAgICBpbnB1dEVtYWlsID0gV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDMpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgo
QnkuWFBBVEgsICcvLypbQGlkPSJhY2NvdW50LWVtYWlsIl0nKSkpCiAgICAg
ICAgICAgIGlucHV0RW1haWwuY2xlYXIoKQogICAgICAgICAgICBpbnB1dEVt
YWlsLnNlbmRfa2V5cyhlbWFpbGYpCgogICAgICAgICAgICB0aW1lLnNsZWVw
KHJhbmRvbS5yYW5kaW50KDEsIDMpKQoKICAgICAgICAgICAgYnRuQ29udGlu
dWUuY2xpY2soKQogICAgICAgICAgICB0aW1lLnNsZWVwKDEpCgogICAgICAg
ICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1l
bnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9ImVkaXRf
c3Vic2NyaXB0aW9uX3BsYW5fc2VsZWN0aW9uIl0vZGl2WzJdL3VsL2xpWzFd
L2xhYmVsJykpKS5jbGljaygpCiAgICAgICAgICAgIFdlYkRyaXZlcldhaXQo
ZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUo
KEJ5LlhQQVRILCAnLy8qW0BpZD0iZWRpdF9zdWJzY3JpcHRpb25fcGxhbl9z
ZWxlY3Rpb24iXS9kaXZbNF0vZGl2L2Rpdi9idXR0b24nKSkpLmNsaWNrKCkg
CgogICAgICAgICAgICBkcml2ZXIuZ2V0KCdodHRwczovL3d3dy5iYXJrYm94
LmNvbS9zdWJzY3JpYmUvc2hpcHBpbmctYWRkcmVzcycpCiAgICAgICAgICAg
IAogICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDEsIDUp
KQoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgbXNnRXJyb3Ig
PSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMucHJlc2VuY2Vf
b2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi9odG1sL2JvZHkvZGl2
L2RpdlsyXS9oMiIpKSkudGV4dAogICAgICAgICAgICAgICAgaWYgJ1J1aC1y
b2ghIFNvbWV0aGluZyB3ZW50IHdyb25nLi4uJyBpbiBtc2dFcnJvcjoKICAg
ICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBleGNlcHQ6
CiAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgICAgICBidG5Db250aW51
ZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVu
dF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAnLy8qW0BpZD0iZnVubmVs
LXN0ZXAtc2hpcHBpbmciXS9kaXZbMV0vZm9ybS9kaXYvZGl2L2J1dHRvbicp
KSkKCiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMSwg
NSkpCgogICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50
aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwg
Ii8vaW5wdXRbQGlkPSdhZGRyZXNzLWZpcnN0LW5hbWUnXSIpKSkuc2VuZF9r
ZXlzKHNlbGYuZmlyc3QxKQogICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgMykudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVk
KChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdhZGRyZXNzLWxhc3QtbmFtZSdd
IikpKS5zZW5kX2tleXMoc2VsZi5sYXN0MSkKICAgICAgICAgICAgV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDMpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1l
bnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0nYWRkcmVzcy1z
dHJlZXQxJ10iKSkpLnNlbmRfa2V5cygnMjgzNyB3aW5kaW5nIGxha2UgcmQn
KQogICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwo
RUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8v
aW5wdXRbQGlkPSdhZGRyZXNzLWNpdHknXSIpKSkuc2VuZF9rZXlzKCdTdW5y
aXNlJykKCiAgICAgICAgICAgIFNlbGVjdChkcml2ZXIuZmluZF9lbGVtZW50
KGJ5PUJ5LlhQQVRILCB2YWx1ZT0iLy9zZWxlY3RbQGlkPSdhZGRyZXNzLXN0
YXRlJ10gICAiKSkuc2VsZWN0X2J5X3Zpc2libGVfdGV4dCgnRkwnKQogICAg
ICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMucHJl
c2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRb
QGlkPSdhZGRyZXNzLXppcCddIikpKS5zZW5kX2tleXMoJzMzMzUxJykKICAg
ICAgICAgICAgdGltZS5zbGVlcCgyKQoKICAgICAgICAgICAgdHJ5OgogICAg
ICAgICAgICAgICAgYnRuQ29udGludWUuY2xpY2soKQogICAgICAgICAgICBl
eGNlcHQ6CiAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
MjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFU
SCwgIi8vc3BhbltAY2xhc3M9J2J1dHRvbi10ZXh0J10iKSkpLmNsaWNrKCkK
CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIFdlYkRyaXZlcldh
aXQoZHJpdmVyLCA1KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJs
ZSgoQnkuWFBBVEgsICcvLypbQGlkPSJ1c3BzLWFkZHJlc3MtbW9kYWwiXS9k
aXYvZGl2WzJdL2Rpdi9kaXYvYnV0dG9uJykpKS5jbGljaygpCiAgICAgICAg
ICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgICAg
IHdoaWxlIGNvbnRlbyA8PTkgYW5kIHNlbGYuY29udCA8IHNlbGYudG90YWxf
bGluZXM6CgogICAgICAgICAgICAgICAgcHJpbnQoY29udGVvKQoKICAgICAg
ICAgICAgICAgIGlmIHNlbGYudG9vbHMudmFsaWRhdGVfY3JlZGl0b3Moc2Vs
Zi51c2VybmFtZSxzZWxmLnBhc3N3b3JkKSA9PSBUcnVlOgogICAgICAgICAg
ICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0NSRURJVE9TIElO
U1VGSUNJRU5URVMgOi8nKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBO
b25lCgogICAgICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgn
SU5URU5UQU5ETyBQQUdPIScpCgogICAgICAgICAgICAgICAgaWZyYW1lMSA9
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxNSkudW50aWwoRUMucHJlc2VuY2Vf
b2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaWZyYW1lW0B0aXRs
ZT0nQmlsbGluZyBpbmZvcm1hdGlvbiddIikpKQogICAgICAgICAgICAgICAg
ZHJpdmVyLnN3aXRjaF90by5mcmFtZShpZnJhbWUxKQoKICAgICAgICAgICAg
ICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxNSkudW50aWwoRUMucHJlc2Vu
Y2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgJy9odG1sL2JvZHkv
Zm9ybS9kaXYvZGl2L2Rpdi9kaXZbMV0nKSkpCiAgICAgICAgICAgICAgICBp
bnB1dENDID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDE1KS51bnRpbChFQy5w
cmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1
dFtAaWQ9J3JlY3VybHktaG9zdGVkLWZpZWxkLWlucHV0J10iKSkpLnNlbmRf
a2V5cyhzZWxmLmNjc1tzZWxmLmNvbnRdKQogICAgICAgICAgICAgICAgdGlt
ZS5zbGVlcCgxKQoKICAgICAgICAgICAgICAgIGZvciBsZXRyYSBpbiBzZWxm
Lm1lc1tzZWxmLmNvbnRdK3NlbGYuYW5pb1tzZWxmLmNvbnRdWzI6NF06CiAg
ICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAg
ICBpbnB1dEZlY2hhID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMpLnVudGls
KEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIv
L2lucHV0W0BwbGFjZWhvbGRlcj0nTU0gLyBZWSddIikpKS5zZW5kX2tleXMo
bGV0cmEpCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAg
ICAgICAgICAgICAgICB0cnk6ICAgIAogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIyBFc3BlcmFyIGhhc3RhIDEwIHNlZ3VuZG9zIHBhcmEgcXVlIGFw
YXJlemNhIGxhIGFsZXJ0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDMpLnVudGlsKEVDLmFsZXJ0X2lzX3By
ZXNlbnQoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0ID0g
ZHJpdmVyLnN3aXRjaF90by5hbGVydAogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgYWxlcnQuYWNjZXB0KCkKICAgICAgICAgICAgICAgICAgICAgICAg
ZXhjZXB0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ0Vy
cm9yIHNhbHRhbmRvIGFsZXJ0YScpCgogICAgICAgICAgICAgICAgZm9yIGxl
dHJhIGluIHNlbGYuY3Z2W3NlbGYuY29udF06CiAgICAgICAgICAgICAgICAg
ICAgaW5wdXRDVlYgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwo
RUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8v
aW5wdXRbQHBsYWNlaG9sZGVyPSdDVlYnXSIpKSkuc2VuZF9rZXlzKGxldHJh
KQogICAgICAgICAgICAgICAgZHJpdmVyLnN3aXRjaF90by5kZWZhdWx0X2Nv
bnRlbnQoKQoKICAgICAgICAgICAgICAgIGNsayA9IFdlYkRyaXZlcldhaXQo
ZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUo
KEJ5LlhQQVRILCAiLy9zcGFuW0BjbGFzcz0nYnV0dG9uLXRleHQnXSIpKSkK
ICAgICAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1l
bnRzWzBdLmNsaWNrKCk7IiwgY2xrKQoKICAgICAgICAgICAgICAgIHRpbWUu
c2xlZXAoNSkKCiAgICAgICAgICAgICAgICBjY3MsIG1lcywgYW5vLCBjY24s
IHR5cD0gc3RyKHNlbGYuY2NzW3NlbGYuY29udF0pLnN0cmlwKCkgLCBzdHIo
c2VsZi5tZXNbc2VsZi5jb250XSkuc3RyaXAoKSwgc3RyKHNlbGYuYW5pb1tz
ZWxmLmNvbnRdKS5zdHJpcCgpLCBzdHIoc2VsZi5jdnZbc2VsZi5jb250XSku
c3RyaXAoKSwgc2VsZi50b29scy5iaW50eXBlKHNlbGYuY2NzW3NlbGYuY29u
dF0pCiAgICAgICAgICAgICAgICBkZWFkbXNnID0gIkRFQUR8U05PV1hDSEt8
REFSS3wlc3wlc3wlc3wlc3wlc1xuIiAlIChjY3MsbWVzLGFubyxjY24sdHlw
KQogICAgICAgICAgICAgICAgbGl2ZW1zZyA9ICJMSVZFfFNOT1dYQ0hLfERB
Ukt8JXN8JXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2NuLHR5cCkK
CiAgICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdBTkFM
SVpBTkRPIFJFU1VMVEFET1MhJykKCiAgICAgICAgICAgICAgICBpZiBzZWxm
LnRvb2xzLnJlcGV0aXIoY2NzKSA9PSBUcnVlOgogICAgICAgICAgICAgICAg
ICAgIHByaW50KCdSRUxJVkUnLCBsaXZlbXNnKQogICAgICAgICAgICAgICAg
ICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykKICAgICAgICAgICAg
ICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgdHJ5OgoKICAgICAgICAg
ICAgICAgICAgICAgICAgZXJyb3JJbmZvID0gV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDIpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgo
QnkuWFBBVEgsICcvLypbQGlkPSJwYXltZW50LWZvcm0iXS9kaXZbNF0vZGl2
L2RpdlsxXS9kaXZbMl0nKSkpLnRleHQKICAgICAgICAgICAgICAgICAgICAg
ICAgY29udGludWUKCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0OgoKICAg
ICAgICAgICAgICAgICAgICAgICAgdHJ5OgoKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIG1zZ0Vycm9yID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIp
LnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBB
VEgsICIvL2RpdltAY2xhc3M9J2Zvcm0taW5wdXQtdGV4dC1lcnJvci1tZXNz
YWdlJ10iKSkpLnRleHQKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBp
ZiAnRXJyb3I6IENyZWRpdCBjYXJkIGluZm8gaXMgcmVxdWlyZWQuJyBpbiBt
c2dFcnJvcjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmlu
dChtc2dFcnJvcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBp
bnB1dENDLmNsZWFyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBpbnB1dEZlY2hhLmNsZWFyKCkKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBpbnB1dENWVi5jbGVhcigpCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnUkVJTlRFTlRB
TkRPIFBBR08hJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0
aW1lLnNsZWVwKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
Y29udGludWUKCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgICAgICAg
ICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBicmFuZCA9IHNlbGYu
Y2NzW3NlbGYuY29udF1bMDoxXQogICAgICAgICAgICAgICAgICAgICAgICBi
aW5DQyA9IHNlbGYuY2NzW3NlbGYuY29udF1bMDo2XQoKICAgICAgICAgICAg
ICAgICAgICAgICAgbXNqID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMwKS51
bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRI
LCAiLy9oM1tAY2xhc3M9J2NlbnRlci10ZXh0J10iKSkpLnRleHQKCiAgICAg
ICAgICAgICAgICAgICAgICAgIGlmICdZb3VyIHRyYW5zYWN0aW9uIHdhcyBk
ZWNsaW5lZC4gUGxlYXNlIHVzZSBhIGRpZmZlcmVudCBjYXJkIG9yIGNvbnRh
Y3QgeW91ciBiYW5rLicgaW4gbXNqOgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc2VsZi50ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgI3ByaW50KGRlYWRtc2csIG1zaikKCiAgICAg
ICAgICAgICAgICAgICAgICAgIGVsaWYgJ1BsZWFzZSBjb250YWN0IHlvdXIg
YmFuayBmb3IgZnVydGhlciBkZXRhaWxzIG9yIHRyeSBhbm90aGVyIGNhcmQu
JyBpbiBtc2o6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRl
eHRfZGVhZC5lbWl0KGRlYWRtc2cpCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAjcHJpbnQoZGVhZG1zZywgbXNqKQoKICAgICAgICAgICAgICAgICAg
ICAgICAgZWxpZiAnWW91ciBhY2NvdW50IG51bWJlciBpcyBub3QgdmFsaWQu
IFBsZWFzZSB1cGRhdGUgeW91ciBhY2NvdW50IG51bWJlci4nIGluIG1zajoK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9kZWFkLmVt
aXQoZGVhZG1zZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICNwcmlu
dChkZWFkbXNnLCBtc2opCgogICAgICAgICAgICAgICAgICAgICAgICBlbGlm
ICdUaGUgc2VjdXJpdHkgY29kZSB5b3UgZW50ZXJlZCBkb2VzIG5vdCBtYXRj
aC4gUGxlYXNlIHVwZGF0ZSB0aGUgQ1ZWIGFuZCB0cnkgYWdhaW4uJyBpbiBt
c2o6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBicmFuZCA9PSAn
NCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0
X2RlYWQuZW1pdChkZWFkbXNnKQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICNwcmludChkZWFkbXNnLCBtc2opCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBlbGlmIGJyYW5kID09ICc1JzoKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBpZiBzZWxmLnRvb2xzLnJlcGV0aXIoY2NzKSA9
PSBUcnVlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBz
ZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRtc2cpCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHByaW50KCdSRUxJVkU6JywgbGl2ZW1zZywg
bXNqKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNlbGYucmVj
aGVjayA9PSBUcnVlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgaWYoWnVvcmEoc2VsZiwgbGl2ZW1zZywgZHJpdmVyKSk6CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGl2
ZW1zZyA9ICJMSVZFfFNOT1dYQ0hLfERBUktDSEFSR0VEfCVzfCVzfCVzfCVz
fCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXApCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2xpdmUu
ZW1pdChsaXZlbXNnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBzZWxmLnRleHRfbGl2ZS5lbWl0KGxpdmVtc2cpCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRf
bGl2ZS5lbWl0KGxpdmVtc2cpCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYu
dGV4dF9kZWFkLmVtaXQoZGVhZG1zZykKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAjcHJpbnQoJ1JFVklTQVInLCBtc2osIHNlbGYuY2NzW3Nl
bGYuY29udF0pCgogICAgICAgICAgICAgICAgICAgICAgICBlbGlmICdZb3Vy
IHRyYW5zYWN0aW9uIHdhcyBkZWNsaW5lZCBkdWUgdG8gaW5zdWZmaWNpZW50
IGZ1bmRzIGluIHlvdXIgYWNjb3VudC4gUGxlYXNlIHVzZSBhIGRpZmZlcmVu
dCBjYXJkIG9yIGNvbnRhY3QgeW91ciBiYW5rLicgaW4gbXNqOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi50b29scy5yZXBldGlyKGNj
cykgPT0gVHJ1ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBz
ZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRtc2cpCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgI3ByaW50KCdSRUxJVkU6JywgbGl2ZW1zZywgbXNq
KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfbGl2ZS5lbWl0KGxp
dmVtc2cpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI3ByaW50
KGxpdmVtc2csIG1zaikgCgogICAgICAgICAgICAgICAgICAgICAgICBlbGlm
ICdQbGVhc2UgdmFsaWRhdGUgaW5mb3JtYXRpb24gYW5kIHRyeSBhZ2Fpbi4g
SWYgdGhlIHByb2JsZW0gcGVyc2lzdHMsIHBsZWFzZSBjb250YWN0IHlvdXIg
YmFuay4nIGluIG1zajoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnRv
b2xzLnJlcGV0aXIoY2NzKSA9PSBUcnVlOgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgaWYgJzU0MjQzMicgaW4gYmluQ0M6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9kZWFk
LmVtaXQoZGVhZG1zZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBp
ZiBzZWxmLnRvb2xzLnJlcGV0aXIoY2NzKSA9PSBUcnVlOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2RlYWQu
ZW1pdChkZWFkbXNnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgcHJpbnQoJ1JFTElWRTonLCBsaXZlbXNnLCBtc2opCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnJlY2hl
Y2sgPT0gVHJ1ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBpZihadW9yYShzZWxmLCBsaXZlbXNnLCBkcml2ZXIpKToK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgbGl2ZW1zZyA9ICJMSVZFfFNOT1dYQ0hLfERBUktDSEFSR0VEfCVzfCVz
fCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXApCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYu
dGV4dF9saXZlLmVtaXQobGl2ZW1zZykKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfbGl2
ZS5lbWl0KGxpdmVtc2cpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzZWxmLnRleHRfbGl2ZS5lbWl0KGxpdmVtc2cp
CgogICAgICAgICAgICAgICAgICAgICAgICBlbGlmICdZb3VyIGNhcmQgaXMg
bm90IGFsbG93ZWQgdG8gY29tcGxldGUgdGhpcyB0cmFuc2FjdGlvbicgaW4g
bXNqOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2Rl
YWQuZW1pdChkZWFkbXNnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
cHJpbnQoJ1JFVklTQVInLCBtc2osIHNlbGYuY2NzW3NlbGYuY29udF0pCgog
ICAgICAgICAgICAgICAgICAgICAgICBlbGlmICdUaGUgdHJhbnNhY3Rpb24g
d2FzIGRlY2xpbmVkLiBQbGVhc2UgY29udGFjdCBzdXBwb3J0LicgaW4gbXNq
OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY29udGVvID09IDAg
b3IgY29udGVvID09IDE5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0JBTiBERSBJUCEnKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgZHJpdmVyLnF1aXQoKQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgY2xvc2VDaHJvbWUoc2VsZikKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2RyaXZlciA9IG9wZW5C
cm93c2VyKDAsc2VsZi5udW0yKQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBl
bGlmIG1zaiA9PSAnJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJy
ZWFrCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgdXJsID0gZHJpdmVyLmN1cnJlbnRfdXJsCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgaWYgJ2h0dHBzOi8vd3d3LmJhcmtib3gu
Y29tLycgPT0gdXJsOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdCQU4gREUgSVAhJykKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfZGVhZC5lbWl0KGRl
YWRtc2cpCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAg
ICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB1cmwgPSBkcml2ZXIuY3VycmVudF91cmwKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHByaW50KHVybCkKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGlmICdodHRwczovL3d3dy5iYXJrYm94LmNvbS8nIGluIHVybDoKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdl
ZC5lbWl0KCdCQU4gREUgSVAhJykKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICAgICAgICAgICAgICAgICBl
eGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRf
ZGVhZC5lbWl0KGRlYWRtc2cpCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIAogICAgICAgICAgICAgICAgc2VsZi50b29scy5ib3JyYXJj
YygiJXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2NuKSkKICAgICAg
ICAgICAgICAgIHNlbGYuY29udCs9MQogICAgICAgICAgICAgICAgY29udGVv
ICs9MQogICAgICAgICAgICAgICAgbXNqID0gJycKCiAgICAgICAgICAgICAg
ICB0cnk6CiAgICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnku
WFBBVEgsICIvL2J1dHRvbltub3JtYWxpemUtc3BhY2UoKT0nUmV0dXJuIHRv
IHBheW1lbnQnXSIpKSkuY2xpY2soKSAgCiAgICAgICAgICAgICAgICBleGNl
cHQ6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAKICAg
ICAgICAgICAgCiAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQo
J0VMSU1JTkFORE8gUkFTVFJFQURPUkVTIScpCiAgICAgICAgICAgIGRyaXZl
ci5xdWl0KCkKICAgICAgICAgICAgY2xvc2VDaHJvbWUoc2VsZikKICAgICAg
ICAgICAgaW5zdGFuY2VfZHJpdmVyID0gb3BlbkJyb3dzZXIoMCxzZWxmLm51
bTIpCiAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ09wdGlt
aXphbmRvIGVsIHVzbyBkZSBsYSBDUFUuIFBvciBmYXZvciwgbGltcGllIGVs
IGNhY2jDqSBtYW51YWxtZW50ZSBwYXJhIHJlZHVjaXIgbGEgY2FyZ2EuJykK
CiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAjZGVzYmFuKGRyaXZlcikK
ICAgICAgICAgICAgZHJpdmVyLnF1aXQoKQogICAgICAgICAgICBjbG9zZUNo
cm9tZShzZWxmKQogICAgICAgICAgICAjaW5zdGFuY2VfZHJpdmVyID0gb3Bl
bkJyb3dzZXIoMCxzZWxmLm51bTIpCiAgICAgICAgICAgIGV4Y190eXBlLCBl
eGNfb2JqLCBleGNfdGIgPSBzeXMuZXhjX2luZm8oKTtmbmFtZSA9IG9zLnBh
dGguc3BsaXQoZXhjX3RiLnRiX2ZyYW1lLmZfY29kZS5jb19maWxlbmFtZSlb
MV0KICAgICAgICAgICAgZXJyb3JfbWVzc2FnZT0gKHN0cihleGNfdHlwZSkr
JyAnK3N0cihleGNfdGIudGJfbGluZW5vKSkKICAgICAgICAgICAgc2VsZi5w
cmludGVkLmVtaXQoZXJyb3JfbWVzc2FnZSkKICAgICAgICAgICAgcHJpbnQo
ZXJyb3JfbWVzc2FnZSkKICAgICAgICAgICAgI3Byb3h5RXJyb3IgPSBwcm94
eUVycm9yICsgMQogICAgICAgICAgICBpbnN0YW5jZV9kcml2ZXIgPSBvcGVu
QnJvd3NlcigwLHNlbGYubnVtMikKICAgICAgICAgICAgCiAgICAgICAgICAg
IAogICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnVEVTVEVPIEZJTkFMSVpB
RE8nKQogICAgCiAgICAKZGVmIFNpbHZlcl9nYXRlKHNlbGYpOgoKICAgIGlu
c3RhbmNlX2RyaXZlciA9IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0yKQoKICAg
IHdoaWxlIHNlbGYuY29udCA8IHNlbGYudG90YWxfbGluZXM6CiAgICAgICAg
ICAgIAogICAgICAgIGVtYWlsZiA9ICcnLmpvaW4ocmFuZG9tLmNob2ljZSgn
QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJz
dHd4eXowMTIzNDU2Nzg5JykgZm9yIF8gaW4gcmFuZ2UoMykpK3NlbGYuZmly
c3QxKycnLmpvaW4ocmFuZG9tLmNob2ljZSgnQUJDREVGR0hJSktMTU5PUFFS
U1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHd4eXowMTIzNDU2Nzg5Jykg
Zm9yIF8gaW4gcmFuZ2UoMykpKydAZ21haWwuY29tJwogICAgICAgIGNvbnRl
byA9IDAKCiAgICAgICAgaWYgc2VsZi50b29scy52YWxpZGF0ZV9jcmVkaXRv
cyhzZWxmLnVzZXJuYW1lLHNlbGYucGFzc3dvcmQpID09IFRydWU6CiAgICAg
ICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0NSRURJVE9TIElOU1VG
SUNJRU5URVMgOi8nKQogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAg
IAogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQu
ZW1pdCgnSU5JQ0lBTkRPIEdBVEUgU0lMVkVSJykKICAgICAgICAgICAgCiAg
ICAgICAgICAgIGRyaXZlciA9IGluc3RhbmNlX2RyaXZlcgoKICAgICAgICAg
ICAgbGlzdGFQcm9kdWN0b3MgPSBbJ2h0dHBzOi8vd3d3LnRoZXNob2Vjb21w
YW55LmNhL2VuL2NhL3Byb2R1Y3QvbGVtb24td29tZW5zLTMtcGFjay1oZWF0
aGVyLXNvZnQtY3Jldy1zb2Nrcy85NTQ2MTAzNzk/YWN0aXZlQ29sb3I9NjYw
JywgJ2h0dHBzOi8vd3d3LnRoZXNob2Vjb21wYW55LmNhL2VuL2NhL3Byb2R1
Y3QvbGVtb24tcGFja2FibGUtc2xpcHBlci85NTQyMDA0MDA/YWN0aXZlQ29s
b3I9MjIyJywgJ2h0dHBzOi8vd3d3LnRoZXNob2Vjb21wYW55LmNhL2VuL2Nh
L3Byb2R1Y3Qvc2tlY2hlcnMtbWVucy0zLXBhY2stY29tZm9ydC1pbmNsdWRl
ZC1xdWFydGVyLWNyZXctYW5rbGUtc29ja3MvOTU3OTAwMTg5P2FjdGl2ZUNv
bG9yPTkyMSddCiAgICAgICAgICAgIHByb2R1Y3RvID0gcmFuZG9tLmNob2lj
ZShsaXN0YVByb2R1Y3RvcykKCiAgICAgICAgICAgIGRyaXZlci5nZXQocHJv
ZHVjdG8pCgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBjbGsg
PSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRf
dG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9ImFkZC10by1i
YWctYnV0dG9uIl0nKSkpCiAgICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0
ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGNsaykKICAgICAg
ICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgbXNnQkFOID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVt
ZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0ibWFpbi1tZXNzYWdl
Il0vaDEvc3BhbicpKSkudGV4dAogICAgICAgICAgICAgICAgaWYgJ3JlYWNo
ZWQnIGluIG1zZ0JBTjoKICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRf
Y2hhbmdlZC5lbWl0KCdCQU4gREUgSVAhJykKICAgICAgICAgICAgICAgICAg
ICAKICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgICAgICAg
ICAgdHJ5OiAjIFJldmlzYW5kbyBCQU4gZGUgSVAKICAgICAgICAgICAgICAg
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5lbGVtZW50X3Rv
X2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvLypbQGlkPSJhZGQtdG8tYmFn
LWJ1dHRvbiJdJykpKQogICAgICAgICAgICAgICAgbXNnQkFOID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVt
ZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0ic2VydmVyLWVycm9y
Il0nKSkpLnRleHQKICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2Vk
LmVtaXQoJ0JBTiBERSBJUCEnKQogICAgICAgICAgICAgICAgCiAgICAgICAg
ICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICAgICBleGNlcHQ6CiAgICAg
ICAgICAgICAgICBwYXNzCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAg
ICAgICN0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgIHNlbGYudGV4dF9jaGFu
Z2VkLmVtaXQoJ1RFU1RFQU5ETywgRVNQRVJBLi4nKQogICAgICAgICAgICBk
cml2ZXIuZ2V0KCJodHRwczovL3d3dy50aGVzaG9lY29tcGFueS5jYS9lbi9j
YS9zaG9wcGluZy1iYWciKQoKICAgICAgICAgICAgcGF5Q2FyZCA9IFdlYkRy
aXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9j
bGlja2FibGUoKEJ5LlhQQVRILCAnLy8qW0BpZD0ibWFpbkNvbnRhaW5lciJd
L2FwcC1jYXJ0LWNoZWNrb3V0LXJvdXRpbmcvZGl2L2FwcC1zaG9wcGluZy1i
YWcvZGl2L2Rpdi9kaXYvZGl2WzJdL2Rpdi9zZWN0aW9uL2FwcC1vcmRlci1z
dW1tYXJ5L2Rpdi9kaXYvZGl2WzVdL2FwcC1wYXktd2l0aC1jYXJkLWJ1dHRv
bi9idXR0b24nKSkpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAg
ICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xp
Y2soKTsiLCBwYXlDYXJkKQoKICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChk
cml2ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0
ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0iZW1haWwiXScpKSkuc2VuZF9rZXlz
KGVtYWlsZikKICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAg
ICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRf
dG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9Im1haW5Db250
YWluZXIiXS9hcHAtY2hlY2tvdXQvZGl2WzJdL2RpdlsxXS9mb3JtL2FwcC1j
aGVja291dC1lbWFpbC9mb3JtL2J1dHRvbicpKSkuY2xpY2soKQogICAgICAg
ICAgICBidG5NYW51YWwgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMzApLnVu
dGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8v
KltAaWQ9Im1haW5Db250YWluZXIiXS9hcHAtY2hlY2tvdXQvZGl2WzJdL2Rp
dlsxXS9mb3JtL2FwcC1jaGVja291dC1zaGlwcGluZy9mb3JtL2RpdlsyXS9h
cHAtYWRkcmVzcy9kaXYvZGl2WzRdL2J1dHRvbicpKSkKICAgICAgICAgICAg
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5jZV9v
Zl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0iZmlyc3RO
YW1lIl0nKSkpLnNlbmRfa2V5cyhzZWxmLmZpcnN0MSkKICAgICAgICAgICAg
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5jZV9v
Zl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0ibGFzdE5h
bWUiXScpKSkuc2VuZF9rZXlzKHNlbGYubGFzdDEpCiAgICAgICAgICAgIFdl
YkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMucHJlc2VuY2Vfb2Zf
ZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgJy8vKltAaWQ9Im1haW5Db250
YWluZXIiXS9hcHAtY2hlY2tvdXQvZGl2WzJdL2RpdlsxXS9mb3JtL2FwcC1j
aGVja291dC1zaGlwcGluZy9mb3JtL2RpdlsyXS9hcHAtYWRkcmVzcy9kaXYv
ZGl2WzNdL2FwcC1pbnB1dC1hdXRvY29tcGxldGUvZGl2L2FwcC1kc3ctaW5w
dXQvZGl2L2lucHV0JykpKS5zZW5kX2tleXMoJzc1NSBEdW5kYXMgVycpCiAg
ICAgICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICAgICAgYWN0aW9ucyA9
IEFjdGlvbkNoYWlucyhkcml2ZXIpCiAgICAgICAgICAgIGFjdGlvbnMuc2Vu
ZF9rZXlzKEtleXMuRE9XTikucGVyZm9ybSgpCiAgICAgICAgICAgIGFjdGlv
bnMuc2VuZF9rZXlzKEtleXMuRU5URVIpLnBlcmZvcm0oKQogICAgICAgICAg
ICBhY3Rpb25zLnNlbmRfa2V5cyhLZXlzLlRBQikucGVyZm9ybSgpCiAgICAg
ICAgICAgIGFjdGlvbnMuc2VuZF9rZXlzKEtleXMuRU5URVIpLnBlcmZvcm0o
KQogICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGls
KEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICcv
LypbQGlkPSJwaG9uZSJdJykpKS5zZW5kX2tleXMoJyg5MDUpIDg0OC0zOTMz
JykKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgc2F2ZUFkZHIg
PSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNTApLnVudGlsKEVDLmVsZW1lbnRf
dG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9Im1haW5Db250
YWluZXIiXS9hcHAtY2hlY2tvdXQvZGl2WzJdL2RpdlsxXS9mb3JtL2FwcC1j
aGVja291dC1zaGlwcGluZy9mb3JtL2J1dHRvbicpKSkKICAgICAgICAgICAg
dGltZS5zbGVlcCgxKQogICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3Jp
cHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIHNhdmVBZGRyKQoKICAgICAg
ICAgICAgdHJ5OgogICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5Y
UEFUSCwgJy8vKltAaWQ9InVzZS1lbnRlcmVkLWFkZHJlc3MiXScpKSkuY2xp
Y2soKQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBwYXNz
CgogICAgICAgICAgICBidG5SZXYgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
MjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFU
SCwgJy8vKltAaWQ9ImNvbnRpbnVlLWJ1dHRvbiJdJykpKQogICAgICAgICAg
ICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNlbmNl
X29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICcvLypbQGlkPSJwYXNz
d29yZCJdJykpKS5zZW5kX2tleXMoJ1BvbGthMTIzLicpCgogICAgICAgICAg
ICAjIGNoYW5nZSBwYXltZW50IC8vKltAaWQ9ImNoYW5nZS1wYXltZW50LW1l
dGhvZCJdCiAgICAgICAgICAgIHdoaWxlIGNvbnRlbyA8PTEwIGFuZCBzZWxm
LmNvbnQgPCBzZWxmLnRvdGFsX2xpbmVzOgoKICAgICAgICAgICAgICAgIGlm
IHNlbGYudG9vbHMudmFsaWRhdGVfY3JlZGl0b3Moc2VsZi51c2VybmFtZSxz
ZWxmLnBhc3N3b3JkKSA9PSBUcnVlOgogICAgICAgICAgICAgICAgICAgIHNl
bGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0NSRURJVE9TIElOU1VGSUNJRU5URVMg
Oi8nKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBOb25lCgogICAgICAg
ICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnVEVTVEVBTkRPLi4n
KQogICAgICAgICAgICAgICAgaWZyYW1lcyA9IGRyaXZlci5maW5kX2VsZW1l
bnRzKEJ5LlRBR19OQU1FLCAnaWZyYW1lJykKICAgICAgICAgICAgICAgICAg
ICAgICAgCiAgICAgICAgICAgICAgICBmb3IgaWZyYW1lIGluIGlmcmFtZXM6
CiAgICAgICAgICAgICAgICAgICAgc3JjID0gc3JjID0gaWZyYW1lLmdldF9h
dHRyaWJ1dGUoJ3NyYycpCiAgICAgICAgICAgICAgICAgICAgaWYgJ2N5YmVy
c291cmNlJyBpbiBzcmM6CiAgICAgICAgICAgICAgICAgICAgICAgIGRyaXZl
ci5zd2l0Y2hfdG8uZnJhbWUoaWZyYW1lKQogICAgICAgICAgICAgICAgICAg
ICAgICBpbnB1dENDID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRp
bChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAn
L2h0bWwvYm9keS9mb3JtL2lucHV0WzJdJykpKQogICAgICAgICAgICAgICAg
ICAgICAgICAjcHJpbnQoJ2lucHV0IGVuY29udHJhZG8nKQogICAgICAgICAg
ICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgCgogICAgICAg
ICAgICAgICAgaW5wdXRDQy5jbGVhcigpCiAgICAgICAgICAgICAgICBpbnB1
dENDLnNlbmRfa2V5cyhzZWxmLmNjc1tzZWxmLmNvbnRdKSAgICAgICAgICAg
ICAgICAgICAgIAoKICAgICAgICAgICAgICAgIGRyaXZlci5zd2l0Y2hfdG8u
ZGVmYXVsdF9jb250ZW50KCkKCiAgICAgICAgICAgICAgICBtZXMgPSBpbnQo
c2VsZi5tZXNbc2VsZi5jb250XSkKCiAgICAgICAgICAgICAgICB5ZWFyID0g
aW50KHNlbGYuYW5pb1tzZWxmLmNvbnRdKQogICAgICAgICAgICAgICAgeWVh
ciA9IHllYXIgLSAyMDIzCgogICAgICAgICAgICAgICAgYWN0aW9ucyA9IEFj
dGlvbkNoYWlucyhkcml2ZXIpCiAgICAgICAgICAgICAgICBhY3Rpb25zLnNl
bmRfa2V5cyhLZXlzLlRBQikucGVyZm9ybSgpCiAgICAgICAgICAgICAgICB0
aW1lLnNsZWVwKDEpCgogICAgICAgICAgICAgICAgU2VsZWN0KGRyaXZlci5m
aW5kX2VsZW1lbnQoQnkuSUQsICdtb250aCcpKS5zZWxlY3RfYnlfdmlzaWJs
ZV90ZXh0KCdNb250aCcpCiAgICAgICAgICAgICAgICBmb3IgXyBpbiByYW5n
ZShtZXMpOgogICAgICAgICAgICAgICAgICAgIGFjdGlvbnMuc2VuZF9rZXlz
KEtleXMuRE9XTikucGVyZm9ybSgpCiAgICAgICAgICAgICAgICBhY3Rpb25z
LnNlbmRfa2V5cyhLZXlzLlRBQikucGVyZm9ybSgpCgogICAgICAgICAgICAg
ICAgU2VsZWN0KGRyaXZlci5maW5kX2VsZW1lbnQoQnkuSUQsICd5ZWFyJykp
LnNlbGVjdF9ieV92aXNpYmxlX3RleHQoJ1llYXInKQogICAgICAgICAgICAg
ICAgZm9yIF8gaW4gcmFuZ2UoeWVhcik6CiAgICAgICAgICAgICAgICAgICAg
YWN0aW9ucy5zZW5kX2tleXMoS2V5cy5ET1dOKS5wZXJmb3JtKCkKICAgICAg
ICAgICAgICAgIGFjdGlvbnMuc2VuZF9rZXlzKEtleXMuVEFCKS5wZXJmb3Jt
KCkKCgogICAgICAgICAgICAgICAgaW5wdXRDVlYgPSBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9j
YXRlZCgoQnkuWFBBVEgsICcvLypbQGlkPSJzZWN1cml0eS1jb2RlIl0nKSkp
CiAgICAgICAgICAgICAgICBpbnB1dENWVi5jbGVhcigpCiAgICAgICAgICAg
ICAgICBpbnB1dENWVi5zZW5kX2tleXMoJzAwMCcpCgogICAgICAgICAgICAg
ICAgdGltZS5zbGVlcCgzLjUpCgogICAgICAgICAgICAgICAgdHJ5OgogICAg
ICAgICAgICAgICAgICAgIGJ0blJldiA9IFdlYkRyaXZlcldhaXQoZHJpdmVy
LCA1KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBB
VEgsICcvaHRtbC9ib2R5L2FwcC1tb2RhbC9kaXYvZGl2WzJdL2RpdlsyXS9h
cHAtY3JlZGl0LWNhcmQtbW9kYWwvZm9ybS9kaXYvYnV0dG9uJykpKQogICAg
ICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIGJ0blJl
diA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5lbGVtZW50
X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvaHRtbC9ib2R5L2Rpdlsx
XS9hcHAtcm9vdC9kaXYvZGl2L2FwcC1jaGVja291dC9kaXZbMl0vZGl2WzFd
L2Zvcm0vZGl2L2J1dHRvbicpKSkKCiAgICAgICAgICAgICAgICB0aW1lLnNs
ZWVwKDEpCiAgICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQo
ImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0blJldikKCiAgICAgICAgICAg
ICAgICBpZiBjb250ZW8gPT0gMDoKICAgICAgICAgICAgICAgICAgICBjaGti
b3ggPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1l
bnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy9odG1sL2JvZHkvZGl2
WzFdL2FwcC1yb290L2Rpdi9kaXYvYXBwLWNoZWNrb3V0L2RpdlsyXS9kaXZb
MV0vZm9ybS9hcHAtY2hlY2tvdXQtcmV2aWV3L2Zvcm0vZGl2WzNdL2FwcC1p
bnB1dC1jaGVja2JveC9kaXYvbGFiZWwnKSkpCiAgICAgICAgICAgICAgICAg
ICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICAgICAgICAgIGRyaXZlci5l
eGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgY2hrYm94
KQoKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9f
YmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9Im1haW5Db250YWlu
ZXIiXS9hcHAtY2hlY2tvdXQvZGl2WzJdL2RpdlsxXS9mb3JtL2FwcC1jaGVj
a291dC1yZXZpZXcvZm9ybS9kaXZbM10vYnV0dG9uJykpKS5jbGljaygpCiAg
ICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZXhjZXB0
OiAjIERldGVjdGFuZG8gZnJhbWUgYXBwCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAKICAgICAgICAgICAgICAgICAgICB0cnk6CgogICAgICAgICAg
ICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMywgMSkudW50
aWwoRUMuZnJhbWVfdG9fYmVfYXZhaWxhYmxlX2FuZF9zd2l0Y2hfdG9faXQo
KEJ5LlhQQVRILCcvLypbQGlkPSJrYW1weWxlSW52aXRlIl0nKSkpCiAgICAg
ICAgICAgICAgICAgICAgICAgIGNsayA9IFdlYkRyaXZlcldhaXQoZHJpdmVy
LCAzKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBB
VEgsICcvLypbQGlkPSJrcGxEZWZlckJ1dHRvbiJdJykpKQogICAgICAgICAg
ICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50
c1swXS5jbGljaygpOyIsIGNsaykKICAgICAgICAgICAgICAgICAgICAgICAg
ZHJpdmVyLnN3aXRjaF90by5kZWZhdWx0X2NvbnRlbnQoKQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0
OgogICAgICAgICAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZl
ciwgMTUpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5Y
UEFUSCwgJy8vKltAaWQ9Im1haW5Db250YWluZXIiXS9hcHAtY2hlY2tvdXQv
ZGl2WzJdL2RpdlsxXS9mb3JtL2FwcC1jaGVja291dC1yZXZpZXcvZm9ybS9k
aXZbM10vYnV0dG9uJykpKS5jbGljaygpCgogICAgICAgICAgICAgICAgIyBS
RVZJU0FORE8KICAgICAgICAgICAgICAgIGNjcywgbWVzLCBhbm8sIGNjbiwg
dHlwPSBzdHIoc2VsZi5jY3Nbc2VsZi5jb250XSkuc3RyaXAoKSAsIHN0cihz
ZWxmLm1lc1tzZWxmLmNvbnRdKS5zdHJpcCgpLCBzdHIoc2VsZi5hbmlvW3Nl
bGYuY29udF0pLnN0cmlwKCksIHN0cihzZWxmLmN2dltzZWxmLmNvbnRdKS5z
dHJpcCgpLCBzZWxmLnRvb2xzLmJpbnR5cGUoc2VsZi5jY3Nbc2VsZi5jb250
XSkKICAgICAgICAgICAgICAgIGRlYWRtc2cgPSAiREVBRHxTTk9XWENIS3xT
SUxWRVJ8JXN8JXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2NuLHR5
cCkKICAgICAgICAgICAgICAgIGxpdmVtc2cgPSAiTElWRXxTTk9XWENIS3xT
SUxWRVJ8JXN8JXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2NuLHR5
cCkKCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAg
dHJ5OgogICAgICAgICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVy
LCAxNSkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQ
QVRILCAnLy8qW0BpZD0ibWFpbkNvbnRhaW5lciJdL2FwcC1jaGVja291dC9k
aXZbMl0vZGl2WzFdL2Zvcm0vYXBwLWNoZWNrb3V0LXJldmlldy9mb3JtL2Rp
dlszXS9idXR0b24nKSkpCiAgICAgICAgICAgICAgICAgICAgI2NoZWNrX2Rl
YWQoc2VsZi5jb250LHNlbGYudXNlcm5hbWUsc2VsZi5wYXNzd29yZCkKICAg
ICAgICAgICAgICAgICAgICBzZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRtc2cp
CiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAg
IyBUSEFOSyBZT1UgLy8qW0BpZD0ibWFpbkNvbnRhaW5lciJdL2FwcC1jYXJ0
LWNoZWNrb3V0LXJvdXRpbmcvZGl2L2FwcC1jb25maXJtYXRpb24vZGl2L2Rp
dlsxXS9oM1sxXQogICAgICAgICAgICAgICAgICAgIHVybCA9IGRyaXZlci5j
dXJyZW50X3VybAogICAgICAgICAgICAgICAgICAgICNwcmludCh1cmwpCiAg
ICAgICAgICAgICAgICAgICAgaWYgJ2NvbmZpcm1hdGlvbicgaW4gdXJsOgog
ICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnRvb2xzLnJlcGV0aXIo
Y2NzKSA9PSBUcnVlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgI3By
aW50KCdSRSBMSVZFOicsIGxpdmVtc2cpCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAjY2hlY2tfZGVhZChzZWxmLmNvbnQsc2VsZi51c2VybmFtZSxz
ZWxmLnBhc3N3b3JkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vs
Zi50ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAgICAgICAgICAgICAgICAg
ICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50
ZXh0X2xpdmUuZW1pdChsaXZlbXNnKQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgYnJlYWsKCiAgICAgICAgICAgICAgICBzZWxmLnRvb2xzLmJvcnJh
cmNjKCIlc3wlc3wlc3wlc1xuIiAlIChjY3MsbWVzLGFubyxjY24pKQogICAg
ICAgICAgICAgICAgc2VsZi5jb250Kz0xCiAgICAgICAgICAgICAgICBjb250
ZW8gKz0xCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAg
ICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICAgICAgYnRuQ2hhbmdlID0g
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5lbGVtZW50X3Rv
X2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvaHRtbC9ib2R5L2RpdlsxXS9h
cHAtcm9vdC9kaXYvZGl2L2FwcC1jaGVja291dC9kaXZbMl0vZGl2WzFdL2Zv
cm0vYXBwLWNoZWNrb3V0LXJldmlldy9mb3JtL2FwcC1yZXZpZXctcGF5bWVu
dC9kaXYvZGl2WzJdL2Rpdi9kaXZbMV0vYnV0dG9uJykpKQogICAgICAgICAg
ICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xp
Y2soKTsiLCBidG5DaGFuZ2UpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVw
KDIpCgogICAgICAgICAgICAgICAgIyBjaGFuZ2UgcGF5bWVudCAvLypbQGlk
PSJjaGFuZ2UtcGF5bWVudC1tZXRob2QiXQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgCiAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVt
aXQoJ0VMSU1JTkFORE8gUkFTVFJFQURPUkVTIScpCiAgICAgICAgICAgICNk
ZXNiYW4oZHJpdmVyKQogICAgICAgICAgICBkcml2ZXIucXVpdCgpCiAgICAg
ICAgICAgIGNsb3NlQ2hyb21lKHNlbGYpCiAgICAgICAgICAgIGluc3RhbmNl
X2RyaXZlciA9IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0yKSAKICAgICAgICAg
ICAgCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAjZGVzYmFuKGRyaXZl
cikKICAgICAgICAgICAgZHJpdmVyLnF1aXQoKQogICAgICAgICAgICBjbG9z
ZUNocm9tZShzZWxmKQogICAgICAgICAgICBpbnN0YW5jZV9kcml2ZXIgPSBv
cGVuQnJvd3NlcigwLHNlbGYubnVtMikgCiAgICAgICAgICAgIGV4Y190eXBl
LCBleGNfb2JqLCBleGNfdGIgPSBzeXMuZXhjX2luZm8oKTtmbmFtZSA9IG9z
LnBhdGguc3BsaXQoZXhjX3RiLnRiX2ZyYW1lLmZfY29kZS5jb19maWxlbmFt
ZSlbMV0KICAgICAgICAgICAgZXJyb3JfbWVzc2FnZT0gKHN0cihleGNfdHlw
ZSkrJyAnK3N0cihleGNfdGIudGJfbGluZW5vKSkKICAgICAgICAgICAgc2Vs
Zi5wcmludGVkLmVtaXQoZXJyb3JfbWVzc2FnZSkKICAgIAogICAgc2VsZi50
ZXh0X2NoYW5nZWQuZW1pdCgnVEVTVEVPIEZJTkFMSVpBRE8nKQogICAgCmRl
ZiBPcmFuZ2VfZ2F0ZShzZWxmKToKCiAgICBpbnN0YW5jZV9kcml2ZXIgPSBv
cGVuQnJvd3NlcigwLHNlbGYubnVtMikKICAgIHNlbGYudGV4dF9jaGFuZ2Vk
LmVtaXQoIklOSUNJQU5ETyBHQVRFIE9SQU5HRSIpCiAgICBuYW1lID0gc2Vs
Zi5maXJzdDEKICAgIGxuYW1lID0gc2VsZi5sYXN0MQoKICAgIHdoaWxlIHNl
bGYuY29udCA8IHNlbGYudG90YWxfbGluZXM6CgogICAgICAgIGlmIHNlbGYu
dG9vbHMudmFsaWRhdGVfY3JlZGl0b3Moc2VsZi51c2VybmFtZSxzZWxmLnBh
c3N3b3JkKSA9PSBUcnVlOgogICAgICAgICAgICAgICAgc2VsZi50ZXh0X2No
YW5nZWQuZW1pdCgnQ1JFRElUT1MgSU5TVUZJQ0lFTlRFUyA6LycpCiAgICAg
ICAgICAgICAgICByZXR1cm4gTm9uZSAgCiAgICAgICAgCiAgICAgICAgdXNl
cm5hbWUgPSAnJy5qb2luKHJhbmRvbS5jaG9pY2UoJ0FCQ0RFRkdISUpLTE1O
T1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R3eHl6MDEyMzQ1Njc4
OScpIGZvciBfIGluIHJhbmdlKDMpKStzZWxmLmZpcnN0MSsnJy5qb2luKHJh
bmRvbS5jaG9pY2UoJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVm
Z2hpamtsbW5vcHFyc3R3eHl6MDEyMzQ1Njc4OScpIGZvciBfIGluIHJhbmdl
KDMpKStzZWxmLmxhc3QxCiAgICAgICAgZW1haWxmID0gJycuam9pbihyYW5k
b20uY2hvaWNlKCdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdo
aWprbG1ub3BxcnN0d3h5ejAxMjM0NTY3ODknKSBmb3IgXyBpbiByYW5nZSgz
KSkrc2VsZi5maXJzdDErJycuam9pbihyYW5kb20uY2hvaWNlKCdBQkNERUZH
SElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0d3h5ejAx
MjM0NTY3ODknKSBmb3IgXyBpbiByYW5nZSgzKSkrc2VsZi5sYXN0MSsnQGdt
YWlsLmNvbScKICAgICAgICBjb250ZW8gPSAwCgogICAgICAgIHRyeToKICAg
ICAgICAgICAgICAgCiAgICAgICAgICAgIGRyaXZlciA9IGluc3RhbmNlX2Ry
aXZlcgogICAgICAgICAgICBkcml2ZXIuZ2V0KCJodHRwczovL3d3dy54dmlk
ZW9zLnJlZC8iKQoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAg
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRfdG9f
YmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW2NvbnRhaW5zKEBj
bGFzcywgJ2Rpc2NsYWltZXItZW50ZXItYnRuJyldIikpKS5jbGljaygpCiAg
ICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgICAgICBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMuZWxlbWVudF90b19i
ZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9hW2NvbnRhaW5zKEBjbGFzcywg
J21haW4tc2xpZGVyX19pdGVtLWJ0bicpXSIpKSkuY2xpY2soKQoKICAgICAg
ICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcHJpbnQoJ0F2aXNvIG5v
IGVuY29udHJhZG8uJykKCgogICAgICAgICAgICAjIENvbmZpZ3VyYW5kbyBj
dWVudGEKICAgICAgICAgICAgI1dlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51
bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcv
LypbQGlkPSJkaXNjbGFpbWVyLWNvbnRlbnQiXS9kaXYvYnV0dG9uWzFdJykp
KS5jbGljaygpCiAgICAgICAgICAgICNXZWJEcml2ZXJXYWl0KGRyaXZlciwg
MTApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFU
SCwgJy8vKltAaWQ9ImZhZGVJblVwMSJdL2EnKSkpLmNsaWNrKCkKICAgICAg
ICAgICAgI2J0bkNyZWF0ZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51
bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcv
LypbQGlkPSJzaWdudXAtZm9ybS1zdWJtaXQiXScpKSkKICAgICAgICAgICAg
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5jZV9v
Zl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0ic2lnbnVw
LWZvcm1fbG9naW4iXScpKSkuc2VuZF9rZXlzKGVtYWlsZikKICAgICAgICAg
ICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5j
ZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0ic2ln
bnVwLWZvcm1fcHJvZmlsZV9uYW1lIl0nKSkpLnNlbmRfa2V5cyh1c2VybmFt
ZSkKICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRp
bChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAn
Ly8qW0BpZD0ic2lnbnVwLWZvcm1fcGFzc3dvcmQiXScpKSkuc2VuZF9rZXlz
KCdQb2xrYTEyMy4nKQogICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZl
ciwgNSkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQ
QVRILCAiLy9pbnB1dFtAaWQ9J3NpZ251cC1mb3JtX3Rvc19wcCddIikpKS5j
bGljaygpCgoKICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAg
ICAgICAgCiAgICAgICAgICAgIGNsayA9IFdlYkRyaXZlcldhaXQoZHJpdmVy
LCA1KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBB
VEgsICIvL2J1dHRvbltAaWQ9J3NpZ251cC1mb3JtLXN1Ym1pdCddIikpKQog
ICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1sw
XS5jbGljaygpOyIsIGNsaykKICAgICAgICAgICAgdGltZS5zbGVlcCgxKQog
ICAgICAgICAgICAjYnRuQ3JlYXRlLmNsaWNrKCkKCiAgICAgICAgICAgIHRy
eTogIyBSZXZpc2FuZG8gZXJyb3IgdXNlcm5hbWUKICAgICAgICAgICAgICAg
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90
b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAnLy8qW0BpZD0icHJlbWl1bS1m
b3JtIl0vZGl2WzJdL2Rpdi9idXR0b24nKSkpLmNsaWNrKCkKICAgICAgICAg
ICAgZXhjZXB0OgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAg
ICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0NBTUJJQU5ETyBVU0VS
IScpCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAg
ICAgICAgICAgICAgICAgbXNnVXNlciA9IFdlYkRyaXZlcldhaXQoZHJpdmVy
LCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5
LlhQQVRILCAnLy8qW0BpZD0ic2lnbnVwLWZvcm0iXS9kaXZbNl0vZGl2L2Rp
di9kaXYvcC9hL3NwYW4nKSkpLnRleHQKICAgICAgICAgICAgICAgICAgICAg
ICAgcHJpbnQoJ0VSUk9SIFVTRVInLCBtc2dVc2VyKQogICAgICAgICAgICAg
ICAgICAgICAgICBpZiAncHJvZmlsZSBuYW1lJyBpbiBtc2dVc2VyIG9yICdu
b21icmUgZGUgcGVyZmlsJyBpbiBtc2dVc2VyOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgdXNlcm5hbWUgPSAnJy5qb2luKHJhbmRvbS5jaG9pY2Uo
J0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFy
c3R3eHl6JykgZm9yIF8gaW4gcmFuZ2UoMykpK3NlbGYuZmlyc3QxKycnLmpv
aW4ocmFuZG9tLmNob2ljZSgnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVph
YmNkZWZnaGlqa2xtbm9wcXJzdHd4eXowMTIzNDU2Nzg5JykgZm9yIF8gaW4g
cmFuZ2UoMykpK3NlbGYubGFzdDEKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGJ0bkNyZWF0ZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRp
bChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvLypb
QGlkPSJzaWdudXAtZm9ybS1zdWJtaXQiXScpKSkKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChF
Qy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8q
W0BpZD0ic2lnbnVwLWZvcm0iXS9kaXZbNl0vZGl2L2Rpdi9kaXYvcC9hL3Nw
YW4nKSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFVzZXIg
PSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMucHJlc2VuY2Vf
b2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgJy8vKltAaWQ9InNpZ251
cC1mb3JtX3Byb2ZpbGVfbmFtZSJdJykpKQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgaW5wdXRVc2VyLmNsZWFyKCkKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGlucHV0VXNlci5zZW5kX2tleXModXNlcm5hbWUpCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBidG5DcmVhdGUuY2xpY2soKQogICAgICAg
ICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnRVJST1IgQ1JFQU5ETyBD
VUVOVEEsIFJFSU5JQ0lBTkRPIENPT0tJRVMhJykKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAg
ICAgICAgICAgICAgICAgICAgYnRuUmVDcmVhdGUgPSBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxl
KChCeS5YUEFUSCwgIi8vYnV0dG9uW0BpZD0nc2lnbnVwLWZvcm0tc3VibWl0
J10iKSkpCiAgICAgICAgICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2Ny
aXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5SZUNyZWF0ZSkKCiAg
ICAgICAgICAgICAgICBidG5CdXkgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
MTApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFU
SCwgIi8vYnV0dG9uW0B0eXBlPSdzdWJtaXQnIGFuZCBjb250YWlucyhAY2xh
c3MsICdidG4tZGFuZ2VyJyldIikpKQogICAgICAgICAgICAgICAgZHJpdmVy
LmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5C
dXkpCgoKICAgICAgICAgICAgd2hpbGUgY29udGVvIDw9MzAgYW5kIHNlbGYu
Y29udCA8IHNlbGYudG90YWxfbGluZXM6CgogICAgICAgICAgICAgICAgc2Vs
Zi50ZXh0X2NoYW5nZWQuZW1pdCgnUkVBTElaQU5ETyBQQUdPIScpCiAgICAg
ICAgICAgICAgICBjY3MsIG1lcywgYW5vLCBjY24sIHR5cD0gc3RyKHNlbGYu
Y2NzW3NlbGYuY29udF0pLnN0cmlwKCkgLCBzdHIoc2VsZi5tZXNbc2VsZi5j
b250XSkuc3RyaXAoKSwgc3RyKHNlbGYuYW5pb1tzZWxmLmNvbnRdKS5zdHJp
cCgpLCBzdHIoc2VsZi5jdnZbc2VsZi5jb250XSkuc3RyaXAoKSwgc2VsZi50
b29scy5iaW50eXBlKHNlbGYuY2NzW3NlbGYuY29udF0pCiAgICAgICAgICAg
ICAgICBkZWFkbXNnID0gIkRFQUR8U05PV1hDSEt8T1JBTkdFfCVzfCVzfCVz
fCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXApCiAgICAgICAgICAg
ICAgICBsaXZlbXNnID0gIkxJVkV8U05PV1hDSEt8T1JBTkdFfCVzfCVzfCVz
fCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXApCgogICAgICAgICAg
ICAgICAgI2lmIHNlbGYudXNlcm5hbWUgPT0gJ3dvcmxka3JvcnknOgogICAg
ICAgICAgICAgICAgIyAgICBpZihJbmRpZ28oc2VsZiwgbGl2ZW1zZywgZHJp
dmVyKSk6CiAgICAgICAgICAgICAgICAjICAgICAgICBsaXZlbXNnID0gIkxJ
VkV8U05PV1hDSEt8T1JBTkdFQ0hBUkdFRHwlc3wlc3wlc3wlc3wlc1xuIiAl
IChjY3MsbWVzLGFubyxjY24sdHlwKQogICAgICAgICAgICAgICAgIyAgICAg
ICAgc2VsZi50ZXh0X2xpdmUuZW1pdChsaXZlbXNnKQogICAgICAgICAgICAg
ICAgIyAgICBlbHNlOgogICAgICAgICAgICAgICAgIyAgICAgICAgcHJpbnQo
J0RlYWQnKQoKICAgICAgICAgICAgICAgIGJ0blZhbGlkYXRlID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xp
Y2thYmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9ImNyZWRpdC1jYXJkLWZvcm0i
XS9kaXZbMTBdL2Rpdi9idXR0b24nKSkpCgogICAgICAgICAgICAgICAgV2Vi
RHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5wcmVzZW5jZV9vZl9l
bGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0iY3JlZGl0LWNh
cmQtZm9ybSJdL2Rpdls2XS9kaXZbMl0vaW5wdXQnKSkpLnNlbmRfa2V5cygn
MDAwJykKICAgICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAy
MCkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5Y
UEFUSCwgJy8vKltAaWQ9ImNyZWRpdC1jYXJkLWZvcm0iXS9kaXZbMl0vZGl2
L2lucHV0JykpKS5zZW5kX2tleXMobmFtZSkKICAgICAgICAgICAgICAgIFdl
YkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMucHJlc2VuY2Vfb2Zf
ZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgJy8vKltAaWQ9ImNyZWRpdC1j
YXJkLWZvcm0iXS9kaXZbM10vZGl2L2lucHV0JykpKS5zZW5kX2tleXMobG5h
bWUpCiAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjAp
LnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBB
VEgsICcvLypbQGlkPSJjcmVkaXQtY2FyZC1mb3JtIl0vZGl2WzddL2Rpdi9p
bnB1dCcpKSkuc2VuZF9rZXlzKCcxMTAxMTEnKQogICAgICAgICAgICAgICAg
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3Rv
X2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvLypbQGlkPSJ0b3MiXScpKSku
Y2xpY2soKQoKICAgICAgICAgICAgICAgIGlucHV0Y2MgPSBXZWJEcml2ZXJX
YWl0KGRyaXZlciwgMjApLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRf
bG9jYXRlZCgoQnkuWFBBVEgsICcvLypbQGlkPSJjcmVkaXQtY2FyZC1pbnB1
dCJdJykpKQogICAgICAgICAgICAgICAgaW5wdXRjYy5jbGVhcigpCiAgICAg
ICAgICAgICAgICBpbnB1dGNjLnNlbmRfa2V5cyhzZWxmLmNjc1tzZWxmLmNv
bnRdKQoKICAgICAgICAgICAgICAgIFNlbGVjdChkcml2ZXIuZmluZF9lbGVt
ZW50KGJ5PUJ5LlhQQVRILCB2YWx1ZT0nLy8qW0BpZD0iY3JlZGl0LWNhcmQt
Zm9ybSJdL2Rpdls1XS9kaXZbMl0vc2VsZWN0JykpLnNlbGVjdF9ieV92aXNp
YmxlX3RleHQoc2VsZi5tZXNbc2VsZi5jb250XSkKICAgICAgICAgICAgICAg
IFNlbGVjdChkcml2ZXIuZmluZF9lbGVtZW50KGJ5PUJ5LlhQQVRILCB2YWx1
ZT0nLy8qW0BpZD0iY3JlZGl0LWNhcmQtZm9ybSJdL2Rpdls1XS9kaXZbNF0v
c2VsZWN0JykpLnNlbGVjdF9ieV92aXNpYmxlX3RleHQoc2VsZi5hbmlvW3Nl
bGYuY29udF1bMjo0XSkKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAg
ICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgIGJ0blZhbGlk
YXRlLmNsaWNrKCkKCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDQpCgog
ICAgICAgICAgICAgICAgIyBSRVZJU0FORE8KCiAgICAgICAgICAgICAgICB0
cnk6CiAgICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIs
IDMpLnVudGlsKEVDLnZpc2liaWxpdHlfb2ZfZWxlbWVudF9sb2NhdGVkKChC
eS5YUEFUSCwgJy8vZGl2W0BjbGFzcz0iYWxlcnQgYWxlcnQtZGFuZ2VyIHBh
eW1lbnQtZXJyb3IiXScpKSkgIAogICAgICAgICAgICAgICAgICAgICNwcmlu
dCgnREVBRCBQT1IgTEFCRUwnKSAgCiAgICAgICAgICAgICAgICAgICAgc2Vs
Zi50ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAgICAgICAgICAgICAgZXhj
ZXB0OgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAg
ICAgICAgICAgdGltZS5zbGVlcCgzKQogICAgICAgICAgICAgICAgICAgICAg
ICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNCkudW50aWwoRUMuZnJhbWVfdG9f
YmVfYXZhaWxhYmxlX2FuZF9zd2l0Y2hfdG9faXQoKEJ5LlhQQVRILCcvaHRt
bC9ib2R5L2RpdlszXS9kaXZbMV0vZGl2WzJdL2lmcmFtZScpKSkKICAgICAg
ICAgICAgICAgICAgICAgICAgbXNnRnJhbWUgPSBkcml2ZXIuZmluZF9lbGVt
ZW50KEJ5LlhQQVRILCAiLy9ib2R5IikudGV4dAogICAgICAgICAgICAgICAg
ICAgICAgICAjI3ByaW50KG1zZ0ZyYW1lKQogICAgICAgICAgICAgICAgICAg
ICAgICB1bHRpID0gc2VsZi5jY3Nbc2VsZi5jb250XVstNDpdCiAgICAgICAg
ICAgICAgICAgICAgICAgIHBhbGFicmFzX2NsYXZlID0gWyJDYWxsIG1lIGF0
IiwgIlNNUyIsICJFTUFJTCIsICJDw7NkaWdvIGRlIFZlcmlmaWNhY2nDs24i
LCAiRU5WSUFSIiwgIkF1dG9yaXphIHR1IGNvbXByYSBlbiB0dSBiYW5jYSBk
aWdpdGFsIiwgIkNsYXZlIE9UUCIsICJpbmdyZXNhIGVsIGPDs2RpZ28iLCB1
bHRpXQogICAgICAgICAgICAgICAgICAgICAgICBlbmNvbnRyYWRhID0gYW55
KHBhbGFicmEgaW4gbXNnRnJhbWUgZm9yIHBhbGFicmEgaW4gcGFsYWJyYXNf
Y2xhdmUpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGVuY29udHJhZGE6
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnRvb2xzLnJl
cGV0aXIoY2NzKSA9PSBUcnVlOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICNwcmludCgnUkVMSVZFOicsIGxpdmVtc2cpCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2RlYWQuZW1pdChkZWFk
bXNnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnJlY2hlY2sgPT0g
VHJ1ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYg
c2VsZi51c2VybmFtZSA9PSAnd29ybGRrcm9yeScgYW5kIEVjb25vbWlzdChz
ZWxmLCBsaXZlbXNnLCBkcml2ZXIpOgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgbGl2ZW1zZyA9ICJMSVZFfFNOT1dYQ0hLfE9S
QU5HRUNIQVJHRUR8JXN8JXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8s
Y2NuLHR5cCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHNlbGYudGV4dF9saXZlLmVtaXQobGl2ZW1zZykKCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgKEluZGlnbyhzZWxmLCBs
aXZlbXNnLCBkcml2ZXIpKToKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGxpdmVtc2cgPSAiTElWRXxTTk9XWENIS3xPUkFOR0VD
SEFSR0VEfCVzfCVzfCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0
eXApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBz
ZWxmLnRleHRfbGl2ZS5lbWl0KGxpdmVtc2cpCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfbGl2ZS5lbWl0KGxpdmVt
c2cpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2xp
dmUuZW1pdChsaXZlbXNnKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNl
OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2RlYWQu
ZW1pdChkZWFkbXNnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgI3By
aW50KCdERUFEIFBPUiAzRCcpICAKICAgICAgICAgICAgICAgICAgICAgICAg
ZHJpdmVyLnN3aXRjaF90by5kZWZhdWx0X2NvbnRlbnQoKQoKICAgICAgICAg
ICAgICAgICAgICBleGNlcHQ6IAogICAgICAgICAgICAgICAgICAgICAgICBk
cml2ZXIuc3dpdGNoX3RvLmRlZmF1bHRfY29udGVudCgpCiAgICAgICAgICAg
ICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxNSkudW50aWwo
RUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAnLy8qW0Bp
ZD0iY3JlZGl0LWNhcmQtZm9ybSJdL2RpdlsxMF0vZGl2L2J1dHRvbicpKSkK
ICAgICAgICAgICAgICAgICAgICAgICAgbXNnRGVhZCA9IFdlYkRyaXZlcldh
aXQoZHJpdmVyLCAxMCkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9s
b2NhdGVkKChCeS5YUEFUSCwgJy8vKltAaWQ9ImNyZWRpdC1jYXJkLWZvcm0i
XS9kaXZbMV0nKSkpLnRleHQKICAgICAgICAgICAgICAgICAgICAgICAgI3By
aW50KG1zZ0RlYWQpCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4
dF9kZWFkLmVtaXQoZGVhZG1zZykKCiAgICAgICAgICAgICAgICAjcHJpbnQo
J1ZhbGlkYW5kbyBjcmVkaXRvcycpCiAgICAgICAgICAgICAgICBpZiBzZWxm
LnRvb2xzLnZhbGlkYXRlX2NyZWRpdG9zKHNlbGYudXNlcm5hbWUsc2VsZi5w
YXNzd29yZCkgPT0gVHJ1ZToKICAgICAgICAgICAgICAgICAgICBzZWxmLnRl
eHRfY2hhbmdlZC5lbWl0KCdDUkVESVRPUyBJTlNVRklDSUVOVEVTIDovJykK
ICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgICAgIGRy
aXZlci5yZWZyZXNoKCkKICAgICAgICAgICAgICAgIHNlbGYudG9vbHMuYm9y
cmFyY2MoIiVzfCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbikpCiAg
ICAgICAgICAgICAgICBzZWxmLmNvbnQrPTEKICAgICAgICAgICAgICAgIGNv
bnRlbyArPTEKCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBzZWxmLnRl
eHRfY2hhbmdlZC5lbWl0KCdFTElNSU5BTkRPIFJBU1RSRUFET1JFUyEnKSAg
CiAgICAgICAgICAgIGV4Y190eXBlLCBleGNfb2JqLCBleGNfdGIgPSBzeXMu
ZXhjX2luZm8oKTtmbmFtZSA9IG9zLnBhdGguc3BsaXQoZXhjX3RiLnRiX2Zy
YW1lLmZfY29kZS5jb19maWxlbmFtZSlbMV0KICAgICAgICAgICAgZXJyb3Jf
bWVzc2FnZT0gKHN0cihleGNfdHlwZSkrJyAnK3N0cihleGNfdGIudGJfbGlu
ZW5vKSkKICAgICAgICAgICAgc2VsZi5wcmludGVkLmVtaXQoZXJyb3JfbWVz
c2FnZSkKICAgICAgICAgICAgIyNkcml2ZXIuZGVsZXRlX2FsbF9jb29raWVz
KCkKICAgICAgICAgICAgI2NvbnRhciA9IDIxCiAgICAgICAgICAgIAogICAg
ICAgIGRlc2Jhbihkcml2ZXIpCiAgICAgICAgZHJpdmVyLnF1aXQoKQogICAg
ICAgIGNsb3NlQ2hyb21lKHNlbGYpCiAgICAgICAgaW5zdGFuY2VfZHJpdmVy
ID0gb3BlbkJyb3dzZXIoMCxzZWxmLm51bTIpIAogICAgICAgIAogICAgZGVz
YmFuKGRyaXZlcikKICAgIGRyaXZlci5xdWl0KCkKICAgIGNsb3NlQ2hyb21l
KHNlbGYpCiAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdURVNURU8gRklO
QUxJWkFETycpCgpkZWYgQ2lhbl9nYXRlKHNlbGYpOgoKICAgICMgQWNjZXNv
cyB1c3VhcmlvcyBWSVAKICAgIGlmIG5vdCBzZWxmLnZpcDoKCiAgICAgICAg
c2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnVU5FVEUgQSBOVUVTVFJPIFNFUlZJ
Q0lPIFZJUCEnKQoKICAgICAgICAjIEVqZWN1dGFyIGFjY2lvbmVzIGVzcGVj
w61maWNhcyBwYXJhIHVzdWFyaW9zIFZJUAogICAgICAgIHZpcF9pbnN0YW5j
ZSA9IG9wZW5Ccm93c2VyKDMsVHJ1ZSkKICAgICAgICB2aXBfZHJpdmVyID0g
VklQVXNlckFjdGlvbnModmlwX2luc3RhbmNlKQogICAgICAgIHZpcF9kcml2
ZXIubmF2ZWdhcigpCiAgICAgICAgcmV0dXJuIE5vbmUgIAoKICAgIHNlbGYu
dGV4dF9jaGFuZ2VkLmVtaXQoIklOSUNJQU5ETyBHQVRFIENJQU4iKQogICAg
aW5zdGFuY2VfZHJpdmVyID0gb3BlbkJyb3dzZXIoMCxzZWxmLm51bTIpCgog
ICAgd2hpbGUgc2VsZi5jb250IDwgc2VsZi50b3RhbF9saW5lczoKCiAgICAg
ICAgY29udGVvID0gMAoKICAgICAgICB0cnk6CgogICAgICAgICAgICBpZiBz
ZWxmLnRvb2xzLnZhbGlkYXRlX2NyZWRpdG9zKHNlbGYudXNlcm5hbWUsc2Vs
Zi5wYXNzd29yZCkgPT0gVHJ1ZToKICAgICAgICAgICAgICAgIHNlbGYudGV4
dF9jaGFuZ2VkLmVtaXQoJ0NSRURJVE9TIElOU1VGSUNJRU5URVMgOi8nKQog
ICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICAgICAgCiAgICAg
ICAgICAgIGVtYWlseCA9IHNlbGYubGFzdDErJycuam9pbihyYW5kb20uY2hv
aWNlKCdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1u
b3BxcnN0d3h5ejAxMjM0NTY3ODknKSBmb3IgXyBpbiByYW5nZSgzKSkrc2Vs
Zi5maXJzdDErJycuam9pbihyYW5kb20uY2hvaWNlKCdBQkNERUZHSElKS0xN
Tk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0d3h5ejAxMjM0NTY3
ODknKSBmb3IgXyBpbiByYW5nZSgzKSkrJ0BnbWFpbC5jb20nCgogICAgICAg
ICAgICBkcml2ZXIgPSBpbnN0YW5jZV9kcml2ZXIKCiAgICAgICAgICAgIHBy
b2R1Y3RzID0gWwogICAgICAgICAgICAgICAgJ2h0dHBzOi8vd3d3LmZhbGFi
ZWxsYS5jb20uY28vZmFsYWJlbGxhLWNvL3Byb2R1Y3QvMTIyNTM2NDg5L1Nl
cnZpbGxldGFzLUZhbWlsaWEtUHJhY3RpLURpYXJpYXMtMTUwLVVuaWRhZGVz
LzEyMjUzNjQ5MCcsCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly93d3cuZmFs
YWJlbGxhLmNvbS5jby9mYWxhYmVsbGEtY28vcHJvZHVjdC8xMzA2NzQ1NTcv
VE9NQS1BRVJFQS1URE9NRVMtMTVBLUNPREVMQ0EtQy0wMTkvMTMwNjc0NTU4
JywKICAgICAgICAgICAgICAgICdodHRwczovL3d3dy5mYWxhYmVsbGEuY29t
LmNvL2ZhbGFiZWxsYS1jby9wcm9kdWN0LzEyMjU0MDY1Mi9TZXJ2aWxsZXRh
cy1GYW1pbGlhLVByYWN0aS1EaWFyaWFzLURlY29yYWRhcy0xNTBVLzEyMjU0
MDY1MycsCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly93d3cuZmFsYWJlbGxh
LmNvbS5jby9mYWxhYmVsbGEtY28vcHJvZHVjdC8xMjMzNTk2OTQvU2Vydmls
bGV0YXMtRmFtaWxpYS1EZWNvcmFkYXMtR3JlZW4teC0xMDAtVW5pZGFkZXMv
MTIzMzU5Njk1JywKICAgICAgICAgICAgICAgICdodHRwczovL3d3dy5mYWxh
YmVsbGEuY29tLmNvL2ZhbGFiZWxsYS1jby9wcm9kdWN0LzExOTI3NTA5Ni9T
ZXJ2aWxsZXRhcy1GYW1pbGlhLUFjb2xjaGFtYXgtTWVkaWFuYS0xMDAtVW5p
ZGFkZXMvMTE5Mjc1MDk3JywKICAgICAgICAgICAgICAgICdodHRwczovL3d3
dy5mYWxhYmVsbGEuY29tLmNvL2ZhbGFiZWxsYS1jby9wcm9kdWN0LzExOTEy
ODc3Ny9MbGF2ZS1wYXJhLWFicmlyLWNhcmNhc2FzLTEwLXJlcHVlc3RvLWZp
bHRyby1hZ3VhLzExOTEyODc3OCcsCiAgICAgICAgICAgICAgICAnaHR0cHM6
Ly93d3cuZmFsYWJlbGxhLmNvbS5jby9mYWxhYmVsbGEtY28vcHJvZHVjdC8x
MTkxMjg2NzgvQWNvcGxlLXJhcGlkby0xNC1yb3NjYS0xNC1maWx0cm9zLWRl
LWFndWEvMTE5MTI4Njc5JywKICAgICAgICAgICAgICAgICdodHRwczovL3d3
dy5mYWxhYmVsbGEuY29tLmNvL2ZhbGFiZWxsYS1jby9wcm9kdWN0LzEyMzEy
MDM2NS9QaWNhLUhpZWxvLURlLTctRW4tQWNlcm8tVGVtcGxhZG8tV29sZm94
LUNvbi1NYW5nby1NYWRlcmEvMTIzMTIwMzY2JywKICAgICAgICAgICAgICAg
ICdodHRwczovL3d3dy5mYWxhYmVsbGEuY29tLmNvL2ZhbGFiZWxsYS1jby9w
cm9kdWN0LzEyNDc4MDQ4Mi9Tb3BvcnRlLXBhcmEtaHVldm9zLWhlcnZpZG9z
LzEyNDc4MDQ4MycKICAgICAgICAgICAgXQoKICAgICAgICAgICAgcHJvZHVj
dCA9IHJhbmRvbS5jaG9pY2UocHJvZHVjdHMpCiAgICAgICAgICAgIGRyaXZl
ci5nZXQocHJvZHVjdCkKCiAgICAgICAgICAgICNkcml2ZXIuZ2V0KCdodHRw
czovL3d3dy5mYWxhYmVsbGEuY29tLmNvL2ZhbGFiZWxsYS1jby9wcm9kdWN0
LzExODE4NzM1Ni9Cb3RhLXBhcmEtY29uZWN0b3Itcmo0NS11dHAtY2FwdWNo
b24tYXp1bC8xMTgxODczNTcnKQogICAgICAgICAgICAjZHJpdmVyLmdldCgn
aHR0cHM6Ly9ob21lY2VudGVyLmZhbGFiZWxsYS5jb20uY28vaG9tZWNlbnRl
ci1jby9wcm9kdWN0LzExODY1ODA4MC9QZXJpbGxhLXBhcmEtQ3ViaWVydGEt
RWxlY3RyaWNhLW5lZ3JvLWdyaXMvMTE4NjU4MDgzJykKCiAgICAgICAgICAg
IHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMSwgMykpCgogICAgICAgICAg
ICBidG5BZ2cgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVD
LmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9
InByb2R1Y3QtYjJjLXVpIl0vZGl2WzFdL2RpdlszXS9kaXYvZGl2L2Rpdlsy
XS9zZWN0aW9uWzNdL2Rpdi9kaXYvZGl2L2Rpdls0XS9kaXYvZGl2WzJdL2Rp
di9kaXYvZGl2L2J1dHRvbicpKSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1
dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5BZ2cpCgog
ICAgICAgICAgICBidG5DYXJ0ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIw
KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgs
ICcvLypbQGlkPSJsaW5rQnV0dG9uIl0nKSkpCiAgICAgICAgICAgIGRyaXZl
ci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgYnRu
Q2FydCkKCiAgICAgICAgICAgICMgLy8qW0BpZD0icG9wb3Zlci10cmlnZ2Vy
LTYiXQogICAgICAgICAgICBidG5Db250aW51ZSA9IFdlYkRyaXZlcldhaXQo
ZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUo
KEJ5LlhQQVRILCAiLy9idXR0b25bY29udGFpbnMoQGlkLCAncG9wb3Zlci10
cmlnZ2VyLScpXSIpKSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2Ny
aXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5Db250aW51ZSkKCiAg
ICAgICAgICAgIGlucHV0RW1haWwgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
MikudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5Y
UEFUSCwgJy8vKltAaWQ9InRlc3RJZC1JbnB1dC1lbWFpbCJdJykpKS5zZW5k
X2tleXMoZW1haWx4KQogICAgICAgICAgICB0aW1lLnNsZWVwKDEpCgogICAg
ICAgICAgICBidG5Db250aW51ZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAy
MCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRI
LCAnLy8qW0BpZD0iY29udGludWVCdXR0b24iXScpKSkKICAgICAgICAgICAg
ZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsi
LCBidG5Db250aW51ZSkKCiAgICAgICAgICAgIGFjdGlvbnMgPSBBY3Rpb25D
aGFpbnMoZHJpdmVyKQogICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5y
YW5kaW50KDEsIDMpKQoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAg
ICAgaW5wdXREcHRvID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRp
bChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAi
Ly9pbnB1dFtjb250YWlucyhAcGxhY2Vob2xkZXIsICdEZXBhcnRhbWVudG8n
KSBhbmQgY29udGFpbnMoQGNsYXNzLCAnZHJvcGRvd24tcGxhY2Vob2xkZXIn
KV0iKSkpLnNlbmRfa2V5cygnQk9HT1TDgSBELkMuJykKICAgICAgICAgICAg
ZXhjZXB0OgogICAgICAgICAgICAgICAgYnRuRXhwcmVzcyA9IFdlYkRyaXZl
cldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNr
YWJsZSgoQnkuWFBBVEgsICcvL2J1dHRvbltAZGF0YS10ZXN0aWQ9ImF2YWls
YWJsZS1zaGlwbWVudC1leHByZXNzU2FtZURheURlbGl2ZXJ5Il0nKSkpLmNs
aWNrKCkKICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQo
J0JBTiBERSBJUC4uJykKICAgICAgICAgICAgICAgIHJldHVybiBOb25lCgog
ICAgICAgICAgICBhY3Rpb25zLnNlbmRfa2V5cyhLZXlzLlRBQikucGVyZm9y
bSgpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgYWN0
aW9ucy5zZW5kX2tleXMoS2V5cy5FTlRFUikucGVyZm9ybSgpCgogICAgICAg
ICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDEsIDMpKQogICAgICAg
ICAgICBpbnB1dENpdHkgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50
aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwg
Ii8vaW5wdXRbQHR5cGU9J3RleHQnIGFuZCBAcGxhY2Vob2xkZXI9J1NlbGVj
Y2lvbmEgdW5hIENpdWRhZCddIikpKS5zZW5kX2tleXMoJ0JPR09Uw4EgRC5D
LicpCgogICAgICAgICAgICBhY3Rpb25zLnNlbmRfa2V5cyhLZXlzLlRBQiku
cGVyZm9ybSgpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAg
ICAgYWN0aW9ucy5zZW5kX2tleXMoS2V5cy5FTlRFUikucGVyZm9ybSgpCgog
ICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDEsIDMpKQog
ICAgICAgICAgICBpbnB1dEJhcnJpbyA9IFdlYkRyaXZlcldhaXQoZHJpdmVy
LCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5
LlhQQVRILCAiLy9pbnB1dFtAcGxhY2Vob2xkZXI9J1NlbGVjY2lvbmEgdW4g
QmFycmlvJ10iKSkpLnNlbmRfa2V5cygnQk9TQScpCgogICAgICAgICAgICBh
Y3Rpb25zLnNlbmRfa2V5cyhLZXlzLlRBQikucGVyZm9ybSgpCiAgICAgICAg
ICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgYWN0aW9ucy5zZW5kX2tl
eXMoS2V5cy5FTlRFUikucGVyZm9ybSgpCgogICAgICAgICAgICBhZGRyZXNz
ID0gZiJDYWxsZSB7cmFuZG9tLnJhbmRpbnQoMSwgMTAwKX0gTiB7cmFuZG9t
LnJhbmRpbnQoMSwgMTAwKX0iCiAgICAgICAgICAgIGlucHV0QWRkcmVzcyA9
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9v
Zl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0idGVzdElk
LUlucHV0LXN0cmVldCJdJykpKS5zZW5kX2tleXMoYWRkcmVzcykKCiAgICAg
ICAgICAgIGlucHV0QXB0byA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51
bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRI
LCAnLy8qW0BpZD0idGVzdElkLUlucHV0LWRlcGFydG1lbnQiXScpKSkuc2Vu
ZF9rZXlzKCdBUFRPIDIwNScpCgogICAgICAgICAgICBidG5Db25maXJtID0g
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3Rv
X2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvLypbQGlkPSJ0ZXN0SWQtaW5m
b01vZGFsRm9vdGVyLWJ1dHRvbiJdJykpKQogICAgICAgICAgICBkcml2ZXIu
ZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0bkNv
bmZpcm0pCgogICAgICAgICAgICBidG5TYXZlID0gV2ViRHJpdmVyV2FpdChk
cml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgo
QnkuWFBBVEgsICIvL2J1dHRvblt0ZXh0KCk9J0NvbmZpcm1hciB5IEd1YXJk
YXInXSIpKSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJh
cmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5TYXZlKQoKICAgICAgICAgICAg
dGltZS5zbGVlcChyYW5kb20ucmFuZGludCgxLCAzKSkKCiAgICAgICAgICAg
ICNidG5QYXkgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVD
LmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9
Im1vYmlsZS1zdW1tYXJ5Il0vYnV0dG9uJykpKQogICAgICAgICAgICBidG5Q
YXkgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1l
bnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW3RleHQo
KT0nSXIgYSBwYWdhciddIikpKQogICAgICAgICAgICBkcml2ZXIuZXhlY3V0
ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0blBheSkKCiAg
ICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ1RFU1RFQU5ETywg
RVNQRVJBLi4nKQoKICAgICAgICAgICAgd2hpbGUgY29udGVvIDw9NCBhbmQg
c2VsZi5jb250IDwgc2VsZi50b3RhbF9saW5lczoKCiAgICAgICAgICAgICAg
ICBpZiBzZWxmLmNvbnQgPT0gNTA6CiAgICAgICAgICAgICAgICAgICAgc2Vs
Zi50ZXh0X2NoYW5nZWQuZW1pdCgnwqFUb21hbmRvIHVuIHBlcXVlw7FvIHJl
c3Bpcm8gcGFyYSBwcmV2ZW5pciBlcnJvcmVzIHkgbWFudGVuZXIgZWwgc2lz
dGVtYSBlbiBtYXJjaGEhJykKICAgICAgICAgICAgICAgICAgICByZXR1cm4g
Tm9uZQoKICAgICAgICAgICAgICAgIGNjcywgbWVzLCBhbm8sIGNjbiwgdHlw
PSBzdHIoc2VsZi5jY3Nbc2VsZi5jb250XSkuc3RyaXAoKSAsIHN0cihzZWxm
Lm1lc1tzZWxmLmNvbnRdKS5zdHJpcCgpLCBzdHIoc2VsZi5hbmlvW3NlbGYu
Y29udF0pLnN0cmlwKCksIHN0cihzZWxmLmN2dltzZWxmLmNvbnRdKS5zdHJp
cCgpLCBzZWxmLnRvb2xzLmJpbnR5cGUoc2VsZi5jY3Nbc2VsZi5jb250XSkK
ICAgICAgICAgICAgICAgIGRlYWRtc2cgPSAiREVBRHxTTk9XWENIS3xDSUFO
fCVzfCVzfCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXApCiAg
ICAgICAgICAgICAgICBsaXZlbXNnID0gIkxJVkV8U05PV1hDSEt8Q0lBTnwl
c3wlc3wlc3wlc3wlc1xuIiAlIChjY3MsbWVzLGFubyxjY24sdHlwKQoKICAg
ICAgICAgICAgICAgIGRyaXZlci5nZXQoJ2h0dHBzOi8vd3d3LmZhbGFiZWxs
YS5jb20uY28vZmFsYWJlbGxhLWNvL2NoZWNrb3V0L3BheW1lbnQ/ZnJvbT1j
YXRhbHlzdCcpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5y
YW5kaW50KDEsIDMpKQoKICAgICAgICAgICAgICAgIGluZm8gPSBzZWxmLnRv
b2xzLmJpbnR5cGUoc2VsZi5jY3Nbc2VsZi5jb250XSkKICAgICAgICAgICAg
ICAgIHR5cGVfY2FyZCA9IGluZm8uc3BsaXQoJ3wnKVswXQoKICAgICAgICAg
ICAgICAgIGlmIHR5cGVfY2FyZCA9PSAnQ1JFRElUJzoKICAgICAgICAgICAg
ICAgIAogICAgICAgICAgICAgICAgICAgIGNyZWRpdE9wdCA9IFdlYkRyaXZl
cldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlj
a2FibGUoKEJ5LlhQQVRILCAnLy9kaXZbQGRhdGEtdGVzdGlkPSJ0ZXN0SWQt
cGF5bWVudE9wdGlvbi1FWFRFUk5BTF9DUkVESVRfQ0FSRCJdJykpKQogICAg
ICAgICAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1l
bnRzWzBdLmNsaWNrKCk7IiwgY3JlZGl0T3B0KQogICAgICAgICAgICAgICAg
CiAgICAgICAgICAgICAgICBlbHNlOgoKICAgICAgICAgICAgICAgICAgICAj
ZGViaXRPcHQgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVD
LmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9
Il9fbmV4dCJdL2Rpdi9kaXYvZGl2WzJdL2RpdlsxXS9kaXZbMV0vZGl2L2Rp
dlsyXS9kaXZbNF0vZGl2L2RpdicpKSkKICAgICAgICAgICAgICAgICAgICBk
ZWJpdE9wdCA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMu
ZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9kaXZbQGRh
dGEtdGVzdGlkPSd0ZXN0SWQtcGF5bWVudE9wdGlvbi1FWFRFUk5BTF9ERUJJ
VF9DQVJEJ10iKSkpCiAgICAgICAgICAgICAgICAgICAgZHJpdmVyLmV4ZWN1
dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBkZWJpdE9wdCkK
CiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDIs
IDYpKQoKICAgICAgICAgICAgICAgICNmcmFtZWRlYml0ICAvLypbQGlkPSJj
aGFrcmEtbW9kYWwtLWJvZHktOCJdL2Rpdi9kaXYvZGl2L2lmcmFtZQogICAg
ICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChF
Qy5mcmFtZV90b19iZV9hdmFpbGFibGVfYW5kX3N3aXRjaF90b19pdCgoQnku
WFBBVEgsIi8vaWZyYW1lW0BkYXRhLXRlc3RpZD0ndGVzdElkLUV4dGVybmFs
Q2FyZEZvcm1JZnJhbWUnXSIpKSkKICAgICAgICAgICAgICAgIHRpbWUuc2xl
ZXAoMikKICAgICAgICAgICAgICAgIGlucHV0Y2MgPSBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgMikudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2Nh
dGVkKChCeS5YUEFUSCwgJy8vKltAaWQ9InBhbiJdJykpKS5zZW5kX2tleXMo
c2VsZi5jY3Nbc2VsZi5jb250XSkKICAgICAgICAgICAgICAgIHNlbGVjdE1l
cyA9IFNlbGVjdChkcml2ZXIuZmluZF9lbGVtZW50KGJ5PUJ5LlhQQVRILCB2
YWx1ZT0nLy8qW0BpZD0iZXhwTW9udGgiXScpKS5zZWxlY3RfYnlfdmFsdWUo
c2VsZi5tZXNbc2VsZi5jb250XSkKICAgICAgICAgICAgICAgIHNlbGVjdFll
YXIgPSBTZWxlY3QoZHJpdmVyLmZpbmRfZWxlbWVudChieT1CeS5YUEFUSCwg
dmFsdWU9Ii8vc2VsZWN0W0BpZD0nZXhwWWVhciddIikpLnNlbGVjdF9ieV92
YWx1ZShzZWxmLmFuaW9bc2VsZi5jb250XVsyOjRdKQogICAgICAgICAgICAg
ICAgaW5wdXRjdnYgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMikudW50aWwo
RUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgJy8v
KltAaWQ9ImN2diJdJykpKS5zZW5kX2tleXMoc2VsZi5jdnZbc2VsZi5jb250
XSkKCiAgICAgICAgICAgICAgICBidG5Vc2VDQyA9IFdlYkRyaXZlcldhaXQo
ZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUo
KEJ5LlhQQVRILCAnLy8qW0BpZD0iYnRuQ29uZmlybSJdJykpKQogICAgICAg
ICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0u
Y2xpY2soKTsiLCBidG5Vc2VDQykKCiAgICAgICAgICAgICAgICAjIFJFVklT
QVIKICAgICAgICAgICAgICAgIGRyaXZlci5zd2l0Y2hfdG8uZGVmYXVsdF9j
b250ZW50KCkKCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAg
ICAgICAgcHJpbnQoJ1JldmlzYW5kby4uJykKICAgICAgICAgICAgICAgICAg
ICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDEsIDUpKQogICAgICAgICAg
ICAgICAgICAgIGJ0bkFjZXB0ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUp
LnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwg
Ii8vYnV0dG9uW0BkYXRhLXRlc3RpZD0ndGVzdElkLUFsZXJ0Q29udGludWVC
dXR0b24nXSIpKSkKICAgICAgICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0
ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0bkFjZXB0KQog
ICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVhZG1z
ZykKCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAg
ICAgdHJ5OiAjIFJldmlzYW5kbyBkZWFkIHBvciBjYXNvIGRlIHRpZW1wbwog
ICAgICAgICAgICAgICAgICAgICAgICBidG5BY2VwdCA9IFdlYkRyaXZlcldh
aXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2Fi
bGUoKEJ5LlhQQVRILCAiLy9idXR0b25bQGRhdGEtdGVzdGlkPSd0ZXN0SWQt
QWxlcnRDb250aW51ZUJ1dHRvbiddIikpKQogICAgICAgICAgICAgICAgICAg
ICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGlj
aygpOyIsIGJ0bkFjZXB0KQogICAgICAgICAgICAgICAgICAgICAgICBzZWxm
LnRleHRfZGVhZC5lbWl0KGRlYWRtc2cpCiAgICAgICAgICAgICAgICAgICAg
ZXhjZXB0OgoKICAgICAgICAgICAgICAgICAgICAgICAgYnRuQWRkQ2FyZCA9
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90
b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9idXR0b25bQGRhdGEtdGVz
dGlkPSd0ZXN0SWQtQWRkQ2FyZEJ1dHRvbiddIikpKQoKICAgICAgICAgICAg
ICAgICAgICAgICAgaWYgc2VsZi50b29scy5yZXBldGlyKGNjcykgPT0gVHJ1
ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCdSRUxJVkU6
JywgbGl2ZW1zZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYu
dGV4dF9kZWFkLmVtaXQoZGVhZG1zZykKICAgICAgICAgICAgICAgICAgICAg
ICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNlbGYu
cmVjaGVjayA9PSBUcnVlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGlmKEVjb25vbWlzdChzZWxmLCBsaXZlbXNnLCBkcml2ZXIpKToKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGl2ZW1zZyA9ICJM
SVZFfFNOT1dYQ0hLfENJQU5DSEFSR0VEfCVzfCVzfCVzfCVzfCVzXG4iICUg
KGNjcyxtZXMsYW5vLGNjbix0eXApCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHNlbGYudGV4dF9saXZlLmVtaXQobGl2ZW1zZykKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfbGl2ZS5lbWl0
KGxpdmVtc2cpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9saXZl
LmVtaXQobGl2ZW1zZykKCiAgICAgICAgICAgICAgICBzZWxmLnRvb2xzLmJv
cnJhcmNjKCIlc3wlc3wlc3wlc1xuIiAlIChjY3MsbWVzLGFubyxjY24pKQog
ICAgICAgICAgICAgICAgc2VsZi5jb250Kz0xCiAgICAgICAgICAgICAgICBj
b250ZW8gKz0xCgogICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0
KCdFTElNSU5BTkRPIFJBU1RSRUFET1JFUyEnKQogICAgICAgICAgICBkZXNi
YW4oZHJpdmVyKQogICAgICAgICAgICBkcml2ZXIucXVpdCgpCiAgICAgICAg
ICAgIGNsb3NlQ2hyb21lKHNlbGYpCiAgICAgICAgICAgIGluc3RhbmNlX2Ry
aXZlciA9IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0yKQogICAgICAgICAgICAg
CiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAjZGVzYmFuKGRyaXZlcikK
ICAgICAgICAgICAgZHJpdmVyLnF1aXQoKQogICAgICAgICAgICBjbG9zZUNo
cm9tZShzZWxmKQogICAgICAgICAgICAjaW5zdGFuY2VfZHJpdmVyID0gb3Bl
bkJyb3dzZXIoMCxzZWxmLm51bTIpCiAgICAgICAgICAgIGV4Y190eXBlLCBl
eGNfb2JqLCBleGNfdGIgPSBzeXMuZXhjX2luZm8oKTtmbmFtZSA9IG9zLnBh
dGguc3BsaXQoZXhjX3RiLnRiX2ZyYW1lLmZfY29kZS5jb19maWxlbmFtZSlb
MV0KICAgICAgICAgICAgZXJyb3JfbWVzc2FnZT0gKHN0cihleGNfdHlwZSkr
JyAnK3N0cihleGNfdGIudGJfbGluZW5vKSkKICAgICAgICAgICAgc2VsZi5w
cmludGVkLmVtaXQoZXJyb3JfbWVzc2FnZSkKICAgICAgICAgICAgaWYgJ3Nl
bGVuaXVtLmNvbW1vbi5leGNlcHRpb25zLlRpbWVvdXRFeGNlcHRpb24nIGlu
IGVycm9yX21lc3NhZ2U6CiAgICAgICAgICAgICAgICBzZWxmLnRleHRfY2hh
bmdlZC5lbWl0KCdFeHBlcmltZW50YW5kbyBmYWxsYXMgZGUgY29uZXhpb24s
IGVsIHByb2Nlc28gc2VndWlyYSwgcmV2aXNhIHR1IGNvbmV4aW9uLicpCiAg
ICAgICAgICAgICNwcm94eUVycm9yID0gcHJveHlFcnJvciArIDEKICAgICAg
ICAgICAgaW5zdGFuY2VfZHJpdmVyID0gb3BlbkJyb3dzZXIoMCxzZWxmLm51
bTIpCiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgIHNlbGYudGV4dF9j
aGFuZ2VkLmVtaXQoJ1RFU1RFTyBGSU5BTElaQURPJykKCmRlZiBCbHVlX2dh
dGUoc2VsZik6CgogICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgiSU5JQ0lB
TkRPIEdBVEUgQkxVRSIpCiAgICBpbnN0YW5jZV9kcml2ZXIgPSBvcGVuQnJv
d3NlcigwLHNlbGYubnVtMikKCiAgICB3aGlsZSBzZWxmLmNvbnQgPCBzZWxm
LnRvdGFsX2xpbmVzOgoKICAgICAgICBjb250ZW8gPSAwCgogICAgICAgIGlm
IHNlbGYudG9vbHMudmFsaWRhdGVfY3JlZGl0b3Moc2VsZi51c2VybmFtZSxz
ZWxmLnBhc3N3b3JkKSA9PSBUcnVlOgogICAgICAgICAgICBzZWxmLnRleHRf
Y2hhbmdlZC5lbWl0KCdDUkVESVRPUyBJTlNVRklDSUVOVEVTIDovJykKICAg
ICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICAKICAgICAgICBlbWFpbHgg
PSAnJy5qb2luKHJhbmRvbS5jaG9pY2UoJ0FCQ0RFRkdISUpLTE1OT1BRUlNU
VVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R3eHl6MDEyMzQ1Njc4OScpIGZv
ciBfIGluIHJhbmdlKDMpKStzZWxmLmZpcnN0MSsnJy5qb2luKHJhbmRvbS5j
aG9pY2UoJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamts
bW5vcHFyc3R3eHl6MDEyMzQ1Njc4OScpIGZvciBfIGluIHJhbmdlKDMpKSsn
QGdtYWlsLmNvbScKCiAgICAgICAgcHJvZHVjdHMgPSBbCiAgICAgICAgICAg
ICAgICAnaHR0cHM6Ly93d3cuaWtlYS5jb20vY28vZXMvcC92YXJkYWdlbi10
YXpvbi1ib3dsLXZpZHJpby1pbmNvbG9yby0wMDI4OTI2MS8nLAogICAgICAg
ICAgICAgICAgJ2h0dHBzOi8vd3d3LmlrZWEuY29tL2NvL2VzL3AvZmVqa2Et
cGxhbnRhLWFydGlmaWNpYWwtY29uLW1hdGVyYS1pbnRlcmlvci1leHRlcmlv
ci1zdWN1bGVudGEtODA1MTk3NjcvJywKICAgICAgICAgICAgICAgICdodHRw
czovL3d3dy5pa2VhLmNvbS9jby9lcy9wL2Zpc2tiby1tYXJjby1ibGFuY28t
MDAyOTU2NTMvJywKICAgICAgICAgICAgICAgICdodHRwczovL3d3dy5pa2Vh
LmNvbS9jby9lcy9wL3Bva2FsLXZhc28tdmlkcmlvLWluY29sb3JvLTEwMjcw
NDc4LycsCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly93d3cuaWtlYS5jb20v
Y28vZXMvcC9zdmFtcGlnLWVzcG9uamEtYmxhbmNvLWdyaXNhY2VvLTYwMjU3
NjA1LycsCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly93d3cuaWtlYS5jb20v
Y28vZXMvcC9ob2Vuc25hZXQtc29wb3J0ZS1wYXJhLXRlbGVmb25vLWNlbHVs
YXItYmVpZ2UtMTA1NjQ4OTUvJywKICAgICAgICAgICAgICAgICdodHRwczov
L3d3dy5pa2VhLmNvbS9jby9lcy9wL3ByaWNraWctdGFwYS1wYXJhLW1pY3Jv
b25kYXMtZ3Jpcy03MDE4NjA5MC8nLAogICAgICAgICAgICAgICAgJ2h0dHBz
Oi8vd3d3LmlrZWEuY29tL2NvL2VzL3AvYmlsbGluZ2VuLWFjY2Vzb3Jpby1w
YXJhLWNham9uLWJsYW5jby0zMDI3MDQwMS8nCiAgICAgICAgICAgIF0KCiAg
ICAgICAgcHJvZHVjdCA9IHJhbmRvbS5jaG9pY2UocHJvZHVjdHMpCiAgICAg
ICAgCiAgICAgICAgdHJ5OgoKICAgICAgICAgICAgZHJpdmVyID0gaW5zdGFu
Y2VfZHJpdmVyCgogICAgICAgICAgICBkcml2ZXIuZ2V0KHByb2R1Y3QpCiAg
ICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMiwgMykpCgog
ICAgICAgICAgICBidG5BZ2cgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTAp
LnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwg
Ii8vYnV0dG9uW0BhcmlhLWxhYmVsPSdBw7FhZGlyIGEgbGEgYm9sc2EnXSIp
KSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVu
dHNbMF0uY2xpY2soKTsiLCBidG5BZ2cpCiAgICAgICAgICAgIHRpbWUuc2xl
ZXAocmFuZG9tLnJhbmRpbnQoMiwgMykpCgogICAgICAgICAgICBidG5DYXJ0
ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5lbGVtZW50
X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2FbQGFyaWEtbGFiZWw9
J0NvbnRpbnVhciBhbCBjYXJyaXRvIGRlIGNvbXByYXMnXSIpKSkKICAgICAg
ICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xp
Y2soKTsiLCBidG5DYXJ0KQogICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRv
bS5yYW5kaW50KDEsIDIpKQoKICAgICAgICAgICAgYnRuUGF5ID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2Ns
aWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRvbltAZGF0YS10ZXN0aWQ9J3N1
bW1hcnktY2hlY2tvdXQtYnV0dG9uJ10iKSkpCiAgICAgICAgICAgIGRyaXZl
ci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgYnRu
UGF5KQoKICAgICAgICAgICAgYnRuR3Vlc3QgPSBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChC
eS5YUEFUSCwgIi8vYnV0dG9uW0BkYXRhLXRlc3RpZD0nY29udGludWUtYXMt
Z3Vlc3QtYnV0dG9uJ10iKSkpCiAgICAgICAgICAgIGRyaXZlci5leGVjdXRl
X3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgYnRuR3Vlc3QpCiAg
ICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMiwgMykpCgog
ICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCJHRU5FUkFORE8g
TUVUQS1EQVRPUy4uIikKCiAgICAgICAgICAgICMgLy9pbnB1dFtAZGF0YS10
ZXN0aWQ9J2Zvcm0tZW1haWwnXQogICAgICAgICAgICBpbnB1dEVtYWlsID0g
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29m
X2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0nZW1h
aWwnXSIpKSkuc2VuZF9rZXlzKGVtYWlseCkKICAgICAgICAgICAgIyAvL2lu
cHV0W0BkYXRhLXRlc3RpZD0nZm9ybS1mdWxsTmFtZSddCiAgICAgICAgICAg
IGZuYW1lID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnBy
ZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0
W0BpZD0nZnVsbE5hbWUnXSIpKSkuc2VuZF9rZXlzKHNlbGYuZmlyc3QxICsg
JyAnICsgc2VsZi5sYXN0MSkKCiAgICAgICAgICAgICMgLy9pbnB1dFtAZGF0
YS10ZXN0aWQ9J2hpZXJhcmNoaWNhbC1jaG9pY2VzLWNpdGl6ZW5zaGlwQ2Fy
ZCddCiAgICAgICAgICAgIGRuaSA9IHJhbmRvbS5yYW5kaW50KDEsIDk5OTk5
OTk5KQogICAgICAgICAgICBpbnB1dERuaSA9IFdlYkRyaXZlcldhaXQoZHJp
dmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQo
KEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2lkZW50aXR5VmFsdWUnXSIpKSku
c2VuZF9rZXlzKGRuaSkKCiAgICAgICAgICAgICMgLy9pbnB1dFtAZGF0YS10
ZXN0aWQ9J2Zvcm0tcGhvbmUnXQogICAgICAgICAgICBudW1lID0gZiIzMXty
YW5kb20ucmFuZGludCgwLCA5KX17Jycuam9pbihyYW5kb20uY2hvaWNlcygn
MDEyMzQ1Njc4OScsIGs9NykpfSIKICAgICAgICAgICAgaW5wdXRQaG9uZSA9
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9v
Zl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J3Bo
b25lJ10iKSkpLnNlbmRfa2V5cyhudW1lKQoKICAgICAgICAgICAgYWN0aW9u
cyA9IEFjdGlvbkNoYWlucyhkcml2ZXIpCiAgICAgICAgICAgIHRpbWUuc2xl
ZXAocmFuZG9tLnJhbmRpbnQoMiwgMykpCgogICAgICAgICAgICBkZXBhcnRh
bWVudG8gPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLnBy
ZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0
W0BpZD0nY291bnR5J10iKSkpLnNlbmRfa2V5cygnQk9HT1TDgSBELkMuJykK
ICAgICAgICAgICAgYWN0aW9ucy5zZW5kX2tleXMoS2V5cy5UQUIpLnBlcmZv
cm0oKQogICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgIGFj
dGlvbnMuc2VuZF9rZXlzKEtleXMuRU5URVIpLnBlcmZvcm0oKQoKICAgICAg
ICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgyLCAzKSkKICAgICAg
ICAgICAgaW5wdXRDaXR5ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51
bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRI
LCAiLy9pbnB1dFtAaWQ9J2Rpc3RyaWN0J10iKSkpLnNlbmRfa2V5cygnQk9H
T1TDgSBELkMuJykKICAgICAgICAgICAgYWN0aW9ucy5zZW5kX2tleXMoS2V5
cy5UQUIpLnBlcmZvcm0oKQogICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAg
ICAgICAgICAgIGFjdGlvbnMuc2VuZF9rZXlzKEtleXMuRU5URVIpLnBlcmZv
cm0oKQoKICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgy
LCAzKSkKICAgICAgICAgICAgaW5wdXRCYXJyaW8gPSBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9j
YXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0ndG93biddIikpKS5zZW5k
X2tleXMoJ0FOVE9OSU8gTkFSScORTycpCiAgICAgICAgICAgIGFjdGlvbnMu
c2VuZF9rZXlzKEtleXMuVEFCKS5wZXJmb3JtKCkKICAgICAgICAgICAgdGlt
ZS5zbGVlcCgxKQogICAgICAgICAgICBhY3Rpb25zLnNlbmRfa2V5cyhLZXlz
LkVOVEVSKS5wZXJmb3JtKCkKCiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFu
ZG9tLnJhbmRpbnQoMSwgMikpCiAgICAgICAgICAgIGFkZHJlc3MgPSBmIkNh
bGxlIHtyYW5kb20ucmFuZGludCgxLCAxMDApfSBOIHtyYW5kb20ucmFuZGlu
dCgxLCAxMDApfSIKICAgICAgICAgICAgaW5wdXRBZGRycyA9IFdlYkRyaXZl
cldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50
X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2FkZHJlc3NPbmUn
XSIpKSkuc2VuZF9rZXlzKGFkZHJlc3MpCiAgICAgICAgICAgIAogICAgICAg
ICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDEsIDIpKQogICAgICAg
ICAgICBidG5Db250aW51ZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCku
dW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAi
Ly9idXR0b25bQGlkPSdzdWJtaXRJZGVudGl0eUZvcm1CdXR0b24nXSIpKSkK
ICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNb
MF0uY2xpY2soKTsiLCBidG5Db250aW51ZSkKICAgICAgICAgICAgdGltZS5z
bGVlcChyYW5kb20ucmFuZGludCgxLCAyKSkKCiAgICAgICAgICAgIGJ0bkVu
dHJlZ2EgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVs
ZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0Bk
YXRhLXRlc3RpZD0nYnV0dG9uLVRydWNrRGVsaXZlcnlTY2hlZHVsZWQnXSIp
KSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVu
dHNbMF0uY2xpY2soKTsiLCBidG5FbnRyZWdhKQogICAgICAgICAgICB0aW1l
LnNsZWVwKHJhbmRvbS5yYW5kaW50KDEsIDIpKQoKICAgICAgICAgICAgYnRu
UGF5ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5lbGVt
ZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRvbltAaWQ9
J3N1Ym1pdC1zZXJ2aWNlcy1mb3JtLWJ1dHRvbiddIikpKQogICAgICAgICAg
ICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygp
OyIsIGJ0blBheSkKICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFu
ZGludCgzLCA1KSkKCiAgICAgICAgICAgIGluZm8gPSBzZWxmLnRvb2xzLmJp
bnR5cGUoc2VsZi5jY3Nbc2VsZi5jb250XSkKICAgICAgICAgICAgdHlwZV9j
YXJkID0gaW5mby5zcGxpdCgnfCcpWzBdCgogICAgICAgICAgICBzZWxmLnRl
eHRfY2hhbmdlZC5lbWl0KCJFVkFESUVORE8gQ09PS0lFUy4uIikKCiAgICAg
ICAgICAgIHRyeTogIyB0ZXJtcwogICAgICAgICAgICAgICAgYnRuQ29va2ll
cyA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5lbGVtZW50
X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRvblt0ZXh0KCk9
J0FjZXB0YXIgY29va2llcyddIikpKQogICAgICAgICAgICAgICAgZHJpdmVy
LmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5D
b29raWVzKQogICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAg
ICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBw
cmludCgnRXJyb3IgYWNlcHRhbmRvIENvb2tpZXMhJywgZSkKCiAgICAgICAg
ICAgIGFjdGlvbnMgPSBBY3Rpb25DaGFpbnMoZHJpdmVyKQogICAgICAgICAg
ICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDMsIDUpKQoKICAgICAgICAg
ICAgaWYgJ0RFQklUJyBpbiB0eXBlX2NhcmQ6CiAgICAgICAgICAgICAgICBi
dG5EZWJpdCA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMu
ZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9kaXZbQGlk
PSdERUJJVENBUkQnXSIpKSkKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAo
MSkKICAgICAgICAgICAgICAgIGFjdGlvbnMuc2VuZF9rZXlzKEtleXMuVEFC
KS5wZXJmb3JtKCkKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAg
ICAgICAgICAgICAgIGFjdGlvbnMuc2VuZF9rZXlzKEtleXMuVEFCKS5wZXJm
b3JtKCkKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAg
ICAgICAgIGFjdGlvbnMuc2VuZF9rZXlzKEtleXMuVEFCKS5wZXJmb3JtKCkK
ICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAg
IGFjdGlvbnMuc2VuZF9rZXlzKEtleXMuRU5URVIpLnBlcmZvcm0oKQogICAg
ICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjZHJpdmVyLmV4ZWN1dGVf
c2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5EZWJpdCkKCiAg
ICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBidG5DcmVkaXQgPSBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRfdG9f
YmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vZGl2W0BpZD0nQ1JFRElUQ0FS
RCddIikpKQogICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAg
ICAgICAgICAgYWN0aW9ucy5zZW5kX2tleXMoS2V5cy5UQUIpLnBlcmZvcm0o
KQogICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICAg
ICAgYWN0aW9ucy5zZW5kX2tleXMoS2V5cy5UQUIpLnBlcmZvcm0oKQogICAg
ICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICAgICAgYWN0
aW9ucy5zZW5kX2tleXMoS2V5cy5FTlRFUikucGVyZm9ybSgpCiAgICAgICAg
ICAgICAgICAKICAgICAgICAgICAgICAgICNkcml2ZXIuZXhlY3V0ZV9zY3Jp
cHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0bkNyZWRpdCkKCiAgICAg
ICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMywgNSkpCgogICAg
ICAgICAgICB3aGlsZSBjb250ZW8gPD00IGFuZCBzZWxmLmNvbnQgPCBzZWxm
LnRvdGFsX2xpbmVzOgoKICAgICAgICAgICAgICAgIGlmIHNlbGYuY29udCA9
PSA1MDoKICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5l
bWl0KCfCoVRvbWFuZG8gdW4gcGVxdWXDsW8gcmVzcGlybyBwYXJhIHByZXZl
bmlyIGVycm9yZXMgeSBtYW50ZW5lciBlbCBzaXN0ZW1hIGVuIG1hcmNoYSEn
KQogICAgICAgICAgICAgICAgICAgIGlmIHNlbGYudXNlcm5hbWUgPT0gJ3dv
cmxka3JvcnknOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAg
ICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAg
IHJldHVybiBOb25lCgogICAgICAgICAgICAgICAgY2NzLCBtZXMsIGFubywg
Y2NuLCB0eXA9IHN0cihzZWxmLmNjc1tzZWxmLmNvbnRdKS5zdHJpcCgpICwg
c3RyKHNlbGYubWVzW3NlbGYuY29udF0pLnN0cmlwKCksIHN0cihzZWxmLmFu
aW9bc2VsZi5jb250XSkuc3RyaXAoKSwgc3RyKHNlbGYuY3Z2W3NlbGYuY29u
dF0pLnN0cmlwKCksIHNlbGYudG9vbHMuYmludHlwZShzZWxmLmNjc1tzZWxm
LmNvbnRdKQogICAgICAgICAgICAgICAgZGVhZG1zZyA9ICJERUFEfFNOT1dY
Q0hLfEJMVUV8JXN8JXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2Nu
LHR5cCkKICAgICAgICAgICAgICAgIGxpdmVtc2cgPSAiTElWRXxTTk9XWENI
S3xCTFVFfCVzfCVzfCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0
eXApCiAgICAgICAgICAgICAgICBmZWNoYSA9IHNlbGYubWVzW3NlbGYuY29u
dF0gKyBzZWxmLmFuaW9bc2VsZi5jb250XVsyOjRdICAgICAgICAgIAogICAg
ICAgICAgICAKCiAgICAgICAgICAgICAgICBpZiBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgMTApLnVudGlsKEVDLmZyYW1lX3RvX2JlX2F2YWlsYWJsZV9hbmRf
c3dpdGNoX3RvX2l0KChCeS5YUEFUSCwiLy9pZnJhbWVbc3RhcnRzLXdpdGgo
QHNyYywgJ2h0dHBzOi8vZ3cuZGlnaXRhbHBheW1lbnRzc3BhLmNvbS9hcGkv
dG9rZW5pemF0aW9uL2NvL3YxJyldIikpKTogICAgICAgICAgICAgICAgCgog
ICAgICAgICAgICAgICAgICAgIGlucHV0Q2FyZCA9IFdlYkRyaXZlcldhaXQo
ZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0
ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J3BhbiddIikpKS5zZW5kX2tl
eXMoc2VsZi5jY3Nbc2VsZi5jb250XSkKICAgICAgICAgICAgICAgICAgICBp
bnB1dEV4cCA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5w
cmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1
dFtAaWQ9J2V4cERhdGUnXSIpKSkuc2VuZF9rZXlzKGZlY2hhKQogICAgICAg
ICAgICAgICAgICAgIGlucHV0Q3Z2ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIs
IDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnku
WFBBVEgsICIvL2lucHV0W0BpZD0nY3Z2J10iKSkpLnNlbmRfa2V5cyhzZWxm
LmN2dltzZWxmLmNvbnRdKQoKICAgICAgICAgICAgICAgICAgICB0aW1lLnNs
ZWVwKHJhbmRvbS5yYW5kaW50KDEsIDIpKQoKICAgICAgICAgICAgICAgICAg
ICBidG5QYXlDYXJkID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRp
bChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1
dHRvbltAaWQ9J2J0bkNvbmZpcm0nXSIpKSkKICAgICAgICAgICAgICAgICAg
ICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygp
OyIsIGJ0blBheUNhcmQpCgogICAgICAgICAgICAgICAgICAgIGRyaXZlci5z
d2l0Y2hfdG8uZGVmYXVsdF9jb250ZW50KCkKCiAgICAgICAgICAgICAgICBz
ZWxmLnRleHRfY2hhbmdlZC5lbWl0KCJBTkFMSVpBTkRPIFJFU1VMVEFET1Mu
LiIpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50
KDMsIDUpKQoKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAg
ICAgICBidG5EZWFkID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRp
bChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1
dHRvbltAZGF0YS10ZXN0aWQ9J3JldHJ5LXNlY29uZGFyeS1idXR0b24nXSIp
KSkKICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfZGVhZC5lbWl0KGRl
YWRtc2cpCiAgICAgICAgICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2Ny
aXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5EZWFkKQogICAgICAg
ICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZXhjZXB0OgoKICAgICAg
ICAgICAgICAgICAgICB0cnk6ICMgUmV2aXNhbmRvIHBvciBjYXNvIGRlIHRp
ZW1wbwogICAgICAgICAgICAgICAgICAgICAgICBidG5EZWFkID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xp
Y2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0BkYXRhLXRlc3RpZD0ncmV0
cnktc2Vjb25kYXJ5LWJ1dHRvbiddIikpKQogICAgICAgICAgICAgICAgICAg
ICAgICBzZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRtc2cpCiAgICAgICAgICAg
ICAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRz
WzBdLmNsaWNrKCk7IiwgYnRuRGVhZCkKCiAgICAgICAgICAgICAgICAgICAg
ZXhjZXB0OgoKICAgICAgICAgICAgICAgICAgICAgICAgI21zZ0xpdmUgPSBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLnByZXNlbmNlX29m
X2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2Rpdltjb250YWlucyhA
Y2xhc3MsICdza2FwYS13cmFwcGVyLXByZWZpeC10ZXh0JyldLy9wIikpKS50
ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgICNwcmludChtc2dMaXZlKQog
ICAgICAgICAgICAgICAgICAgICAgICBidG5SZW1vdmUgPSBXZWJEcml2ZXJX
YWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2th
YmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0BkYXRhLXRlc3RpZD0nY2FwdHVy
ZWRDYXJkUmVtb3ZlSWQnXSIpKSkKICAgICAgICAgICAgICAgICAgICAgICAg
aWYgc2VsZi50b29scy5yZXBldGlyKGNjcykgPT0gVHJ1ZToKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVhZG1z
ZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCdSRUxJVkU6
JywgbGl2ZW1zZykKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnJlY2hlY2sgPT0g
VHJ1ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihFY29u
b21pc3Qoc2VsZiwgbGl2ZW1zZywgZHJpdmVyKSk6CiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGxpdmVtc2cgPSAiTElWRXxTTk9XWENI
S3xCTFVFQ0hBUkdFRHwlc3wlc3wlc3wlc3wlc1xuIiAlIChjY3MsbWVzLGFu
byxjY24sdHlwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBzZWxmLnRleHRfbGl2ZS5lbWl0KGxpdmVtc2cpCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgc2VsZi50ZXh0X2xpdmUuZW1pdChsaXZlbXNnKQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfbGl2ZS5lbWl0KGxpdmVt
c2cpCgogICAgICAgICAgICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9z
Y3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0blJlbW92ZSkKCiAg
ICAgICAgICAgICAgICBzZWxmLnRvb2xzLmJvcnJhcmNjKCIlc3wlc3wlc3wl
c1xuIiAlIChjY3MsbWVzLGFubyxjY24pKQogICAgICAgICAgICAgICAgc2Vs
Zi5jb250Kz0xCiAgICAgICAgICAgICAgICBjb250ZW8gKz0xCgogICAgICAg
ICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdFTElNSU5BTkRPIFJBU1RS
RUFET1JFUyEnKQogICAgICAgICAgICBkZXNiYW4oZHJpdmVyKQogICAgICAg
ICAgICBkcml2ZXIucXVpdCgpCiAgICAgICAgICAgIGNsb3NlQ2hyb21lKHNl
bGYpCiAgICAgICAgICAgIGluc3RhbmNlX2RyaXZlciA9IG9wZW5Ccm93c2Vy
KDAsc2VsZi5udW0yKQogICAgICAgICAgICAgCiAgICAgICAgZXhjZXB0Ogog
ICAgICAgICAgICAjZGVzYmFuKGRyaXZlcikKICAgICAgICAgICAgZHJpdmVy
LnF1aXQoKQogICAgICAgICAgICBjbG9zZUNocm9tZShzZWxmKQogICAgICAg
ICAgICAjaW5zdGFuY2VfZHJpdmVyID0gb3BlbkJyb3dzZXIoMCxzZWxmLm51
bTIpCiAgICAgICAgICAgIGV4Y190eXBlLCBleGNfb2JqLCBleGNfdGIgPSBz
eXMuZXhjX2luZm8oKTtmbmFtZSA9IG9zLnBhdGguc3BsaXQoZXhjX3RiLnRi
X2ZyYW1lLmZfY29kZS5jb19maWxlbmFtZSlbMV0KICAgICAgICAgICAgZXJy
b3JfbWVzc2FnZT0gKHN0cihleGNfdHlwZSkrJyAnK3N0cihleGNfdGIudGJf
bGluZW5vKSkKICAgICAgICAgICAgc2VsZi5wcmludGVkLmVtaXQoZXJyb3Jf
bWVzc2FnZSkKICAgICAgICAgICAgaWYgJ3NlbGVuaXVtLmNvbW1vbi5leGNl
cHRpb25zLlRpbWVvdXRFeGNlcHRpb24nIGluIGVycm9yX21lc3NhZ2U6CiAg
ICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdFeHBlcmlt
ZW50YW5kbyBmYWxsYXMgZGUgY29uZXhpb24sIGVsIHByb2Nlc28gc2VndWly
YSwgcmV2aXNhIHR1IGNvbmV4aW9uLicpCiAgICAgICAgICAgICNwcm94eUVy
cm9yID0gcHJveHlFcnJvciArIDEKICAgICAgICAgICAgaW5zdGFuY2VfZHJp
dmVyID0gb3BlbkJyb3dzZXIoMCxzZWxmLm51bTIpCiAgICAgICAgICAgIAog
ICAgICAgICAgICAKICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ1RFU1RF
TyBGSU5BTElaQURPJykKCiNkZWYgUGxhY2VpdChzZWxmKToKCmRlZiBKb21h
c2hvcChzZWxmKToKCiAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCJJTklD
SUFORE8gR0FURSBKT01BU0hPUCIpCiAgICBpbnN0YW5jZV9kcml2ZXIgPSBv
cGVuQnJvd3NlcigwLHNlbGYubnVtMikKCiAgICB3aGlsZSBzZWxmLmNvbnQg
PCBzZWxmLnRvdGFsX2xpbmVzOgoKICAgICAgICBjb250ZW8gPSAwCgogICAg
ICAgIHRyeToKCiAgICAgICAgICAgIGlmIHNlbGYudG9vbHMudmFsaWRhdGVf
Y3JlZGl0b3Moc2VsZi51c2VybmFtZSxzZWxmLnBhc3N3b3JkKSA9PSBUcnVl
OgogICAgICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnQ1JF
RElUT1MgSU5TVUZJQ0lFTlRFUyA6LycpCiAgICAgICAgICAgICAgICByZXR1
cm4gTm9uZQogICAgICAgICAgICAKICAgICAgICAgICAgZW1haWx4ID0gc2Vs
Zi5sYXN0MSsnJy5qb2luKHJhbmRvbS5jaG9pY2UoJ0FCQ0RFRkdISUpLTE1O
T1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R3eHl6MDEyMzQ1Njc4
OScpIGZvciBfIGluIHJhbmdlKDMpKStzZWxmLmZpcnN0MSsnJy5qb2luKHJh
bmRvbS5jaG9pY2UoJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVm
Z2hpamtsbW5vcHFyc3R3eHl6MDEyMzQ1Njc4OScpIGZvciBfIGluIHJhbmdl
KDMpKSsnQGdtYWlsLmNvbScKCiAgICAgICAgICAgIGRyaXZlciA9IGluc3Rh
bmNlX2RyaXZlcgogICAgICAgICAgICBkcml2ZXIuZ2V0KCdodHRwczovL3d3
dy5qb21hc2hvcC5jb20vdG9vbC1raXQtMTYtcGllY2UtZGVsdXhlLXdhdGNo
LXJlcGFpci5odG1sJykKICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20u
cmFuZGludCgzLCA3KSkKCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAg
ICAgIHRlcm1zID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChF
Qy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRv
bltAdHlwZT0nYnV0dG9uJyBhbmQgQGNsYXNzPSdsdGtwb3B1cC1jbG9zZSdd
IikpKQogICAgICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJh
cmd1bWVudHNbMF0uY2xpY2soKTsiLCB0ZXJtcykKICAgICAgICAgICAgICAg
IHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAg
ICAgICAgcGFzcwoKICAgICAgICAgICAgYnRuQWdnID0gV2ViRHJpdmVyV2Fp
dChkcml2ZXIsIDEwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJs
ZSgoQnkuWFBBVEgsICIvL2J1dHRvbltAY2xhc3M9J2J0biBwcmltYXJ5IGFk
ZC10by1jYXJ0LWJ0biddL3NwYW5bdGV4dCgpPSdBZGQgdG8gQmFnJ10iKSkp
CiAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRz
WzBdLmNsaWNrKCk7IiwgYnRuQWdnKQoKICAgICAgICAgICAgZ29DaGsgPSBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9f
YmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0BjbGFzcz0nYnRu
IHByaW1hcnknXS9zcGFuW0BjbGFzcz0ndGV4dC1jbycgYW5kIHRleHQoKT0n
Q2hlY2tvdXQgICAnXSIpKSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVf
c2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBnb0NoaykKICAgICAg
ICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgxLCAzKSkKCiAgICAg
ICAgICAgIGlucHV0RW1haWwgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTAp
LnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBB
VEgsICIvL2lucHV0W0BpZD0nZW1haWwnXSIpKSkuc2VuZF9rZXlzKGVtYWls
eCkKICAgICAgICAgICAgY291bnRyeSA9IFNlbGVjdChkcml2ZXIuZmluZF9l
bGVtZW50KGJ5PUJ5LlhQQVRILCB2YWx1ZT0iLy9zZWxlY3RbQGNsYXNzPSdz
ZWxlY3RlZCcgYW5kIEBuYW1lPSdjb3VudHJ5Q29kZSddIikpLnNlbGVjdF9i
eV92YWx1ZSgnQ08nKQogICAgICAgICAgICBpbnB1dG5hbWUgPSBXZWJEcml2
ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1l
bnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BuYW1lPSdmaXJzdG5h
bWUnXSIpKSkuc2VuZF9rZXlzKHNlbGYuZmlyc3QxKQogICAgICAgICAgICBp
bnB1dGxuYW1lID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChF
Qy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9p
bnB1dFtAbmFtZT0nbGFzdG5hbWUnXSIpKSkuc2VuZF9rZXlzKHNlbGYubGFz
dDEpCgogICAgICAgICAgICBhZGRyZXNzID0gZiJDYWxsZSB7cmFuZG9tLnJh
bmRpbnQoMSwgMTAwKX0gTiB7cmFuZG9tLnJhbmRpbnQoMSwgMTAwKX0iCiAg
ICAgICAgICAgIGlucHV0YWRkcnMgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
MTApLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnku
WFBBVEgsICIvL2lucHV0W0BuYW1lPSdzdHJlZXQxJ10iKSkpLnNlbmRfa2V5
cyhhZGRyZXNzKQogICAgICAgICAgICBpbnB1dGNpdHkgPSBXZWJEcml2ZXJX
YWl0KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRf
bG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BuYW1lPSdjaXR5J10iKSkp
LnNlbmRfa2V5cygnQm9nb3RhJykKICAgICAgICAgICAgaW5wdXRzdGF0ZSA9
IFNlbGVjdChkcml2ZXIuZmluZF9lbGVtZW50KGJ5PUJ5LlhQQVRILCB2YWx1
ZT0iLy9zZWxlY3RbQG5hbWU9J3JlZ2lvbiddIikpLnNlbGVjdF9ieV92YWx1
ZSgnQ08tQ1VOJykKICAgICAgICAgICAgaW5wdXR6aXAgPSBXZWJEcml2ZXJX
YWl0KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRf
bG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BuYW1lPSdwb3N0Y29kZSdd
IikpKS5zZW5kX2tleXMoJzExMDExMScpCgogICAgICAgICAgICBudW1lID0g
ZiIzMXtyYW5kb20ucmFuZGludCgwLCA5KX17Jycuam9pbihyYW5kb20uY2hv
aWNlcygnMDEyMzQ1Njc4OScsIGs9NykpfSIKICAgICAgICAgICAgaW5wdXRw
aG9uZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMucHJl
c2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRb
QG5hbWU9J3RlbGVwaG9uZSddIikpKS5zZW5kX2tleXMobnVtZSkKCiAgICAg
ICAgICAgIHRpbWUuc2xlZXAoMSkKCiAgICAgICAgICAgIGJ0bkNvbnRpbnVl
ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5lbGVtZW50
X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRvbltAY2xhc3M9
J2J0biBwcmltYXJ5IG5leHQtYnV0dG9uJyBhbmQgdGV4dCgpPSdDb250aW51
ZSddIikpKQogICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFy
Z3VtZW50c1swXS5jbGljaygpOyIsIGJ0bkNvbnRpbnVlKQoKICAgICAgICAg
ICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgxLCAzKSkKCiAgICAgICAg
ICAgIHRyeToKICAgICAgICAgICAgICAgIHJlYWRkcnMgPSBXZWJEcml2ZXJX
YWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2th
YmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0BjbGFzcz0nYnRuIHByaW1hcnkn
IGFuZCB0ZXh0KCk9J0NvbnRpbnVlIHdpdGggdGhpcyBhZGRyZXNzJ10iKSkp
CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgZXhjZXB0OgogICAgICAg
ICAgICAgICAgcmVhZGRycyA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCku
dW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAi
Ly9idXR0b25bQGNsYXNzPSdidG4gcHJpbWFyeScgYW5kIHRleHQoKT0nVXNl
IHNlbGVjdGVkIGFkZHJlc3MnXSIpKSkKCiAgICAgICAgICAgIGRyaXZlci5l
eGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgcmVhZGRy
cykKICAgICAgICAgICAgdGltZS5zbGVlcCgxKQoKICAgICAgICAgICAgc2hp
cHBpbmcgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVs
ZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0Bj
bGFzcz0nYnRuIHByaW1hcnknIGFuZCBAbmFtZT0nZHV0eV9wYWlkX3ByZXBh
eSddIikpKQogICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFy
Z3VtZW50c1swXS5jbGljaygpOyIsIHNoaXBwaW5nKQoKICAgICAgICAgICAg
I3NoaXBwaW5nID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChF
Qy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2RpdltA
Y2xhc3M9J3NoaXBwaW5nLW1ldGhvZCcgYW5kIEB0YWJpbmRleD0nMCddIikp
KQogICAgICAgICAgICAjZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVu
dHNbMF0uY2xpY2soKTsiLCBzaGlwcGluZykKICAgICAgICAgICAgI3RpbWUu
c2xlZXAoMSkKCiAgICAgICAgICAgIGJ0bmNvbnRpbnVlID0gV2ViRHJpdmVy
V2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNr
YWJsZSgoQnkuWFBBVEgsICIvL2J1dHRvbltAY2xhc3M9J2J0biBwcmltYXJ5
IG5leHQtYnV0dG9uJyBhbmQgdGV4dCgpPSdDb250aW51ZSddIikpKQogICAg
ICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5j
bGljaygpOyIsIGJ0bmNvbnRpbnVlKQogICAgICAgICAgICB0aW1lLnNsZWVw
KDEpCgogICAgICAgICAgICBidG5DYXJkID0gV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDEwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnku
WFBBVEgsICIvL2J1dHRvbltAY2xhc3M9J2F1dGhuZXRjaW0tYnRuIGF1dGhu
ZXRjaW0tbWV0aG9kIGJ0biBidG4tbGluaycgYW5kIHNwYW5bdGV4dCgpPSdD
cmVkaXQgQ2FyZCddXSIpKSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVf
c2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5DYXJkKQoKICAg
ICAgICAgICAgd2hpbGUgY29udGVvIDw9OSBhbmQgc2VsZi5jb250IDwgc2Vs
Zi50b3RhbF9saW5lczoKCiAgICAgICAgICAgICAgICBjY3MsIG1lcywgYW5v
LCBjY24sIHR5cD0gc3RyKHNlbGYuY2NzW3NlbGYuY29udF0pLnN0cmlwKCkg
LCBzdHIoc2VsZi5tZXNbc2VsZi5jb250XSkuc3RyaXAoKSwgc3RyKHNlbGYu
YW5pb1tzZWxmLmNvbnRdKS5zdHJpcCgpLCBzdHIoc2VsZi5jdnZbc2VsZi5j
b250XSkuc3RyaXAoKSwgc2VsZi50b29scy5iaW50eXBlKHNlbGYuY2NzW3Nl
bGYuY29udF0pCiAgICAgICAgICAgICAgICBkZWFkbXNnID0gIkRFQUR8U05P
V1hDSEt8Sk9NQVNIT1B8JXN8JXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxh
bm8sY2NuLHR5cCkKICAgICAgICAgICAgICAgIGxpdmVtc2cgPSAiTElWRXxT
Tk9XWENIS3xKT01BU0hPUHwlc3wlc3wlc3wlc3wlc1xuIiAlIChjY3MsbWVz
LGFubyxjY24sdHlwKQoKICAgICAgICAgICAgICAgIGlucHV0Y2FyZCA9IFdl
YkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMucHJlc2VuY2Vfb2Zf
ZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdjcmVk
aXRjYXJkbnVtYmVyJ10iKSkpCiAgICAgICAgICAgICAgICBpbnB1dGNhcmQu
Y2xlYXIoKQogICAgICAgICAgICAgICAgaW5wdXRjYXJkLnNlbmRfa2V5cyhz
ZWxmLmNjc1tzZWxmLmNvbnRdKQoKICAgICAgICAgICAgICAgIG1vbnRoID0g
c2VsZi5tZXNbc2VsZi5jb250XS5sc3RyaXAoIjAiKQogICAgICAgICAgICAg
ICAgaW5wdXRtZXMgPSBTZWxlY3QoZHJpdmVyLmZpbmRfZWxlbWVudChieT1C
eS5YUEFUSCwgdmFsdWU9Ii8vc2VsZWN0W0BuYW1lPSdleHBfbW9udGgnXSIp
KS5zZWxlY3RfYnlfdmFsdWUobW9udGgpCiAgICAgICAgICAgICAgICBpbnB1
dHllYXIgPSBTZWxlY3QoZHJpdmVyLmZpbmRfZWxlbWVudChieT1CeS5YUEFU
SCwgdmFsdWU9Ii8vc2VsZWN0W0BuYW1lPSdleHBfeWVhciddIikpLnNlbGVj
dF9ieV92YWx1ZShzZWxmLmFuaW9bc2VsZi5jb250XSkKCiAgICAgICAgICAg
ICAgICBpbnB1dGN2diA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50
aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwg
Ii8vaW5wdXRbQGlkPSdhdXRoLWN2diddIikpKQogICAgICAgICAgICAgICAg
aW5wdXRjdnYuY2xlYXIoKQogICAgICAgICAgICAgICAgaW5wdXRjdnYuc2Vu
ZF9rZXlzKHNlbGYuY3Z2W3NlbGYuY29udF0pCgogICAgICAgICAgICAgICAg
dGltZS5zbGVlcCgxKQoKICAgICAgICAgICAgICAgIGJ0blBheSA9IFdlYkRy
aXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9j
bGlja2FibGUoKEJ5LlhQQVRILCAiLy9idXR0b25bQGNsYXNzPSdidG4gcHJp
bWFyeSddL3NwYW5bdGV4dCgpPSdQYXknXSIpKSkKICAgICAgICAgICAgICAg
IGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7
IiwgYnRuUGF5KQoKICAgICAgICAgICAgICAgICMgUmV2aXNhcgogICAgICAg
ICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgzLCA2KSkKCiAg
ICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAKICAgICAgICAg
ICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVD
LmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9u
W0BjbGFzcz0nYnRuIHByaW1hcnknXS9zcGFuW3RleHQoKT0nUGF5J10iKSkp
CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAg
ICAgICBtc2dEZCA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChF
Qy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9z
cGFuW0BjbGFzcz0nYXBvbGxvLWVycm9yJyBhbmQgY29udGFpbnModGV4dCgp
LCAnVW5hYmxlIHRvIHBsYWNlIG9yZGVyJyldIikpKS50ZXh0CiAgICAgICAg
ICAgICAgICAgICAgICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykK
ICAgICAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAg
ICAgICAgIHRpbWUuc2xlZXAoNTAwKQogICAgICAgICAgICAgICAgCiAgICAg
ICAgICAgICAgICBleGNlcHQ6CgogICAgICAgICAgICAgICAgICAgIHRpbWUu
c2xlZXAocmFuZG9tLnJhbmRpbnQoMywgNikpCiAgICAgICAgICAgICAgICAg
ICAgdXJsID0gZHJpdmVyLmN1cnJlbnRfdXJsCiAgICAgICAgICAgICAgICAg
ICAgaWYgJ3N1Y2Nlc3MnIGluIHVybDoKICAgICAgICAgICAgICAgICAgICAg
ICAgaWYgc2VsZi50b29scy5yZXBldGlyKGNjcykgPT0gVHJ1ZToKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVh
ZG1zZykKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9saXZlLmVtaXQobGl2ZW1z
ZykKICAgICAgICAgICAgICAgICAgICAjIGh0dHBzOi8vd3d3LmpvbWFzaG9w
LmNvbS9jaGVja291dC8jc3VjY2VzcyBMSVZFCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAKICAgICAgICAgICAgICAgIHNlbGYudG9vbHMuYm9ycmFy
Y2MoIiVzfCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbikpCiAgICAg
ICAgICAgICAgICBzZWxmLmNvbnQrPTEKICAgICAgICAgICAgICAgIGNvbnRl
byArPTEKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHNl
bGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0VMSU1JTkFORE8gUkFTVFJFQURPUkVT
IScpCiAgICAgICAgICAgIGRlc2Jhbihkcml2ZXIpCiAgICAgICAgICAgIGRy
aXZlci5xdWl0KCkKICAgICAgICAgICAgY2xvc2VDaHJvbWUoc2VsZikKICAg
ICAgICAgICAgaW5zdGFuY2VfZHJpdmVyID0gb3BlbkJyb3dzZXIoMCxzZWxm
Lm51bTIpCiAgICAgICAgICAgICAKICAgICAgICBleGNlcHQ6CiAgICAgICAg
ICAgICNkZXNiYW4oZHJpdmVyKQogICAgICAgICAgICBkcml2ZXIucXVpdCgp
CiAgICAgICAgICAgIGNsb3NlQ2hyb21lKHNlbGYpCiAgICAgICAgICAgICNp
bnN0YW5jZV9kcml2ZXIgPSBvcGVuQnJvd3NlcigwLHNlbGYubnVtMikKICAg
ICAgICAgICAgZXhjX3R5cGUsIGV4Y19vYmosIGV4Y190YiA9IHN5cy5leGNf
aW5mbygpO2ZuYW1lID0gb3MucGF0aC5zcGxpdChleGNfdGIudGJfZnJhbWUu
Zl9jb2RlLmNvX2ZpbGVuYW1lKVsxXQogICAgICAgICAgICBlcnJvcl9tZXNz
YWdlPSAoc3RyKGV4Y190eXBlKSsnICcrc3RyKGV4Y190Yi50Yl9saW5lbm8p
KQogICAgICAgICAgICBzZWxmLnByaW50ZWQuZW1pdChlcnJvcl9tZXNzYWdl
KQogICAgICAgICAgICBpZiAnc2VsZW5pdW0uY29tbW9uLmV4Y2VwdGlvbnMu
VGltZW91dEV4Y2VwdGlvbicgaW4gZXJyb3JfbWVzc2FnZToKICAgICAgICAg
ICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0V4cGVyaW1lbnRhbmRv
IGZhbGxhcyBkZSBjb25leGlvbiwgZWwgcHJvY2VzbyBzZWd1aXJhLCByZXZp
c2EgdHUgY29uZXhpb24uJykKICAgICAgICAgICAgI3Byb3h5RXJyb3IgPSBw
cm94eUVycm9yICsgMQogICAgICAgICAgICBpbnN0YW5jZV9kcml2ZXIgPSBv
cGVuQnJvd3NlcigwLHNlbGYubnVtMikKICAgICAgICAgICAgCiAgICAgICAg
ICAgIAogICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnVEVTVEVPIEZJTkFM
SVpBRE8nKQoKCgpkZWYgcmVjaGVjayhzZWxmKToKCiAgICBsaXN0YUVtYWls
ID0gW10KICAgIGxpc3RhUHJveGllcyA9IFtdCgogICAgZnJvbSBzZWxlbml1
bS53ZWJkcml2ZXIuY29tbW9uLnByb3h5IGltcG9ydCBQcm94eSwgUHJveHlU
eXBlCgogICAgaWYgbm90IChzZWxmLnVzZXJuYW1lID09ICdzYm9yaW9uJyBv
ciBzZWxmLnVzZXJuYW1lID09ICd3b3JsZGtyb3J5JyBvciBzZWxmLnVzZXJu
YW1lID09ICdBbmRyZXNWYXJnYXMnKToKICAgICAgICAgICAgc2VsZi50ZXh0
X2NoYW5nZWQuZW1pdCgnR0FURSBFTiBNQU5URU5JTUlFTlRPISBYJykKICAg
ICAgICAgICAgcmV0dXJuIE5vbmUgCgogICAgc2VsZi50ZXh0X2NoYW5nZWQu
ZW1pdCgiSU5JQ0lBTkRPIEdBVEUgUkVDSEVDSyIpCgogICAgZGVmIEJhcmtC
b3goc2VsZik6CgogICAgICAgIGNvbnRlbyA9IDAKICAgICAgICBzZWxmLnRl
eHRfY2hhbmdlZC5lbWl0KCJJTklDSUFORE8gR0FURSBEQVJLIikKCiAgICAg
ICAgaWYgbm90IChzZWxmLnVzZXJuYW1lID09ICdzYm9yaW9uJyBvciBzZWxm
LnVzZXJuYW1lID09ICd3b3JsZGtyb3J5JyBvciBzZWxmLnVzZXJuYW1lID09
ICdBbmRyZXNWYXJnYXMnKToKICAgICAgICAgICAgICAgIHNlbGYudGV4dF9j
aGFuZ2VkLmVtaXQoJ0dBVEUgRU4gTUFOVEVOSU1JRU5UTyEgWCcpCiAgICAg
ICAgICAgICAgICByZXR1cm4gTm9uZSAKCiAgICAgICAgd2hpbGUgc2VsZi5j
b250IDwgc2VsZi50b3RhbF9saW5lczoKICAgICAgICAgICAgdHJ5OgogICAg
ICAgICAgICAgICAgaWYgc2VsZi50b29scy52YWxpZGF0ZV9jcmVkaXRvcyhz
ZWxmLnVzZXJuYW1lLHNlbGYucGFzc3dvcmQpID09IFRydWU6CiAgICAgICAg
ICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnQ1JFRElUT1Mg
SU5TVUZJQ0lFTlRFUyA6LycpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJu
IE5vbmUKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZW1haWxm
ID0gc2VsZi5sYXN0MSsnJy5qb2luKHJhbmRvbS5jaG9pY2UoJ0FCQ0RFRkdI
SUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R3eHl6MDEy
MzQ1Njc4OScpIGZvciBfIGluIHJhbmdlKDMpKStzZWxmLmZpcnN0MSsnJy5q
b2luKHJhbmRvbS5jaG9pY2UoJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFla
YWJjZGVmZ2hpamtsbW5vcHFyc3R3eHl6MDEyMzQ1Njc4OScpIGZvciBfIGlu
IHJhbmdlKDMpKSsnQGdtYWlsLmNvbScKICAgICAgICAgICAgICAgICAgICAg
ICAgCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBzZWxm
LnRleHRfY2hhbmdlZC5lbWl0KCdURVNURUFORE8sIEVTUEVSQS4uJykKICAg
ICAgICAKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAg
ICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgICAgICAgICAgV2ViRHJpdmVy
V2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRf
bG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0nZG9nLW5hbWUnXSIp
KSkuc2VuZF9rZXlzKHNlbGYuZmlyc3QxICsgJ0RvZycpCiAgICAgICAgICAg
ICAgICBleGNlcHQ6CgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAg
ICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVu
dGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgs
ICcvLypbQGlkPSJjaGFsbGVuZ2UtcnVubmluZyJdJykpKQogICAgICAgICAg
ICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdCQU4gREUg
SVAhJykKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAg
ICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgICAgICAgICAgICAgZXhj
ZXB0OgogICAgICAgICAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgNSkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVk
KChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdkb2ctbmFtZSddIikpKS5zZW5k
X2tleXMoJ0pvc2UnKQoKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAg
ICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgICAgICBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVf
Y2xpY2thYmxlKChCeS5YUEFUSCwgIi8vbGFiZWxbQGlkPSdtYWxlLWxhYmVs
J10iKSkpLmNsaWNrKCkKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkK
ICAgICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50
aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAnLy8q
W0BpZD0iZnVubmVsLXN0ZXAtZG9nLW5hbWUiXS9mb3JtL2RpdlszXS9kaXYv
YnV0dG9uJykpKS5jbGljaygpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVw
KDEpCiAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjAp
LnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwg
Jy8vKltAaWQ9ImZ1bm5lbC1zdGVwLWRvZy1zaXplIl0vZGl2L2Zvcm0vZGl2
WzFdL2ZpZWxkc2V0WzFdL2xhYmVsJykpKS5jbGljaygpCiAgICAgICAgICAg
ICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgICAgICBXZWJEcml2ZXJX
YWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2th
YmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9ImZ1bm5lbC1zdGVwLWRvZy1zaXpl
Il0vZGl2L2Zvcm0vZGl2WzNdL2Rpdi9idXR0b24nKSkpLmNsaWNrKCkKICAg
ICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgIGRy
aXZlci5nZXQoJ2h0dHBzOi8vd3d3LmJhcmtib3guY29tL3N1YnNjcmliZS90
cmVhdHMnKQogICAgICAgICAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAg
ICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5l
bGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvLypbQGlkPSJm
dW5uZWwtc3RlcC1hbGxlcmdpZXMiXS9mb3JtL2RpdlsyXS9kaXYvYnV0dG9u
JykpKS5jbGljaygpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAg
ICAgICAgICAgICAgICBidG5Db250aW51ZSA9IFdlYkRyaXZlcldhaXQoZHJp
dmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5
LlhQQVRILCAnLy8qW0BpZD0iZnVubmVsLXN0ZXAtZW1haWwiXS9mb3JtL2Rp
dlszXS9kaXYvYnV0dG9uJykpKQogICAgICAgICAgICAgICAgV2ViRHJpdmVy
V2FpdChkcml2ZXIsIDMpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRf
bG9jYXRlZCgoQnkuWFBBVEgsICcvLypbQGlkPSJhY2NvdW50LWVtYWlsIl0n
KSkpLnNlbmRfa2V5cyhlbWFpbGYpCiAgICAgICAgICAgICAgICBidG5Db250
aW51ZS5jbGljaygpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAg
ICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGls
KEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8vKltA
aWQ9ImVkaXRfc3Vic2NyaXB0aW9uX3BsYW5fc2VsZWN0aW9uIl0vZGl2WzJd
L3VsL2xpWzFdL2xhYmVsJykpKS5jbGljaygpCiAgICAgICAgICAgICAgICBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRfdG9f
YmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9ImVkaXRfc3Vic2Ny
aXB0aW9uX3BsYW5fc2VsZWN0aW9uIl0vZGl2WzRdL2Rpdi9kaXYvYnV0dG9u
JykpKS5jbGljaygpIAoKICAgICAgICAgICAgICAgIGRyaXZlci5nZXQoJ2h0
dHBzOi8vd3d3LmJhcmtib3guY29tL3N1YnNjcmliZS9zaGlwcGluZy1hZGRy
ZXNzJykKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMikKCgogICAgICAg
ICAgICAgICAgYnRuQ29udGludWUgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
MjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFU
SCwgJy8vKltAaWQ9ImZ1bm5lbC1zdGVwLXNoaXBwaW5nIl0vZGl2WzFdL2Zv
cm0vZGl2L2Rpdi9idXR0b24nKSkpCgogICAgICAgICAgICAgICAgV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDMpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1l
bnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0nYWRkcmVzcy1m
aXJzdC1uYW1lJ10iKSkpLnNlbmRfa2V5cyhzZWxmLmZpcnN0MSkKICAgICAg
ICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5w
cmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1
dFtAaWQ9J2FkZHJlc3MtbGFzdC1uYW1lJ10iKSkpLnNlbmRfa2V5cyhzZWxm
Lmxhc3QxKQogICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIs
IDMpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnku
WFBBVEgsICIvL2lucHV0W0BpZD0nYWRkcmVzcy1zdHJlZXQxJ10iKSkpLnNl
bmRfa2V5cygnMjgzNyB3aW5kaW5nIGxha2UgcmQnKQogICAgICAgICAgICAg
ICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMpLnVudGlsKEVDLnByZXNlbmNl
X29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0n
YWRkcmVzcy1jaXR5J10iKSkpLnNlbmRfa2V5cygnU3VucmlzZScpCgogICAg
ICAgICAgICAgICAgU2VsZWN0KGRyaXZlci5maW5kX2VsZW1lbnQoYnk9Qnku
WFBBVEgsIHZhbHVlPSIvL3NlbGVjdFtAaWQ9J2FkZHJlc3Mtc3RhdGUnXSAg
ICIpKS5zZWxlY3RfYnlfdmlzaWJsZV90ZXh0KCdGTCcpCiAgICAgICAgICAg
ICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMucHJlc2Vu
Y2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlk
PSdhZGRyZXNzLXppcCddIikpKS5zZW5kX2tleXMoJzMzMzUxJykKICAgICAg
ICAgICAgICAgIHRpbWUuc2xlZXAoMikKCiAgICAgICAgICAgICAgICB0cnk6
CiAgICAgICAgICAgICAgICAgICAgYnRuQ29udGludWUuY2xpY2soKQogICAg
ICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIFdlYkRy
aXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9j
bGlja2FibGUoKEJ5LlhQQVRILCAiLy9zcGFuW0BjbGFzcz0nYnV0dG9uLXRl
eHQnXSIpKSkuY2xpY2soKQoKICAgICAgICAgICAgICAgIHRyeToKICAgICAg
ICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwo
RUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAnLy8qW0Bp
ZD0idXNwcy1hZGRyZXNzLW1vZGFsIl0vZGl2L2RpdlsyXS9kaXYvZGl2L2J1
dHRvbicpKSkuY2xpY2soKQogICAgICAgICAgICAgICAgZXhjZXB0OgogICAg
ICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgICAgICAgICB3aGlsZSBj
b250ZW8gPD0zMCBhbmQgc2VsZi5jb250IDwgc2VsZi50b3RhbF9saW5lczoK
CiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi50b29scy52YWxpZGF0ZV9j
cmVkaXRvcyhzZWxmLnVzZXJuYW1lLHNlbGYucGFzc3dvcmQpID09IFRydWU6
CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVt
aXQoJ0NSRURJVE9TIElOU1VGSUNJRU5URVMgOi8nKQogICAgICAgICAgICAg
ICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgICAgICAgICAgICAgICAgICBz
ZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdBTkFMSVpBTkRPIFJFU1VMVEFET1Mh
JykKCiAgICAgICAgICAgICAgICAgICAgaWZyYW1lMSA9IFdlYkRyaXZlcldh
aXQoZHJpdmVyLCAxNSkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9s
b2NhdGVkKChCeS5YUEFUSCwgIi8vaWZyYW1lW0B0aXRsZT0nQmlsbGluZyBp
bmZvcm1hdGlvbiddIikpKQogICAgICAgICAgICAgICAgICAgIGRyaXZlci5z
d2l0Y2hfdG8uZnJhbWUoaWZyYW1lMSkKCiAgICAgICAgICAgICAgICAgICAg
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDE1KS51bnRpbChFQy5wcmVzZW5jZV9v
Zl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAnL2h0bWwvYm9keS9mb3Jt
L2Rpdi9kaXYvZGl2L2RpdlsxXScpKSkKICAgICAgICAgICAgICAgICAgICBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgMTUpLnVudGlsKEVDLnByZXNlbmNlX29m
X2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0ncmVj
dXJseS1ob3N0ZWQtZmllbGQtaW5wdXQnXSIpKSkuc2VuZF9rZXlzKHNlbGYu
Y2NzW3NlbGYuY29udF0pCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVl
cCgxKQoKICAgICAgICAgICAgICAgICAgICBmb3IgbGV0cmEgaW4gc2VsZi5t
ZXNbc2VsZi5jb250XStzZWxmLmFuaW9bc2VsZi5jb250XVsyOjRdOgogICAg
ICAgICAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMyku
dW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFU
SCwgIi8vaW5wdXRbQHBsYWNlaG9sZGVyPSdNTSAvIFlZJ10iKSkpLnNlbmRf
a2V5cyhsZXRyYSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgCiAgICAgICAgICAgICAgICAgICAgZm9yIGxldHJhIGluIHNlbGYuY3Z2
W3NlbGYuY29udF06CiAgICAgICAgICAgICAgICAgICAgICAgIFdlYkRyaXZl
cldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50
X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAcGxhY2Vob2xkZXI9J0NW
ViddIikpKS5zZW5kX2tleXMobGV0cmEpCiAgICAgICAgICAgICAgICAgICAg
ZHJpdmVyLnN3aXRjaF90by5kZWZhdWx0X2NvbnRlbnQoKQoKICAgICAgICAg
ICAgICAgICAgICBjbGsgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVu
dGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8v
c3BhbltAY2xhc3M9J2J1dHRvbi10ZXh0J10iKSkpCiAgICAgICAgICAgICAg
ICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xp
Y2soKTsiLCBjbGspCgogICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAo
NSkKCiAgICAgICAgICAgICAgICAgICAgY2NzLCBtZXMsIGFubywgY2NuLCB0
eXA9IHN0cihzZWxmLmNjc1tzZWxmLmNvbnRdKS5zdHJpcCgpICwgc3RyKHNl
bGYubWVzW3NlbGYuY29udF0pLnN0cmlwKCksIHN0cihzZWxmLmFuaW9bc2Vs
Zi5jb250XSkuc3RyaXAoKSwgc3RyKHNlbGYuY3Z2W3NlbGYuY29udF0pLnN0
cmlwKCksIHNlbGYudG9vbHMuYmludHlwZShzZWxmLmNjc1tzZWxmLmNvbnRd
KQogICAgICAgICAgICAgICAgICAgIGRlYWRtc2cgPSAiREVBRHxTTk9XWENI
S3xEQVJLfCVzfCVzfCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0
eXApCiAgICAgICAgICAgICAgICAgICAgbGl2ZW1zZyA9ICJMSVZFfFNOT1dY
Q0hLfERBUkt8JXN8JXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2Nu
LHR5cCkKCgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAg
ICAgICAgICBicmFuZCA9IHNlbGYuY2NzW3NlbGYuY29udF1bMDoxXQogICAg
ICAgICAgICAgICAgICAgICAgICBiaW5DQyA9IHNlbGYuY2NzW3NlbGYuY29u
dF1bMDo2XQoKICAgICAgICAgICAgICAgICAgICAgICAgbXNqID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDMwKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVt
ZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9oM1tAY2xhc3M9J2NlbnRlci10
ZXh0J10iKSkpLnRleHQKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICdZ
b3VyIHRyYW5zYWN0aW9uIHdhcyBkZWNsaW5lZC4gUGxlYXNlIHVzZSBhIGRp
ZmZlcmVudCBjYXJkIG9yIGNvbnRhY3QgeW91ciBiYW5rLicgaW4gbXNqOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2RlYWQuZW1p
dChkZWFkbXNnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgI3ByaW50
KGRlYWRtc2csIG1zaikKCiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYg
J1BsZWFzZSBjb250YWN0IHlvdXIgYmFuayBmb3IgZnVydGhlciBkZXRhaWxz
IG9yIHRyeSBhbm90aGVyIGNhcmQuJyBpbiBtc2o6CiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBzZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRtc2cpCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAjcHJpbnQoZGVhZG1zZywgbXNq
KQoKICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnWW91ciBhY2NvdW50
IG51bWJlciBpcyBub3QgdmFsaWQuIFBsZWFzZSB1cGRhdGUgeW91ciBhY2Nv
dW50IG51bWJlci4nIGluIG1zajoKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICNwcmludChkZWFkbXNnLCBtc2opCgogICAgICAg
ICAgICAgICAgICAgICAgICBlbGlmICdUaGUgc2VjdXJpdHkgY29kZSB5b3Ug
ZW50ZXJlZCBkb2VzIG5vdCBtYXRjaC4gUGxlYXNlIHVwZGF0ZSB0aGUgQ1ZW
IGFuZCB0cnkgYWdhaW4uJyBpbiBtc2o6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBpZiBicmFuZCA9PSAnNCc6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc2VsZi50ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICNwcmludChkZWFkbXNnLCBt
c2opCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGJyYW5kID09
ICc1JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWxm
LnRvb2xzLnJlcGV0aXIoY2NzKSA9PSBUcnVlOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRt
c2cpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNwcmlu
dCgnUkVMSVZFOicsIGxpdmVtc2csIG1zaikKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBzZWxmLnRleHRfbGl2ZS5lbWl0KGxpdmVtc2cpCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNwcmludChsaXZlbXNn
LCBtc2opICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVh
ZG1zZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjcHJpbnQo
J1JFVklTQVInLCBtc2osIHNlbGYuY2NzW3NlbGYuY29udF0pCgogICAgICAg
ICAgICAgICAgICAgICAgICBlbGlmICdZb3VyIHRyYW5zYWN0aW9uIHdhcyBk
ZWNsaW5lZCBkdWUgdG8gaW5zdWZmaWNpZW50IGZ1bmRzIGluIHlvdXIgYWNj
b3VudC4gUGxlYXNlIHVzZSBhIGRpZmZlcmVudCBjYXJkIG9yIGNvbnRhY3Qg
eW91ciBiYW5rLicgaW4gbXNqOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgaWYgc2VsZi50b29scy5yZXBldGlyKGNjcykgPT0gVHJ1ZToKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfZGVhZC5lbWl0
KGRlYWRtc2cpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI3By
aW50KCdSRUxJVkU6JywgbGl2ZW1zZywgbXNqKQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBzZWxmLnRleHRfbGl2ZS5lbWl0KGxpdmVtc2cpCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgI3ByaW50KGxpdmVtc2csIG1zaikgCgog
ICAgICAgICAgICAgICAgICAgICAgICBlbGlmICdQbGVhc2UgdmFsaWRhdGUg
aW5mb3JtYXRpb24gYW5kIHRyeSBhZ2Fpbi4gSWYgdGhlIHByb2JsZW0gcGVy
c2lzdHMsIHBsZWFzZSBjb250YWN0IHlvdXIgYmFuay4nIGluIG1zajoKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBpZiBzZWxmLnRvb2xzLnJlcGV0aXIoY2NzKSA9
PSBUcnVlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYu
dGV4dF9kZWFkLmVtaXQoZGVhZG1zZykKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAjcHJpbnQoJ1JFTElWRTonLCBsaXZlbXNnLCBtc2opCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGlmICc1NDI0MzInIGluIGJpbkNDOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfZGVh
ZC5lbWl0KGRlYWRtc2cpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
c2VsZi50ZXh0X2xpdmUuZW1pdChsaXZlbXNnKQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAjcHJpbnQobGl2ZW1zZywgbXNqKQoKICAg
ICAgICAgICAgICAgICAgICAgICAgZWxpZiAnVGhlIHRyYW5zYWN0aW9uIHdh
cyBkZWNsaW5lZC4gUGxlYXNlIGNvbnRhY3Qgc3VwcG9ydC4nIGluIG1zajoK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNvbnRlbyA9PSAwOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFu
Z2VkLmVtaXQoJ0JBTiBERSBJUCEnKQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJl
dHVybiBOb25lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNwcmludCgnQkFORUFE
TycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAg
ICAgICAgICAgICAgICAgICAgICAgZWxpZiBtc2ogPT0gJyc6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAg
ICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50
ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgI3ByaW50KCdSRVZJU0FSJywgbXNqLCBzZWxmLmNjc1tzZWxmLmNv
bnRdKQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAg
ICAgICAgICAgICAgc2VsZi50ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAg
ICAgICAgICAgICAgICAgICAgICAjcHJpbnQoJ1JFVklTQVInLCBtc2osIHNl
bGYuY2NzW3NlbGYuY29udF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBzZWxmLnRvb2xz
LmJvcnJhcmNjKCIlc3wlc3wlc3wlc1xuIiAlIChjY3MsbWVzLGFubyxjY24p
KQogICAgICAgICAgICAgICAgICAgIHNlbGYuY29udCs9MQogICAgICAgICAg
ICAgICAgICAgIGNvbnRlbyArPTEKICAgICAgICAgICAgICAgICAgICBtc2og
PSAnJwogICAgICAgICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVy
LCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQ
QVRILCAiLy9idXR0b25bbm9ybWFsaXplLXNwYWNlKCk9J1JldHVybiB0byBw
YXltZW50J10iKSkpLmNsaWNrKCkgIAogICAgICAgICAgICAKICAgICAgICAg
ICAgICAgIAogICAgICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1p
dCgnRUxJTUlOQU5ETyBSQVNUUkVBRE9SRVMhJykKICAgICAgICAgICAgICAg
IGRlc2Jhbihkcml2ZXIpCiAgICAgICAgICAgICAgICBkcml2ZXIucXVpdCgp
CiAgICAgICAgICAgICAgICBjbG9zZUNocm9tZShzZWxmKQogICAgICAgICAg
ICAgICAgaW5zdGFuY2VfZHJpdmVyID0gb3BlbkJyb3dzZXIoMCxzZWxmLm51
bTIpIAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGV4Y2VwdDoKICAg
ICAgICAgICAgICAgIGRlc2Jhbihkcml2ZXIpCiAgICAgICAgICAgICAgICBk
cml2ZXIucXVpdCgpCiAgICAgICAgICAgICAgICBjbG9zZUNocm9tZShzZWxm
KQogICAgICAgICAgICAgICAgaW5zdGFuY2VfZHJpdmVyID0gb3BlbkJyb3dz
ZXIoMCxzZWxmLm51bTIpIAogICAgICAgICAgICAgICAgZXhjX3R5cGUsIGV4
Y19vYmosIGV4Y190YiA9IHN5cy5leGNfaW5mbygpO2ZuYW1lID0gb3MucGF0
aC5zcGxpdChleGNfdGIudGJfZnJhbWUuZl9jb2RlLmNvX2ZpbGVuYW1lKVsx
XQogICAgICAgICAgICAgICAgZXJyb3JfbWVzc2FnZT0gKHN0cihleGNfdHlw
ZSkrJyAnK3N0cihleGNfdGIudGJfbGluZW5vKSkKICAgICAgICAgICAgICAg
IHNlbGYucHJpbnRlZC5lbWl0KGVycm9yX21lc3NhZ2UpCiAgICAgICAgc2Vs
Zi50ZXh0X2NoYW5nZWQuZW1pdCgnVEVTVEVPIEZJTkFMSVpBRE8nKQogICAg
CiAgICBkZWYgb3Blbl9yZWNoZWNrKGhlYWRsZXNzPVRydWUsIHByb3h5PU5v
bmUpOgogICAgICAgICIiIgogICAgICAgIEFicmUgdW4gbmF2ZWdhZG9yIENo
cm9tZSBjb24gbGEgY29uZmlndXJhY2nDs24gZXNwZWNpZmljYWRhLgogICAg
ICAgICIiIgogICAgICAgIG9wdGlvbnMgPSB3ZWJkcml2ZXIuQ2hyb21lT3B0
aW9ucygpCiAgICAgICAgCiAgICAgICAgIyBDb25maWd1cmFjacOzbiBkZSB1
c2VyIGFnZW50IHkgb3RyYXMgb3BjaW9uZXMKICAgICAgICB1c2VyX2FnZW50
ID0gJ01vemlsbGEvNS4wIChpUGhvbmU7IENQVSBpUGhvbmUgT1MgMTdfNF8x
IGxpa2UgTWFjIE9TIFgpIEFwcGxlV2ViS2l0LzYwNS4xLjE1IChLSFRNTCwg
bGlrZSBHZWNrbykgVmVyc2lvbi8xNy40LjEgTW9iaWxlLzE1RTE0OCBTYWZh
cmkvNjA0LjEnCiAgICAgICAgb3B0aW9ucy5hZGRfYXJndW1lbnQoIi0tYXV0
by1vcGVuLWRldnRvb2xzLWZvci10YWJzIikKICAgICAgICBvcHRpb25zLmFk
ZF9hcmd1bWVudCgiLS1zdGFydC1tYXhpbWl6ZWQiKQogICAgICAgIG9wdGlv
bnMuYWRkX2FyZ3VtZW50KCItLWRpc2FibGUtZXh0ZW5zaW9ucyIpCiAgICAg
ICAgb3B0aW9ucy5hZGRfYXJndW1lbnQoIi0tZGlzYWJsZS1pbmZvYmFycyIp
CiAgICAgICAgb3B0aW9ucy5hZGRfYXJndW1lbnQoIi0tZGlzYWJsZS1wb3B1
cC1ibG9ja2luZyIpCiAgICAgICAgb3B0aW9ucy5hZGRfYXJndW1lbnQoIi0t
ZGlzYWJsZS1ibGluay1mZWF0dXJlcz1BdXRvbWF0aW9uQ29udHJvbGxlZCIp
CiAgICAgICAgb3B0aW9ucy5hZGRfYXJndW1lbnQoIi0tYmxpbmstc2V0dGlu
Z3M9aW1hZ2VzRW5hYmxlZD1mYWxzZSIpCiAgICAgICAgb3B0aW9ucy5hZGRf
YXJndW1lbnQoJy0tbm8tc2FuZGJveCcpCiAgICAgICAgb3B0aW9ucy5hZGRf
YXJndW1lbnQoJy0tZGlzYWJsZS1kZXYtc2htLXVzYWdlJykKICAgICAgICBv
cHRpb25zLmFkZF9hcmd1bWVudCgnLS1kaXNhYmxlLWJyb3dzZXItc2lkZS1u
YXZpZ2F0aW9uJykKICAgICAgICBvcHRpb25zLmFkZF9leHBlcmltZW50YWxf
b3B0aW9uKCJkZXRhY2giLCBUcnVlKQogICAgICAgIG9wdGlvbnMuYWRkX2Fy
Z3VtZW50KCctLWRpc2FibGUtZ3B1JykKICAgICAgICBvcHRpb25zLmFkZF9h
cmd1bWVudChmJ3VzZXItYWdlbnQ9e3VzZXJfYWdlbnR9JykKICAgICAgICBv
cHRpb25zLmFkZF9leHBlcmltZW50YWxfb3B0aW9uKCdleGNsdWRlU3dpdGNo
ZXMnLCBbJ2VuYWJsZS1sb2dnaW5nJ10pCiAgICAgICAgb3B0aW9ucy5hZGRf
ZXhwZXJpbWVudGFsX29wdGlvbigiZXhjbHVkZVN3aXRjaGVzIiwgWyJlbmFi
bGUtYXV0b21hdGlvbiJdKQogICAgICAgIG9wdGlvbnMuYWRkX2V4cGVyaW1l
bnRhbF9vcHRpb24oJ3VzZUF1dG9tYXRpb25FeHRlbnNpb24nLCBGYWxzZSkK
ICAgICAgICBvcHRpb25zLmFkZF9leHBlcmltZW50YWxfb3B0aW9uKCJtb2Jp
bGVFbXVsYXRpb24iLCB7ImRldmljZU5hbWUiOiAiaVBob25lIFgifSkKCiAg
ICAgICAgIyBDb25maWd1cmFjacOzbiBwYXJhIGVsIG1vZG8gaGVhZGxlc3MK
ICAgICAgICBpZiBub3QgaGVhZGxlc3M6CiAgICAgICAgICAgIG9wdGlvbnMu
YWRkX2FyZ3VtZW50KCctLWhlYWRsZXNzJykKCiAgICAgICAgIyBDb25maWd1
cmFjacOzbiBkZWwgcHJveHkgc2kgc2UgcHJvcG9yY2lvbmEKICAgICAgICBp
ZiBwcm94eToKICAgICAgICAgICAgcHJveHlfb2JqID0gUHJveHkoKQogICAg
ICAgICAgICBwcm94eV9vYmoucHJveHlfdHlwZSA9IFByb3h5VHlwZS5NQU5V
QUwKICAgICAgICAgICAgcHJveHlfb2JqLmh0dHBfcHJveHkgPSBwcm94eQog
ICAgICAgICAgICBwcm94eV9vYmouc3NsX3Byb3h5ID0gcHJveHkKICAgICAg
ICAgICAgb3B0aW9ucy5hZGRfYXJndW1lbnQoZictLXByb3h5LXNlcnZlcj17
cHJveHl9JykKCiAgICAgICAgIyBDb25maWd1cmFjacOzbiBkZWwgc2Vydmlj
aW8gQ2hyb21lCiAgICAgICAgY2hyb21lX3NlcnZpY2UgPSBDaHJvbWVTZXJ2
aWNlKENocm9tZURyaXZlck1hbmFnZXIoKS5pbnN0YWxsKCkpCiAgICAgICAg
Y2hyb21lX3NlcnZpY2UuY3JlYXRpb25fZmxhZ3MgPSBDUkVBVEVfTk9fV0lO
RE9XCgogICAgICAgICMgSW5pY2lhbGl6YWNpw7NuIGRlbCBkcml2ZXIgQ2hy
b21lCiAgICAgICAgZHJpdmVyID0gd2ViZHJpdmVyLkNocm9tZShzZXJ2aWNl
PWNocm9tZV9zZXJ2aWNlLCBvcHRpb25zPW9wdGlvbnMpCgogICAgICAgIHJl
dHVybiBkcml2ZXIKCiAgICBkZWYgdmFsaWRhdGVfQmFya2JveChwcm94eSk6
CgogICAgICAgIHRyeToKICAgICAgICAgICAgcHJpbnQoJ1ZlcmlmaWNhbmRv
IGlwIHBhcmEgQmFya2JveCcsIHByb3h5KQogICAgICAgICAgICBpcCA9IHBy
b3h5LnNwbGl0KCcvLycpWzFdLnNwbGl0KCc6JylbMF0KCiAgICAgICAgICAg
IHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KCJodHRwOi8vaHR0cGJpbi5vcmcv
aXAiLCBwcm94aWVzPXsiaHR0cCI6IHByb3h5LCAiaHR0cHMiOiBwcm94eX0s
IHRpbWVvdXQ9MTUpCiAgICAgICAgICAgIGlmIHJlc3BvbnNlLnN0YXR1c19j
b2RlID09IDIwMDoKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAg
ICAgICAgICBwcmludChyZXNwb25zZS5zdGF0dXNfY29kZSkKICAgICAgICAg
ICAgICAgICAgICBpbnN0YW5jZV9kcml2ZXIgPSBvcGVuX3JlY2hlY2soaGVh
ZGxlc3M9RmFsc2UsIHByb3h5PXByb3h5KQogICAgICAgICAgICAgICAgICAg
IGRyaXZlciA9IGluc3RhbmNlX2RyaXZlcgoKCiAgICAgICAgICAgICAgICAg
ICAgZHJpdmVyLmdldCgnaHR0cHM6Ly93d3cuYmFya2JveC5jb20vc3Vic2Ny
aWJlL25hbWUnKQoKICAgICAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgNSkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2Nh
dGVkKChCeS5YUEFUSCwgJy8vKltAaWQ9Im1hbGUtbGFiZWwiXScpKSkKCiAg
ICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgiUFJP
WFkgVkFMSURBRE8sIEVTVEFCTEVDSUVORE8gQ09ORVhJT04uLiIpCiAgICAg
ICAgICAgICAgICAgICAgcHJpbnQoJ1BST1hZIFZBTElEQURPIScpCgogICAg
ICAgICAgICAgICAgICAgIGRlc2Jhbihkcml2ZXIpCiAgICAgICAgICAgICAg
ICAgICAgZHJpdmVyLnF1aXQoKQogICAgICAgICAgICAgICAgICAgIGNsb3Nl
Q2hyb21lKHNlbGYpCgogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNw
b25zZS5zdGF0dXNfY29kZQoKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNl
cHRpb24gYXMgZToKCiAgICAgICAgICAgICAgICAgICAgZHJpdmVyLnF1aXQo
KQogICAgICAgICAgICAgICAgICAgIHByaW50KGYiRXJyb3IgYWwgbmF2ZWdh
ciBjb24gZWwgcHJveHkge3Byb3h5fToge3N0cihlKS5zcGxpdCgnKFNlc3Np
b24gaW5mbzogY2hyb21lPScpWzBdfSIpCiAgICAgICAgICAgICAgICAgICAg
cmV0dXJuIEZhbHNlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAg
ICBwcmludChmIlByb3h5IHtwcm94eX0gbm8gcGVybWl0ZSBjb25leGlvbjoi
LCBlKQogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAg
IAogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAg
cHJpbnQoZiJQcm94eSB7cHJveHl9IG5vIGVzIGZ1bmNpb25hbDoiLCBlKQog
ICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgdmFsaWRhdGVfcHJv
eHkocHJveHkpOgogICAgICAgICIiIgogICAgICAgIFZhbGlkYSBzaSB1biBw
cm94eSBlcyBmdW5jaW9uYWwgaGFjaWVuZG8gdW5hIHNvbGljaXR1ZCBIVFRQ
IGRlIHBydWViYS4KICAgICAgICAiIiIKICAgICAgICB0cnk6CiAgICAgICAg
ICAgIHByaW50KCdWZXJpZmljYW5kbyBpcCcsIHByb3h5KQogICAgICAgICAg
ICBpcCA9IHByb3h5LnNwbGl0KCcvLycpWzFdLnNwbGl0KCc6JylbMF0KCiAg
ICAgICAgICAgIGlmIGlwID09ICcxMTcuMjUwLjMuNTgnIG9yIGlwID09ICcx
NjEuMzUuNzAuMjQ5JzoKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQog
ICAgICAgICAgICAKICAgICAgICAgICAgI3Byb3hpZXMgPSBbCiAgICAgICAg
ICAgICMgICAgJ3NvY2tzNTovLzE5Mi4yNTIuMjExLjE5NzoxNDkyMScsCiAg
ICAgICAgICAgICMgICAgJ3NvY2tzNTovLzY1LjE2OS4zOC43MzoyNjU5Mics
CiAgICAgICAgICAgICMgICAgJ3NvY2tzNTovLzk4LjE4OC40Ny4xNTA6NDE0
NScsCiAgICAgICAgICAgICMgICAgJ3NvY2tzNTovLzE2NS4yMi4yMDQuMzI6
NTkxNjYnLAogICAgICAgICAgICAjICAgICdzb2NrczU6Ly80Ny4yNTQuNDcu
NjE6NjY2NicsCiAgICAgICAgICAgICMgICAgJ3NvY2tzNTovLzEzNy4xODQu
MTgyLjE0NToxODIwNScsCiAgICAgICAgICAgICMgICAnc29ja3M1Oi8vMTg1
Ljg2LjUuMTYyOjg5NzUnLAogICAgICAgICAgICAjICAgICdzb2NrczU6Ly8x
MDQuMjM4LjEwMC4xMTU6NDUzMTQnLAogICAgICAgICAgICAjICAgICdzb2Nr
czU6Ly8xNjUuMjIuMjA0LjMyOjU5MTY2JywKICAgICAgICAgICAgIyAgICAn
c29ja3M1Oi8vMTY2LjAuMjM0Ljc2OjU2MTM2JywKICAgICAgICAgICAgIyAg
ICAnc29ja3M1Oi8vNzIuMTk1LjEwMS45OTo0MTQ1JywKICAgICAgICAgICAg
IyAgICAnc29ja3M1Oi8vNzIuMTk1LjEwMS45OTo0MTQ1JywKICAgICAgICAg
ICAgIyAgICAnc29ja3M1Oi8vNjUuMTY5LjM4LjczOjI2NTkyJywKICAgICAg
ICAgICAgIyAgICAnc29ja3M1Oi8vMTM3LjE4NC4xODIuMTQ1OjE4MjA1JywK
ICAgICAgICAgICAgIyAgICAnc29ja3M1Oi8vMTM3LjE4NC4xODIuMTQ1OjE4
MjA1JywKICAgICAgICAgICAgIyAgICAnc29ja3M1Oi8vMTk5LjU4LjE4NS45
OjQxNDUnLAogICAgICAgICAgICAjICAgIFsnaHR0cDovLzEyOC4xOTkuMjAy
LjEyMjo4MDgwJ10KICAgICAgICAgICAgI10KCiAgICAgICAgICAgICNpZiBu
b3QgcHJveGllczoKICAgICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5n
ZXQoImh0dHA6Ly9odHRwYmluLm9yZy9pcCIsIHByb3hpZXM9eyJodHRwIjog
cHJveHksICJodHRwcyI6IHByb3h5fSwgdGltZW91dD0xNSkKICAgICAgICAg
ICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAg
ICAgICAgdHJ5OgoKICAgICAgICAgICAgICAgICAgICBwcmludChyZXNwb25z
ZS5zdGF0dXNfY29kZSkKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9k
cml2ZXIgPSBvcGVuX3JlY2hlY2soaGVhZGxlc3M9RmFsc2UsIHByb3h5PXBy
b3h5KQogICAgICAgICAgICAgICAgICAgIGRyaXZlciA9IGluc3RhbmNlX2Ry
aXZlcgoKCiAgICAgICAgICAgICAgICAgICAgZHJpdmVyLmdldCgnaHR0cHM6
Ly93d3cuYmFya2JveC5jb20vc3Vic2NyaWJlL25hbWUnKQoKICAgICAgICAg
ICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMu
cHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgJy8vKltA
aWQ9Im1hbGUtbGFiZWwiXScpKSkKCiAgICAgICAgICAgICAgICAgICAgCiAg
ICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRp
b24gYXMgZToKCiAgICAgICAgICAgICAgICAgICAgZHJpdmVyLnF1aXQoKQog
ICAgICAgICAgICAgICAgICAgIHByaW50KGYiRXJyb3IgYWwgbmF2ZWdhciBj
b24gZWwgcHJveHkge3Byb3h5fToge3N0cihlKS5zcGxpdCgnKFNlc3Npb24g
aW5mbzogY2hyb21lPScpWzBdfSIpCiAgICAgICAgICAgICAgICAgICAgcmV0
dXJuIEZhbHNlCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHRy
eToKCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ0FycmFuY2FuZG8gR2F0
ZSBEYXJrJykKICAgICAgICAgICAgICAgICAgICBCYXJrQm94KHNlbGYpCgog
ICAgICAgICAgICAgICAgICAgIGJ0blJlZ2lzdGVyID0gV2ViRHJpdmVyV2Fp
dChkcml2ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxl
KChCeS5YUEFUSCwgIi8vYnV0dG9uW2NvbnRhaW5zKEBjbGFzcywgJ29mYy1i
dG4nKSBhbmQgY29udGFpbnMoQGNsYXNzLCAncHJpbWFyeScpXSIpKSkKCiAg
ICAgICAgICAgICAgICAgICAgIyBUaWVtcG8gZGUgZXNwZXJhIHRvdGFsCiAg
ICAgICAgICAgICAgICAgICAgdG90YWxfd2FpdF90aW1lID0gMTUgICMgc2Vn
dW5kb3MKICAgICAgICAgICAgICAgICAgICBzdGFydF90aW1lID0gdGltZS50
aW1lKCkKCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgdGltZS50aW1lKCkg
LSBzdGFydF90aW1lIDwgdG90YWxfd2FpdF90aW1lOgogICAgICAgICAgICAg
ICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAj
IEludGVudGEgZW5jb250cmFyIGVsIGVsZW1lbnRvIGRlIGVudHJhZGEgZGUg
Y29ycmVvIGVsZWN0csOzbmljbyB5IGVudmlhciBsYXMgdGVjbGFzCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBidG5SZWdpc3RlciA9IFdlYkRyaXZlcldhaXQoZHJpdmVy
LCA1KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBB
VEgsICIvL2J1dHRvbltjb250YWlucyhAY2xhc3MsICdvZmMtYnRuJykgYW5k
IGNvbnRhaW5zKEBjbGFzcywgJ3ByaW1hcnknKV0iKSkpCgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgI2ZpcnN0bmFtZSAKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChF
Qy52aXNpYmlsaXR5X29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIv
L2lucHV0W0BuYW1lPSdmaXJzdG5hbWUnXSIpKSkuc2VuZF9rZXlzKHNlbGYu
Zmlyc3QxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIwogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUp
LnVudGlsKEVDLnZpc2liaWxpdHlfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5Y
UEFUSCwgIi8vaW5wdXRbQG5hbWU9J2xhc3RuYW1lJ10iKSkpLnNlbmRfa2V5
cyhzZWxmLmxhc3QxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWx4ID0gc2VsZi5s
YXN0MSsnJy5qb2luKHJhbmRvbS5jaG9pY2UoJ0FCQ0RFRkdISUpLTE1OT1BR
UlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R3eHl6MDEyMzQ1Njc4OSoj
JykgZm9yIF8gaW4gcmFuZ2UoOCkpKydAZ21haWwuY29tJwogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVu
dGlsKEVDLnZpc2liaWxpdHlfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFU
SCwgIi8vaW5wdXRbQG5hbWU9J2VtYWlsJ10iKSkpLnNlbmRfa2V5cyhlbWFp
bHgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSku
dW50aWwoRUMudmlzaWJpbGl0eV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQ
QVRILCAiLy9pbnB1dFtAbmFtZT0nYWRkcmVzc18xJ10iKSkpLnNlbmRfa2V5
cygnMjg3MyB3aW5kaW5nIGxha2UgcmQnKQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnZp
c2liaWxpdHlfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5w
dXRbQG5hbWU9J2NpdHknXSIpKSkuc2VuZF9rZXlzKCdTdW5yaXNlJykKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFNlbGVjdChkcml2ZXIuZmluZF9lbGVtZW50KGJ5PUJ5
LlhQQVRILCB2YWx1ZT0iLy9zZWxlY3RbQG5hbWU9J3pvbmVfaWQnXSIpKS5z
ZWxlY3RfYnlfdmlzaWJsZV90ZXh0KCdGbG9yaWRhJykKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy52aXNpYmls
aXR5X29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0Bu
YW1lPSdwb3N0Y29kZSddIikpKS5zZW5kX2tleXMoJzMzMzUxJykKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1
KS51bnRpbChFQy52aXNpYmlsaXR5X29mX2VsZW1lbnRfbG9jYXRlZCgoQnku
WFBBVEgsICIvL2lucHV0W0BuYW1lPSd0ZWxlcGhvbmUnXSIpKSkuc2VuZF9r
ZXlzKCczMTU0ODUyMTU0JykKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy52aXNpYmlsaXR5
X29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BuYW1l
PSdwYXNzd29yZCddIikpKS5zZW5kX2tleXMoJ0RpbmVybzEyMyonKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIs
IDUpLnVudGlsKEVDLnZpc2liaWxpdHlfb2ZfZWxlbWVudF9sb2NhdGVkKChC
eS5YUEFUSCwgIi8vaW5wdXRbQG5hbWU9J2NvbmZpcm0nXSIpKSkuc2VuZF9r
ZXlzKCdEaW5lcm8xMjMqJykKCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB0aW1lLnNsZWVwKDEpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRfdG9f
YmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vaW5wdXRbQG5hbWU9J2FncmVl
J10iKSkpLmNsaWNrKCkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0
aW1lLnNsZWVwKDEwKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0
blJlZ2lzdGVyLmNsaWNrKCkKCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBwcmludChlbWFpbHgpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZHJpdmVyLmdldCgnaHR0cHM6Ly93d3cub2ZmaWNlY3JhdmUuY29tL2ludGVw
bGFzdC1ncm91cC12YWxoMzg2MG4xNi5odG1sJykKCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB0aW1lLnNsZWVwKDIpCgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGJ0bkFkZCA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChF
Qy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRv
bltAaWQ9J2J1dHRvbi1jYXJ0J10iKSkpCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNb
MF0uY2xpY2soKTsiLCBidG5BZGQpCgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHRpbWUuc2xlZXAoMikKCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgbGlzdGFFbWFpbC5hcHBlbmQoZW1haWx4KQoKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBwcmludCgnRXJyb3IgYWdyZWdhbmRvIHByb2R1
Y3RvIScpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJl
c3BvbnNlLnN0YXR1c19jb2RlID09IDIwMCwgcmVzcG9uc2UudGV4dAogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAg
ICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICMgU2kgbm8gc2UgZW5jdWVudHJhIGVsIGVsZW1lbnRvLCBh
YnJlIHVuYSBudWV2YSB2ZW50YW5hCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBwcmludCgnUmVpbnRlbnRhbmRvIGNvbmV4aW9uLi4nKQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZHJpdmVyLmdldCgnaHR0cHM6Ly93d3cu
b2ZmaWNlY3JhdmUuY29tL21hbmFnZS1wYXltZW50LW9wdGlvbnMnKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgyKQoKICAgICAg
ICAgICAgICAgICAgICBkcml2ZXIucXVpdCgpCiAgICAgICAgICAgICAgICAg
ICAgcHJpbnQoZiJFcnJvciBhbCBuYXZlZ2FyIGNvbiBlbCBwcm94eSB7cHJv
eHl9OiB7c3RyKGUpfSIpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZh
bHNlICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAK
ICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAg
ICAgICAgICAgICAgICBkcml2ZXIucXVpdCgpCiAgICAgICAgICAgICAgICAg
ICAgcHJpbnQoZiJFcnJvciBhbCBjb25lY3RhciBjb24gZWwgcHJveHkge3By
b3h5fToge3N0cihlKS5zcGxpdCgnKFNlc3Npb24gaW5mbzogY2hyb21lPScp
WzBdfSIpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAg
ICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJpbnQoZiJQcm94eSB7
cHJveHl9IG5vIHBlcm1pdGUgY29uZXhpb246IiwgZSkKICAgICAgICAgICAg
ICAgIHJldHVybiBGYWxzZQogICAgICAgICAgICAjZWxzZTogIyBDSEVDS0VS
IFBST1hJRVMgTE9DQUxFUwogICAgICAgICAgICAjICAgIGZvciBwcm94eSBp
biBwcm94aWVzOgogICAgICAgICAgICAjdHJ5OgogICAgICAgICAgICAjICAg
IHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KCJodHRwOi8vaHR0cGJpbi5vcmcv
aXAiLCBwcm94aWVzPXsiaHR0cCI6IHByb3h5LCAiaHR0cHMiOiBwcm94eX0s
IHRpbWVvdXQ9MTUpCiAgICAgICAgICAgICMgICAgaWYgcmVzcG9uc2Uuc3Rh
dHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICAjICAgICAgICBwcmludChm
IlByb3h5IHtwcm94eX0gZXN0w6EgZnVuY2lvbmFuZG8uIElQIHDDumJsaWNh
OiB7cmVzcG9uc2UuanNvbigpWydvcmlnaW4nXX0iKQogICAgICAgICAgICAj
ICAgICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwCiAg
ICAgICAgICAgICNleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAg
ICMgICAgcHJpbnQoZiJFcnJvciBhbCBjb25lY3RhciBjb24gZWwgcHJveHkg
e3Byb3h5fToge3N0cihlKX0iKQoKICAgICAgICBleGNlcHQgRXhjZXB0aW9u
IGFzIGU6CiAgICAgICAgICAgIHByaW50KGYiUHJveHkge3Byb3h5fSBubyBl
cyBmdW5jaW9uYWw6IiwgZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAg
ICAgICAgCiAgICBkZWYgZ2V0UHJveGllc0dlbyhzZWxmKToKCiAgICAgICAg
bGlzdGFQcm94aWVzID0gW10KCiAgICAgICAgIyBIYWNlciBsYSBzb2xpY2l0
dWQgYSBsYSBBUEkgcGFyYSBvYnRlbmVyIHByb3hpZXMKICAgICAgICBzZWxm
LnRleHRfY2hhbmdlZC5lbWl0KCJPQlRFTklFTkRPIFBST1hZLCBQT1JGQVZP
UiBFU1BFUkUuLiIpCiAgICAgICAgdXJsID0gImh0dHBzOi8vcHJveHlsaXN0
Lmdlb25vZGUuY29tL2FwaS9wcm94eS1saXN0P2xpbWl0PTUwMCZwYWdlPTEm
c29ydF9ieT1sYXN0Q2hlY2tlZCZzb3J0X3R5cGU9ZGVzYyIKICAgICAgICBy
ZXNwb25zZSA9IHJlcXVlc3RzLmdldCh1cmwpCgogICAgICAgICMgTW9kdWxh
ciBvYnRlbmNpb24gZGUgcHJveGllcy4KCiAgICAgICAgIyBWZXJpZmljYXIg
c2kgbGEgc29saWNpdHVkIGZ1ZSBleGl0b3NhCiAgICAgICAgaWYgcmVzcG9u
c2Uuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICBwcm94aWVzX2Rh
dGEgPSByZXNwb25zZS5qc29uKCkKCiAgICAgICAgICAgICMgRmlsdHJhciB5
IHZhbGlkYXIgbG9zIHByb3hpZXMgU09DS1M1IGRlIEFub255bWl0eSBFbGl0
ZQogICAgICAgICAgICBmb3IgcHJveHlfZGF0YSBpbiBwcm94aWVzX2RhdGFb
J2RhdGEnXToKCiAgICAgICAgICAgICAgICBwcm94eV9kYXRhID0gcmFuZG9t
LmNob2ljZShwcm94aWVzX2RhdGFbJ2RhdGEnXSkKICAgICAgICAgICAgICAg
IAogICAgICAgICAgICAgICAgaWYgKHByb3h5X2RhdGFbJ2Fub255bWl0eUxl
dmVsJ10gPT0gJ2VsaXRlJyBhbmQKICAgICAgICAgICAgICAgICAgICAocHJv
eHlfZGF0YVsncHJvdG9jb2xzJ10gPT0gIlsnc29ja3M1J10iIG9yCiAgICAg
ICAgICAgICAgICAgICAgcHJveHlfZGF0YVsncHJvdG9jb2xzJ10gPT0gIlsn
aHR0cCddIikKICAgICAgICAgICAgICAgICAgICAjcHJveHlfZGF0YVsncG9y
dCddID09ICc0NDMnIGFuZAogICAgICAgICAgICAgICAgICAgICNwcm94eV9k
YXRhWydsYXRlbmN5J10gPCAyMDAwCiAgICAgICAgICAgICAgICAgICAgKToK
CgogICAgICAgICAgICAgICAgICAgIHByaW50KGYie3Byb3h5X2RhdGFbJ3By
b3RvY29scyddfTovL3twcm94eV9kYXRhWydpcCddfTp7cHJveHlfZGF0YVsn
cG9ydCddfSIpCiAgICAgICAgICAgICAgICAgICAgaWYgbm90ICh2YWxpZGF0
ZV9CYXJrYm94KGYie3Byb3h5X2RhdGFbJ3Byb3RvY29scyddfTovL3twcm94
eV9kYXRhWydpcCddfTp7cHJveHlfZGF0YVsncG9ydCddfSIpID09IEZhbHNl
KToKCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2Vk
LmVtaXQoIlBST1hZIFZBTElEQURPLCBFU1RBQkxFQ0lFTkRPIENPTkVYSU9O
Li4iKQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnUFJPWFkgVkFM
SURBRE8hJykKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ0lORk8g
UFJPWFk6ICcsIHByb3h5X2RhdGEpCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgcHJveHkgPSBmIntwcm94
eV9kYXRhWydwcm90b2NvbHMnXX06Ly97cHJveHlfZGF0YVsnaXAnXX06e3By
b3h5X2RhdGFbJ3BvcnQnXX0iCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAKICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGFQcm94aWVzLmFwcGVu
ZChwcm94eSkKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAg
ICAgICAgICAgICAgIHByaW50KHByb3h5KQoKICAgICAgICAgICAgICAgIGVs
c2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ1Byb3h5IG1hbG8hJykK
CiAgICAgICAgICAgIHJldHVybiBsaXN0YVByb3hpZXMKCiAgICAgICAgZWxz
ZToKICAgICAgICAgICAgcHJpbnQoIkVycm9yIGFsIGhhY2VyIGxhIHNvbGlj
aXR1ZDoiLCByZXNwb25zZS5zdGF0dXNfY29kZSkKCiAgICBkZWYgZ2V0UHJv
eGllcyhzZWxmKToKCiAgICAgICAgbGlzdGFQcm94aWVzID0gW10KCiAgICAg
ICAgIyBIYWNlciBsYSBzb2xpY2l0dWQgYSBsYSBBUEkgcGFyYSBvYnRlbmVy
IHByb3hpZXMKICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCJPQlRF
TklFTkRPIFBST1hZLCBQT1JGQVZPUiBFU1BFUkUuLiIpCiAgICAgICAgdXJs
ID0gImh0dHBzOi8vYXBpLnByb3h5c2NyYXBlLmNvbS92My9mcmVlLXByb3h5
LWxpc3QvZ2V0P3JlcXVlc3Q9ZGlzcGxheXByb3hpZXMmcHJvdG9jb2w9c29j
a3M1LGh0dHAmc2tpcD0wJnByb3h5X2Zvcm1hdD1wcm90b2NvbGlwcG9ydCZm
b3JtYXQ9anNvbiZsaW1pdD0xMDAmYW5vbnltaXR5PUVsaXRlJnRpbWVvdXQ9
MTAwMCIKICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldCh1cmwpCgog
ICAgICAgICMgTW9kdWxhciBvYnRlbmNpb24gZGUgcHJveGllcy4KCiAgICAg
ICAgIyBWZXJpZmljYXIgc2kgbGEgc29saWNpdHVkIGZ1ZSBleGl0b3NhCiAg
ICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAg
ICAgICBwcm94aWVzX2RhdGEgPSByZXNwb25zZS5qc29uKCkKCiAgICAgICAg
ICAgICMgRmlsdHJhciB5IHZhbGlkYXIgbG9zIHByb3hpZXMgU09DS1M1IGRl
IEFub255bWl0eSBFbGl0ZQogICAgICAgICAgICBmb3IgcHJveHlfZGF0YSBp
biBwcm94aWVzX2RhdGFbJ3Byb3hpZXMnXToKCiAgICAgICAgICAgICAgICBw
cm94eV9kYXRhID0gcmFuZG9tLmNob2ljZShwcm94aWVzX2RhdGFbJ3Byb3hp
ZXMnXSkKCiAgICAgICAgICAgICAgICBpZiAocHJveHlfZGF0YVsnYW5vbnlt
aXR5J10gPT0gJ2VsaXRlJyBhbmQKICAgICAgICAgICAgICAgICAgICAocHJv
eHlfZGF0YVsncHJvdG9jb2wnXSA9PSAnc29ja3M1JyBvcgogICAgICAgICAg
ICAgICAgICAgIHByb3h5X2RhdGFbJ3Byb3RvY29sJ10gPT0gJ2h0dHAnKSBh
bmQKICAgICAgICAgICAgICAgICAgICAjcHJveHlfZGF0YVsncG9ydCddID09
ICc0NDMnIGFuZAogICAgICAgICAgICAgICAgICAgIHByb3h5X2RhdGFbJ3Rp
bWVvdXQnXSA8IDIwMDApOiMgYW5kCgogICAgICAgICAgICAgICAgICAgIGlm
IG5vdCAodmFsaWRhdGVfQmFya2JveChmIntwcm94eV9kYXRhWydwcm90b2Nv
bCddfTovL3twcm94eV9kYXRhWydpcCddfTp7cHJveHlfZGF0YVsncG9ydCdd
fSIpID09IEZhbHNlKToKCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYu
dGV4dF9jaGFuZ2VkLmVtaXQoIlBST1hZIFZBTElEQURPLCBFU1RBQkxFQ0lF
TkRPIENPTkVYSU9OLi4iKQogICAgICAgICAgICAgICAgICAgICAgICBwcmlu
dCgnUFJPWFkgVkFMSURBRE8hJykKICAgICAgICAgICAgICAgICAgICAgICAg
cHJpbnQoJ0lORk8gUFJPWFk6ICcsIHByb3h5X2RhdGEpCiAgICAgICAgICAg
ICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBwcm94eSA9
IGYie3Byb3h5X2RhdGFbJ3Byb3RvY29sJ119Oi8ve3Byb3h5X2RhdGFbJ2lw
J119Ontwcm94eV9kYXRhWydwb3J0J119IgogICAgICAgICAgICAgICAgICAg
ICAgICAjcHJveHkgPSBmInNvY2tzNTovL3twcm94eV9kYXRhWydpcCddfTp7
cHJveHlfZGF0YVsncG9ydCddfSIKCiAgICAgICAgICAgICAgICAgICAgICAg
IGxpc3RhUHJveGllcy5hcHBlbmQocHJveHkpCgogICAgICAgICAgICAgICAg
ICAgICAgICAjIEVMSU1JTkFSIFBBUkEgVVNBUiBTT0xPIDEKICAgICAgICAg
ICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RhUHJveGllcwogICAgICAgICAg
ICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBwcmludChwcm94
eSkKCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAg
IHByaW50KCdQcm94eSBtYWxvIScpCgogICAgICAgICAgICByZXR1cm4gbGlz
dGFQcm94aWVzCgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KCJF
cnJvciBhbCBoYWNlciBsYSBzb2xpY2l0dWQ6IiwgcmVzcG9uc2Uuc3RhdHVz
X2NvZGUpCgogICAgI2lmIG5vdCBsaXN0YVByb3hpZXM6CiAgICAjICAgIGxp
c3RhUHJveGllcyA9IGdldFByb3hpZXMoc2VsZikKCiAgICAjcHJpbnQobGlz
dGFQcm94aWVzKQoKICAgICNwcm94eSA9IHJhbmRvbS5jaG9pY2UobGlzdGFQ
cm94aWVzKQogICAgcHJveHkgPSBOb25lCiAgICBwcmludCgnRXN0YXMgdXNh
bmRvJywgcHJveHkpCiAgICBwcm94eUVycm9yID0gMAoKCiAgICBwcmludCgn
SW5pY2lhbmRvIHRlc3Rlby4nKQoKICAgICNpbnN0YW5jZV9kcml2ZXIgPSBv
cGVuX3JlY2hlY2soaGVhZGxlc3M9RmFsc2UsIHByb3h5PXByb3h5KQogICAg
aW5zdGFuY2VfZHJpdmVyID0gb3Blbl9yZWNoZWNrKGhlYWRsZXNzPXNlbGYu
bnVtMiwgcHJveHk9cHJveHkpCiAgICBkcml2ZXIgPSBpbnN0YW5jZV9kcml2
ZXIKCiAgICBkcml2ZXIuZ2V0KCdodHRwczovL3d3dy5iYXJrYm94LmNvbS9z
dWJzY3JpYmUvbmFtZScpCgogICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUp
LnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBB
VEgsICcvLypbQGlkPSJtYWxlLWxhYmVsIl0nKSkpCgogICAgc2VsZi50ZXh0
X2NoYW5nZWQuZW1pdCgiUFJPWFkgVkFMSURBRE8sIEVTVEFCTEVDSUVORE8g
Q09ORVhJT04uLiIpCiAgICBwcmludCgnUFJPWFkgVkFMSURBRE8hJykKCiAg
ICAKICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoIklOSUNJQU5ETyBHQVRF
IERBUksiKQoKICAgIGlmIG5vdCAoc2VsZi51c2VybmFtZSA9PSAnc2Jvcmlv
bicgb3Igc2VsZi51c2VybmFtZSA9PSAnd29ybGRrcm9yeScgb3Igc2VsZi51
c2VybmFtZSA9PSAnQW5kcmVzVmFyZ2FzJyk6CiAgICAgICAgICAgIHNlbGYu
dGV4dF9jaGFuZ2VkLmVtaXQoJ0dBVEUgRU4gTUFOVEVOSU1JRU5UTyEgWCcp
CiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAKICAgIHdoaWxlIHNlbGYu
Y29udCA8IHNlbGYudG90YWxfbGluZXM6CgogICAgICAgIGNvbnRlbyA9IDAK
CiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZiBzZWxmLnRvb2xzLnZhbGlk
YXRlX2NyZWRpdG9zKHNlbGYudXNlcm5hbWUsc2VsZi5wYXNzd29yZCkgPT0g
VHJ1ZToKICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQo
J0NSRURJVE9TIElOU1VGSUNJRU5URVMgOi8nKQogICAgICAgICAgICAgICAg
cmV0dXJuIE5vbmUKICAgICAgICAgICAgCiAgICAgICAgICAgIGVtYWlsZiA9
IHNlbGYubGFzdDErJycuam9pbihyYW5kb20uY2hvaWNlKCdBQkNERUZHSElK
S0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0d3h5ejAxMjM0
NTY3ODknKSBmb3IgXyBpbiByYW5nZSgzKSkrc2VsZi5maXJzdDErJycuam9p
bihyYW5kb20uY2hvaWNlKCdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFi
Y2RlZmdoaWprbG1ub3BxcnN0d3h5ejAxMjM0NTY3ODknKSBmb3IgXyBpbiBy
YW5nZSgzKSkrJ0BnbWFpbC5jb20nCiAgICAgICAgICAgICAgICAgICAgCiAg
ICAgICAgICAgICAgICAKICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQu
ZW1pdCgnVEVTVEVBTkRPLCBFU1BFUkEuLicpCgogICAgICAgICAgICBkcml2
ZXIgPSBpbnN0YW5jZV9kcml2ZXIKCiAgICAgICAgICAgIGRyaXZlci5nZXQo
J2h0dHBzOi8vd3d3LmJhcmtib3guY29tL3N1YnNjcmliZS9uYW1lJykKCiAg
ICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQo
ZHJpdmVyLCAzKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0
ZWQoKEJ5LklELCAnY2hhbGxlbmdlLXJ1bm5pbmcnKSkpICAgCiAgICAgICAg
ICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdJUCBCQU4hIENBTUJJ
QSBUVSBJUCcpCiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAg
ICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgICAg
ICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMucHJlc2VuY2Vf
b2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgJy8vKltAaWQ9Im1hbGUt
bGFiZWwiXScpKSkKICAgIAogICAgICAgICAgICB0cnk6CiAgICAgICAgICAg
ICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDEsIDUpKQogICAgICAg
ICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnBy
ZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0
W0BpZD0nZG9nLW5hbWUnXSIpKSkuc2VuZF9rZXlzKHNlbGYuZmlyc3QxICsg
J0RvZycpCiAgICAgICAgICAgIGV4Y2VwdDoKCiAgICAgICAgICAgICAgICB0
cnk6CiAgICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIs
IDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnku
WFBBVEgsICcvLypbQGlkPSJjaGFsbGVuZ2UtcnVubmluZyJdJykpKQogICAg
ICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0JBTiBE
RSBJUCEnKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAg
ICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0VMSU1JTkFORE8gUkFTVFJF
QURPUkVTIScpCiAgICAgICAgICAgICAgICAgICAgZGVzYmFuKGRyaXZlcikK
ICAgICAgICAgICAgICAgICAgICBkcml2ZXIucXVpdCgpCiAgICAgICAgICAg
ICAgICAgICAgY2xvc2VDaHJvbWUoc2VsZikKCiAgICAgICAgICAgICAgICAg
ICAgI2xpc3RhUHJveGllcyA9IGdldFByb3hpZXMoc2VsZikKICAgICAgICAg
ICAgICAgICAgICBwcm94eSA9IHJhbmRvbS5jaG9pY2UobGlzdGFQcm94aWVz
KQogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2RyaXZlciA9IG9wZW5f
cmVjaGVjayhoZWFkbGVzcz1zZWxmLm51bTIsIHByb3h5PU5vbmUpCiAgICAg
ICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAg
ICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGls
KEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIv
L2lucHV0W0BpZD0nZG9nLW5hbWUnXSIpKSkuc2VuZF9rZXlzKCdKb3NlJykK
CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHRpbWUuc2xlZXAo
cmFuZG9tLnJhbmRpbnQoMSwgMykpCiAgICAgICAgICAgIFdlYkRyaXZlcldh
aXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2Fi
bGUoKEJ5LlhQQVRILCAiLy9sYWJlbFtAaWQ9J21hbGUtbGFiZWwnXSIpKSku
Y2xpY2soKQogICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50
KDEsIDMpKQogICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjAp
LnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwg
Jy8vKltAaWQ9ImZ1bm5lbC1zdGVwLWRvZy1uYW1lIl0vZm9ybS9kaXZbM10v
ZGl2L2J1dHRvbicpKSkuY2xpY2soKQogICAgICAgICAgICB0aW1lLnNsZWVw
KHJhbmRvbS5yYW5kaW50KDEsIDMpKQogICAgICAgICAgICBXZWJEcml2ZXJX
YWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2th
YmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9ImZ1bm5lbC1zdGVwLWRvZy1zaXpl
Il0vZGl2L2Zvcm0vZGl2WzFdL2ZpZWxkc2V0WzFdL2xhYmVsJykpKS5jbGlj
aygpCiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMSwg
MykpCiAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50
aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAnLy8q
W0BpZD0iZnVubmVsLXN0ZXAtZG9nLXNpemUiXS9kaXYvZm9ybS9kaXZbM10v
ZGl2L2J1dHRvbicpKSkuY2xpY2soKQogICAgICAgICAgICBkcml2ZXIuZ2V0
KCdodHRwczovL3d3dy5iYXJrYm94LmNvbS9zdWJzY3JpYmUvdHJlYXRzJykK
CiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMSwgNSkp
CiAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwo
RUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAnLy8qW0Bp
ZD0iZnVubmVsLXN0ZXAtYWxsZXJnaWVzIl0vZm9ybS9kaXZbMl0vZGl2L2J1
dHRvbicpKSkKICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGlu
dCgxLCA1KSkKICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIw
KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgs
ICcvLypbQGlkPSJmdW5uZWwtc3RlcC1hbGxlcmdpZXMiXS9mb3JtL2Rpdlsy
XS9kaXYvYnV0dG9uJykpKS5jbGljaygpCgogICAgICAgICAgICB0aW1lLnNs
ZWVwKDEpCiAgICAgICAgICAgIGJ0bkNvbnRpbnVlID0gV2ViRHJpdmVyV2Fp
dChkcml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJs
ZSgoQnkuWFBBVEgsICcvLypbQGlkPSJmdW5uZWwtc3RlcC1lbWFpbCJdL2Zv
cm0vZGl2WzNdL2Rpdi9idXR0b24nKSkpCgogICAgICAgICAgICBpbnB1dEVt
YWlsID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMpLnVudGlsKEVDLnByZXNl
bmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICcvLypbQGlkPSJh
Y2NvdW50LWVtYWlsIl0nKSkpCiAgICAgICAgICAgIGlucHV0RW1haWwuY2xl
YXIoKQogICAgICAgICAgICBpbnB1dEVtYWlsLnNlbmRfa2V5cyhlbWFpbGYp
CgogICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDEsIDMp
KQoKICAgICAgICAgICAgYnRuQ29udGludWUuY2xpY2soKQogICAgICAgICAg
ICB0aW1lLnNsZWVwKDEpCgogICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChC
eS5YUEFUSCwgJy8vKltAaWQ9ImVkaXRfc3Vic2NyaXB0aW9uX3BsYW5fc2Vs
ZWN0aW9uIl0vZGl2WzJdL3VsL2xpWzFdL2xhYmVsJykpKS5jbGljaygpCiAg
ICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMu
ZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAnLy8qW0BpZD0i
ZWRpdF9zdWJzY3JpcHRpb25fcGxhbl9zZWxlY3Rpb24iXS9kaXZbNF0vZGl2
L2Rpdi9idXR0b24nKSkpLmNsaWNrKCkgCgogICAgICAgICAgICBkcml2ZXIu
Z2V0KCdodHRwczovL3d3dy5iYXJrYm94LmNvbS9zdWJzY3JpYmUvc2hpcHBp
bmctYWRkcmVzcycpCiAgICAgICAgICAgIAogICAgICAgICAgICB0aW1lLnNs
ZWVwKHJhbmRvbS5yYW5kaW50KDEsIDUpKQoKICAgICAgICAgICAgdHJ5Ogog
ICAgICAgICAgICAgICAgbXNnRXJyb3IgPSBXZWJEcml2ZXJXYWl0KGRyaXZl
ciwgMykudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChC
eS5YUEFUSCwgIi9odG1sL2JvZHkvZGl2L2RpdlsyXS9oMiIpKSkudGV4dAog
ICAgICAgICAgICAgICAgaWYgJ1J1aC1yb2ghIFNvbWV0aGluZyB3ZW50IHdy
b25nLi4uJyBpbiBtc2dFcnJvcjoKICAgICAgICAgICAgICAgICAgICBjb250
aW51ZQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBwYXNz
CgogICAgICAgICAgICBidG5Db250aW51ZSA9IFdlYkRyaXZlcldhaXQoZHJp
dmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5
LlhQQVRILCAnLy8qW0BpZD0iZnVubmVsLXN0ZXAtc2hpcHBpbmciXS9kaXZb
MV0vZm9ybS9kaXYvZGl2L2J1dHRvbicpKSkKCiAgICAgICAgICAgIHRpbWUu
c2xlZXAocmFuZG9tLnJhbmRpbnQoMSwgNSkpCgogICAgICAgICAgICBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxl
bWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdhZGRyZXNz
LWZpcnN0LW5hbWUnXSIpKSkuc2VuZF9rZXlzKHNlbGYuZmlyc3QxKQogICAg
ICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMucHJl
c2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRb
QGlkPSdhZGRyZXNzLWxhc3QtbmFtZSddIikpKS5zZW5kX2tleXMoc2VsZi5s
YXN0MSkKICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMpLnVu
dGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgs
ICIvL2lucHV0W0BpZD0nYWRkcmVzcy1zdHJlZXQxJ10iKSkpLnNlbmRfa2V5
cygnMjgzNyB3aW5kaW5nIGxha2UgcmQnKQogICAgICAgICAgICBXZWJEcml2
ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVu
dF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdhZGRyZXNzLWNp
dHknXSIpKSkuc2VuZF9rZXlzKCdTdW5yaXNlJykKCiAgICAgICAgICAgIFNl
bGVjdChkcml2ZXIuZmluZF9lbGVtZW50KGJ5PUJ5LlhQQVRILCB2YWx1ZT0i
Ly9zZWxlY3RbQGlkPSdhZGRyZXNzLXN0YXRlJ10gICAiKSkuc2VsZWN0X2J5
X3Zpc2libGVfdGV4dCgnRkwnKQogICAgICAgICAgICBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgMykudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2Nh
dGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdhZGRyZXNzLXppcCddIikp
KS5zZW5kX2tleXMoJzMzMzUxJykKICAgICAgICAgICAgdGltZS5zbGVlcCgy
KQoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgYnRuQ29udGlu
dWUuY2xpY2soKQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAg
ICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRf
dG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vc3BhbltAY2xhc3M9J2J1
dHRvbi10ZXh0J10iKSkpLmNsaWNrKCkKCiAgICAgICAgICAgIHRyeToKICAg
ICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChF
Qy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvLypbQGlk
PSJ1c3BzLWFkZHJlc3MtbW9kYWwiXS9kaXYvZGl2WzJdL2Rpdi9kaXYvYnV0
dG9uJykpKS5jbGljaygpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAg
ICAgICAgIHBhc3MKCiAgICAgICAgICAgIHdoaWxlIGNvbnRlbyA8PTkgYW5k
IHNlbGYuY29udCA8IHNlbGYudG90YWxfbGluZXM6CgogICAgICAgICAgICAg
ICAgaWYgc2VsZi50b29scy52YWxpZGF0ZV9jcmVkaXRvcyhzZWxmLnVzZXJu
YW1lLHNlbGYucGFzc3dvcmQpID09IFRydWU6CiAgICAgICAgICAgICAgICAg
ICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnQ1JFRElUT1MgSU5TVUZJQ0lF
TlRFUyA6LycpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAg
ICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdJTlRFTlRB
TkRPIFBBR08hJykKCiAgICAgICAgICAgICAgICBpZnJhbWUxID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDE1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVt
ZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pZnJhbWVbQHRpdGxlPSdCaWxs
aW5nIGluZm9ybWF0aW9uJ10iKSkpCiAgICAgICAgICAgICAgICBkcml2ZXIu
c3dpdGNoX3RvLmZyYW1lKGlmcmFtZTEpCgogICAgICAgICAgICAgICAgV2Vi
RHJpdmVyV2FpdChkcml2ZXIsIDE1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9l
bGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAnL2h0bWwvYm9keS9mb3JtL2Rp
di9kaXYvZGl2L2RpdlsxXScpKSkKICAgICAgICAgICAgICAgIGlucHV0Q0Mg
PSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTUpLnVudGlsKEVDLnByZXNlbmNl
X29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0n
cmVjdXJseS1ob3N0ZWQtZmllbGQtaW5wdXQnXSIpKSkuc2VuZF9rZXlzKHNl
bGYuY2NzW3NlbGYuY29udF0pCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVw
KDEpCgogICAgICAgICAgICAgICAgZm9yIGxldHJhIGluIHNlbGYubWVzW3Nl
bGYuY29udF0rc2VsZi5hbmlvW3NlbGYuY29udF1bMjo0XToKICAgICAgICAg
ICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0
RmVjaGEgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMucHJl
c2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRb
QHBsYWNlaG9sZGVyPSdNTSAvIFlZJ10iKSkpLnNlbmRfa2V5cyhsZXRyYSkK
ICAgICAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAg
ICAgICAgIHRyeTogICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAj
IEVzcGVyYXIgaGFzdGEgMTAgc2VndW5kb3MgcGFyYSBxdWUgYXBhcmV6Y2Eg
bGEgYWxlcnRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXZWJEcml2
ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMuYWxlcnRfaXNfcHJlc2VudCgp
KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQgPSBkcml2ZXIu
c3dpdGNoX3RvLmFsZXJ0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBh
bGVydC5hY2NlcHQoKQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnRXJyb3Igc2Fs
dGFuZG8gYWxlcnRhJykKCiAgICAgICAgICAgICAgICBmb3IgbGV0cmEgaW4g
c2VsZi5jdnZbc2VsZi5jb250XToKICAgICAgICAgICAgICAgICAgICBpbnB1
dENWViA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5wcmVz
ZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtA
cGxhY2Vob2xkZXI9J0NWViddIikpKS5zZW5kX2tleXMobGV0cmEpCiAgICAg
ICAgICAgICAgICBkcml2ZXIuc3dpdGNoX3RvLmRlZmF1bHRfY29udGVudCgp
CgogICAgICAgICAgICAgICAgY2xrID0gV2ViRHJpdmVyV2FpdChkcml2ZXIs
IDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBB
VEgsICIvL3NwYW5bQGNsYXNzPSdidXR0b24tdGV4dCddIikpKQogICAgICAg
ICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0u
Y2xpY2soKTsiLCBjbGspCgogICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1
KQoKICAgICAgICAgICAgICAgIGNjcywgbWVzLCBhbm8sIGNjbiwgdHlwPSBz
dHIoc2VsZi5jY3Nbc2VsZi5jb250XSkuc3RyaXAoKSAsIHN0cihzZWxmLm1l
c1tzZWxmLmNvbnRdKS5zdHJpcCgpLCBzdHIoc2VsZi5hbmlvW3NlbGYuY29u
dF0pLnN0cmlwKCksIHN0cihzZWxmLmN2dltzZWxmLmNvbnRdKS5zdHJpcCgp
LCBzZWxmLnRvb2xzLmJpbnR5cGUoc2VsZi5jY3Nbc2VsZi5jb250XSkKICAg
ICAgICAgICAgICAgIGRlYWRtc2cgPSAiREVBRHxTTk9XWENIS3xEQVJLfCVz
fCVzfCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXApCiAgICAg
ICAgICAgICAgICBsaXZlbXNnID0gIkxJVkV8U05PV1hDSEt8REFSS3wlc3wl
c3wlc3wlc3wlc1xuIiAlIChjY3MsbWVzLGFubyxjY24sdHlwKQoKICAgICAg
ICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0FOQUxJWkFORE8g
UkVTVUxUQURPUyEnKQoKICAgICAgICAgICAgICAgIHRyeToKCiAgICAgICAg
ICAgICAgICAgICAgZXJyb3JJbmZvID0gV2ViRHJpdmVyV2FpdChkcml2ZXIs
IDIpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnku
WFBBVEgsICcvLypbQGlkPSJwYXltZW50LWZvcm0iXS9kaXZbNF0vZGl2L2Rp
dlsxXS9kaXZbMl0nKSkpLnRleHQKICAgICAgICAgICAgICAgICAgICBjb250
aW51ZQoKICAgICAgICAgICAgICAgIGV4Y2VwdDoKCiAgICAgICAgICAgICAg
ICAgICAgdHJ5OgoKICAgICAgICAgICAgICAgICAgICAgICAgbXNnRXJyb3Ig
PSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMikudW50aWwoRUMucHJlc2VuY2Vf
b2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vZGl2W0BjbGFzcz0n
Zm9ybS1pbnB1dC10ZXh0LWVycm9yLW1lc3NhZ2UnXSIpKSkudGV4dAoKICAg
ICAgICAgICAgICAgICAgICAgICAgaWYgJ0Vycm9yOiBDcmVkaXQgY2FyZCBp
bmZvIGlzIHJlcXVpcmVkLicgaW4gbXNnRXJyb3I6CiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBwcmludChtc2dFcnJvcikKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGlucHV0Q0MuY2xlYXIoKQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgaW5wdXRGZWNoYS5jbGVhcigpCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBpbnB1dENWVi5jbGVhcigpCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdSRUlOVEVO
VEFORE8gUEFHTyEnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlt
ZS5zbGVlcCgxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGlu
dWUKCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0OgoKICAgICAgICAgICAg
ICAgICAgICAgICAgcGFzcwoKICAgICAgICAgICAgICAgIHRyeToKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAg
ICAgICAgYnJhbmQgPSBzZWxmLmNjc1tzZWxmLmNvbnRdWzA6MV0KICAgICAg
ICAgICAgICAgICAgICBiaW5DQyA9IHNlbGYuY2NzW3NlbGYuY29udF1bMDo2
XQoKICAgICAgICAgICAgICAgICAgICBtc2ogPSBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgMzApLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRl
ZCgoQnkuWFBBVEgsICIvL2gzW0BjbGFzcz0nY2VudGVyLXRleHQnXSIpKSku
dGV4dAoKICAgICAgICAgICAgICAgICAgICBpZiAnWW91ciB0cmFuc2FjdGlv
biB3YXMgZGVjbGluZWQuIFBsZWFzZSB1c2UgYSBkaWZmZXJlbnQgY2FyZCBv
ciBjb250YWN0IHlvdXIgYmFuay4nIGluIG1zajoKICAgICAgICAgICAgICAg
ICAgICAgICAgc2VsZi50ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAgICAg
ICAgICAgICAgICAgICAgICAjcHJpbnQoZGVhZG1zZywgbXNqKQoKICAgICAg
ICAgICAgICAgICAgICBlbGlmICdQbGVhc2UgY29udGFjdCB5b3VyIGJhbmsg
Zm9yIGZ1cnRoZXIgZGV0YWlscyBvciB0cnkgYW5vdGhlciBjYXJkLicgaW4g
bXNqOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfZGVhZC5l
bWl0KGRlYWRtc2cpCiAgICAgICAgICAgICAgICAgICAgICAgICNwcmludChk
ZWFkbXNnLCBtc2opCgogICAgICAgICAgICAgICAgICAgIGVsaWYgJ1lvdXIg
YWNjb3VudCBudW1iZXIgaXMgbm90IHZhbGlkLiBQbGVhc2UgdXBkYXRlIHlv
dXIgYWNjb3VudCBudW1iZXIuJyBpbiBtc2o6CiAgICAgICAgICAgICAgICAg
ICAgICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykKICAgICAgICAg
ICAgICAgICAgICAgICAgI3ByaW50KGRlYWRtc2csIG1zaikKCiAgICAgICAg
ICAgICAgICAgICAgZWxpZiAnVGhlIHNlY3VyaXR5IGNvZGUgeW91IGVudGVy
ZWQgZG9lcyBub3QgbWF0Y2guIFBsZWFzZSB1cGRhdGUgdGhlIENWViBhbmQg
dHJ5IGFnYWluLicgaW4gbXNqOgogICAgICAgICAgICAgICAgICAgICAgICBp
ZiBicmFuZCA9PSAnNCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBz
ZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRtc2cpCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAjcHJpbnQoZGVhZG1zZywgbXNqKQogICAgICAgICAgICAg
ICAgICAgICAgICBlbGlmIGJyYW5kID09ICc1JzoKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGlmIHNlbGYudG9vbHMucmVwZXRpcihjY3MpID09IFRy
dWU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0
X2RlYWQuZW1pdChkZWFkbXNnKQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICNwcmludCgnUkVMSVZFOicsIGxpdmVtc2csIG1zaikKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgaWYgc2VsZi5yZWNoZWNrID09IFRydWUgb3IgYmlu
Q0MgPT0gJzU0NDAzOSc6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlm
KEJsdWVDaGVjayhzZWxmLCBsaXZlbXNnICwgZHJpdmVyKSk6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXZlbXNnID0gIkxJ
VkV8U05PV1hDSEt8REFSS0NIQVJHRXwlc3wlc3wlc3wlc3wlc1xuIiAlIChj
Y3MsbWVzLGFubyxjY24sdHlwKQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgc2VsZi50ZXh0X2xpdmUuZW1pdChsaXZlbXNnKQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0
X2xpdmUuZW1pdChsaXZlbXNnKSAgCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc2VsZi50ZXh0X2xpdmUuZW1pdChsaXZlbXNnKQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICNpZiBzZWxmLnJlY2hlY2sgPT0gVHJ1
ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjICAgIHByaW50
KCdGdW5jaW9uYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IyAgICBpZihadW9yYShzZWxmLCBsaXZlbXNnLCBkcml2ZXIpKToKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAjICAgICAgICBsaXZlbXNnID0g
IkxJVkV8Q0hBUkdVRUR8U05PV1hDSEt8REFSS3wlc3wlc3wlc3wlc3wlc1xu
IiAlIChjY3MsbWVzLGFubyxjY24sdHlwKQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICMgICAgICAgIHNlbGYudGV4dF9saXZlLmVtaXQobGl2
ZW1zZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjICAgIGVs
c2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyAgICAgICAg
c2VsZi50ZXh0X2xpdmUuZW1pdChsaXZlbXNnKSAgCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgI2Vsc2U6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgI3NlbGYudGV4dF9saXZlLmVtaXQobGl2ZW1zZykKICAg
ICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICNwcmludCgnUkVWSVNBUicsIG1zaiwg
c2VsZi5jY3Nbc2VsZi5jb250XSkKCiAgICAgICAgICAgICAgICAgICAgZWxp
ZiAnWW91ciB0cmFuc2FjdGlvbiB3YXMgZGVjbGluZWQgZHVlIHRvIGluc3Vm
ZmljaWVudCBmdW5kcyBpbiB5b3VyIGFjY291bnQuIFBsZWFzZSB1c2UgYSBk
aWZmZXJlbnQgY2FyZCBvciBjb250YWN0IHlvdXIgYmFuay4nIGluIG1zajoK
ICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi50b29scy5yZXBldGly
KGNjcykgPT0gVHJ1ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNl
bGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICNwcmludCgnUkVMSVZFOicsIGxpdmVtc2csIG1zaikKICAg
ICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHNlbGYudGV4dF9saXZlLmVtaXQobGl2ZW1zZykKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICNwcmludChsaXZlbXNnLCBtc2opIAoK
ICAgICAgICAgICAgICAgICAgICBlbGlmICdQbGVhc2UgdmFsaWRhdGUgaW5m
b3JtYXRpb24gYW5kIHRyeSBhZ2Fpbi4gSWYgdGhlIHByb2JsZW0gcGVyc2lz
dHMsIHBsZWFzZSBjb250YWN0IHlvdXIgYmFuay4nIGluIG1zajoKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAg
ICAgICAgaWYgc2VsZi50b29scy5yZXBldGlyKGNjcykgPT0gVHJ1ZToKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9kZWFkLmVtaXQo
ZGVhZG1zZykKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGlmICc1NDI0MzInIGluIGJpbkNDOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9kZWFk
LmVtaXQoZGVhZG1zZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVs
c2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoQmx1ZUNo
ZWNrKHNlbGYsIGxpdmVtc2cgLCBkcml2ZXIpKToKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgbGl2ZW1zZyA9ICJMSVZFfFNOT1dYQ0hL
fERBUktDSEFSR0V8JXN8JXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8s
Y2NuLHR5cCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
c2VsZi50ZXh0X2xpdmUuZW1pdChsaXZlbXNnKQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHNlbGYudGV4dF9saXZlLmVtaXQobGl2ZW1zZykgIAog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNpZiBzZWxmLnJlY2hl
Y2sgPT0gVHJ1ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAj
ICAgIHByaW50KCdGdW5jaW9uYScpCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIyAgICBpZihadW9yYShzZWxmLCBsaXZlbXNnLCBkcml2ZXIp
KToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjICAgICAgICBs
aXZlbXNnID0gIkxJVkV8Q0hBUkdVRUR8U05PV1hDSEt8REFSS3wlc3wlc3wl
c3wlc3wlc1xuIiAlIChjY3MsbWVzLGFubyxjY24sdHlwKQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICMgICAgICAgIHNlbGYudGV4dF9saXZl
LmVtaXQobGl2ZW1zZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAjICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IyAgICAgICAgc2VsZi50ZXh0X2xpdmUuZW1pdChsaXZlbXNnKSAKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAjZWxzZToKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAjc2VsZi50ZXh0X2xpdmUuZW1pdChsaXZl
bXNnKQoKICAgICAgICAgICAgICAgICAgICBlbGlmICdZb3VyIGNhcmQgaXMg
bm90IGFsbG93ZWQgdG8gY29tcGxldGUgdGhpcyB0cmFuc2FjdGlvbicgaW4g
bXNqOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfZGVhZC5l
bWl0KGRlYWRtc2cpCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCdS
RVZJU0FSJywgbXNqLCBzZWxmLmNjc1tzZWxmLmNvbnRdKQoKICAgICAgICAg
ICAgICAgICAgICBlbGlmICdUaGUgdHJhbnNhY3Rpb24gd2FzIGRlY2xpbmVk
LiBQbGVhc2UgY29udGFjdCBzdXBwb3J0LicgaW4gbXNqOgogICAgICAgICAg
ICAgICAgICAgICAgICBpZiBjb250ZW8gPT0gMCBvciBjb250ZW8gPT0gMTk6
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdl
ZC5lbWl0KCdCQU4gREUgSVAhJykKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGRyaXZlci5xdWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGNsb3NlQ2hyb21lKHNlbGYpCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAjbGlzdGFQcm94aWVzID0gZ2V0UHJveGllcyhzZWxmKQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgI3Byb3h5ID0gcmFuZG9tLmNob2ljZShsaXN0
YVByb3hpZXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5j
ZV9kcml2ZXIgPSBvcGVuX3JlY2hlY2soaGVhZGxlc3M9c2VsZi5udW0yLCBw
cm94eT1Ob25lKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgZHJpdmVyLnF1aXQoKQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgY2xvc2VDaHJvbWUoc2VsZikKCiAgICAg
ICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgZWxpZiBtc2og
PT0gJyc6CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAg
ICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgc2Vs
Zi50ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAgICAgICAgICAgICAgICAg
ICAgICAjcHJpbnQoJ1JFVklTQVInLCBtc2osIHNlbGYuY2NzW3NlbGYuY29u
dF0pCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAg
ICAgc2VsZi50ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAgICAgICAgICAg
ICAgICAgICNwcmludCgnUkVWSVNBUicsIG1zaiwgc2VsZi5jY3Nbc2VsZi5j
b250XSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAg
ICAgICAgICAgICAgICBzZWxmLnRvb2xzLmJvcnJhcmNjKCIlc3wlc3wlc3wl
c1xuIiAlIChjY3MsbWVzLGFubyxjY24pKQogICAgICAgICAgICAgICAgc2Vs
Zi5jb250Kz0xCiAgICAgICAgICAgICAgICBjb250ZW8gKz0xCiAgICAgICAg
ICAgICAgICBtc2ogPSAnJwogICAgICAgICAgICAgICAgI3Byb3h5RXJyb3Ig
PSAwCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAg
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3Rv
X2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRvbltub3JtYWxpemUt
c3BhY2UoKT0nUmV0dXJuIHRvIHBheW1lbnQnXSIpKSkuY2xpY2soKSAgCiAg
ICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgY29u
dGludWUKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHNlbGYu
dGV4dF9jaGFuZ2VkLmVtaXQoJ0VMSU1JTkFORE8gUkFTVFJFQURPUkVTIScp
CiAgICAgICAgICAgIGRlc2Jhbihkcml2ZXIpCiAgICAgICAgICAgIGRyaXZl
ci5xdWl0KCkKICAgICAgICAgICAgY2xvc2VDaHJvbWUoc2VsZikKICAgICAg
ICAgICAgaW5zdGFuY2VfZHJpdmVyID0gb3Blbl9yZWNoZWNrKGhlYWRsZXNz
PXNlbGYubnVtMiwgcHJveHk9Tm9uZSkKICAgICAgICAgICAgI2luc3RhbmNl
X2RyaXZlciA9IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0yKSAgIAogICAgICAg
IGV4Y2VwdDoKICAgICAgICAgICAgI2Rlc2Jhbihkcml2ZXIpCiAgICAgICAg
ICAgIGRyaXZlci5xdWl0KCkKICAgICAgICAgICAgY2xvc2VDaHJvbWUoc2Vs
ZikKICAgICAgICAgICAgI2luc3RhbmNlX2RyaXZlciA9IG9wZW5Ccm93c2Vy
KDAsc2VsZi5udW0yKQogICAgICAgICAgICBleGNfdHlwZSwgZXhjX29iaiwg
ZXhjX3RiID0gc3lzLmV4Y19pbmZvKCk7Zm5hbWUgPSBvcy5wYXRoLnNwbGl0
KGV4Y190Yi50Yl9mcmFtZS5mX2NvZGUuY29fZmlsZW5hbWUpWzFdCiAgICAg
ICAgICAgIGVycm9yX21lc3NhZ2U9IChzdHIoZXhjX3R5cGUpKycgJytzdHIo
ZXhjX3RiLnRiX2xpbmVubykpCiAgICAgICAgICAgIHNlbGYucHJpbnRlZC5l
bWl0KGVycm9yX21lc3NhZ2UpCiAgICAgICAgICAgIHByb3h5RXJyb3IgPSBw
cm94eUVycm9yICsgMQogICAgICAgICAgICAjaWYgJ3NlbGVuaXVtLmNvbW1v
bi5leGNlcHRpb25zLldlYkRyaXZlckV4Y2VwdGlvbicgaW4gZXJyb3JfbWVz
c2FnZSBvciBwcm94eUVycm9yID09IDM6CiAgICAgICAgICAgICAgICAjbGlz
dGFQcm94aWVzID0gZ2V0UHJveGllcyhzZWxmKQogICAgICAgICAgICAgICAg
I3Byb3h5ID0gcmFuZG9tLmNob2ljZShsaXN0YVByb3hpZXMpCiAgICAgICAg
ICAgIGluc3RhbmNlX2RyaXZlciA9IG9wZW5fcmVjaGVjayhoZWFkbGVzcz1z
ZWxmLm51bTIsIHByb3h5PU5vbmUpICAgICAgICAgICAKCiAgICBzZWxmLnRl
eHRfY2hhbmdlZC5lbWl0KCdURVNURU8gRklOQUxJWkFETycpCgpkZWYgT2Zm
aWNlKHNlbGYpOgoKICAgIGxpc3RhRW1haWwgPSBbXQoKICAgIGluc3RhbmNl
X2RyaXZlciA9IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0yKQogICAgZHJpdmVy
ID0gaW5zdGFuY2VfZHJpdmVyCgogICAgZHJpdmVyLmdldCgnaHR0cHM6Ly93
d3cub2ZmaWNlY3JhdmUuY29tL2NyZWF0ZS1hY2NvdW50JykKCiAgICBidG5S
ZWdpc3RlciA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5l
bGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRvbltj
b250YWlucyhAY2xhc3MsICdvZmMtYnRuJykgYW5kIGNvbnRhaW5zKEBjbGFz
cywgJ3ByaW1hcnknKV0iKSkpCiAgICAKICAgIHRyeToKICAgICAgICAjIElu
dGVudGEgZW5jb250cmFyIGVsIGVsZW1lbnRvIGRlIGVudHJhZGEgZGUgY29y
cmVvIGVsZWN0csOzbmljbyB5IGVudmlhciBsYXMgdGVjbGFzCiAgICAgICAg
ICAgIAogICAgICAgIGJ0blJlZ2lzdGVyID0gV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5Y
UEFUSCwgIi8vYnV0dG9uW2NvbnRhaW5zKEBjbGFzcywgJ29mYy1idG4nKSBh
bmQgY29udGFpbnMoQGNsYXNzLCAncHJpbWFyeScpXSIpKSkKCiAgICAgICAg
I2ZpcnN0bmFtZSAKICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSku
dW50aWwoRUMudmlzaWJpbGl0eV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQ
QVRILCAiLy9pbnB1dFtAbmFtZT0nZmlyc3RuYW1lJ10iKSkpLnNlbmRfa2V5
cyhzZWxmLmZpcnN0MSkKICAgICAgICAjCiAgICAgICAgV2ViRHJpdmVyV2Fp
dChkcml2ZXIsIDUpLnVudGlsKEVDLnZpc2liaWxpdHlfb2ZfZWxlbWVudF9s
b2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQG5hbWU9J2xhc3RuYW1lJ10i
KSkpLnNlbmRfa2V5cyhzZWxmLmxhc3QxKQogICAgICAgICAgICAKICAgICAg
ICBlbWFpbHggPSBzZWxmLmxhc3QxKycnLmpvaW4ocmFuZG9tLmNob2ljZSgn
QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJz
dHd4eXowMTIzNDU2Nzg5KiMnKSBmb3IgXyBpbiByYW5nZSg4KSkrJ0BnbWFp
bC5jb20nCiAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGls
KEVDLnZpc2liaWxpdHlfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwg
Ii8vaW5wdXRbQG5hbWU9J2VtYWlsJ10iKSkpLnNlbmRfa2V5cyhlbWFpbHgp
CiAgICAgICAgICAgIAogICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1
KS51bnRpbChFQy52aXNpYmlsaXR5X29mX2VsZW1lbnRfbG9jYXRlZCgoQnku
WFBBVEgsICIvL2lucHV0W0BuYW1lPSdhZGRyZXNzXzEnXSIpKSkuc2VuZF9r
ZXlzKCcyODczIHdpbmRpbmcgbGFrZSByZCcpCiAgICAgICAgV2ViRHJpdmVy
V2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnZpc2liaWxpdHlfb2ZfZWxlbWVu
dF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQG5hbWU9J2NpdHknXSIp
KSkuc2VuZF9rZXlzKCdTdW5yaXNlJykKICAgICAgICAgICAgCiAgICAgICAg
U2VsZWN0KGRyaXZlci5maW5kX2VsZW1lbnQoYnk9QnkuWFBBVEgsIHZhbHVl
PSIvL3NlbGVjdFtAbmFtZT0nem9uZV9pZCddIikpLnNlbGVjdF9ieV92aXNp
YmxlX3RleHQoJ0Zsb3JpZGEnKQogICAgICAgICAgICAKICAgICAgICBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMudmlzaWJpbGl0eV9vZl9l
bGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAbmFtZT0ncG9z
dGNvZGUnXSIpKSkuc2VuZF9rZXlzKCczMzM1MScpCiAgICAgICAgV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnZpc2liaWxpdHlfb2ZfZWxl
bWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQG5hbWU9J3RlbGVw
aG9uZSddIikpKS5zZW5kX2tleXMoJzMxNTQ4NTIxNTQnKQogICAgICAgIFdl
YkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy52aXNpYmlsaXR5X29m
X2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BuYW1lPSdw
YXNzd29yZCddIikpKS5zZW5kX2tleXMoJ0RpbmVybzEyMyonKQogICAgICAg
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy52aXNpYmlsaXR5
X29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BuYW1l
PSdjb25maXJtJ10iKSkpLnNlbmRfa2V5cygnRGluZXJvMTIzKicpCgogICAg
ICAgIHRpbWUuc2xlZXAoMSkKCiAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5Y
UEFUSCwgIi8vaW5wdXRbQG5hbWU9J2FncmVlJ10iKSkpLmNsaWNrKCkKCiAg
ICAgICAgdGltZS5zbGVlcCgxMCkKCiAgICAgICAgYnRuUmVnaXN0ZXIuY2xp
Y2soKQoKICAgICAgICBwcmludChlbWFpbHgpCgogICAgICAgIGRyaXZlci5n
ZXQoJ2h0dHBzOi8vd3d3Lm9mZmljZWNyYXZlLmNvbS9pbnRlcGxhc3QtZ3Jv
dXAtdmFsaDM4NjBuMTYuaHRtbCcpCgogICAgICAgIHRpbWUuc2xlZXAoMikK
CiAgICAgICAgdHJ5OgogICAgICAgICAgICBidG5BZGQgPSBXZWJEcml2ZXJX
YWl0KGRyaXZlciwgNSkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2Fi
bGUoKEJ5LlhQQVRILCAiLy9idXR0b25bQGlkPSdidXR0b24tY2FydCddIikp
KQogICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50
c1swXS5jbGljaygpOyIsIGJ0bkFkZCkKCiAgICAgICAgICAgIHRpbWUuc2xl
ZXAoMikKCiAgICAgICAgICAgIGxpc3RhRW1haWwuYXBwZW5kKGVtYWlseCkK
CiAgICAgICAgICAgIHByaW50KGxpc3RhRW1haWwpCgogICAgICAgIGV4Y2Vw
dDoKICAgICAgICAgICAgcHJpbnQoJ0Vycm9yIGFncmVnYW5kbyBwcm9kdWN0
byEnKQogICAgZXhjZXB0OgogICAgICAgIHByaW50KCdFcnJvciBjcmVhbmRv
IGN1ZW50YSEnKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAg
IyBIdW1hbml6YW5kbyBwYXRyb24KICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVt
aXQoIlRFU1RFQU5ETy4uIikKICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRp
bnQoMSwgNSkpCgogICAgd2hpbGUgc2VsZi5jb250IDwgc2VsZi50b3RhbF9s
aW5lczoKCiAgICAgICAgaWYgc2VsZi50b29scy52YWxpZGF0ZV9jcmVkaXRv
cyhzZWxmLnVzZXJuYW1lLHNlbGYucGFzc3dvcmQpID09IFRydWU6CiAgICAg
ICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0NSRURJVE9TIElOU1VG
SUNJRU5URVMgOi8nKQogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgY2ljbG8gPSBUcnVlCiAg
ICAgICAgY29udGFyID0gMAogICAgICAgIGVtYWlsZiA9IHJhbmRvbS5jaG9p
Y2UobGlzdGFFbWFpbCkKICAgICAgICBwcmludCgnRXN0YXMgdXNhbmRvOics
IGVtYWlsZikKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnRleHRf
Y2hhbmdlZC5lbWl0KCJDT05GSUdVUkFORE8gTUVUQSBEQVRPUy4uIikKCiAg
ICAgICAgICAgICN0cnk6CiAgICAgICAgICAgICMgICAgZHJpdmVyLmdldCgn
aHR0cHM6Ly93d3cub2ZmaWNlY3JhdmUuY29tL21hbmFnZS1wYXltZW50LW9w
dGlvbnMnKQoKICAgICAgICAgICAgIyAgICBpbnB1dGVtYWlsID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVt
ZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAbmFtZT0nZW1haWwn
XSIpKSkKICAgICAgICAgICAgIyAgICBpbnB1dGVtYWlsLmNsZWFyKCkKICAg
ICAgICAgICAgIyAgICBpbnB1dGVtYWlsLnNlbmRfa2V5cyhlbWFpbGYpCgog
ICAgICAgICAgICAjICAgIGlucHV0cHN3ZCA9IFdlYkRyaXZlcldhaXQoZHJp
dmVyLCAyMCkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVk
KChCeS5YUEFUSCwgJy8vKltAaWQ9ImlucHV0LXBhc3N3b3JkIl0nKSkpCiAg
ICAgICAgICAgICMgICAgaW5wdXRwc3dkLmNsZWFyKCkKICAgICAgICAgICAg
IyAgICBpbnB1dHBzd2Quc2VuZF9rZXlzKCdEaW5lcm8xMjMqJykKCiAgICAg
ICAgICAgICMgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICAgICAgIyBi
dG5Mb2dpbiAvaHRtbC9ib2R5L2Rpdls4XS9kaXYvZm9ybS9kaXZbMl0vYnV0
dG9uIC9odG1sL2JvZHkvZGl2WzJdL2Rpdi9mb3JtL2RpdlsyXS9idXR0b24K
ICAgICAgICAgICAgIyAgICB0cnk6CiAgICAgICAgICAgICMgICAgICAgIFdl
YkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5lbGVtZW50X3RvX2Jl
X2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvaHRtbC9ib2R5L2Rpdls4XS9kaXYv
Zm9ybS9kaXZbMl0vYnV0dG9uJykpKS5jbGljaygpCiAgICAgICAgICAgICMg
ICAgZXhjZXB0OgogICAgICAgICAgICAjICAgICAgICBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgNSkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUo
KEJ5LlhQQVRILCAnL2h0bWwvYm9keS9kaXZbMl0vZGl2L2Zvcm0vZGl2WzJd
L2J1dHRvbicpKSkuY2xpY2soKQoKICAgICAgICAgICAgI2V4Y2VwdDoKICAg
ICAgICAgICAgIyAgICBwcmludCgnU2FsdGFuZG8gTG9naW4uLicpCiAgICAg
ICAgICAgIAogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBtc2dJ
bnRlcm5ldCA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5w
cmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9zcGFu
W0Bqc3NlbGVjdD0naGVhZGluZyddIikpKS50ZXh0CiAgICAgICAgICAgICAg
ICBwcmludChtc2dJbnRlcm5ldCkKICAgICAgICAgICAgICAgIHNlbGYudGV4
dF9jaGFuZ2VkLmVtaXQoIlBST1hZIE9GRiwgUE9SRkFWT1IgUkVJTklDSUEh
IikKICAgICAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgICAgIAog
ICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAg
ICAgICBwcmludChlKQoKICAgICAgICAgICAgZHJpdmVyLmdldCgnaHR0cHM6
Ly93d3cub2ZmaWNlY3JhdmUuY29tL21hbmFnZS1wYXltZW50LW9wdGlvbnMn
KQoKICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgxLCA1
KSkKCiAgICAgICAgICAgIHRyeTogIyBSZXZpc2FuZG8gbWV0b2RvcyBkZSBw
YWdvCiAgICAgICAgICAgICAgICBCdG5BZGQgPSBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgNSkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5
LlhQQVRILCAiLy9hW0BjbGFzcz0nb2ZjLWJ0biByb3VuZCBwcmltYXJ5J11b
dGV4dCgpPSdBZGQgTmV3IFBheW1lbnQgT3B0aW9uJ10iKSkpCiAgICAgICAg
ICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgYnRuc0RlbGV0ZSA9
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9v
Zl9hbGxfZWxlbWVudHNfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2FbY29udGFp
bnMoQGNsYXNzLCAnZGVsZXRlY2ltcGEnKSBhbmQgY29udGFpbnMoQGNsYXNz
LCAnbGVmdCcpXSIpKSkKICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAg
ICAgICAgICAgICAgICBkcml2ZXIucmVmcmVzaCgpCiAgICAgICAgICAgICAg
ICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgxLCA1KSkKICAgICAg
ICAgICAgICAgICAgICBidG5zRGVsZXRlID0gV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2FsbF9lbGVtZW50c19sb2Nh
dGVkKChCeS5YUEFUSCwgIi8vYVtjb250YWlucyhAY2xhc3MsICdkZWxldGVj
aW1wYScpIGFuZCBjb250YWlucyhAY2xhc3MsICdsZWZ0JyldIikpKQoKICAg
ICAgICAgICAgICAgIGZvciBlbGVtZW50byBpbiBidG5zRGVsZXRlOgogICAg
ICAgICAgICAgICAgICAgICMgSGF6IGNsaWMgZW4gZWwgZWxlbWVudG8gYWN0
dWFsCiAgICAgICAgICAgICAgICAgICAgYnRuc0RlbGV0ZSA9IFdlYkRyaXZl
cldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9hbGxfZWxl
bWVudHNfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2FbY29udGFpbnMoQGNsYXNz
LCAnZGVsZXRlY2ltcGEnKSBhbmQgY29udGFpbnMoQGNsYXNzLCAnbGVmdCcp
XSIpKSkKICAgICAgICAgICAgICAgICAgICBlbGVtZW50byA9IGJ0bnNEZWxl
dGVbMF0KICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5jbGljaygpCiAg
ICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51
bnRpbChFQy5hbGVydF9pc19wcmVzZW50KCkpCiAgICAgICAgICAgICAgICAg
ICAgYWxlcnRhID0gZHJpdmVyLnN3aXRjaF90by5hbGVydAogICAgICAgICAg
ICAgICAgICAgIGFsZXJ0YS5hY2NlcHQoKQogICAgICAgICAgICAgICAgICAg
IHRpbWUuc2xlZXAoNSkKCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAg
ICAgICAgIGRyaXZlci5yZWZyZXNoKCkKICAgICAgICAgICAgICAgIHRpbWUu
c2xlZXAocmFuZG9tLnJhbmRpbnQoMSwgNSkpCiAgICAgICAgICAgICAgICB0
cnk6CiAgICAgICAgICAgICAgICAgICAgYnRuc0RlbGV0ZSA9IFdlYkRyaXZl
cldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9hbGxfZWxl
bWVudHNfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2FbY29udGFpbnMoQGNsYXNz
LCAnZGVsZXRlY2ltcGEnKSBhbmQgY29udGFpbnMoQGNsYXNzLCAnbGVmdCcp
XSIpKSkKICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAg
ICAgICBwcmludCgnTm8gc2UgZW5jb250cmFyb24gbWV0b2RvcyBkZSBwYWdv
IScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAg
ZHJpdmVyLmdldCgnaHR0cHM6Ly93d3cub2ZmaWNlY3JhdmUuY29tL2NhcnQn
KQogICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDEsIDUp
KQoKICAgICAgICAgICAgdHJ5OiAKICAgICAgICAgICAgICAgIGJ0bkNoZWNr
b3V0ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLmVsZW1l
bnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW2NvbnRh
aW5zKEBjbGFzcywgJ2NoZWNrb3V0LWJ0bicpXSIpKSkuY2xpY2soKQogICAg
ICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBkcml2ZXIucmVmcmVz
aCgpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50
KDEsIDUpKQogICAgICAgICAgICAgICAgYnRuQ2hlY2tvdXQgPSBXZWJEcml2
ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlj
a2FibGUoKEJ5LlhQQVRILCAiLy9idXR0b25bY29udGFpbnMoQGNsYXNzLCAn
Y2hlY2tvdXQtYnRuJyldIikpKS5jbGljaygpCgogICAgICAgICAgICB3aGls
ZSBjaWNsbyA9PSBUcnVlIGFuZCBjb250YXIgPCAxMDoKCiAgICAgICAgICAg
ICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCJURVNURUFORE8sIFBPUkZB
Vk9SIEVTUEVSQSEiKQoKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAocmFu
ZG9tLnJhbmRpbnQoMSwgNSkpCgogICAgICAgICAgICAgICAgI3RyeToKICAg
ICAgICAgICAgICAgICMgICAgY2hhbmdlQWRkcnMgPSBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgNSkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUo
KEJ5LlhQQVRILCAnLy8qW0BpZD0ic2hpcHBpbmdfaW5mbyJdL2RpdlsxXS9k
aXZbMl0vZGl2WzJdL2Rpdi9idXR0b25bMl0nKSkpCiAgICAgICAgICAgICAg
ICAjICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNs
aWNrKCk7IiwgY2hhbmdlQWRkcnMpCiAgICAgICAgICAgICAgICAjICAgIHRp
bWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgICMgICAgdXNlMWFkZHJzID0g
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRfdG9f
YmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9InNoaXBwaW5nX2lu
Zm8iXS9kaXZbM10vZGl2WzJdL2RpdlsxXS9kaXYvZGl2L2J1dHRvbicpKSkK
ICAgICAgICAgICAgICAgICMgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJh
cmd1bWVudHNbMF0uY2xpY2soKTsiLCB1c2UxYWRkcnMpCiAgICAgICAgICAg
ICAgICAjZXhjZXB0OgogICAgICAgICAgICAgICAgIyAgICBwcmludCgnU2Fs
dGFuZG8gZGlyZWNjaW9uLi4nKQoKICAgICAgICAgICAgICAgIHRyeToKICAg
ICAgICAgICAgICAgICAgICBhZGROZXdQYXkgPSBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgNSkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5
LlhQQVRILCAnLy8qW0BpZD0iY2ltcGF5bWVudCJdL2RpdlsxXS9kaXZbMl0v
ZGl2WzJdL2Rpdi9idXR0b25bMV0nKSkpCiAgICAgICAgICAgICAgICAgICAg
ZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsi
LCBhZGROZXdQYXkpCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAg
ICAgICAgICAgICAgcHJpbnQoJ0RldGVjdGFuZG8gcHJpbWVyIHBhZ28hJykK
CgogICAgICAgICAgICAgICAgY2NzLCBtZXMsIGFubywgY2NuLCB0eXA9IHN0
cihzZWxmLmNjc1tzZWxmLmNvbnRdKS5zdHJpcCgpICwgc3RyKHNlbGYubWVz
W3NlbGYuY29udF0pLnN0cmlwKCksIHN0cihzZWxmLmFuaW9bc2VsZi5jb250
XSkuc3RyaXAoKSwgc3RyKHNlbGYuY3Z2W3NlbGYuY29udF0pLnN0cmlwKCks
IHNlbGYudG9vbHMuYmludHlwZShzZWxmLmNjc1tzZWxmLmNvbnRdKQogICAg
ICAgICAgICAgICAgZGVhZG1zZyA9ICJERUFEfFNOT1dYQ0hLfENJQU58JXN8
JXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2NuLHR5cCkKICAgICAg
ICAgICAgICAgIGxpdmVtc2cgPSAiTElWRXxTTk9XWENIS3xDSUFOfCVzfCVz
fCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXApCgogICAgICAg
ICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGlucHV0Q0MgPSBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNlbmNlX29m
X2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICcvLypbQGlkPSJpbnB1dC1j
Yy1udW1iZXIiXScpKSkKICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAg
ICAgICAgICAgICAgICBkcml2ZXIucmVmcmVzaCgpCiAgICAgICAgICAgICAg
ICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgICAgICAgICAgICAgIGlucHV0
Q0MgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNl
bmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICcvLypbQGlkPSJp
bnB1dC1jYy1udW1iZXIiXScpKSkKICAgICAgICAgICAgICAgIAogICAgICAg
ICAgICAgICAgaW5wdXRDQy5jbGVhcigpCiAgICAgICAgICAgICAgICBpbnB1
dENDLnNlbmRfa2V5cyhzZWxmLmNjc1tzZWxmLmNvbnRdKQoKICAgICAgICAg
ICAgICAgIFNlbGVjdChkcml2ZXIuZmluZF9lbGVtZW50KGJ5PUJ5LlhQQVRI
LCB2YWx1ZT0nLy8qW0BpZD0iY2NfZXhwaXJlX2RhdGVfbW9udGgiXScpKS5z
ZWxlY3RfYnlfdmFsdWUoKHNlbGYubWVzW3NlbGYuY29udF0pKQogICAgICAg
ICAgICAgICAgU2VsZWN0KGRyaXZlci5maW5kX2VsZW1lbnQoYnk9QnkuWFBB
VEgsIHZhbHVlPScvLypbQGlkPSJ5ZWFyIl0nKSkuc2VsZWN0X2J5X3Zpc2li
bGVfdGV4dChzZWxmLmFuaW9bc2VsZi5jb250XSkKCiAgICAgICAgICAgICAg
ICBpbnB1dGN2diA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwo
RUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgJy8v
KltAaWQ9ImlucHV0LWNjLWN2djIiXScpKSkKICAgICAgICAgICAgICAgIGlu
cHV0Y3Z2LmNsZWFyKCkKICAgICAgICAgICAgICAgIGlucHV0Y3Z2LnNlbmRf
a2V5cygnMDAwJykKCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAg
ICAgICAgICAgaW5wdXRDaGVjayA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1
KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgs
ICIvL2xhYmVsW0Bmb3I9J3BheS1hZGRyZXNzJ10iKSkpLmNsaWNrKCkKICAg
ICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICBpbnB1
dENoZWNrID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLmVs
ZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vaW5wdXRbQG5h
bWU9J3BheW1lbnRfYWRkcmVzcyddIikpKS5jbGljaygpCgogICAgICAgICAg
ICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgxLCA1KSkKCiAgICAg
ICAgICAgICAgICBidG5jaGVja291dCA9IFdlYkRyaXZlcldhaXQoZHJpdmVy
LCAxMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQ
QVRILCAiLy9idXR0b25bY29udGFpbnMoQGNsYXNzLCAnY2hlY2tvdXQtYnRu
JykgYW5kIGNvbnRhaW5zKEBjbGFzcywgJ2ZsdWlkJykgYW5kIGNvbnRhaW5z
KEBjbGFzcywgJ3RvcG1hcmdpbi0zJyldIikpKS5jbGljaygpCgogICAgICAg
ICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgxLCA1KSkKCiAg
ICAgICAgICAgICAgICBidG5Db25maXJtID0gV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDEwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnku
WFBBVEgsICIvL2J1dHRvbltjb250YWlucyhAY2xhc3MsICdvZmMtYnRuJykg
YW5kIGNvbnRhaW5zKEBjbGFzcywgJ2ZsdWlkJykgYW5kIGNvbnRhaW5zKEBj
bGFzcywgJ3ByaW1hcnknKSBhbmQgY29udGFpbnMoQGNsYXNzLCAndG9wbWFy
Z2luLTInKSBhbmQgY29udGFpbnMoQGNsYXNzLCAnY29uZmlybS1vcmRlci1z
aGlwcGluZy1hZGRyZXNzJyldIikpKS5jbGljaygpCgogICAgICAgICAgICAg
ICAgIyBSRVZJU0FORE8gCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAg
ICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmFsZXJ0X2lzX3ByZXNl
bnQoKSkKICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnRhID0gZHJpdmVy
LnN3aXRjaF90by5hbGVydAogICAgICAgICAgICAgICAgICAgICAgICBtc2dQ
YXkgPSBhbGVydGEudGV4dAogICAgICAgICAgICAgICAgICAgICAgICBwcmlu
dChtc2dQYXkpCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAo
MSkKICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnRhLmFjY2VwdCgpCiAg
ICAgICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAg
ICAgICBwcmludCgnTm8gc2UgZW5jb250cm8gbmluZ3VuYSBhbGVydGEnKQoK
ICAgICAgICAgICAgICAgICAgICBpZiAnQVZTIG1pc21hdGNoJyBpbiBtc2dQ
YXk6CgogICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnRvb2xzLnJl
cGV0aXIoY2NzKSA9PSBUcnVlOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgcHJpbnQoJ1JFTElWRTonLCBsaXZlbXNnKQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc2VsZi50ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAg
ICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgc2VsZi50ZXh0X2xpdmUuZW1pdChsaXZlbXNnKQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ0xJVkU6JywgbGl2ZW1zZykK
CiAgICAgICAgICAgICAgICAgICAgZWxpZiAnVGhpcyB0cmFuc2FjdGlvbiBo
YXMgYmVlbiBkZWNsaW5lZC4nIGluIG1zZ1BheToKICAgICAgICAgICAgICAg
ICAgICAgICAgcHJpbnQoJ0RFQUQ6JywgbXNnUGF5LCBkZWFkbXNnKQogICAg
ICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRt
c2cpCgogICAgICAgICAgICAgICAgICAgIGVsaWYgJ1lvdSBjYW5ub3QgYWRk
IG1vcmUgdGhhbiAxMCBwYXltZW50IHByb2ZpbGVzJzoKICAgICAgICAgICAg
ICAgICAgICAgICAgcHJpbnQoJ0VsaW1pbmFuZG8gbWV0b2RvcyBkZSBwYWdv
Li4nKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAg
ICAgICAgICAgICBlbGlmICdlcnJvcicgaW4gbXNnUGF5OgogICAgICAgICAg
ICAgICAgICAgICAgICBwcmludCgnUkVWSVNBUicsIGRlYWRtc2cpCgogICAg
ICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAg
IHByaW50KCdERUFEOicsIG1zZ1BheSwgZGVhZG1zZykKICAgICAgICAgICAg
ICAgICAgICAgICAgc2VsZi50ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAg
ICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAg
ICAgICAgICAgICAgcHJpbnQoJ1JFSU5URU5UQU5ETyBQQUdPIScpCiAgICAg
ICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBzZWxmLmNvbnQrPTEK
ICAgICAgICAgICAgICAgIGNvbnRhciArPSAxCiAgICAgICAgICAgICAgICBz
ZWxmLnRvb2xzLmJvcnJhcmNjKCIlc3wlc3wlc3wlc1xuIiAlIChjY3MsbWVz
LGFubyxjY24pKQogICAgICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20u
cmFuZGludCgxLCA1KSkKCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAg
ICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdFTElNSU5BTkRPIENP
T0tJRVMhJykKICAgICAgICAgICAgI2RyaXZlci5xdWl0KCkKICAgICAgICAg
ICAgI2luc3RhbmNlX2RyaXZlciA9IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0y
KQogICAgICAgICAgICB0aW1lLnNsZWVwKDUpCgogICAgICAgIGV4Y2VwdDoK
ICAgICAgICAgICAgI2RyaXZlci5xdWl0KCkKICAgICAgICAgICAgdGltZS5z
bGVlcCg1KQogICAgICAgICAgICAjaW5zdGFuY2VfZHJpdmVyID0gb3BlbkJy
b3dzZXIoMCxzZWxmLm51bTIpCiAgICAgICAgICAgIGV4Y190eXBlLCBleGNf
b2JqLCBleGNfdGIgPSBzeXMuZXhjX2luZm8oKTtmbmFtZSA9IG9zLnBhdGgu
c3BsaXQoZXhjX3RiLnRiX2ZyYW1lLmZfY29kZS5jb19maWxlbmFtZSlbMV0K
ICAgICAgICAgICAgZXJyb3JfbWVzc2FnZT0gKHN0cihleGNfdHlwZSkrJyAn
K3N0cihleGNfdGIudGJfbGluZW5vKSkKICAgICAgICAgICAgc2VsZi5wcmlu
dGVkLmVtaXQoZXJyb3JfbWVzc2FnZSkKICAgIHNlbGYudGV4dF9jaGFuZ2Vk
LmVtaXQoJ1RFU1RFTyBGSU5BTElaQURPJykKCmRlZiBQYXlwYWwoc2VsZik6
CgogICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgiSU5JQ0lBTkRPIEdBVEUg
UEFZUEFMIikKICAgIGluc3RhbmNlX2RyaXZlciA9IG9wZW5Ccm93c2VyKDAs
c2VsZi5udW0yKQoKICAgIHdoaWxlIHNlbGYuY29udCA8IHNlbGYudG90YWxf
bGluZXM6CgogICAgICAgIGNvbnRlbyA9IDAKCiAgICAgICAgdHJ5OgogICAg
ICAgICAgICBpZiBzZWxmLnRvb2xzLnZhbGlkYXRlX2NyZWRpdG9zKHNlbGYu
dXNlcm5hbWUsc2VsZi5wYXNzd29yZCkgPT0gVHJ1ZToKICAgICAgICAgICAg
ICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0NSRURJVE9TIElOU1VGSUNJ
RU5URVMgOi8nKQogICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAg
ICAgICAgCiAgICAgICAgICAgIGVtYWlseCA9IHNlbGYubGFzdDErJycuam9p
bihyYW5kb20uY2hvaWNlKCdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFi
Y2RlZmdoaWprbG1ub3BxcnN0d3h5ejAxMjM0NTY3ODknKSBmb3IgXyBpbiBy
YW5nZSgzKSkrc2VsZi5maXJzdDErJycuam9pbihyYW5kb20uY2hvaWNlKCdB
QkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0
d3h5ejAxMjM0NTY3ODknKSBmb3IgXyBpbiByYW5nZSgzKSkrJ0BnbWFpbC5j
b20nCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAKICAg
ICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnVEVTVEVBTkRPLCBF
U1BFUkEuLicpCgogICAgICAgICAgICBkcml2ZXIgPSBpbnN0YW5jZV9kcml2
ZXIKCiAgICAgICAgICAgIGRyaXZlci5nZXQoJ2h0dHBzOi8vd3d3LmZpc2No
ZnV0dGVydHJlZmYuZGUvRnV0dGVydGFibGV0dGVuLVdlbHNjaGlwcy1MLVdl
bHNlLUZpc2NoZnV0dGVyLVdlbHN0YWJsZXR0ZW4tQWxnZW4tQ2hpcHMtNTBt
bC03MlN0JykKCiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRp
bnQoMSwgNSkpCgogICAgICAgICAgICAjIHJlY2hhemFyIGNvb2tpZXMgCiAg
ICAgICAgICAgIHRlcm1zID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51
bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIv
L2J1dHRvbltAY2xhc3M9J2J1dHRvbl9fbXdKIG1vZGVybjJfZmlsbGVkQnV0
dG9uX19LbzcnIGFuZCB0ZXh0KCk9J2xvZ2lzY2gnXSIpKSkKICAgICAgICAg
ICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2so
KTsiLCB0ZXJtcykKCiAgICAgICAgICAgIGFkZENhcnQgPSBXZWJEcml2ZXJX
YWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2th
YmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0BuYW1lPSdpbldhcmVua29yYidd
IikpKQogICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3Vt
ZW50c1swXS5jbGljaygpOyIsIGFkZENhcnQpCgogICAgICAgICAgICB0aW1l
LnNsZWVwKHJhbmRvbS5yYW5kaW50KDMsIDUpKQoKICAgICAgICAgICAgIyBk
aXNjb3VudCA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMu
ZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9zdmdbQGlk
PSdFYmVuZV8xJ10iKSkpCiAgICAgICAgICAgICMgZHJpdmVyLmV4ZWN1dGVf
c2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBkaXNjb3VudCkKCiAg
ICAgICAgICAgIGRyaXZlci5nZXQoJ2h0dHBzOi8vd3d3LmZpc2NoZnV0dGVy
dHJlZmYuZGUvQmVzdGVsbHZvcmdhbmc/d2s9MScpCiAgICAgICAgICAgIHRp
bWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMSwgMykpCgogICAgICAgICAgICBn
ZW5lcm9zID0gWyd3JywnbSddCiAgICAgICAgICAgIGdlbmVybyA9IHJhbmRv
bS5jaG9pY2UoZ2VuZXJvcykKCiAgICAgICAgICAgIGJ0blN1Ym1pdCA9IFdl
YkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90b19i
ZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9idXR0b25bY29udGFpbnModGV4
dCgpLCAnd2VpdGVyJyldIikpKQoKICAgICAgICAgICAgaW5wdXRHZW5yZSA9
IFNlbGVjdChkcml2ZXIuZmluZF9lbGVtZW50KGJ5PUJ5LlhQQVRILCB2YWx1
ZT0iLy9zZWxlY3RbQGlkPSdzYWx1dGF0aW9uJ10iKSkuc2VsZWN0X2J5X3Zh
bHVlKGdlbmVybykKICAgICAgICAgICAgbmFtZSA9IFdlYkRyaXZlcldhaXQo
ZHJpdmVyLCAzKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0
ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2ZpcnN0TmFtZSddIikpKS5z
ZW5kX2tleXMoc2VsZi5maXJzdDEpCiAgICAgICAgICAgIGxhbm1lID0gV2Vi
RHJpdmVyV2FpdChkcml2ZXIsIDMpLnVudGlsKEVDLnByZXNlbmNlX29mX2Vs
ZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0nbGFzdE5h
bWUnXSIpKSkuc2VuZF9rZXlzKHNlbGYubGFzdDEpCiAgICAgICAgICAgIHN0
cmVldCA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5wcmVz
ZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtA
aWQ9J3N0cmVldCddIikpKS5zZW5kX2tleXMoJ2FsZW1hbmlhJykKICAgICAg
ICAgICAgc3RyZWV0TnVtYmVyID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMp
LnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBB
VEgsICIvL2lucHV0W0BpZD0nc3RyZWV0bnVtYmVyJ10iKSkpLnNlbmRfa2V5
cyhyYW5kb20ucmFuZGludCgxLCA5OTkpKQogICAgICAgICAgICB6aXBDb2Rl
ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMpLnVudGlsKEVDLnByZXNlbmNl
X29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0n
cG9zdGNvZGUnXSIpKSkuc2VuZF9rZXlzKCcxMDExNScpCiAgICAgICAgICAg
IGNpdHkgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMucHJl
c2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRb
QGlkPSdjaXR5J10iKSkpLnNlbmRfa2V5cygnQmVybGluJykKICAgICAgICAg
ICAgZW1haWwgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMu
cHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5w
dXRbQGlkPSdlbWFpbCddIikpKS5zZW5kX2tleXMoZW1haWx4KQoKICAgICAg
ICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICBjaGVja2JveCA9IFdl
YkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90b19i
ZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9sYWJlbFtAZm9yPSdDaGVja0Jv
eF8zMiddIikpKQogICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQo
ImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGNoZWNrYm94KQogICAgICAgICAg
ICB0aW1lLnNsZWVwKDEpCgogICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9z
Y3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0blN1Ym1pdCkKICAg
ICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgxLCAzKSkKCiAg
ICAgICAgICAgIGNyZWRpdENhcmQgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
MTApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFU
SCwgIi8vZGl2W0BpZD0nemFfcHBjX2NhcmRfbmFtZSddIikpKQogICAgICAg
ICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGlj
aygpOyIsIGNyZWRpdENhcmQpCgogICAgICAgICAgICBidG5TdWJtaXQgPSBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9f
YmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW2NvbnRhaW5zKHRl
eHQoKSwgJ1dlaXRlcicpXSIpKSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1
dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5TdWJtaXQp
CgogICAgICAgICAgICB3aGlsZSBjb250ZW8gPD0xOSBhbmQgc2VsZi5jb250
IDwgc2VsZi50b3RhbF9saW5lczoKCiAgICAgICAgICAgICAgICBjaGVjazEg
PSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRf
dG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vbGFiZWxbQGZvcj0nQ2hl
Y2tCb3hfMzInXSIpKSkKICAgICAgICAgICAgICAgIGRyaXZlci5leGVjdXRl
X3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgY2hlY2sxKQogICAg
ICAgICAgICAgICAgY2hlY2syID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEw
KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgs
ICIvL2xhYmVsW0Bmb3I9J0NoZWNrQm94XzM1J10iKSkpCiAgICAgICAgICAg
ICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGlj
aygpOyIsIGNoZWNrMikKCgogICAgICAgICAgICAgICAgaWYgV2ViRHJpdmVy
V2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5mcmFtZV90b19iZV9hdmFpbGFi
bGVfYW5kX3N3aXRjaF90b19pdCgoQnkuWFBBVEgsIi8vaWZyYW1lW2NvbnRh
aW5zKEBuYW1lLCAnX196b2lkX19wYXlwYWxfYnV0dG9ucycpXSIpKSk6Cgog
ICAgICAgICAgICAgICAgICAgIGJ0bkRlYml0ID0gV2ViRHJpdmVyV2FpdChk
cml2ZXIsIDEwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgo
QnkuWFBBVEgsICIvL2RpdltAcm9sZT0nbGluaycgYW5kIEBkYXRhLWJ1dHRv
bj0nJyBhbmQgQGRhdGEtZnVuZGluZy1zb3VyY2U9J2NhcmQnIGFuZCBAdGFi
aW5kZXg9JzAnIGFuZCBAYXJpYS1sYWJlbD0nRGViaXQtIG9kZXIgS3JlZGl0
a2FydGUnXSIpKSkKICAgICAgICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0
ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0bkRlYml0KQoK
ICAgICAgICAgICAgICAgICAgICBjY3MsIG1lcywgYW5vLCBjY24sIHR5cD0g
c3RyKHNlbGYuY2NzW3NlbGYuY29udF0pLnN0cmlwKCkgLCBzdHIoc2VsZi5t
ZXNbc2VsZi5jb250XSkuc3RyaXAoKSwgc3RyKHNlbGYuYW5pb1tzZWxmLmNv
bnRdKS5zdHJpcCgpLCBzdHIoc2VsZi5jdnZbc2VsZi5jb250XSkuc3RyaXAo
KSwgc2VsZi50b29scy5iaW50eXBlKHNlbGYuY2NzW3NlbGYuY29udF0pCiAg
ICAgICAgICAgICAgICAgICAgZGVhZG1zZyA9ICJERUFEfFNOT1dYQ0hLfFBB
WVBBTHwlc3wlc3wlc3wlc3wlc1xuIiAlIChjY3MsbWVzLGFubyxjY24sdHlw
KQogICAgICAgICAgICAgICAgICAgIGxpdmVtc2cgPSAiTElWRXxTTk9XWENI
S3xQQVlQQUx8JXN8JXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2Nu
LHR5cCkKICAgICAgICAgICAgICAgICAgICBmZWNoYSA9IHNlbGYubWVzW3Nl
bGYuY29udF0gKyBzZWxmLmFuaW9bc2VsZi5jb250XVsyOjRdCiAgICAgICAg
ICAgICAgICAgICAgbnVtZSA9IGYiMzF7cmFuZG9tLnJhbmRpbnQoMCwgOSl9
eycnLmpvaW4ocmFuZG9tLmNob2ljZXMoJzAxMjM0NTY3ODknLCBrPTcpKX0i
CgogICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRp
bnQoMywgNSkpCgogICAgICAgICAgICAgICAgICAgIGlmIFdlYkRyaXZlcldh
aXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZnJhbWVfdG9fYmVfYXZhaWxhYmxl
X2FuZF9zd2l0Y2hfdG9faXQoKEJ5LlhQQVRILCIvL2lmcmFtZVtjb250YWlu
cyhAbmFtZSwgJ19fem9pZF9fcGF5cGFsX2NhcmRfZm9ybV9fJyldIikpKToK
CiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0Q0MgPSBXZWJEcml2ZXJX
YWl0KGRyaXZlciwgMjApLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRf
bG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0nY3JlZGl0LWNhcmQt
bnVtYmVyJ10iKSkpCiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0Q0Mu
Y2xlYXIoKQogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dENDLnNlbmRf
a2V5cyhzZWxmLmNjc1tzZWxmLmNvbnRdKQoKICAgICAgICAgICAgICAgICAg
ICAgICAgaW5wdXRGZWNoYSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCku
dW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFU
SCwgIi8vaW5wdXRbQGlkPSdleHBpcnktZGF0ZSddIikpKQogICAgICAgICAg
ICAgICAgICAgICAgICBpbnB1dEZlY2hhLmNsZWFyKCkKICAgICAgICAgICAg
ICAgICAgICAgICAgaW5wdXRGZWNoYS5zZW5kX2tleXMoZmVjaGEpCgogICAg
ICAgICAgICAgICAgICAgICAgICBpbnB1dENWViA9IFdlYkRyaXZlcldhaXQo
ZHJpdmVyLCAxMCkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2Nh
dGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdjcmVkaXQtY2FyZC1zZWN1
cml0eSddIikpKQogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dENWVi5j
bGVhcigpCiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0Q1ZWLnNlbmRf
a2V5cyhzZWxmLmN2dltzZWxmLmNvbnRdKQoKICAgICAgICAgICAgICAgICAg
ICAgICAgdHJ5OgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0
TmFtZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5wcmVz
ZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtj
b250YWlucyhAaWQsICdiaWxsaW5nQWRkcmVzcy5naXZlbk5hbWUnKV0iKSkp
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dE5hbWUuY2xlYXIo
KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXROYW1lLnNlbmRf
a2V5cyhzZWxmLmZpcnN0MSkKCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBpbnB1dExuYW1lID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMpLnVudGls
KEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIv
L2lucHV0W2NvbnRhaW5zKEBpZCwgJ2JpbGxpbmdBZGRyZXNzLmZhbWlseU5h
bWUnKV0iKSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dExu
YW1lLmNsZWFyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0
TG5hbWUuc2VuZF9rZXlzKHNlbGYubGFzdDEpCgogICAgICAgICAgICAgICAg
ICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBw
YXNzCgogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFBob25lID0gV2Vi
RHJpdmVyV2FpdChkcml2ZXIsIDMpLnVudGlsKEVDLnByZXNlbmNlX29mX2Vs
ZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0ncGhvbmUn
XSIpKSkuc2VuZF9rZXlzKG51bWUpCgogICAgICAgICAgICAgICAgICAgICAg
ICB0aW1lLnNsZWVwKDEpCgogICAgICAgICAgICAgICAgICAgICAgICBidG5T
dWJtaXQgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVs
ZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0Bp
ZD0nc3VibWl0LWJ1dHRvbicgYW5kIHRleHQoKT0nSmV0enQga2F1ZmVuJ10i
KSkpCiAgICAgICAgICAgICAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3Nj
cmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgYnRuU3VibWl0KQoKICAg
ICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGlu
dCgzLCA1KSkKCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBtc2dEZWFkID0gV2ViRHJpdmVyV2Fp
dChkcml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9j
YXRlZCgoQnkuWFBBVEgsICIvL2Rpdltjb250YWlucyhAY2xhc3MsICdjc3Mt
b3Jrcm92JyldIikpKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBwcmludChtc2dEZWFkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
c2VsZi50ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAgICAgICAgICAgICAg
ICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0OgoKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGRyaXZlci5zd2l0Y2hfdG8uZGVm
YXVsdF9jb250ZW50KCkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0
cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIs
IDEwKS51bnRpbChFQy5mcmFtZV90b19iZV9hdmFpbGFibGVfYW5kX3N3aXRj
aF90b19pdCgoQnkuWFBBVEgsJy8vaWZyYW1lW0B0aXRsZT0iUGF5UGFsIENo
ZWNrb3V0IE92ZXJsYXkiXScpKSkKCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDEsIDUpKQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgNSkudW50aWwoRUMuZnJhbWVfdG9fYmVfYXZhaWxhYmxlX2FuZF9z
d2l0Y2hfdG9faXQoKEJ5LlhQQVRILCcvL2lmcmFtZVtAdGl0bGU9InRocmVl
X2RvbWFpbl9zZWN1cmUiXScpKSkKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHByaW50KCdFcnJvciBlbiBzZWd1bmRvIGZyYW1lJykKCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5k
aW50KDEsIDUpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMuZnJhbWVfdG9f
YmVfYXZhaWxhYmxlX2FuZF9zd2l0Y2hfdG9faXQoKEJ5LlhQQVRILCcvL2lm
cmFtZVtAaWQ9InRocmVlZHNJZnJhbWVWMiJdJykpKQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgcHJpbnQoJ0Vycm9yIGVuIHRlcmNlciBmcmFt
ZScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIs
IDIwKS51bnRpbChFQy5mcmFtZV90b19iZV9hdmFpbGFibGVfYW5kX3N3aXRj
aF90b19pdCgoQnkuWFBBVEgsJy8vaWZyYW1lW3N0YXJ0cy13aXRoKEBpZCwg
ImNhcmRpbmFsLXN0ZXBVcElmcmFtZS0iKV0nKSkpCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRp
bnQoNSwgMTApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBpZnJhbWVMaXZlID0gZHJpdmVyLmZpbmRfZWxlbWVudChCeS5UQUdfTkFN
RSwgJ2JvZHknKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIyBSZXZpc2FuZG8gbGl2ZSBlbiB0ZXh0bwogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBtc2dGcmFtZSA9IGlmcmFtZUxpdmUudGV4
dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWx0aSA9IHNlbGYuY2Nz
W3NlbGYuY29udF1bLTQ6XQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBwYWxhYnJhc19jbGF2ZSA9IFsiQ2FsbCBtZSBhdCIsICJTTVMi
LCAiRU1BSUwiLCAiQ8OzZGlnbyBkZSBWZXJpZmljYWNpw7NuIiwgIkVOVklB
UiIsICJBdXRvcml6YSB0dSBjb21wcmEgZW4gdHUgYmFuY2EgZGlnaXRhbCIs
ICJDbGF2ZSBPVFAiLCAiaW5ncmVzYSBlbCBjw7NkaWdvIiwgdWx0aV0KICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5jb250cmFkYSA9
IGFueShwYWxhYnJhIGluIG1zZ0ZyYW1lIGZvciBwYWxhYnJhIGluIHBhbGFi
cmFzX2NsYXZlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBpZiBlbmNvbnRyYWRhOgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgaWYgc2VsZi50b29scy5yZXBldGlyKGNjcykgPT0gVHJ1
ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBzZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRtc2cpCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9saXZl
LmVtaXQobGl2ZW1zZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNwcmludCgnREVBRCBQ
T1IgM0QnKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGRyaXZlci5zd2l0Y2hfdG8uZGVmYXVsdF9jb250ZW50KCkKCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBl
OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNfdHlw
ZSwgZXhjX29iaiwgZXhjX3RiID0gc3lzLmV4Y19pbmZvKCk7Zm5hbWUgPSBv
cy5wYXRoLnNwbGl0KGV4Y190Yi50Yl9mcmFtZS5mX2NvZGUuY29fZmlsZW5h
bWUpWzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVy
cm9yX21lc3NhZ2U9IChzdHIoZXhjX3R5cGUpKycgJytzdHIoZXhjX3RiLnRi
X2xpbmVubykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHByaW50KCdFcnJvcjonLCBlcnJvcl9tZXNzYWdlKQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnRXJyb3IgZW4gY3VhcnRv
IGZyYW1lJywgZSkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNl
cHQ6CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCdG
cmFtZSBubyBlbmNvbnRyYWRvLicpCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgbXNnRGVhZCA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51
bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRI
LCAiLy9kaXZbY29udGFpbnMoQGNsYXNzLCAnY3NzLW9ya3JvdicpXSIpKSku
dGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KG1z
Z0RlYWQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50
ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQoKICAgICAgICAgICAgICAgICAgICBz
ZWxmLnRvb2xzLmJvcnJhcmNjKCIlc3wlc3wlc3wlc1xuIiAlIChjY3MsbWVz
LGFubyxjY24pKQogICAgICAgICAgICAgICAgICAgIHNlbGYuY29udCs9MQog
ICAgICAgICAgICAgICAgICAgIGNvbnRlbyArPTEKICAgICAgICAgICAgICAg
IAogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBw
cmludCgnRXJyb3IgY29uIGZyYW1lIGRlIHBhZ28uJykKCiAgICAgICAgICAg
ICAgICBkcml2ZXIuc3dpdGNoX3RvLmRlZmF1bHRfY29udGVudCgpCiAgICAg
ICAgICAgICAgICBkcml2ZXIucmVmcmVzaCgpCiAgICAgICAgICAgICAgICB0
aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDEsIDUpKQoKICAgICAgICAgICAg
c2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnRUxJTUlOQU5ETyBSQVNUUkVBRE9S
RVMhJykKICAgICAgICAgICAgZGVzYmFuKGRyaXZlcikKICAgICAgICAgICAg
ZHJpdmVyLnF1aXQoKQogICAgICAgICAgICBjbG9zZUNocm9tZShzZWxmKQog
ICAgICAgICAgICBpbnN0YW5jZV9kcml2ZXIgPSBvcGVuQnJvd3NlcigwLHNl
bGYubnVtMikKICAgICAgICAgICAgIAogICAgICAgIGV4Y2VwdDoKICAgICAg
ICAgICAgI2Rlc2Jhbihkcml2ZXIpCiAgICAgICAgICAgIGRyaXZlci5xdWl0
KCkKICAgICAgICAgICAgY2xvc2VDaHJvbWUoc2VsZikKICAgICAgICAgICAg
I2luc3RhbmNlX2RyaXZlciA9IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0yKQog
ICAgICAgICAgICBleGNfdHlwZSwgZXhjX29iaiwgZXhjX3RiID0gc3lzLmV4
Y19pbmZvKCk7Zm5hbWUgPSBvcy5wYXRoLnNwbGl0KGV4Y190Yi50Yl9mcmFt
ZS5mX2NvZGUuY29fZmlsZW5hbWUpWzFdCiAgICAgICAgICAgIGVycm9yX21l
c3NhZ2U9IChzdHIoZXhjX3R5cGUpKycgJytzdHIoZXhjX3RiLnRiX2xpbmVu
bykpCiAgICAgICAgICAgIHNlbGYucHJpbnRlZC5lbWl0KGVycm9yX21lc3Nh
Z2UpCiAgICAgICAgICAgICNwcm94eUVycm9yID0gcHJveHlFcnJvciArIDEK
ICAgICAgICAgICAgaW5zdGFuY2VfZHJpdmVyID0gb3BlbkJyb3dzZXIoMCxz
ZWxmLm51bTIpCiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgIHNlbGYu
dGV4dF9jaGFuZ2VkLmVtaXQoJ1RFU1RFTyBGSU5BTElaQURPJykKCmRlZiBQ
b2xpdGljcyhzZWxmKToKCiAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCJJ
TklDSUFORE8gR0FURSBCTFVFIikKICAgIGluc3RhbmNlX2RyaXZlciA9IG9w
ZW5Ccm93c2VyKDAsc2VsZi5udW0yKQogICAgCgogICAgd2hpbGUgc2VsZi5j
b250IDwgc2VsZi50b3RhbF9saW5lczoKCiAgICAgICAgY29udGVvID0gMAoK
ICAgICAgICB0cnk6CgogICAgICAgICAgICBpZiBzZWxmLnRvb2xzLnZhbGlk
YXRlX2NyZWRpdG9zKHNlbGYudXNlcm5hbWUsc2VsZi5wYXNzd29yZCkgPT0g
VHJ1ZToKICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQo
J0NSRURJVE9TIElOU1VGSUNJRU5URVMgOi8nKQogICAgICAgICAgICAgICAg
cmV0dXJuIE5vbmUKICAgICAgICAgICAgCiAgICAgICAgICAgIGVtYWlseCA9
IHNlbGYubGFzdDErJycuam9pbihyYW5kb20uY2hvaWNlKCdBQkNERUZHSElK
S0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0d3h5ejAxMjM0
NTY3ODknKSBmb3IgXyBpbiByYW5nZSgzKSkrc2VsZi5maXJzdDErJycuam9p
bihyYW5kb20uY2hvaWNlKCdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFi
Y2RlZmdoaWprbG1ub3BxcnN0d3h5ejAxMjM0NTY3ODknKSBmb3IgXyBpbiBy
YW5nZSgzKSkrJ0BnbWFpbC5jb20nCiAgICAgICAgICAgICAgICAgICAgCiAg
ICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ1RFU1RFQU5ETywg
RVNQRVJBLi4nKQoKICAgICAgICAgICAgZHJpdmVyID0gaW5zdGFuY2VfZHJp
dmVyCgogICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoIndpbmRv
dy5vcGVuKCcnLCAnX2JsYW5rJyk7IikKICAgICAgICAgICAgdGltZS5zbGVl
cChyYW5kb20ucmFuZGludCgxLCA1KSkKCiAgICAgICAgICAgIGRyaXZlci5n
ZXQoJ2h0dHBzOi8vd3d3LnJlYWxjbGVhcnBvbGl0aWNzLmNvbS9zdWJzY3Jp
cHRpb25zLycpCiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRp
bnQoMSwgNSkpCgogICAgICAgICAgICBidG5QcmVtaXVtID0gV2ViRHJpdmVy
V2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2th
YmxlKChCeS5YUEFUSCwgIi8vYVtAY2xhc3M9J2FkLWZyZWUtcHJvZHVjdC1v
ZmZlcicgYW5kIGNvbnRhaW5zKHRleHQoKSwgJ1B1cmNoYXNlIEFkLUZyZWUg
U3Vic2NyaXB0aW9uJyldIikpKQogICAgICAgICAgICBkcml2ZXIuZXhlY3V0
ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0blByZW1pdW0p
CgogICAgICAgICAgICBidG5NZXMgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
NSkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRI
LCAiLy9saVtAaWQ9J3BheW1lbnQtcGxhbi1SZWFsQ2xlYXJHbG9iYWwtTW9u
dGhseV9BRF9GcmVlXzQ5OSddIikpKQogICAgICAgICAgICBkcml2ZXIuZXhl
Y3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0bk1lcykK
ICAgICAgICAgICAgdGltZS5zbGVlcCgxKQoKICAgICAgICAgICAgaW5wdXRO
YW1lID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIpLnVudGlsKEVDLnByZXNl
bmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0B0
eXBlPSd0ZXh0JyBhbmQgQG5hbWU9J2ZpcnN0X25hbWUnIGFuZCBjb250YWlu
cyhAY2xhc3MsICdmaXJzdF9uYW1lJykgYW5kIEBwbGFjZWhvbGRlcj0nRmly
c3QgTmFtZScgYW5kIEByZXF1aXJlZD0nJ10iKSkpLnNlbmRfa2V5cyhzZWxm
LmZpcnN0MSkKICAgICAgICAgICAgaW5wdXRMbmFtZSA9IFdlYkRyaXZlcldh
aXQoZHJpdmVyLCAyKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xv
Y2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAdHlwZT0ndGV4dCcgYW5kIEBu
YW1lPSdsYXN0X25hbWUnIGFuZCBjb250YWlucyhAY2xhc3MsICdsYXN0X25h
bWUnKSBhbmQgQHBsYWNlaG9sZGVyPSdMYXN0IE5hbWUnIGFuZCBAcmVxdWly
ZWQ9JyddIikpKS5zZW5kX2tleXMoc2VsZi5sYXN0MSkKICAgICAgICAgICAg
aW5wdXRFbWFpbCA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyKS51bnRpbChF
Qy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9p
bnB1dFtAdHlwZT0nZW1haWwnIGFuZCBAbmFtZT0nZW1haWwnIGFuZCBjb250
YWlucyhAY2xhc3MsICdlbWFpbCcpIGFuZCBAcGxhY2Vob2xkZXI9J1BsZWFz
ZSBFbnRlciB5b3VyIEVtYWlsIEFkZHJlc3MnIGFuZCBAcmVxdWlyZWQ9Jydd
IikpKS5zZW5kX2tleXMoZW1haWx4KQogICAgICAgICAgICBpbnB1dFRlcm1z
ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRf
dG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vaW5wdXRbQHR5cGU9J2No
ZWNrYm94JyBhbmQgQG5hbWU9J3Rvc19hZ3JlZScgYW5kIEBpZD0ndG9zX2Fn
cmVlJ10iKSkpCiAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgi
YXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgaW5wdXRUZXJtcykKICAgICAgICAg
ICAgdGltZS5zbGVlcCgxKQoKICAgICAgICAgICAgYnRuQ29udGludWUgPSBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMuZWxlbWVudF90b19i
ZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9pbnB1dFtAdHlwZT0nc3VibWl0
JyBhbmQgY29udGFpbnMoQGNsYXNzLCAnbmV4dCcpIGFuZCBAdmFsdWU9J0Nv
bnRpbnVlJyBhbmQgQHN0eWxlPSdkaXNwbGF5OiBpbmxpbmUtYmxvY2s7J10i
KSkpCiAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1l
bnRzWzBdLmNsaWNrKCk7IiwgYnRuQ29udGludWUpCgogICAgICAgICAgICB0
aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDMsIDYpKQoKICAgICAgICAgICAg
d2hpbGUgY29udGVvIDw9NCBhbmQgc2VsZi5jb250IDwgc2VsZi50b3RhbF9s
aW5lczoKCiAgICAgICAgICAgICAgICBjY3MsIG1lcywgYW5vLCBjY24sIHR5
cD0gc3RyKHNlbGYuY2NzW3NlbGYuY29udF0pLnN0cmlwKCkgLCBzdHIoc2Vs
Zi5tZXNbc2VsZi5jb250XSkuc3RyaXAoKSwgc3RyKHNlbGYuYW5pb1tzZWxm
LmNvbnRdKS5zdHJpcCgpLCBzdHIoc2VsZi5jdnZbc2VsZi5jb250XSkuc3Ry
aXAoKSwgc2VsZi50b29scy5iaW50eXBlKHNlbGYuY2NzW3NlbGYuY29udF0p
CiAgICAgICAgICAgICAgICBkZWFkbXNnID0gIkRFQUR8U05PV1hDSEt8REFS
S3wlc3wlc3wlc3wlc3wlc1xuIiAlIChjY3MsbWVzLGFubyxjY24sdHlwKQog
ICAgICAgICAgICAgICAgbGl2ZW1zZyA9ICJMSVZFfFNOT1dYQ0hLfERBUkt8
JXN8JXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2NuLHR5cCkKICAg
ICAgICAgICAgICAgIGZlY2hhID0gc2VsZi5tZXNbc2VsZi5jb250XSArIHNl
bGYuYW5pb1tzZWxmLmNvbnRdWzI6NF0KCgogICAgICAgICAgICAgICAgaW5w
dXRDQyA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyKS51bnRpbChFQy5wcmVz
ZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9sYWJlbFtA
Zm9yPSdjYXJkLW51bWJlcicgYW5kIGNvbnRhaW5zKEBjbGFzcywgJ25nLWJp
bmRpbmcnKSBhbmQgdGV4dCgpPSdDYXJkIE51bWJlciddIikpKS5zZW5kX2tl
eXMoc2VsZi5jY3Nbc2VsZi5jb250XSkKICAgICAgICAgICAgICAgIGlucHV0
RmVjaGEgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMikudW50aWwoRUMucHJl
c2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vbGFiZWxb
QGZvcj0nY2FyZC1leHBpcnknIGFuZCBjb250YWlucyhAY2xhc3MsICduZy1i
aW5kaW5nJykgYW5kIHRleHQoKT0nRXhwaXJhdGlvbiddIikpKS5zZW5kX2tl
eXMoZmVjaGEpCiAgICAgICAgICAgICAgICBpbnB1dENWViA9IFdlYkRyaXZl
cldhaXQoZHJpdmVyLCAyKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50
X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9sYWJlbFtAZm9yPSdjYXJkLWN2Yycg
YW5kIGNvbnRhaW5zKEBjbGFzcywgJ25nLWJpbmRpbmcnKSBhbmQgdGV4dCgp
PSdDVkMnXSIpKSkuc2VuZF9rZXlzKHNlbGYuY3Z2W3NlbGYuY29udF0pCgog
ICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKQoKICAgICAgICAgICAgICAg
IGJ0blBheSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5l
bGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRvbltA
dHlwZT0nc3VibWl0JyBhbmQgQGFyaWEtbGFiZWw9J1N1Ym1pdCBQYXltZW50
JyBhbmQgY29udGFpbnMoQGNsYXNzLCAnYnRuJykgYW5kIGNvbnRhaW5zKEBj
bGFzcywgJ2J0bi1zdWNjZXNzJykgYW5kIGNvbnRhaW5zKEBjbGFzcywgJ2J0
bi1ibG9jaycpIGFuZCBjb250YWlucyhAY2xhc3MsICdzdHJpcGUtc3VibWl0
LWJ0bicpIGFuZCBjb250YWlucyhAY2xhc3MsICduZy1iaW5kaW5nJykgYW5k
IHRleHQoKT0nU3VibWl0IFBheW1lbnQnXSIpKSkKICAgICAgICAgICAgICAg
IGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7
IiwgYnRuUGF5KQoKICAgICAgICAgICAgICAgICMgUmV2aXNhciAKICAgICAg
ICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBidG5QYXkgPSBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9f
YmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0B0eXBlPSdzdWJt
aXQnIGFuZCBAYXJpYS1sYWJlbD0nU3VibWl0IFBheW1lbnQnIGFuZCBjb250
YWlucyhAY2xhc3MsICdidG4nKSBhbmQgY29udGFpbnMoQGNsYXNzLCAnYnRu
LXN1Y2Nlc3MnKSBhbmQgY29udGFpbnMoQGNsYXNzLCAnYnRuLWJsb2NrJykg
YW5kIGNvbnRhaW5zKEBjbGFzcywgJ3N0cmlwZS1zdWJtaXQtYnRuJykgYW5k
IGNvbnRhaW5zKEBjbGFzcywgJ25nLWJpbmRpbmcnKSBhbmQgdGV4dCgpPSdT
dWJtaXQgUGF5bWVudCddIikpKQogICAgICAgICAgICAgICAgICAgIG1zZ0Rl
YWQgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMikudW50aWwoRUMucHJlc2Vu
Y2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vc3BhbltAZXYt
Y29tcGlsZT0nZXJyb3IubWVzc2FnZScgYW5kIHRleHQoKT0nVGhlcmUgd2Fz
IGEgcHJvYmxlbSB3aXRoIHRoZSBwYXltZW50LCBwbGVhc2UgdHJ5IGFnYWlu
J10iKSkpLnRleHQKICAgICAgICAgICAgICAgICAgICBwcmludChtc2dEZWFk
KQogICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVh
ZG1zZykKICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAg
ICAgICBtc2dMaXZlID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIpLnVudGls
KEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIv
L3N0cm9uZ1t0ZXh0KCk9J1RoYW5rIHlvdSBmb3IgeW91ciBwdXJjaGFzZSEn
XSIpKSkudGV4dAogICAgICAgICAgICAgICAgICAgIHByaW50KG1zZ0xpdmUp
CiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi50b29scy5yZXBldGlyKGNj
cykgPT0gVHJ1ZToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ1JF
TElWRTonLCBsaXZlbXNnKQogICAgICAgICAgICAgICAgICAgICAgICBzZWxm
LnRleHRfZGVhZC5lbWl0KGRlYWRtc2cpCiAgICAgICAgICAgICAgICAgICAg
ZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2xpdmUu
ZW1pdChsaXZlbXNnKQoKICAgICAgICAgICAgICAgICAgICAjbXNnTGl2ZTIg
PSAvLypbQGlkPSJ0aGFua3NfbW9kYWwiXS9kaXYvZGl2L2RpdlsyXS9kaXZb
M10vcFsxXS9zdHJvbmcKICAgICAgICAgICAgICAgICAgICAjbXNnTGl2ZTMg
PSAvaHRtbC9ib2R5L2RpdlsyXS9kaXYvZGl2L2Rpdi9kaXZbMl0vZGl2WzNd
L3BbMV0vc3Ryb25nCgogICAgICAgICAgICAgICAgCgogICAgICAgICAgICAg
ICAgc2VsZi50b29scy5ib3JyYXJjYygiJXN8JXN8JXN8JXNcbiIgJSAoY2Nz
LG1lcyxhbm8sY2NuKSkKICAgICAgICAgICAgICAgIHNlbGYuY29udCs9MQog
ICAgICAgICAgICAgICAgY29udGVvICs9MQoKICAgICAgICAgICAgc2VsZi50
ZXh0X2NoYW5nZWQuZW1pdCgnRUxJTUlOQU5ETyBSQVNUUkVBRE9SRVMhJykK
ICAgICAgICAgICAgZGVzYmFuKGRyaXZlcikKICAgICAgICAgICAgZHJpdmVy
LnF1aXQoKQogICAgICAgICAgICBjbG9zZUNocm9tZShzZWxmKQogICAgICAg
ICAgICBpbnN0YW5jZV9kcml2ZXIgPSBvcGVuQnJvd3NlcigwLHNlbGYubnVt
MikKICAgICAgICAgICAgIAogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAg
I2Rlc2Jhbihkcml2ZXIpCiAgICAgICAgICAgIGRyaXZlci5xdWl0KCkKICAg
ICAgICAgICAgY2xvc2VDaHJvbWUoc2VsZikKICAgICAgICAgICAgI2luc3Rh
bmNlX2RyaXZlciA9IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0yKQogICAgICAg
ICAgICBleGNfdHlwZSwgZXhjX29iaiwgZXhjX3RiID0gc3lzLmV4Y19pbmZv
KCk7Zm5hbWUgPSBvcy5wYXRoLnNwbGl0KGV4Y190Yi50Yl9mcmFtZS5mX2Nv
ZGUuY29fZmlsZW5hbWUpWzFdCiAgICAgICAgICAgIGVycm9yX21lc3NhZ2U9
IChzdHIoZXhjX3R5cGUpKycgJytzdHIoZXhjX3RiLnRiX2xpbmVubykpCiAg
ICAgICAgICAgIHNlbGYucHJpbnRlZC5lbWl0KGVycm9yX21lc3NhZ2UpCiAg
ICAgICAgICAgICNwcm94eUVycm9yID0gcHJveHlFcnJvciArIDEKICAgICAg
ICAgICAgaW5zdGFuY2VfZHJpdmVyID0gb3BlbkJyb3dzZXIoMCxzZWxmLm51
bTIpCiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgIHNlbGYudGV4dF9j
aGFuZ2VkLmVtaXQoJ1RFU1RFTyBGSU5BTElaQURPJykKCmRlZiBFeHByZXNz
KHNlbGYpOgoKICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoIklOSUNJQU5E
TyBHQVRFIEVYUFJFU1MiKQogICAgaW5zdGFuY2VfZHJpdmVyID0gb3BlbkJy
b3dzZXIoMCxzZWxmLm51bTIpCgogICAgd2hpbGUgc2VsZi5jb250IDwgc2Vs
Zi50b3RhbF9saW5lczoKCiAgICAgICAgY29udGVvID0gMAoKICAgICAgICB0
cnk6CiAgICAgICAgICAgIGlmIHNlbGYudG9vbHMudmFsaWRhdGVfY3JlZGl0
b3Moc2VsZi51c2VybmFtZSxzZWxmLnBhc3N3b3JkKSA9PSBUcnVlOgogICAg
ICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnQ1JFRElUT1Mg
SU5TVUZJQ0lFTlRFUyA6LycpCiAgICAgICAgICAgICAgICByZXR1cm4gTm9u
ZQogICAgICAgICAgICAKICAgICAgICAgICAgZW1haWx4ID0gc2VsZi5sYXN0
MSsnJy5qb2luKHJhbmRvbS5jaG9pY2UoJ0FCQ0RFRkdISUpLTE1OT1BRUlNU
VVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R3eHl6MDEyMzQ1Njc4OScpIGZv
ciBfIGluIHJhbmdlKDMpKStzZWxmLmZpcnN0MSsnJy5qb2luKHJhbmRvbS5j
aG9pY2UoJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamts
bW5vcHFyc3R3eHl6MDEyMzQ1Njc4OScpIGZvciBfIGluIHJhbmdlKDMpKSsn
QGdtYWlsLmNvbScKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAg
ICAgIAogICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdURVNU
RUFORE8sIEVTUEVSQS4uJykKCiAgICAgICAgICAgIGRyaXZlciA9IGluc3Rh
bmNlX2RyaXZlcgoKICAgICAgICAgICAgZHJpdmVyLmdldCgnaHR0cHM6Ly93
d3cuZXhwcmVzcy5jb20vY2xvdGhpbmcvbWVuL3BvbGthLWRvdC1kcmVzcy1z
b2Nrcy9wcm8vMDQ2MjEyNDcvY29sb3IvUGl0Y2glMjBCbGFjay8nKQoKICAg
ICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgxLCAzKSkKCiAg
ICAgICAgICAgIHRlcm1zID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51
bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIv
L2J1dHRvbltjb250YWlucyhAY2xhc3MsICdvbmV0cnVzdC1jbG9zZS1idG4t
aGFuZGxlcicpXSIpKSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2Ny
aXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCB0ZXJtcykKICAgICAgICAg
ICAgCiAgICAgICAgICAgIGJ0bkFkZCA9IFdlYkRyaXZlcldhaXQoZHJpdmVy
LCAxMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQ
QVRILCAiLy9idXR0b25bY29udGFpbnModGV4dCgpLCAnQWRkIHRvIGJhZycp
XSIpKSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1
bWVudHNbMF0uY2xpY2soKTsiLCBidG5BZGQpCgogICAgICAgICAgICB0aW1l
LnNsZWVwKHJhbmRvbS5yYW5kaW50KDEsIDMpKQoKICAgICAgICAgICAgZHJp
dmVyLmdldCgnaHR0cHM6Ly93d3cuZXhwcmVzcy5jb20vYmFnJykKCiAgICAg
ICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMSwgMykpCgogICAg
ICAgICAgICBnb0NoayA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50
aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9i
dXR0b25bQGlkPSdjb250aW51ZS10by1jaGVja291dCddIikpKQogICAgICAg
ICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGlj
aygpOyIsIGdvQ2hrKQoKICAgICAgICAgICAgYnRuR3Vlc3QgPSBXZWJEcml2
ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xp
Y2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW2NvbnRhaW5zKHRleHQoKSwg
J0NoZWNrb3V0IGFzIEd1ZXN0JyldIikpKQogICAgICAgICAgICBkcml2ZXIu
ZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0bkd1
ZXN0KQoKICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgx
LCAzKSkKCiAgICAgICAgICAgIGlucHV0TmFtZSA9IFdlYkRyaXZlcldhaXQo
ZHJpdmVyLCAzKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0
ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2NvbnRhY3QtaW5mb3JtYXRp
b24tZmlyc3RuYW1lJ10iKSkpLnNlbmRfa2V5cyhzZWxmLmZpcnN0MSkKICAg
ICAgICAgICAgaW5wdXRMTmFtZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAz
KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQ
QVRILCAiLy9pbnB1dFtAaWQ9J2NvbnRhY3QtaW5mb3JtYXRpb24tbGFzdG5h
bWUnXSIpKSkuc2VuZF9rZXlzKHNlbGYubGFzdDEpCiAgICAgICAgICAgIGlu
cHV0RW1haWwgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMu
cHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5w
dXRbQGlkPSdjb250YWN0LWluZm9ybWF0aW9uLWVtYWlsJ10iKSkpLnNlbmRf
a2V5cyhlbWFpbHgpCiAgICAgICAgICAgIGlucHV0UmVtYWlsID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDMpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1l
bnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0nY29udGFjdC1p
bmZvcm1hdGlvbi1jb25maXJtZW1haWwnXSIpKSkuc2VuZF9rZXlzKGVtYWls
eCkKICAgICAgICAgICAgbnVtZSA9IGYiMzF7cmFuZG9tLnJhbmRpbnQoMCwg
OSl9eycnLmpvaW4ocmFuZG9tLmNob2ljZXMoJzAxMjM0NTY3ODknLCBrPTcp
KX0iCiAgICAgICAgICAgIGlucHV0UGhvbmUgPSBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgMykudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVk
KChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdjb250YWN0LWluZm9ybWF0aW9u
LXBob25lJ10iKSkpLnNlbmRfa2V5cyhudW1lKQogICAgICAgICAgICB0aW1l
LnNsZWVwKDEpCiAgICAgICAgICAgIGJ0blNhdmUgPSBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxl
KChCeS5YUEFUSCwgIi8vYnV0dG9uW3NwYW5bdGV4dCgpPSdTYXZlICYgQ29u
dGludWUnXV0iKSkpCiAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3Njcmlw
dCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgYnRuU2F2ZSkKCiAgICAgICAg
ICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMSwgMykpCgogICAgICAg
ICAgICBpbnB1dEFkZHJzID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMpLnVu
dGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgs
ICIvL2lucHV0W0BpZD0nc2hpcHBpbmcubGluZTEnXSIpKSkuc2VuZF9rZXlz
KCI4NzIgd2luZGluZyBsYWtlIHJkIikKICAgICAgICAgICAgaW5wdXRaaXAg
PSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMucHJlc2VuY2Vf
b2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdz
aGlwcGluZy5wb3N0YWxDb2RlJ10iKSkpLnNlbmRfa2V5cygiMzMzNTEiKQog
ICAgICAgICAgICBpbnB1dENpdHkgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
MykudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5Y
UEFUSCwgIi8vaW5wdXRbQGlkPSdzaGlwcGluZy5jaXR5J10iKSkpLnNlbmRf
a2V5cygiU3VucmlzZSIpCiAgICAgICAgICAgIGlucHV0U3RhdGUgPSBTZWxl
Y3QoZHJpdmVyLmZpbmRfZWxlbWVudChieT1CeS5YUEFUSCwgdmFsdWU9Ii8v
c2VsZWN0W0BpZD0ncnZuZGQtLXNoaXBwaW5nLnN0YXRlLS0zJ10iKSkuc2Vs
ZWN0X2J5X3ZhbHVlKCdGTCcpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkK
ICAgICAgICAgICAgYnRuU2F2ZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAx
MCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRI
LCAiLy9idXR0b25bc3Bhblt0ZXh0KCk9J1NhdmUgJiBDb250aW51ZSddXSIp
KSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVu
dHNbMF0uY2xpY2soKTsiLCBidG5TYXZlKQoKICAgICAgICAgICAgdGltZS5z
bGVlcChyYW5kb20ucmFuZGludCgzLCA1KSkKCiAgICAgICAgICAgIGJ0blNh
dmUgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1l
bnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW3NwYW5b
dGV4dCgpPSdTYXZlICYgQ29udGludWUnXV0iKSkpCiAgICAgICAgICAgIGRy
aXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7Iiwg
YnRuU2F2ZSkKCiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRp
bnQoMSwgMykpCgogICAgICAgICAgICB3aGlsZSBjb250ZW8gPD0xOSBhbmQg
c2VsZi5jb250IDwgc2VsZi50b3RhbF9saW5lczoKCiAgICAgICAgICAgICAg
ICBpZiBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmZyYW1l
X3RvX2JlX2F2YWlsYWJsZV9hbmRfc3dpdGNoX3RvX2l0KChCeS5YUEFUSCwi
Ly9pZnJhbWVbQGlkPSdhdXJ1c0lmcmFtZSddIikpKToKCiAgICAgICAgICAg
ICAgICAgICAgY2NzLCBtZXMsIGFubywgY2NuLCB0eXA9IHN0cihzZWxmLmNj
c1tzZWxmLmNvbnRdKS5zdHJpcCgpICwgc3RyKHNlbGYubWVzW3NlbGYuY29u
dF0pLnN0cmlwKCksIHN0cihzZWxmLmFuaW9bc2VsZi5jb250XSkuc3RyaXAo
KSwgc3RyKHNlbGYuY3Z2W3NlbGYuY29udF0pLnN0cmlwKCksIHNlbGYudG9v
bHMuYmludHlwZShzZWxmLmNjc1tzZWxmLmNvbnRdKQogICAgICAgICAgICAg
ICAgICAgIGRlYWRtc2cgPSAiREVBRHxTTk9XWENIS3xFWFBSRVNTfCVzfCVz
fCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXApCiAgICAgICAg
ICAgICAgICAgICAgbGl2ZW1zZyA9ICJMSVZFfFNOT1dYQ0hLfEVYUFJFU1N8
JXN8JXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2NuLHR5cCkKICAg
ICAgICAgICAgICAgICAgICBmZWNoYSA9IHNlbGYubWVzW3NlbGYuY29udF0g
KyBzZWxmLmFuaW9bc2VsZi5jb250XVsyOjRdCgogICAgICAgICAgICAgICAg
ICAgIGlucHV0Q0MgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwo
RUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8v
aW5wdXRbQGlkPSdjTnVtYmVyJ10iKSkpLnNlbmRfa2V5cyhzZWxmLmNjc1tz
ZWxmLmNvbnRdKQogICAgICAgICAgICAgICAgICAgIGlucHV0RmVjaGEgPSBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMucHJlc2VuY2Vfb2Zf
ZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdleERh
dGUnXSIpKSkuc2VuZF9rZXlzKGZlY2hhKQogICAgICAgICAgICAgICAgICAg
IGlucHV0Q1ZWID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMpLnVudGlsKEVD
LnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lu
cHV0W0BpZD0nc2VjQ29kZSddIikpKS5zZW5kX2tleXMoc2VsZi5jdnZbc2Vs
Zi5jb250XSkKCiAgICAgICAgICAgICAgICAgICAgZHJpdmVyLnN3aXRjaF90
by5kZWZhdWx0X2NvbnRlbnQoKQoKICAgICAgICAgICAgICAgICAgICB0aW1l
LnNsZWVwKDEpCiAgICAgICAgICAgICAgICAgICAgYnRuU2F2ZSA9IFdlYkRy
aXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9j
bGlja2FibGUoKEJ5LlhQQVRILCAiLy9idXR0b25bc3Bhblt0ZXh0KCk9J1Nh
dmUgJiBDb250aW51ZSddXSIpKSkKICAgICAgICAgICAgICAgICAgICBkcml2
ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0
blNhdmUpCgogICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAg
ICAgICAgICAgICAgICAgICBidG5PcmRlciA9IFdlYkRyaXZlcldhaXQoZHJp
dmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5
LlhQQVRILCAiLy9idXR0b25bY29udGFpbnMoc3BhbiwgJ1BsYWNlIE9yZGVy
JyldIikpKQogICAgICAgICAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3Nj
cmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgYnRuT3JkZXIpCgogICAg
ICAgICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50
aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9i
dXR0b25bY29udGFpbnMoc3BhbiwgJ1BsYWNlIE9yZGVyJyldIikpKQoKICAg
ICAgICAgICAgICAgICAgICAjIFJldmlzYXIKCiAgICAgICAgICAgICAgICAg
ICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBtc2dEZWFkID0gV2Vi
RHJpdmVyV2FpdChkcml2ZXIsIDMpLnVudGlsKEVDLnByZXNlbmNlX29mX2Vs
ZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2RpdltAaWQ9J3J2bi1ub3Rl
LU5hTiddIikpKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50
KG1zZ0RlYWQpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICdXZSBleHBl
cmllbmNlZCBhIHByb2JsZW0gc3VibWl0dGluZyB5b3VyIHBheW1lbnQuIFBs
ZWFzZSB0cnkgYWdhaW4uJyBpbiBtc2dEZWFkOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgc2Vs
Zi50ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAgICAgICAgICAgICAgICAg
IGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ1Jldmlz
YXIuJywgbGl2ZW1zZykKICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0g
ZHJpdmVyLmN1cnJlbnRfdXJsCiAgICAgICAgICAgICAgICAgICAgICAgIHBy
aW50KHVybCkKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1
MDApCgogICAgICAgICAgICAgICAgICAgICNpZiBzZWxmLnRvb2xzLnJlcGV0
aXIoY2NzKSA9PSBUcnVlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
I3ByaW50KCdSRUxJVkU6JywgbGl2ZW1zZykKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICNzZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRtc2cpCiAgICAg
ICAgICAgICAgICAgICAgICAgICNlbHNlOgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgI3NlbGYudGV4dF9saXZlLmVtaXQobGl2ZW1zZykKCiAgICAg
ICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50KCdF
cnJvciBlbiBmcmFtZSBkZSBwYWdvLicpCgogICAgICAgICAgICAgICAgc2Vs
Zi50b29scy5ib3JyYXJjYygiJXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxh
bm8sY2NuKSkKICAgICAgICAgICAgICAgIHNlbGYuY29udCs9MQogICAgICAg
ICAgICAgICAgY29udGVvICs9MQogICAgICAgICAgICAgICAgZHJpdmVyLmdl
dCgnaHR0cHM6Ly93d3cuZXhwcmVzcy5jb20vY2hlY2tvdXQvcGF5bWVudCcp
CiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDEs
IDMpKQoKICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnRUxJ
TUlOQU5ETyBSQVNUUkVBRE9SRVMhJykKICAgICAgICAgICAgZGVzYmFuKGRy
aXZlcikKICAgICAgICAgICAgZHJpdmVyLnF1aXQoKQogICAgICAgICAgICBj
bG9zZUNocm9tZShzZWxmKQogICAgICAgICAgICBpbnN0YW5jZV9kcml2ZXIg
PSBvcGVuQnJvd3NlcigwLHNlbGYubnVtMikKICAgICAgICAgICAgIAogICAg
ICAgIGV4Y2VwdDoKICAgICAgICAgICAgI2Rlc2Jhbihkcml2ZXIpCiAgICAg
ICAgICAgIGRyaXZlci5xdWl0KCkKICAgICAgICAgICAgY2xvc2VDaHJvbWUo
c2VsZikKICAgICAgICAgICAgI2luc3RhbmNlX2RyaXZlciA9IG9wZW5Ccm93
c2VyKDAsc2VsZi5udW0yKQogICAgICAgICAgICBleGNfdHlwZSwgZXhjX29i
aiwgZXhjX3RiID0gc3lzLmV4Y19pbmZvKCk7Zm5hbWUgPSBvcy5wYXRoLnNw
bGl0KGV4Y190Yi50Yl9mcmFtZS5mX2NvZGUuY29fZmlsZW5hbWUpWzFdCiAg
ICAgICAgICAgIGVycm9yX21lc3NhZ2U9IChzdHIoZXhjX3R5cGUpKycgJytz
dHIoZXhjX3RiLnRiX2xpbmVubykpCiAgICAgICAgICAgIHNlbGYucHJpbnRl
ZC5lbWl0KGVycm9yX21lc3NhZ2UpCiAgICAgICAgICAgICNwcm94eUVycm9y
ID0gcHJveHlFcnJvciArIDEKICAgICAgICAgICAgaW5zdGFuY2VfZHJpdmVy
ID0gb3BlbkJyb3dzZXIoMCxzZWxmLm51bTIpCiAgICAgICAgICAgIAogICAg
ICAgICAgICAKICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ1RFU1RFTyBG
SU5BTElaQURPJykKCmRlZiBadW9yYW1hc3Moc2VsZik6CgogICAgZGVmIHJl
dkFsZXJ0YShkcml2ZXIpOgogICAgICAgIHRyeTogICAgCiAgICAgICAgICAg
ICMgRXNwZXJhciBoYXN0YSAxMCBzZWd1bmRvcyBwYXJhIHF1ZSBhcGFyZXpj
YSBsYSBhbGVydGEKICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIs
IDMpLnVudGlsKEVDLmFsZXJ0X2lzX3ByZXNlbnQoKSkKICAgICAgICAgICAg
YWxlcnQgPSBkcml2ZXIuc3dpdGNoX3RvLmFsZXJ0CiAgICAgICAgICAgIHRl
eHRvX2RlbF9hbGVydCA9IGFsZXJ0LnRleHQKICAgICAgICAgICAgYWxlcnQu
YWNjZXB0KCkKICAgICAgICAgICAgZHJpdmVyLnJlZnJlc2goKQogICAgICAg
ICAgICByZXR1cm4gdGV4dG9fZGVsX2FsZXJ0CiAgICAgICAgZXhjZXB0Ogog
ICAgICAgICAgICByZXR1cm4gJ0VSUk9SJwoKICAgIGZyb20gc2VsZW5pdW0u
Y29tbW9uLmV4Y2VwdGlvbnMgaW1wb3J0IE5vQWxlcnRQcmVzZW50RXhjZXB0
aW9uLCBVbmV4cGVjdGVkQWxlcnRQcmVzZW50RXhjZXB0aW9uCgogICAgc2Vs
Zi50ZXh0X2NoYW5nZWQuZW1pdCgiSU5JQ0lBTkRPIEdBVEUgRVhQUkVTUyIp
CiAgICBpbnN0YW5jZV9kcml2ZXIgPSBvcGVuQnJvd3NlcigwLHNlbGYubnVt
MikKCiAgICB3aGlsZSBzZWxmLmNvbnQgPCBzZWxmLnRvdGFsX2xpbmVzOgoK
ICAgICAgICBjb250ZW8gPSAwCgogICAgICAgIHRyeToKCiAgICAgICAgICAg
IHdoaWxlIGNvbnRlbyA8PTQgYW5kIHNlbGYuY29udCA8IHNlbGYudG90YWxf
bGluZXM6CiAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBzZWxmLnRvb2xz
LnZhbGlkYXRlX2NyZWRpdG9zKHNlbGYudXNlcm5hbWUsc2VsZi5wYXNzd29y
ZCkgPT0gVHJ1ZToKICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfY2hh
bmdlZC5lbWl0KCdDUkVESVRPUyBJTlNVRklDSUVOVEVTIDovJykKICAgICAg
ICAgICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICAgICAgICAgCiAg
ICAgICAgICAgICAgICBlbWFpbHggPSBzZWxmLmxhc3QxKycnLmpvaW4ocmFu
ZG9tLmNob2ljZSgnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZn
aGlqa2xtbm9wcXJzdHd4eXowMTIzNDU2Nzg5JykgZm9yIF8gaW4gcmFuZ2Uo
MykpK3NlbGYuZmlyc3QxKycnLmpvaW4ocmFuZG9tLmNob2ljZSgnQUJDREVG
R0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHd4eXow
MTIzNDU2Nzg5JykgZm9yIF8gaW4gcmFuZ2UoMykpKydAZ21haWwuY29tJwog
ICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAK
ICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ1RFU1RF
QU5ETywgRVNQRVJBLi4nKQoKICAgICAgICAgICAgICAgIGRyaXZlciA9IGlu
c3RhbmNlX2RyaXZlcgoKICAgICAgICAgICAgICAgIHRyeToKCiAgICAgICAg
ICAgICAgICAgICAgZHJpdmVyLmdldCgnaHR0cHM6Ly9zZWN1cmUubWluZHZh
bGxleS5jb20vY2hlY2tvdXQvej9wbGFucz0yYzkyYTBmZDUyOGRkZWZlMDE1
MmExYTYyNDcyMWI2MyUyQzJjOTJhMGZiNTFiNDI3MTUwMTUxYzhkYWI2OTY2
YjdiJnRhZ3M9WmVud2FyZCUyQ2RpZ2l0YWwlMkNzdWJzY3JpcHRpb24lMkNt
b250aGx5X3BheW1lbnQlMkNaZW53YXJkX1N1YnNjcmliZVBhZ2VfSmFuXzIw
MTYmZGlzY291bnQ9JnpwaD1lZDcwYzQ3MjZjZDE1MDNhYzA5MWU2NjUzNzRi
NjBmZCZhZnRlcnNhbGU9MCZhZmZfdGFncz0mcmV0dXJuPWh0dHBzJTNBJTJG
JTJGemVud2FyZC5jb20lMkZtdi1zZXJ2aWNlJTJGQWZ0ZXJzYWxlJTJGSW5p
dGlhbGl6ZXImcmV0dXJuX29mZmxpbmU9aHR0cHMlM0ElMkYlMkZ6ZW53YXJk
LmNvbSUyRnByb2R1Y3RzJTJGb2ZmbGluZSZfX2hzdGM9MTQ0NjgyMDI2LmM0
YTU3NzAyOWM0OWU0NGI3M2JkM2JlZTZmYTM4NTY1LjE3MDUxOTA0MDAxNTUu
MTcwNTE5MDQwMDE1Ni4xNzA1MTkwNDAwMTU3LjEmX19oc3NjPTE0NDY4MjAy
Ni4xLjE3MDUxOTA0MDAxNTgmX19oc2ZwPTIyMzE2MjMyODIjZXhwaXJhdGlv
bicpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGV4Y2VwdCBV
bmV4cGVjdGVkQWxlcnRQcmVzZW50RXhjZXB0aW9uOgoKICAgICAgICAgICAg
ICAgICAgICBhbGVydCA9IGRyaXZlci5zd2l0Y2hfdG8uYWxlcnQKICAgICAg
ICAgICAgICAgICAgICBhbGVydC5hY2NlcHQoKQogICAgICAgICAgICAgICAg
ICAgIGRyaXZlci5nZXQoJ2h0dHBzOi8vc2VjdXJlLm1pbmR2YWxsZXkuY29t
L2NoZWNrb3V0L3o/cGxhbnM9MmM5MmEwZmQ1MjhkZGVmZTAxNTJhMWE2MjQ3
MjFiNjMlMkMyYzkyYTBmYjUxYjQyNzE1MDE1MWM4ZGFiNjk2NmI3YiZ0YWdz
PVplbndhcmQlMkNkaWdpdGFsJTJDc3Vic2NyaXB0aW9uJTJDbW9udGhseV9w
YXltZW50JTJDWmVud2FyZF9TdWJzY3JpYmVQYWdlX0phbl8yMDE2JmRpc2Nv
dW50PSZ6cGg9ZWQ3MGM0NzI2Y2QxNTAzYWMwOTFlNjY1Mzc0YjYwZmQmYWZ0
ZXJzYWxlPTAmYWZmX3RhZ3M9JnJldHVybj1odHRwcyUzQSUyRiUyRnplbndh
cmQuY29tJTJGbXYtc2VydmljZSUyRkFmdGVyc2FsZSUyRkluaXRpYWxpemVy
JnJldHVybl9vZmZsaW5lPWh0dHBzJTNBJTJGJTJGemVud2FyZC5jb20lMkZw
cm9kdWN0cyUyRm9mZmxpbmUmX19oc3RjPTE0NDY4MjAyNi5jNGE1NzcwMjlj
NDllNDRiNzNiZDNiZWU2ZmEzODU2NS4xNzA1MTkwNDAwMTU1LjE3MDUxOTA0
MDAxNTYuMTcwNTE5MDQwMDE1Ny4xJl9faHNzYz0xNDQ2ODIwMjYuMS4xNzA1
MTkwNDAwMTU4Jl9faHNmcD0yMjMxNjIzMjgyI2V4cGlyYXRpb24nKQoKICAg
ICAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMSwgMykp
CgogICAgICAgICAgICAgICAgaW5wdXRuYW1lID0gV2ViRHJpdmVyV2FpdChk
cml2ZXIsIDMpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRl
ZCgoQnkuWFBBVEgsICIvL2lucHV0W0BuYW1lPSdzdWJzY3JpcHRpb25bZmly
c3RfbmFtZV0nXSIpKSkuc2VuZF9rZXlzKHNlbGYuZmlyc3QxKQogICAgICAg
ICAgICAgICAgaW5wdXRsbmFtZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAz
KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQ
QVRILCAiLy9pbnB1dFtAbmFtZT0nc3Vic2NyaXB0aW9uW2xhc3RfbmFtZV0n
XSIpKSkuc2VuZF9rZXlzKHNlbGYubGFzdDEpCiAgICAgICAgICAgICAgICBp
bnB1dGVtYWlsID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMpLnVudGlsKEVD
LnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lu
cHV0W0BuYW1lPSdzdWJzY3JpcHRpb25bZW1haWxdJ10iKSkpLnNlbmRfa2V5
cyhlbWFpbHgpCiAgICAgICAgICAgICAgICBpbnB1dHppcCA9IFdlYkRyaXZl
cldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50
X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAbmFtZT0nc3Vic2NyaXB0
aW9uW2JpbGxpbmdfemlwX2NvZGVdJ10iKSkpLnNlbmRfa2V5cygnMzMzNTEn
KQogICAgICAgICAgICAgICAgc2VsZWN0U3RhdGUgPSBTZWxlY3QoZHJpdmVy
LmZpbmRfZWxlbWVudChieT1CeS5YUEFUSCwgdmFsdWU9Ii8vc2VsZWN0W0Bu
YW1lPSdzdWJzY3JpcHRpb25bYmlsbGluZ19zdGF0ZV0nXSIpKS5zZWxlY3Rf
YnlfdmFsdWUoJ0ZMJykKCiAgICAgICAgICAgICAgICBpZiBXZWJEcml2ZXJX
YWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmZyYW1lX3RvX2JlX2F2YWlsYWJs
ZV9hbmRfc3dpdGNoX3RvX2l0KChCeS5YUEFUSCwiLy9pZnJhbWVbY29udGFp
bnMoQHNyYywgJ3p1b3JhLmNvbS9hcHBzL1B1YmxpY0hvc3RlZFBhZ2VMaXRl
JyldIikpKToKCiAgICAgICAgICAgICAgICAgICAgY2NzLCBtZXMsIGFubywg
Y2NuLCB0eXA9IHN0cihzZWxmLmNjc1tzZWxmLmNvbnRdKS5zdHJpcCgpICwg
c3RyKHNlbGYubWVzW3NlbGYuY29udF0pLnN0cmlwKCksIHN0cihzZWxmLmFu
aW9bc2VsZi5jb250XSkuc3RyaXAoKSwgc3RyKHNlbGYuY3Z2W3NlbGYuY29u
dF0pLnN0cmlwKCksIHNlbGYudG9vbHMuYmludHlwZShzZWxmLmNjc1tzZWxm
LmNvbnRdKQogICAgICAgICAgICAgICAgICAgIGRlYWRtc2cgPSAiREVBRHxT
Tk9XWENIS3xaVU9SQU1BU1N8JXN8JXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1l
cyxhbm8sY2NuLHR5cCkKICAgICAgICAgICAgICAgICAgICBsaXZlbXNnID0g
IkxJVkV8U05PV1hDSEt8WlVPUkFNQVNTfCVzfCVzfCVzfCVzfCVzXG4iICUg
KGNjcyxtZXMsYW5vLGNjbix0eXApCgogICAgICAgICAgICAgICAgICAgIGhv
bGRlciA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5wcmVz
ZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtA
bmFtZT0nZmllbGRfY3JlZGl0Q2FyZEhvbGRlck5hbWUnXSIpKSkKICAgICAg
ICAgICAgICAgICAgICBob2xkZXIuY2xlYXIoKQogICAgICAgICAgICAgICAg
ICAgIGhvbGRlci5zZW5kX2tleXMoc2VsZi5maXJzdDEgKyAnICcgKyBzZWxm
Lmxhc3QxKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAg
ICAgIGlucHV0Y2MgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwo
RUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8v
aW5wdXRbQG5hbWU9J2ZpZWxkX2NyZWRpdENhcmROdW1iZXInXSIpKSkKICAg
ICAgICAgICAgICAgICAgICBpbnB1dGNjLmNsZWFyKCkKICAgICAgICAgICAg
ICAgICAgICBpbnB1dGNjLnNlbmRfa2V5cyhzZWxmLmNjc1tzZWxmLmNvbnRd
KQoKICAgICAgICAgICAgICAgICAgICBtb250aCA9IFNlbGVjdChkcml2ZXIu
ZmluZF9lbGVtZW50KGJ5PUJ5LlhQQVRILCB2YWx1ZT0iLy9zZWxlY3RbQG5h
bWU9J2ZpZWxkX2NyZWRpdENhcmRFeHBpcmF0aW9uTW9udGgnXSIpKS5zZWxl
Y3RfYnlfdmFsdWUoc2VsZi5tZXNbc2VsZi5jb250XSkKICAgICAgICAgICAg
ICAgICAgICB5ZWFyID0gU2VsZWN0KGRyaXZlci5maW5kX2VsZW1lbnQoYnk9
QnkuWFBBVEgsIHZhbHVlPSIvL3NlbGVjdFtAbmFtZT0nZmllbGRfY3JlZGl0
Q2FyZEV4cGlyYXRpb25ZZWFyJ10iKSkuc2VsZWN0X2J5X3ZhbHVlKHNlbGYu
YW5pb1tzZWxmLmNvbnRdKQoKICAgICAgICAgICAgICAgICAgICBjdnYgPSBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMucHJlc2VuY2Vfb2Zf
ZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQG5hbWU9J2Zp
ZWxkX2NhcmRTZWN1cml0eUNvZGUnXSIpKSkKICAgICAgICAgICAgICAgICAg
ICBjdnYuY2xlYXIoKQogICAgICAgICAgICAgICAgICAgIGN2di5zZW5kX2tl
eXMoc2VsZi5jdnZbc2VsZi5jb250XSkKCiAgICAgICAgICAgICAgICAgICAg
YnRuQ29tcGxldGUgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGls
KEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYVtA
aWQ9J3N1Ym1pdEJ1dHRvbiddIikpKQogICAgICAgICAgICAgICAgICAgIGRy
aXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7Iiwg
YnRuQ29tcGxldGUpCgogICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAo
MykKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB0
cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICMgYmFuIC8vKltAaWQ9ImVy
cm9yIl0gVGhlcmUgc2VlbXMgdG8gYmUgYSBwcm9ibGVtIHdpdGggeW91ciBv
cmRlci4gUGxlYXNlIHZpc2l0IGh0dHBzOi8vc3VwcG9ydC5taW5kdmFsbGV5
LmNvbS8KICAgICAgICAgICAgICAgICAgICAgICAgbXNnQmFuID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1l
bnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2RpdltAaWQ9J2Vycm9yJ10iKSkp
LnRleHQKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQobXNnQmFuKQog
ICAgICAgICAgICAgICAgICAgICAgICBpZiAicHJvYmxlbSB3aXRoIHlvdXIg
b3JkZXIiIGluIG1zZ0JhbjoKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0RldGVjdGFuZG8gQkFOIGRlIElQ
IScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQog
ICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAg
ICAgICAgcGFzcwoKICAgICAgICAgICAgICAgICAgICBkcml2ZXIuc3dpdGNo
X3RvLmRlZmF1bHRfY29udGVudCgpCgogICAgICAgICAgICAgICAgICAgIG1z
Z0xpdmUgPSAncHVyY2hhc2UvYWNjZXNzL3N1bW1hcnk/UFN1YnNjcmlwdGlv
bklEJwogICAgICAgICAgICAgICAgICAgIHVybCA9IGRyaXZlci5jdXJyZW50
X3VybAogICAgICAgICAgICAgICAgICAgIHByaW50KHVybCkKCiAgICAgICAg
ICAgICAgICAgICAgd2hpbGUgVHJ1ZToKCiAgICAgICAgICAgICAgICAgICAg
ICAgIHByaW50KCdFbnRyYW5kbyBhIHdoaWxlLicpCiAgICAgICAgICAgICAg
ICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiBtc2dMaXZl
IGluIHVybDoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWxm
LnRvb2xzLnJlcGV0aXIoY2NzKSA9PSBUcnVlOgoKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBwcmludCgnUkVMSVZFOicsIGxpdmVtc2cpCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2RlYWQu
ZW1pdChkZWFkbXNnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfbGl2
ZS5lbWl0KGxpdmVtc2cpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50b29scy5i
b3JyYXJjYygiJXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2NuKSkK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY29udCs9MQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgY29udGVvICs9MQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgICAgICAgICAg
ICAgIGVsc2U6CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5z
bGVlcCgyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gZHJp
dmVyLmN1cnJlbnRfdXJsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBw
cmludCgnRXNwZXJhbmRvLi4nKSAgICAgICAgICAgICAgICAgCgogICAgICAg
ICAgICAgICAgZWxzZTogIyBObyBlbnRyYSBhbCBmcmFtZSBkZSBwYWdvLgoK
ICAgICAgICAgICAgICAgICAgICBwcmludCgnRXJyb3IgZW4gZnJhbWUgZGUg
cGFnby4nKQogICAgICAgICAgICAgICAgICAgIGRyaXZlci5nZXQoJ2h0dHBz
Oi8vc2VjdXJlLm1pbmR2YWxsZXkuY29tL2NoZWNrb3V0L3o/cGxhbnM9MmM5
MmEwZmQ1MjhkZGVmZTAxNTJhMWE2MjQ3MjFiNjMlMkMyYzkyYTBmYjUxYjQy
NzE1MDE1MWM4ZGFiNjk2NmI3YiZ0YWdzPVplbndhcmQlMkNkaWdpdGFsJTJD
c3Vic2NyaXB0aW9uJTJDbW9udGhseV9wYXltZW50JTJDWmVud2FyZF9TdWJz
Y3JpYmVQYWdlX0phbl8yMDE2JmRpc2NvdW50PSZ6cGg9ZWQ3MGM0NzI2Y2Qx
NTAzYWMwOTFlNjY1Mzc0YjYwZmQmYWZ0ZXJzYWxlPTAmYWZmX3RhZ3M9JnJl
dHVybj1odHRwcyUzQSUyRiUyRnplbndhcmQuY29tJTJGbXYtc2VydmljZSUy
RkFmdGVyc2FsZSUyRkluaXRpYWxpemVyJnJldHVybl9vZmZsaW5lPWh0dHBz
JTNBJTJGJTJGemVud2FyZC5jb20lMkZwcm9kdWN0cyUyRm9mZmxpbmUmX19o
c3RjPTE0NDY4MjAyNi5jNGE1NzcwMjljNDllNDRiNzNiZDNiZWU2ZmEzODU2
NS4xNzA1MTkwNDAwMTU1LjE3MDUxOTA0MDAxNTYuMTcwNTE5MDQwMDE1Ny4x
Jl9faHNzYz0xNDQ2ODIwMjYuMS4xNzA1MTkwNDAwMTU4Jl9faHNmcD0yMjMx
NjIzMjgyI2V4cGlyYXRpb24nKQogICAgICAgICAgICAgICAgICAgIHRpbWUu
c2xlZXAocmFuZG9tLnJhbmRpbnQoMSwgMykpCiAgICAgICAgICAgICAgICAg
ICAgY29udGludWUKCiAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVt
aXQoJ0VMSU1JTkFORE8gUkFTVFJFQURPUkVTIScpCiAgICAgICAgICAgIGRl
c2Jhbihkcml2ZXIpCiAgICAgICAgICAgIGRyaXZlci5xdWl0KCkKICAgICAg
ICAgICAgY2xvc2VDaHJvbWUoc2VsZikKICAgICAgICAgICAgaW5zdGFuY2Vf
ZHJpdmVyID0gb3BlbkJyb3dzZXIoMCxzZWxmLm51bTIpCgogICAgICAgIGV4
Y2VwdCBVbmV4cGVjdGVkQWxlcnRQcmVzZW50RXhjZXB0aW9uOgoKICAgICAg
ICAgICAgc2VsZi50ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAgICAgICAg
ICBzZWxmLnRvb2xzLmJvcnJhcmNjKCIlc3wlc3wlc3wlc1xuIiAlIChjY3Ms
bWVzLGFubyxjY24pKQogICAgICAgICAgICBzZWxmLmNvbnQrPTEKICAgICAg
ICAgICAgY29udGVvICs9MQoKCiAgICAgICAgICAgICAKICAgICAgICBleGNl
cHQ6CgogICAgICAgICAgICBkcml2ZXIucXVpdCgpCiAgICAgICAgICAgIGNs
b3NlQ2hyb21lKHNlbGYpCiAgICAgICAgICAgICNpbnN0YW5jZV9kcml2ZXIg
PSBvcGVuQnJvd3NlcigwLHNlbGYubnVtMikKICAgICAgICAgICAgZXhjX3R5
cGUsIGV4Y19vYmosIGV4Y190YiA9IHN5cy5leGNfaW5mbygpO2ZuYW1lID0g
b3MucGF0aC5zcGxpdChleGNfdGIudGJfZnJhbWUuZl9jb2RlLmNvX2ZpbGVu
YW1lKVsxXQogICAgICAgICAgICBlcnJvcl9tZXNzYWdlPSAoc3RyKGV4Y190
eXBlKSsnICcrc3RyKGV4Y190Yi50Yl9saW5lbm8pKQogICAgICAgICAgICBz
ZWxmLnByaW50ZWQuZW1pdChlcnJvcl9tZXNzYWdlKQogICAgICAgICAgICAj
cHJveHlFcnJvciA9IHByb3h5RXJyb3IgKyAxCiAgICAgICAgICAgIGluc3Rh
bmNlX2RyaXZlciA9IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0yKQogICAgICAg
ICAgICAKICAgICAgICAgICAgCiAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0
KCdURVNURU8gRklOQUxJWkFETycpCgpkZWYgT2ZmaWNlZGVwb3Qoc2VsZiwg
ZHJpdmVyKToKCiAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCJJTklDSUFO
RE8gR0FURSBPRkZJQ0VERVBPVCIpCiAgICB3aGlsZSBzZWxmLmNvbnQgPCBz
ZWxmLnRvdGFsX2xpbmVzOgogICAgICAgIGVtYWlsZiA9ICcnLmpvaW4ocmFu
ZG9tLmNob2ljZSgnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZn
aGlqa2xtbm9wcXJzdHd4eXowMTIzNDU2Nzg5JykgZm9yIF8gaW4gcmFuZ2Uo
MykpK3NlbGYuZmlyc3QxKycnLmpvaW4ocmFuZG9tLmNob2ljZSgnQUJDREVG
R0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHd4eXow
MTIzNDU2Nzg5JykgZm9yIF8gaW4gcmFuZ2UoMykpKydAZ21haWwuY29tJwog
ICAgICAgIGNvbnRlbyA9IDAKCiAgICAgICAgaWYgc2VsZi50b29scy52YWxp
ZGF0ZV9jcmVkaXRvcyhzZWxmLnVzZXJuYW1lLHNlbGYucGFzc3dvcmQpID09
IFRydWU6CiAgICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0
KCdDUkVESVRPUyBJTlNVRklDSUVOVEVTIDovJykKICAgICAgICAgICAgICAg
IHJldHVybiBOb25lCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnRl
eHRfY2hhbmdlZC5lbWl0KCdURVNURUFORE8sIEVTUEVSQS4uJykKICAgICAg
ICAgICAgZHJpdmVyLmdldCgiaHR0cHM6Ly93d3cub2ZmaWNlZGVwb3QuY29t
L2EvcHJvZHVjdHMvMzA4MjM5L09mZmljZS1EZXBvdC1CcmFuZC1QYXBlci1D
bGlwcy0xLyIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMykKCiAgICAgICAg
ICAgIHRyeTogIyBEZXRlY3RhbmRvIEJBTgoKICAgICAgICAgICAgICAgIG1z
Z0JhbiA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVz
ZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9oMVtjb250
YWlucyh0ZXh0KCksICdXZSBhcmUgc29ycnksIGJ1dCBPZmZpY2UgRGVwb3Qg
aXMgY3VycmVudGx5IG5vdCBhdmFpbGFibGUnKV0iKSkpLnRleHQKICAgICAg
ICAgICAgICAgIHByaW50KG1zZ0JhbikKICAgICAgICAgICAgICAgIHJldHVy
biBGYWxzZQoKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAg
cGFzcwoKICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51
bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIv
L2J1dHRvbltub3JtYWxpemUtc3BhY2UoKT0nQWRkIFRvIENhcnQnXSIpKSku
Y2xpY2soKQogICAgICAgICAgICB0aW1lLnNsZWVwKDMpCiAgICAgICAgICAg
ICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIGRyaXZlci5nZXQoJ2h0
dHBzOi8vd3d3Lm9mZmljZWRlcG90LmNvbS9jYXJ0L3Nob3BwaW5nQ2FydC5k
bycpCiAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50
aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9k
aXZbbm9ybWFsaXplLXNwYWNlKCk9J1N0b3JlIGFuZCBDdXJic2lkZSBQaWNr
dXAnXSIpKSkuY2xpY2soKQogICAgICAgICAgICB0aW1lLnNsZWVwKDIpCgog
ICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxl
KChCeS5YUEFUSCwgIi8vYVtAY2xhc3M9J29kLWJ1dHRvbiBvZC1idXR0b24t
cHJpbWFyeSBvZC1idXR0b24tbWQgb2QtYnV0dG9uLWZ1bGwtd2lkdGggY2hl
Y2tvdXQtYnRuJ10iKSkpLmNsaWNrKCkKICAgICAgICAgICAgZXhjZXB0Ogog
ICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRp
bChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvLypb
QGlkPSJTdG9yZUxvY2F0b3IiXS9kaXYvc2VjdGlvbi9kaXZbMl0vZGl2L2Rp
dlsyXS9kaXZbMV0vZGl2WzJdL2Rpdi9mb3JtL2lucHV0WzJdJykpKS5jbGlj
aygpCgogICAgICAgICAgICB0aW1lLnNsZWVwKDMpCiAgICAgICAgICAgIGRy
aXZlci5nZXQoJ2h0dHBzOi8vd3d3Lm9mZmljZWRlcG90LmNvbS9jYXJ0L2No
ZWNrb3V0LmRvJykKICAgICAgICAgICAgIyBFc3RlIGVyYSBlbCBwYXRoIHF1
ZSB0ZW5pYSBvcmlvbgogICAgICAgICAgICAjV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnku
WFBBVEgsICIvL2FbQGNsYXNzPSdidG4gcHJpbWFyeSBmaXhlZF93aWR0aCdd
IikpKS5jbGljaygpCiAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgIHRp
bWUuc2xlZXAoMikKCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAg
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90
b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAnLy8qW0BpZD0iY2hlY2tvdXRW
MkxvZ2luIl0vZGl2L2RpdlsyXS9kaXYvYScpKSkuY2xpY2soKQogICAgICAg
ICAgICAKICAgICAgICAgICAgZXhjZXB0OiAjIEVzdGUgZXJhIGVsIHBhdGgg
cXVlIHRlbmlhIG9yaW9uCiAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxl
KChCeS5YUEFUSCwgIi8vYnV0dG9uW0BuYW1lPSdjbWRfY29uZmlybSddIikp
KS5jbGljaygpCgogICAgICAgICAgICAjIE1PRElGSUNBQ0lPTiBXT1JMREtS
T1JZCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgV2ViRHJpdmVyV2Fp
dChkcml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJs
ZSgoQnkuWFBBVEgsICcvLypbQGlkPSJmaXJzdE5hbWUtMiJdJykpKS5zZW5k
X2tleXMoc2VsZi5maXJzdDEpCiAgICAgICAgICAgIFdlYkRyaXZlcldhaXQo
ZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUo
KEJ5LlhQQVRILCAnLy8qW0BpZD0ibGFzdE5hbWUtMiJdJykpKS5zZW5kX2tl
eXMoc2VsZi5sYXN0MSkKICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnku
WFBBVEgsICcvLypbQGlkPSJhZGRyZXNzMS0yIl0nKSkpLnNlbmRfa2V5cygn
MjMwMSBudyAxMDd0aCBhdmUnKQogICAgICAgICAgICBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxl
KChCeS5YUEFUSCwgJy8vKltAaWQ9InBvc3RhbENvZGUxLTIiXScpKSkuc2Vu
ZF9rZXlzKCczMzE3MicpCiAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJp
dmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5
LlhQQVRILCAnLy8qW0BpZD0iY2l0eS0yIl0nKSkpLnNlbmRfa2V5cygnRG9y
YWwnKQogICAgICAgICAgICBTZWxlY3QoZHJpdmVyLmZpbmRfZWxlbWVudChi
eT1CeS5YUEFUSCwgdmFsdWU9Jy8vKltAaWQ9InN0YXRlLTIiXScpKS5zZWxl
Y3RfYnlfdmFsdWUoJ0ZMJykKICAgICAgICAgICAgCgogICAgICAgICAgICBh
Y3Rpb25zID0gQWN0aW9uQ2hhaW5zKGRyaXZlcikKICAgICAgICAgICAgYWN0
aW9ucy5zZW5kX2tleXMoS2V5cy5UQUIpLnBlcmZvcm0oKQogICAgICAgICAg
ICBhY3Rpb25zLnNlbmRfa2V5cygnMzEwOTk4Nzc2NScpLnBlcmZvcm0oKQoK
ICAgICAgICAgICAgIy8vKltAaWQ9InBob25lTnVtYmVyMS0yIl0KICAgICAg
ICAgICAgIy8vKltAaWQ9InBob25lTnVtYmVyMi0yIl0KICAgICAgICAgICAg
Iy8vKltAaWQ9InBob25lTnVtYmVyMy0yIl0KCiAgICAgICAgICAgIFdlYkRy
aXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9j
bGlja2FibGUoKEJ5LlhQQVRILCAnLy8qW0BpZD0iZW1haWwtMiJdJykpKS5z
ZW5kX2tleXMoZW1haWxmKQoKICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChk
cml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgo
QnkuWFBBVEgsICcvLypbQGlkPSJjb25maXJtMiJdJykpKS5jbGljaygpICAg
ICAgICAgICAgCiAgICAgICAgICAgIAogCiAgICAgICAgICAgIHdoaWxlIGNv
bnRlbyA8PTEwIGFuZCBzZWxmLmNvbnQgPCBzZWxmLnRvdGFsX2xpbmVzOgoK
ICAgICAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCwgMSku
dW50aWwoRUMuZnJhbWVfdG9fYmVfYXZhaWxhYmxlX2FuZF9zd2l0Y2hfdG9f
aXQoKEJ5LklELCd2YW50aXYtcGF5ZnJhbWUnKSkpCgoKICAgICAgICAgICAg
ICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVu
dF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2Fj
Y291bnROdW1iZXInXSIpKSkuc2VuZF9rZXlzKHNlbGYuY2NzW3NlbGYuY29u
dF0pCiAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjAp
LnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwg
Ii8vaW5wdXRbQGlkPSdjdnYnXSIpKSkuc2VuZF9rZXlzKCcwMDAnKQogICAg
ICAgICAgICAgICAgZHJpdmVyLnN3aXRjaF90by5kZWZhdWx0X2NvbnRlbnQo
KQoKICAgICAgICAgICAgICAgIFNlbGVjdChkcml2ZXIuZmluZF9lbGVtZW50
KGJ5PUJ5LlhQQVRILCB2YWx1ZT0iLy9zZWxlY3RbQHRpdGxlPSdFeHBpcmF0
aW9uIE1vbnRoJ10iKSkuc2VsZWN0X2J5X3Zpc2libGVfdGV4dCgoc2VsZi5t
ZXNbc2VsZi5jb250XSkpCiAgICAgICAgICAgICAgICBTZWxlY3QoZHJpdmVy
LmZpbmRfZWxlbWVudChieT1CeS5YUEFUSCwgdmFsdWU9Ii8vc2VsZWN0W0B0
aXRsZT0nRXhwaXJhdGlvbiBZZWFyJ10iKSkuc2VsZWN0X2J5X3Zpc2libGVf
dGV4dCgoc2VsZi5hbmlvW3NlbGYuY29udF0pKQoKICAgICAgICAgICAgICAg
ICNpZiBjb250ZW8gPT0gMDoKICAgICAgICAgICAgICAgICMgICAgV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2Ns
aWNrYWJsZSgoQnkuWFBBVEgsICIvL2JvZHkvL2Rpdi8vZGl2W0Byb2xlPSdt
YWluJ10vL2Rpdi8vZGl2Ly9kaXYvL2Rpdi8vZGl2Ly9kaXYvL2Rpdi8vZGl2
Ly9kaXZbMV0vL2RpdlsxXS8vZGl2WzFdLy9pbnB1dFsxXSIpKSkuc2VuZF9r
ZXlzKHNlbGYuZmlyc3QxKQogICAgICAgICAgICAgICAgIyAgICBXZWJEcml2
ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xp
Y2thYmxlKChCeS5YUEFUSCwgIi8vYm9keS9kaXYvZGl2L2Rpdi9kaXYvZGl2
L2Rpdi9kaXZbQHJvbGU9J21haW4nXS9mb3JtW0BtZXRob2Q9J3Bvc3QnXS9k
aXYvZGl2L2Rpdi9kaXYvZGl2L2Rpdi9kaXYvZGl2L2RpdlsxXS9kaXZbMl0v
ZGl2WzFdL2lucHV0WzFdIikpKS5zZW5kX2tleXMoc2VsZi5sYXN0MSkKICAg
ICAgICAgICAgICAgICMgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51
bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIv
L2JvZHkvZGl2L2Rpdi9kaXYvZGl2L2Rpdi9kaXYvZGl2W0Byb2xlPSdtYWlu
J10vZm9ybVtAbWV0aG9kPSdwb3N0J10vZGl2L2Rpdi9kaXYvZGl2L2Rpdi9k
aXYvZGl2L2Rpdi9kaXZbQGFyaWEtcmVxdWlyZWQ9J3RydWUnXS9pbnB1dFsx
XSIpKSkuc2VuZF9rZXlzKCcyMzAxIG53IDEwN3RoIGF2ZScpICAgCiAgICAg
ICAgICAgICAgICAjICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50
aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9i
b2R5Ly9kaXYvL2RpdltAcm9sZT0nbWFpbiddLy9kaXYvL2Rpdi8vZGl2Ly9k
aXYvL2Rpdls1XS8vZGl2WzFdLy9kaXZbMV0vL2lucHV0WzFdIikpKS5zZW5k
X2tleXMoJzMzMTcyJykgIAogICAgICAgICAgICAgICAgIyAgICBXZWJEcml2
ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xp
Y2thYmxlKChCeS5YUEFUSCwgIi8vYm9keS8vZGl2Ly9kaXZbQHJvbGU9J21h
aW4nXS8vZGl2Ly9kaXYvL2Rpdi8vZGl2Ly9kaXZbN10vL2RpdlsxXS8vZGl2
WzFdLy9pbnB1dFsxXSIpKSkuc2VuZF9rZXlzKCdEb3JhbCcpICAKCiAgICAg
ICAgICAgICAgICAjICAgIFNlbGVjdChkcml2ZXIuZmluZF9lbGVtZW50KGJ5
PUJ5LlhQQVRILCB2YWx1ZT0iL2h0bWwvYm9keS9kaXZbM10vZGl2WzNdL2Rp
dlsxXS9kaXYvZGl2L2Rpdi9kaXZbMV0vZm9ybS9kaXYvZGl2WzFdL2Rpdlsx
XS9kaXZbNV0vZGl2WzJdL2RpdlsxXS9kaXYvZGl2L2Rpdls3XS9kaXZbMl0v
ZGl2L3NlbGVjdCIpKS5zZWxlY3RfYnlfdmFsdWUoJ0ZMJykgCgogICAgICAg
ICAgICAgICAgIyAgICBhY3Rpb25zID0gQWN0aW9uQ2hhaW5zKGRyaXZlcikK
ICAgICAgICAgICAgICAgICMgICAgYWN0aW9ucy5zZW5kX2tleXMoS2V5cy5U
QUIpLnBlcmZvcm0oKQogICAgICAgICAgICAgICAgIyAgICBhY3Rpb25zLnNl
bmRfa2V5cygnMzEwOTk4Nzc2NScpLnBlcmZvcm0oKQoKICAgICAgICAgICAg
ICAgICMgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5l
bGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2lucHV0W0B0
eXBlPSdlbWFpbCddIikpKS5zZW5kX2tleXMoZW1haWxmKQoKICAgICAgICAg
ICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBpbnB1dENoZWNrID0g
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRfdG9f
YmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9ImJpbGxpbmdBZGRy
ZXNzU2FtZUFzU2hpcHBpbmciXScpKSkKICAgICAgICAgICAgICAgICAgICBp
ZiBub3QgaW5wdXRDaGVjay5pc19zZWxlY3RlZCgpOgogICAgICAgICAgICAg
ICAgICAgICAgICBpbnB1dENoZWNrLmNsaWNrKCkKICAgICAgICAgICAgICAg
ICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1l
bnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0BkYXRh
LWF1aWQ9J3BheW1lbnRJbmZvX3N1Ym1pdF9DaGVja291dENvbnRpbnVlJ10i
KSkpLmNsaWNrKCkKICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEp
CiAgICAgICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIw
KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgs
ICIvaHRtbC9ib2R5L2RpdlszXS9kaXZbM10vZGl2L2Rpdi9kaXYvZGl2WzFd
L2Rpdi9mb3JtL2Rpdi9kaXZbMl0vZGl2WzFdL2Rpdls5XS9kaXYvYnV0dG9u
IikpKS5jbGljaygpCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAg
ICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChF
Qy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvLypbQGlk
PSJwYXltZW50c0J1dHRvbnNNYWluQmlsbGluZyJdL2J1dHRvblsxXScpKSku
Y2xpY2soKQogICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAg
ICAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVu
dGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8v
KltAaWQ9ImNoZWNrb3V0UmV2aWV3T3JkZXJTdW1tYXJ5UGxhY2VPcmRlciJd
JykpKS5jbGljaygpCgogICAgICAgICAgICAgICAgCgoKICAgICAgICAgICAg
ICAgIGNjcywgbWVzLCBhbm8sIGNjbiwgdHlwPSBzdHIoc2VsZi5jY3Nbc2Vs
Zi5jb250XSkuc3RyaXAoKSAsIHN0cihzZWxmLm1lc1tzZWxmLmNvbnRdKS5z
dHJpcCgpLCBzdHIoc2VsZi5hbmlvW3NlbGYuY29udF0pLnN0cmlwKCksIHN0
cihzZWxmLmN2dltzZWxmLmNvbnRdKS5zdHJpcCgpLCBzZWxmLnRvb2xzLmJp
bnR5cGUoc2VsZi5jY3Nbc2VsZi5jb250XVswOjZdKQogICAgICAgICAgICAg
ICAgZGVhZG1zZyA9ICJERUFEfFNOT1dYQ0hLfERBUkt8JXN8JXN8JXN8JXN8
JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2NuLHR5cCkKICAgICAgICAgICAgICAg
IGxpdmVtc2cgPSAiTElWRXxTTk9XWENIS3xEQVJLfCVzfCVzfCVzfCVzfCVz
XG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXApCgogICAgICAgICAgICAgICAg
aWYgc2VsZi50b29scy5yZXBldGlyKGNjcykgPT0gVHJ1ZToKICAgICAgICAg
ICAgICAgICAgICBzZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRtc2cpCiAgICAg
ICAgICAgICAgICAgICAgc2VsZi50b29scy5ib3JyYXJjYygiJXN8JXN8JXN8
JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2NuKSkKICAgICAgICAgICAgICAgICAg
ICBzZWxmLmNvbnQrPTEKICAgICAgICAgICAgICAgICAgICBjb250ZW8gKz0x
CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVs
c2U6CiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg0KQogICAgICAg
ICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgV2Vi
RHJpdmVyV2FpdChkcml2ZXIsIDMpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVf
Y2xpY2thYmxlKChCeS5JRCwgImVycm9yIikpKQogICAgICAgICAgICAgICAg
ICAgICAgICBzZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRtc2cpIAogICAgICAg
ICAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50
aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LklELCAicmVwbGFj
ZUNDRWRpdExhYmVsIikpKS5jbGljaygpICAKICAgICAgICAgICAgICAgICAg
ICAgICAgcHJpbnQoJ0RFQUQgUE9SIExBQkVMJykKCiAgICAgICAgICAgICAg
ICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZl
ciwgMykudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LklE
LCAicGF5bWVudEZvcm1JbmZvLmNyZWRpdENhcmRDdnYiKSkpCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfbGl2ZS5lbWl0KGxpdmVt
c2cpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbnQrPTEK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbyArPTEKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAg
ICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNl
bGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykgICAgCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwo
RUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LklELCAicmVwbGFjZUND
RWRpdExhYmVsIikpKS5jbGljaygpICAgICAKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHByaW50KCdERUFEIFBPUiBFWENFUFRJT04nKSAgICAKCiAg
ICAgICAgICAgICAgICAgICAgc2VsZi50b29scy5ib3JyYXJjYygiJXN8JXN8
JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2NuKSkKICAgICAgICAgICAgICAg
IHNlbGYuY29udCs9MQogICAgICAgICAgICAgICAgY29udGVvICs9MQoKICAg
ICAgICAgICAgZGVzYmFuKGRyaXZlcikKICAgICAgICAgICAgZHJpdmVyLnF1
aXQoKQogICAgICAgICAgICBjbG9zZUNocm9tZShzZWxmKQogICAgICAgICAg
ICBpbnN0YW5jZV9kcml2ZXIgPSBvcGVuQnJvd3NlcigwLHNlbGYubnVtMikK
CiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBkZXNiYW4oZHJpdmVyKQog
ICAgICAgICAgICBkcml2ZXIucXVpdCgpCiAgICAgICAgICAgIGNsb3NlQ2hy
b21lKHNlbGYpCiAgICAgICAgICAgIGV4Y190eXBlLCBleGNfb2JqLCBleGNf
dGIgPSBzeXMuZXhjX2luZm8oKTtmbmFtZSA9IG9zLnBhdGguc3BsaXQoZXhj
X3RiLnRiX2ZyYW1lLmZfY29kZS5jb19maWxlbmFtZSlbMV0KICAgICAgICAg
ICAgZXJyb3JfbWVzc2FnZT0gKHN0cihleGNfdHlwZSkrJyAnK3N0cihleGNf
dGIudGJfbGluZW5vKSkKICAgICAgICAgICAgc2VsZi5wcmludGVkLmVtaXQo
ZXJyb3JfbWVzc2FnZSkKICAgICAgICAgICAgaW5zdGFuY2VfZHJpdmVyID0g
b3BlbkJyb3dzZXIoMCxzZWxmLm51bTIpCgogICAgc2VsZi50ZXh0X2NoYW5n
ZWQuZW1pdCgnVEVTVEVPIEZJTkFMSVpBRE8nKQoKZGVmIEJhcmtCb3goc2Vs
ZiwgZHJpdmVyKToKCiAgICB3aGlsZSBzZWxmLmNvbnQgPCBzZWxmLnRvdGFs
X2xpbmVzOgoKICAgICAgICBjb250ZW8gPSAwCgogICAgICAgIHRyeToKICAg
ICAgICAgICAgaWYgc2VsZi50b29scy52YWxpZGF0ZV9jcmVkaXRvcyhzZWxm
LnVzZXJuYW1lLHNlbGYucGFzc3dvcmQpID09IFRydWU6CiAgICAgICAgICAg
ICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdDUkVESVRPUyBJTlNVRklD
SUVOVEVTIDovJykKICAgICAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAg
ICAgICAgIAogICAgICAgICAgICBlbWFpbGYgPSBzZWxmLmxhc3QxKycnLmpv
aW4ocmFuZG9tLmNob2ljZSgnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVph
YmNkZWZnaGlqa2xtbm9wcXJzdHd4eXowMTIzNDU2Nzg5JykgZm9yIF8gaW4g
cmFuZ2UoMykpK3NlbGYuZmlyc3QxKycnLmpvaW4ocmFuZG9tLmNob2ljZSgn
QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJz
dHd4eXowMTIzNDU2Nzg5JykgZm9yIF8gaW4gcmFuZ2UoMykpKydAZ21haWwu
Y29tJwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgCiAg
ICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ1RFU1RFQU5ETywg
RVNQRVJBLi4nKQoKICAgICAgICAgICAgZHJpdmVyLmdldCgnaHR0cHM6Ly93
d3cuYmFya2JveC5jb20vc3Vic2NyaWJlL25hbWUnKQoKICAgICAgICAgICAg
dHJ5OgogICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMp
LnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuSUQs
ICdjaGFsbGVuZ2UtcnVubmluZycpKSkgICAKICAgICAgICAgICAgICAgIHNl
bGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0lQIEJBTiEgQ0FNQklBIFRVIElQJykK
ICAgICAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgICAgIGV4Y2Vw
dDoKICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgICAgIFdlYkRyaXZl
cldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50
X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0ibWFsZS1sYWJlbCJdJykp
KQogICAgCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHRpbWUu
c2xlZXAocmFuZG9tLnJhbmRpbnQoMSwgNSkpCiAgICAgICAgICAgICAgICBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMucHJlc2VuY2Vfb2Zf
ZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdkb2ct
bmFtZSddIikpKS5zZW5kX2tleXMoc2VsZi5maXJzdDEgKyAnRG9nJykKICAg
ICAgICAgICAgZXhjZXB0OgoKICAgICAgICAgICAgICAgIHRyeToKICAgICAg
ICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwo
RUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgJy8v
KltAaWQ9ImNoYWxsZW5nZS1ydW5uaW5nIl0nKSkpCiAgICAgICAgICAgICAg
ICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnQkFOIERFIElQIScpCiAg
ICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgc2VsZi50
ZXh0X2NoYW5nZWQuZW1pdCgnRUxJTUlOQU5ETyBSQVNUUkVBRE9SRVMhJykK
ICAgICAgICAgICAgICAgICAgICBkZXNiYW4oZHJpdmVyKQogICAgICAgICAg
ICAgICAgICAgIGRyaXZlci5xdWl0KCkKICAgICAgICAgICAgICAgICAgICBj
bG9zZUNocm9tZShzZWxmKQoKICAgICAgICAgICAgICAgICAgICAjbGlzdGFQ
cm94aWVzID0gZ2V0UHJveGllcyhzZWxmKQogICAgICAgICAgICAgICAgICAg
ICNwcm94eSA9IHJhbmRvbS5jaG9pY2UobGlzdGFQcm94aWVzKQogICAgICAg
ICAgICAgICAgICAgIGluc3RhbmNlX2RyaXZlciA9IGluc3RhbmNlX2RyaXZl
ciA9IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0yKQogICAgICAgICAgICAgICAg
ICAgICNkcml2ZXIgPSBpbnN0YW5jZV9kcml2ZXIKICAgICAgICAgICAgICAg
ICAgICAjcmV0dXJuIE5vbmUKICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAg
ICAgICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50
aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwg
Ii8vaW5wdXRbQGlkPSdkb2ctbmFtZSddIikpKS5zZW5kX2tleXMoJ0pvc2Un
KQoKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgdGltZS5zbGVl
cChyYW5kb20ucmFuZGludCgxLCAzKSkKICAgICAgICAgICAgV2ViRHJpdmVy
V2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNr
YWJsZSgoQnkuWFBBVEgsICIvL2xhYmVsW0BpZD0nbWFsZS1sYWJlbCddIikp
KS5jbGljaygpCiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRp
bnQoMSwgMykpCiAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAy
MCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRI
LCAnLy8qW0BpZD0iZnVubmVsLXN0ZXAtZG9nLW5hbWUiXS9mb3JtL2Rpdlsz
XS9kaXYvYnV0dG9uJykpKS5jbGljaygpCiAgICAgICAgICAgIHRpbWUuc2xl
ZXAocmFuZG9tLnJhbmRpbnQoMSwgMykpCiAgICAgICAgICAgIFdlYkRyaXZl
cldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlj
a2FibGUoKEJ5LlhQQVRILCAnLy8qW0BpZD0iZnVubmVsLXN0ZXAtZG9nLXNp
emUiXS9kaXYvZm9ybS9kaXZbMV0vZmllbGRzZXRbMV0vbGFiZWwnKSkpLmNs
aWNrKCkKICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgx
LCAzKSkKICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51
bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcv
LypbQGlkPSJmdW5uZWwtc3RlcC1kb2ctc2l6ZSJdL2Rpdi9mb3JtL2Rpdlsz
XS9kaXYvYnV0dG9uJykpKS5jbGljaygpCiAgICAgICAgICAgIGRyaXZlci5n
ZXQoJ2h0dHBzOi8vd3d3LmJhcmtib3guY29tL3N1YnNjcmliZS90cmVhdHMn
KQoKICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgxLCA1
KSkKICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRp
bChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvLypb
QGlkPSJmdW5uZWwtc3RlcC1hbGxlcmdpZXMiXS9mb3JtL2RpdlsyXS9kaXYv
YnV0dG9uJykpKQogICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5k
aW50KDEsIDUpKQogICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
MjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFU
SCwgJy8vKltAaWQ9ImZ1bm5lbC1zdGVwLWFsbGVyZ2llcyJdL2Zvcm0vZGl2
WzJdL2Rpdi9idXR0b24nKSkpLmNsaWNrKCkKCiAgICAgICAgICAgIHRpbWUu
c2xlZXAoMSkKICAgICAgICAgICAgYnRuQ29udGludWUgPSBXZWJEcml2ZXJX
YWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2th
YmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9ImZ1bm5lbC1zdGVwLWVtYWlsIl0v
Zm9ybS9kaXZbM10vZGl2L2J1dHRvbicpKSkKCiAgICAgICAgICAgIGlucHV0
RW1haWwgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMucHJl
c2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgJy8vKltAaWQ9
ImFjY291bnQtZW1haWwiXScpKSkKICAgICAgICAgICAgaW5wdXRFbWFpbC5j
bGVhcigpCiAgICAgICAgICAgIGlucHV0RW1haWwuc2VuZF9rZXlzKGVtYWls
ZikKCiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMSwg
MykpCgogICAgICAgICAgICBidG5Db250aW51ZS5jbGljaygpCiAgICAgICAg
ICAgIHRpbWUuc2xlZXAoMSkKCiAgICAgICAgICAgIFdlYkRyaXZlcldhaXQo
ZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUo
KEJ5LlhQQVRILCAnLy8qW0BpZD0iZWRpdF9zdWJzY3JpcHRpb25fcGxhbl9z
ZWxlY3Rpb24iXS9kaXZbMl0vdWwvbGlbMV0vbGFiZWwnKSkpLmNsaWNrKCkK
ICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChF
Qy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvLypbQGlk
PSJlZGl0X3N1YnNjcmlwdGlvbl9wbGFuX3NlbGVjdGlvbiJdL2Rpdls0XS9k
aXYvZGl2L2J1dHRvbicpKSkuY2xpY2soKSAKCiAgICAgICAgICAgIGRyaXZl
ci5nZXQoJ2h0dHBzOi8vd3d3LmJhcmtib3guY29tL3N1YnNjcmliZS9zaGlw
cGluZy1hZGRyZXNzJykKICAgICAgICAgICAgCiAgICAgICAgICAgIHRpbWUu
c2xlZXAocmFuZG9tLnJhbmRpbnQoMSwgNSkpCgogICAgICAgICAgICB0cnk6
CiAgICAgICAgICAgICAgICBtc2dFcnJvciA9IFdlYkRyaXZlcldhaXQoZHJp
dmVyLCAzKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQo
KEJ5LlhQQVRILCAiL2h0bWwvYm9keS9kaXYvZGl2WzJdL2gyIikpKS50ZXh0
CiAgICAgICAgICAgICAgICBpZiAnUnVoLXJvaCEgU29tZXRoaW5nIHdlbnQg
d3JvbmcuLi4nIGluIG1zZ0Vycm9yOgogICAgICAgICAgICAgICAgICAgIGNv
bnRpbnVlCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHBh
c3MKCiAgICAgICAgICAgIGJ0bkNvbnRpbnVlID0gV2ViRHJpdmVyV2FpdChk
cml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgo
QnkuWFBBVEgsICcvLypbQGlkPSJmdW5uZWwtc3RlcC1zaGlwcGluZyJdL2Rp
dlsxXS9mb3JtL2Rpdi9kaXYvYnV0dG9uJykpKQoKICAgICAgICAgICAgdGlt
ZS5zbGVlcChyYW5kb20ucmFuZGludCgxLCA1KSkKCiAgICAgICAgICAgIFdl
YkRyaXZlcldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5wcmVzZW5jZV9vZl9l
bGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2FkZHJl
c3MtZmlyc3QtbmFtZSddIikpKS5zZW5kX2tleXMoc2VsZi5maXJzdDEpCiAg
ICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5w
cmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1
dFtAaWQ9J2FkZHJlc3MtbGFzdC1uYW1lJ10iKSkpLnNlbmRfa2V5cyhzZWxm
Lmxhc3QxKQogICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMyku
dW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFU
SCwgIi8vaW5wdXRbQGlkPSdhZGRyZXNzLXN0cmVldDEnXSIpKSkuc2VuZF9r
ZXlzKCcyODM3IHdpbmRpbmcgbGFrZSByZCcpCiAgICAgICAgICAgIFdlYkRy
aXZlcldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVt
ZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2FkZHJlc3Mt
Y2l0eSddIikpKS5zZW5kX2tleXMoJ1N1bnJpc2UnKQoKICAgICAgICAgICAg
U2VsZWN0KGRyaXZlci5maW5kX2VsZW1lbnQoYnk9QnkuWFBBVEgsIHZhbHVl
PSIvL3NlbGVjdFtAaWQ9J2FkZHJlc3Mtc3RhdGUnXSAgICIpKS5zZWxlY3Rf
YnlfdmlzaWJsZV90ZXh0KCdGTCcpCiAgICAgICAgICAgIFdlYkRyaXZlcldh
aXQoZHJpdmVyLCAzKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xv
Y2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2FkZHJlc3MtemlwJ10i
KSkpLnNlbmRfa2V5cygnMzMzNTEnKQogICAgICAgICAgICB0aW1lLnNsZWVw
KDIpCgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBidG5Db250
aW51ZS5jbGljaygpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAg
ICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVu
dF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9zcGFuW0BjbGFzcz0n
YnV0dG9uLXRleHQnXSIpKSkuY2xpY2soKQoKICAgICAgICAgICAgdHJ5Ogog
ICAgICAgICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGls
KEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8vKltA
aWQ9InVzcHMtYWRkcmVzcy1tb2RhbCJdL2Rpdi9kaXZbMl0vZGl2L2Rpdi9i
dXR0b24nKSkpLmNsaWNrKCkKICAgICAgICAgICAgZXhjZXB0OgogICAgICAg
ICAgICAgICAgcGFzcwoKICAgICAgICAgICAgd2hpbGUgY29udGVvIDw9OSBh
bmQgc2VsZi5jb250IDwgc2VsZi50b3RhbF9saW5lczoKCiAgICAgICAgICAg
ICAgICBpZiBzZWxmLnRvb2xzLnZhbGlkYXRlX2NyZWRpdG9zKHNlbGYudXNl
cm5hbWUsc2VsZi5wYXNzd29yZCkgPT0gVHJ1ZToKICAgICAgICAgICAgICAg
ICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdDUkVESVRPUyBJTlNVRklD
SUVOVEVTIDovJykKICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQoK
ICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0lOVEVO
VEFORE8gUEFHTyEnKQoKICAgICAgICAgICAgICAgIGlmcmFtZTEgPSBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgMTUpLnVudGlsKEVDLnByZXNlbmNlX29mX2Vs
ZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lmcmFtZVtAdGl0bGU9J0Jp
bGxpbmcgaW5mb3JtYXRpb24nXSIpKSkKICAgICAgICAgICAgICAgIGRyaXZl
ci5zd2l0Y2hfdG8uZnJhbWUoaWZyYW1lMSkKCiAgICAgICAgICAgICAgICBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgMTUpLnVudGlsKEVDLnByZXNlbmNlX29m
X2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICcvaHRtbC9ib2R5L2Zvcm0v
ZGl2L2Rpdi9kaXYvZGl2WzFdJykpKQogICAgICAgICAgICAgICAgaW5wdXRD
QyA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxNSkudW50aWwoRUMucHJlc2Vu
Y2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlk
PSdyZWN1cmx5LWhvc3RlZC1maWVsZC1pbnB1dCddIikpKS5zZW5kX2tleXMo
c2VsZi5jY3Nbc2VsZi5jb250XSkKICAgICAgICAgICAgICAgIHRpbWUuc2xl
ZXAoMSkKCiAgICAgICAgICAgICAgICBmb3IgbGV0cmEgaW4gc2VsZi5tZXNb
c2VsZi5jb250XStzZWxmLmFuaW9bc2VsZi5jb250XVsyOjRdOgogICAgICAg
ICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgaW5w
dXRGZWNoYSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5w
cmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1
dFtAcGxhY2Vob2xkZXI9J01NIC8gWVknXSIpKSkuc2VuZF9rZXlzKGxldHJh
KQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAg
ICAgICAgICAgdHJ5OiAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICMgRXNwZXJhciBoYXN0YSAxMCBzZWd1bmRvcyBwYXJhIHF1ZSBhcGFyZXpj
YSBsYSBhbGVydGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdlYkRy
aXZlcldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5hbGVydF9pc19wcmVzZW50
KCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCA9IGRyaXZl
ci5zd2l0Y2hfdG8uYWxlcnQKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGFsZXJ0LmFjY2VwdCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2Vw
dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCdFcnJvciBz
YWx0YW5kbyBhbGVydGEnKQoKICAgICAgICAgICAgICAgIGZvciBsZXRyYSBp
biBzZWxmLmN2dltzZWxmLmNvbnRdOgogICAgICAgICAgICAgICAgICAgIGlu
cHV0Q1ZWID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMpLnVudGlsKEVDLnBy
ZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0
W0BwbGFjZWhvbGRlcj0nQ1ZWJ10iKSkpLnNlbmRfa2V5cyhsZXRyYSkKICAg
ICAgICAgICAgICAgIGRyaXZlci5zd2l0Y2hfdG8uZGVmYXVsdF9jb250ZW50
KCkKCiAgICAgICAgICAgICAgICBjbGsgPSBXZWJEcml2ZXJXYWl0KGRyaXZl
ciwgMjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5Y
UEFUSCwgIi8vc3BhbltAY2xhc3M9J2J1dHRvbi10ZXh0J10iKSkpCiAgICAg
ICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1sw
XS5jbGljaygpOyIsIGNsaykKCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVw
KDUpCgogICAgICAgICAgICAgICAgY2NzLCBtZXMsIGFubywgY2NuLCB0eXA9
IHN0cihzZWxmLmNjc1tzZWxmLmNvbnRdKS5zdHJpcCgpICwgc3RyKHNlbGYu
bWVzW3NlbGYuY29udF0pLnN0cmlwKCksIHN0cihzZWxmLmFuaW9bc2VsZi5j
b250XSkuc3RyaXAoKSwgc3RyKHNlbGYuY3Z2W3NlbGYuY29udF0pLnN0cmlw
KCksIHNlbGYudG9vbHMuYmludHlwZShzZWxmLmNjc1tzZWxmLmNvbnRdKQog
ICAgICAgICAgICAgICAgZGVhZG1zZyA9ICJERUFEfFNOT1dYQ0hLfERBUkt8
JXN8JXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2NuLHR5cCkKICAg
ICAgICAgICAgICAgIGxpdmVtc2cgPSAiTElWRXxTTk9XWENIS3xEQVJLfCVz
fCVzfCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXApCgogICAg
ICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnQU5BTElaQU5E
TyBSRVNVTFRBRE9TIScpCgogICAgICAgICAgICAgICAgaWYgc2VsZi50b29s
cy5yZXBldGlyKGNjcykgPT0gVHJ1ZToKICAgICAgICAgICAgICAgICAgICBw
cmludCgnUkVMSVZFJywgbGl2ZW1zZykKICAgICAgICAgICAgICAgICAgICBz
ZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRtc2cpCiAgICAgICAgICAgICAgICBl
bHNlOgogICAgICAgICAgICAgICAgICAgIHRyeToKCiAgICAgICAgICAgICAg
ICAgICAgICAgIGVycm9ySW5mbyA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAy
KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQ
QVRILCAnLy8qW0BpZD0icGF5bWVudC1mb3JtIl0vZGl2WzRdL2Rpdi9kaXZb
MV0vZGl2WzJdJykpKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgIGNv
bnRpbnVlCgogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKCiAgICAgICAg
ICAgICAgICAgICAgICAgIHRyeToKCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBtc2dFcnJvciA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyKS51bnRp
bChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAi
Ly9kaXZbQGNsYXNzPSdmb3JtLWlucHV0LXRleHQtZXJyb3ItbWVzc2FnZSdd
IikpKS50ZXh0CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ0Vy
cm9yOiBDcmVkaXQgY2FyZCBpbmZvIGlzIHJlcXVpcmVkLicgaW4gbXNnRXJy
b3I6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQobXNn
RXJyb3IpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRD
Qy5jbGVhcigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5w
dXRGZWNoYS5jbGVhcigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgaW5wdXRDVlYuY2xlYXIoKQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ1JFSU5URU5UQU5ETyBQ
QUdPIScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5z
bGVlcCgxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRp
bnVlCgogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6CgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICAgICAgICAgICAg
ICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAKICAgICAgICAgICAgICAgICAgICAgICAgYnJhbmQgPSBzZWxmLmNjc1tz
ZWxmLmNvbnRdWzA6MV0KICAgICAgICAgICAgICAgICAgICAgICAgYmluQ0Mg
PSBzZWxmLmNjc1tzZWxmLmNvbnRdWzA6Nl0KCiAgICAgICAgICAgICAgICAg
ICAgICAgIG1zaiA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAzMCkudW50aWwo
RUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8v
aDNbQGNsYXNzPSdjZW50ZXItdGV4dCddIikpKS50ZXh0CgogICAgICAgICAg
ICAgICAgICAgICAgICBpZiAnWW91ciB0cmFuc2FjdGlvbiB3YXMgZGVjbGlu
ZWQuIFBsZWFzZSB1c2UgYSBkaWZmZXJlbnQgY2FyZCBvciBjb250YWN0IHlv
dXIgYmFuay4nIGluIG1zajoKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHNlbGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICNwcmludChkZWFkbXNnLCBtc2opCgogICAgICAgICAg
ICAgICAgICAgICAgICBlbGlmICdQbGVhc2UgY29udGFjdCB5b3VyIGJhbmsg
Zm9yIGZ1cnRoZXIgZGV0YWlscyBvciB0cnkgYW5vdGhlciBjYXJkLicgaW4g
bXNqOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2Rl
YWQuZW1pdChkZWFkbXNnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
I3ByaW50KGRlYWRtc2csIG1zaikKCiAgICAgICAgICAgICAgICAgICAgICAg
IGVsaWYgJ1lvdXIgYWNjb3VudCBudW1iZXIgaXMgbm90IHZhbGlkLiBQbGVh
c2UgdXBkYXRlIHlvdXIgYWNjb3VudCBudW1iZXIuJyBpbiBtc2o6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfZGVhZC5lbWl0KGRl
YWRtc2cpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjcHJpbnQoZGVh
ZG1zZywgbXNqKQoKICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnVGhl
IHNlY3VyaXR5IGNvZGUgeW91IGVudGVyZWQgZG9lcyBub3QgbWF0Y2guIFBs
ZWFzZSB1cGRhdGUgdGhlIENWViBhbmQgdHJ5IGFnYWluLicgaW4gbXNqOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgYnJhbmQgPT0gJzQnOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9kZWFk
LmVtaXQoZGVhZG1zZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAjcHJpbnQoZGVhZG1zZywgbXNqKQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgZWxpZiBicmFuZCA9PSAnNSc6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgaWYgc2VsZi50b29scy5yZXBldGlyKGNjcykgPT0gVHJ1
ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50
ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAjcHJpbnQoJ1JFTElWRTonLCBsaXZlbXNnLCBtc2op
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI2lmIHNlbGYucmVjaGVj
ayA9PSBUcnVlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAjICAgIHByaW50KCdGdW5jaW9uYScpCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICMgICAgaWYoWnVvcmEoc2VsZiwgbGl2ZW1zZywg
ZHJpdmVyKSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICMgICAgICAgIGxpdmVtc2cgPSAiTElWRXxDSEFSR1VFRHxTTk9XWENIS3xE
QVJLfCVzfCVzfCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXAp
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgICAgICAg
IHNlbGYudGV4dF9saXZlLmVtaXQobGl2ZW1zZykKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIyAgICBlbHNlOgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAjICAgICAgICBzZWxmLnRleHRfbGl2
ZS5lbWl0KGxpdmVtc2cpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgI2Vsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHNlbGYudGV4dF9saXZlLmVtaXQobGl2ZW1zZykKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc2VsZi50ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICNwcmludCgnUkVWSVNBUics
IG1zaiwgc2VsZi5jY3Nbc2VsZi5jb250XSkKCiAgICAgICAgICAgICAgICAg
ICAgICAgIGVsaWYgJ1lvdXIgdHJhbnNhY3Rpb24gd2FzIGRlY2xpbmVkIGR1
ZSB0byBpbnN1ZmZpY2llbnQgZnVuZHMgaW4geW91ciBhY2NvdW50LiBQbGVh
c2UgdXNlIGEgZGlmZmVyZW50IGNhcmQgb3IgY29udGFjdCB5b3VyIGJhbmsu
JyBpbiBtc2o6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWxm
LnRvb2xzLnJlcGV0aXIoY2NzKSA9PSBUcnVlOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjcHJpbnQoJ1JFTElW
RTonLCBsaXZlbXNnLCBtc2opCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYu
dGV4dF9saXZlLmVtaXQobGl2ZW1zZykKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAjcHJpbnQobGl2ZW1zZywgbXNqKSAKCiAgICAgICAgICAg
ICAgICAgICAgICAgIGVsaWYgJ1BsZWFzZSB2YWxpZGF0ZSBpbmZvcm1hdGlv
biBhbmQgdHJ5IGFnYWluLiBJZiB0aGUgcHJvYmxlbSBwZXJzaXN0cywgcGxl
YXNlIGNvbnRhY3QgeW91ciBiYW5rLicgaW4gbXNqOgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGlmIHNlbGYudG9vbHMucmVwZXRpcihjY3MpID09IFRydWU6CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2RlYWQu
ZW1pdChkZWFkbXNnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxz
ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnNTQyNDMy
JyBpbiBiaW5DQzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc2VsZi50ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGlmIHNlbGYudXNlcm5hbWUgPT0gJ3dvcmxka3Jv
cnknOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
aWYgc2VsZi5yZWNoZWNrID09IFRydWU6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgaWYoRWNvbm9taXN0KHNlbGYsIGxp
dmVtc2csIGRyaXZlcikpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBsaXZlbXNnID0gIkxJVkV8U05PV1hDSEt8
REFSS0NIQVJHRUR8JXN8JXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8s
Y2NuLHR5cCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc2VsZi50ZXh0X2xpdmUuZW1pdChsaXZlbXNnKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHNlbGYudGV4dF9saXZlLmVtaXQobGl2ZW1zZykgCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9s
aXZlLmVtaXQobGl2ZW1zZykKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBzZWxmLnRleHRfbGl2ZS5lbWl0KGxpdmVtc2cpCgog
ICAgICAgICAgICAgICAgICAgICAgICBlbGlmICdZb3VyIGNhcmQgaXMgbm90
IGFsbG93ZWQgdG8gY29tcGxldGUgdGhpcyB0cmFuc2FjdGlvbicgaW4gbXNq
OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2RlYWQu
ZW1pdChkZWFkbXNnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJp
bnQoJ1JFVklTQVInLCBtc2osIHNlbGYuY2NzW3NlbGYuY29udF0pCgogICAg
ICAgICAgICAgICAgICAgICAgICBlbGlmICdUaGUgdHJhbnNhY3Rpb24gd2Fz
IGRlY2xpbmVkLiBQbGVhc2UgY29udGFjdCBzdXBwb3J0LicgaW4gbXNqOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY29udGVvID09IDAgb3Ig
Y29udGVvID09IDE5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0JBTiBERSBJUCEnKQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZHJpdmVyLnF1aXQoKQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgY2xvc2VDaHJvbWUoc2VsZikKCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAjbGlzdGFQcm94aWVzID0gZ2V0UHJveGll
cyhzZWxmKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgI3Byb3h5ID0g
cmFuZG9tLmNob2ljZShsaXN0YVByb3hpZXMpCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBpbnN0YW5jZV9kcml2ZXIgPSBvcGVuQnJvd3NlcigwLHNl
bGYubnVtMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICNkcml2ZXIg
PSBpbnN0YW5jZV9kcml2ZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICNlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNwcmlu
dCgnQkFORUFETycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjICAg
IGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbXNqID09ICcn
OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAg
ICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwg
PSBkcml2ZXIuY3VycmVudF91cmwKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBpZiAnaHR0cHM6Ly93d3cuYmFya2JveC5jb20vJyA9PSB1cmw6
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4
dF9jaGFuZ2VkLmVtaXQoJ0JBTiBERSBJUCEnKQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykKICAgICAg
ICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgICAg
IHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IGRyaXZl
ci5jdXJyZW50X3VybAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJp
bnQodXJsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2h0dHBz
Oi8vd3d3LmJhcmtib3guY29tLycgaW4gdXJsOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0JBTiBE
RSBJUCEnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVy
biBOb25lCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVh
ZG1zZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAg
ICAgICAgICAgICAgICBzZWxmLnRvb2xzLmJvcnJhcmNjKCIlc3wlc3wlc3wl
c1xuIiAlIChjY3MsbWVzLGFubyxjY24pKQogICAgICAgICAgICAgICAgc2Vs
Zi5jb250Kz0xCiAgICAgICAgICAgICAgICBjb250ZW8gKz0xCiAgICAgICAg
ICAgICAgICBtc2ogPSAnJwoKICAgICAgICAgICAgICAgIHRyeToKICAgICAg
ICAgICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGls
KEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0
dG9uW25vcm1hbGl6ZS1zcGFjZSgpPSdSZXR1cm4gdG8gcGF5bWVudCddIikp
KS5jbGljaygpICAKICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAg
ICAgICAgICAgICBjb250aW51ZQogICAgICAgIAogICAgICAgICAgICAKICAg
ICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnRUxJTUlOQU5ETyBS
QVNUUkVBRE9SRVMhJykKICAgICAgICAgICAgZGVzYmFuKGRyaXZlcikKICAg
ICAgICAgICAgZHJpdmVyLnF1aXQoKQogICAgICAgICAgICBjbG9zZUNocm9t
ZShzZWxmKQogICAgICAgICAgICBpbnN0YW5jZV9kcml2ZXIgPSBvcGVuQnJv
d3NlcigwLHNlbGYubnVtMikKICAgICAgICAgICAgI2luc3RhbmNlX2RyaXZl
ciA9IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0yKSAgIAogICAgICAgIGV4Y2Vw
dDoKICAgICAgICAgICAgI2Rlc2Jhbihkcml2ZXIpCiAgICAgICAgICAgIGRy
aXZlci5xdWl0KCkKICAgICAgICAgICAgY2xvc2VDaHJvbWUoc2VsZikKICAg
ICAgICAgICAgI2luc3RhbmNlX2RyaXZlciA9IG9wZW5Ccm93c2VyKDAsc2Vs
Zi5udW0yKQogICAgICAgICAgICBleGNfdHlwZSwgZXhjX29iaiwgZXhjX3Ri
ID0gc3lzLmV4Y19pbmZvKCk7Zm5hbWUgPSBvcy5wYXRoLnNwbGl0KGV4Y190
Yi50Yl9mcmFtZS5mX2NvZGUuY29fZmlsZW5hbWUpWzFdCiAgICAgICAgICAg
IGVycm9yX21lc3NhZ2U9IChzdHIoZXhjX3R5cGUpKycgJytzdHIoZXhjX3Ri
LnRiX2xpbmVubykpCiAgICAgICAgICAgIHNlbGYucHJpbnRlZC5lbWl0KGVy
cm9yX21lc3NhZ2UpCiAgICAgICAgICAgICNwcm94eUVycm9yID0gcHJveHlF
cnJvciArIDEKICAgICAgICAgICAgaW5zdGFuY2VfZHJpdmVyID0gb3BlbkJy
b3dzZXIoMCxzZWxmLm51bTIpCiAgICAgICAgICAgIAogICAgICAgICAgICAK
ICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ1RFU1RFTyBGSU5BTElaQURP
JykKICAgIApkZWYgUGhvdG9TY2lzc29ycyhzZWxmLCBkcml2ZXIpOgoKICAg
IHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoIklOSUNJQU5ETyBHQVRFIFNJTFZF
UiIpCgogICAgd2hpbGUgc2VsZi5jb250IDwgc2VsZi50b3RhbF9saW5lczoK
CiAgICAgICAgY29udGVvID0gMAoKICAgICAgICBpZiBzZWxmLnRvb2xzLnZh
bGlkYXRlX2NyZWRpdG9zKHNlbGYudXNlcm5hbWUsc2VsZi5wYXNzd29yZCkg
PT0gVHJ1ZToKICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgn
Q1JFRElUT1MgSU5TVUZJQ0lFTlRFUyA6LycpCiAgICAgICAgICAgIHJldHVy
biBOb25lCiAgICAgICAgCiAgICAgICAgZW1haWx4ID0gJycuam9pbihyYW5k
b20uY2hvaWNlKCdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdo
aWprbG1ub3BxcnN0d3h5ejAxMjM0NTY3ODknKSBmb3IgXyBpbiByYW5nZSgz
KSkrc2VsZi5maXJzdDErJycuam9pbihyYW5kb20uY2hvaWNlKCdBQkNERUZH
SElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0d3h5ejAx
MjM0NTY3ODknKSBmb3IgXyBpbiByYW5nZSgzKSkrJ0BnbWFpbC5jb20nCgog
ICAgICAgIHRyeToKCiAgICAgICAgICAgIGRyaXZlci5nZXQoImh0dHBzOi8v
cGhvdG9zY2lzc29ycy5jb20vcHJpY2luZyIpCiAgICAgICAgICAgIHRpbWUu
c2xlZXAocmFuZG9tLnJhbmRpbnQoMiwgMykpCgogICAgICAgICAgICBidG5C
dXkgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMuZWxlbWVu
dF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9hW0BjbGFzcz0nYnRu
IGJ0bi1zdWNjZXNzJ11bY29udGFpbnModGV4dCgpLCdCdXknKV0iKSkpCiAg
ICAgICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBd
LmNsaWNrKCk7IiwgYnRuQnV5KQoKICAgICAgICAgICAgYnRuQ2FyZCA9IFdl
YkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5lbGVtZW50X3RvX2Jl
X2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2xpW0BjbGFzcz0ncHBtIHByaW1h
cnktcG0tMSddIikpKQogICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3Jp
cHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0bkNhcmQpCgogICAgICAg
ICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDIsIDMpKQoKICAgICAg
ICAgICAgZmlyc3RuYW1lID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVu
dGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgs
ICIvL2lucHV0W0BpZD0nZmlyc3RuYW1lJ10iKSkpLnNlbmRfa2V5cyhzZWxm
LmZpcnN0MSkKICAgICAgICAgICAgbGFzdG5hbWUgPSBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgNSkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2Nh
dGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdsYXN0bmFtZSddIikpKS5z
ZW5kX2tleXMoc2VsZi5sYXN0MSkKICAgICAgICAgICAgZW1haWwgPSBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxl
bWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdlbWFpbCdd
IikpKS5zZW5kX2tleXMoZW1haWx4KQoKICAgICAgICAgICAgd2hpbGUgY29u
dGVvIDw9NCBhbmQgc2VsZi5jb250IDwgc2VsZi50b3RhbF9saW5lczoKCiAg
ICAgICAgICAgICAgICBjY3MsIG1lcywgYW5vLCBjY24sIHR5cD0gc3RyKHNl
bGYuY2NzW3NlbGYuY29udF0pLnN0cmlwKCkgLCBzdHIoc2VsZi5tZXNbc2Vs
Zi5jb250XSkuc3RyaXAoKSwgc3RyKHNlbGYuYW5pb1tzZWxmLmNvbnRdKS5z
dHJpcCgpLCBzdHIoc2VsZi5jdnZbc2VsZi5jb250XSkuc3RyaXAoKSwgc2Vs
Zi50b29scy5iaW50eXBlKHNlbGYuY2NzW3NlbGYuY29udF0pCiAgICAgICAg
ICAgICAgICBkZWFkbXNnID0gIkRFQUR8U05PV1hDSEt8U0lMVkVSfCVzfCVz
fCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXApCiAgICAgICAg
ICAgICAgICBsaXZlbXNnID0gIkxJVkV8U05PV1hDSEt8U0lMVkVSfCVzfCVz
fCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXApCgogICAgICAg
ICAgICAgICAgbW9udGggPSBzZWxmLm1lc1tzZWxmLmNvbnRdLmxzdHJpcCgi
MCIpCgogICAgICAgICAgICAgICAgSW5wdXRjYXJkID0gV2ViRHJpdmVyV2Fp
dChkcml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9j
YXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0nY2FyZG51bSddIikpKQog
ICAgICAgICAgICAgICAgSW5wdXRjYXJkLmNsZWFyKCkKICAgICAgICAgICAg
ICAgIElucHV0Y2FyZC5zZW5kX2tleXMoc2VsZi5jY3Nbc2VsZi5jb250XSkK
CiAgICAgICAgICAgICAgICBJbnB1dG1vbnRoID0gU2VsZWN0KGRyaXZlci5m
aW5kX2VsZW1lbnQoYnk9QnkuWFBBVEgsIHZhbHVlPSIvL3NlbGVjdFtAaWQ9
J2VkX21vbnRoJ10iKSkuc2VsZWN0X2J5X3ZhbHVlKG1vbnRoKQogICAgICAg
ICAgICAgICAgSW5wdXR5ZWFyID0gU2VsZWN0KGRyaXZlci5maW5kX2VsZW1l
bnQoYnk9QnkuWFBBVEgsIHZhbHVlPSIvL3NlbGVjdFtAaWQ9J2VkX3llYXIn
XSIpKS5zZWxlY3RfYnlfdmFsdWUoc2VsZi5hbmlvW3NlbGYuY29udF0pCgog
ICAgICAgICAgICAgICAgSW5wdXRjdnYgPSBXZWJEcml2ZXJXYWl0KGRyaXZl
ciwgNSkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChC
eS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdzZWNudW0nXSIpKSkKICAgICAgICAg
ICAgICAgIElucHV0Y3Z2LmNsZWFyKCkKICAgICAgICAgICAgICAgIElucHV0
Y3Z2LnNlbmRfa2V5cyhzZWxmLmN2dltzZWxmLmNvbnRdKQoKICAgICAgICAg
ICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMSwgMikpCiAgICAg
ICAgICAgICAgICBidG5PcmRlciA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1
KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgs
ICIvL2J1dHRvbltAY2xhc3M9J2J0biBidG4tcHJpbWFyeSBidG4tbGcnXVtj
b250YWlucyh0ZXh0KCksJ1N1Ym1pdCBvcmRlcicpXSIpKSkKICAgICAgICAg
ICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNs
aWNrKCk7IiwgYnRuT3JkZXIpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVw
KHJhbmRvbS5yYW5kaW50KDIsIDMpKQoKICAgICAgICAgICAgICAgIHRyeToK
ICAgICAgICAgICAgICAgICAgICBtc2dEZWFkID0gV2ViRHJpdmVyV2FpdChk
cml2ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0
ZWQoKEJ5LlhQQVRILCAiLy9kaXZbQGNsYXNzPSdlcnJvcnMtaW5mbyBub3Rl
IG5vdGUtZGFuZ2VyJ10iKSkpLnRleHQKICAgICAgICAgICAgICAgICAgICBw
cmludChtc2dEZWFkKQogICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9k
ZWFkLmVtaXQoZGVhZG1zZykKCiAgICAgICAgICAgICAgICBleGNlcHQ6Cgog
ICAgICAgICAgICAgICAgICAgIG1zZ0xpdmUgPSBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgMTApLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRl
ZCgoQnkuWFBBVEgsICIvL2gxW2NvbnRhaW5zKHRleHQoKSwnVGhhbmsgeW91
JyldIikpKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgcHJpbnQobXNnTGl2
ZSkKICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnRvb2xzLnJlcGV0aXIo
Y2NzKSA9PSBUcnVlOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRl
eHRfZGVhZC5lbWl0KGRlYWRtc2cpCiAgICAgICAgICAgICAgICAgICAgICAg
IHByaW50KCdSRUxJVkU6JywgbGl2ZW1zZykKICAgICAgICAgICAgICAgICAg
ICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfbGl2
ZS5lbWl0KGxpdmVtc2cpCgogICAgICAgICAgICAgICAgICAgIHNlbGYudG9v
bHMuYm9ycmFyY2MoIiVzfCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNj
bikpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb250Kz0xCiAgICAgICAg
ICAgICAgICAgICAgY29udGVvICs9MQoKICAgICAgICAgICAgICAgICAgICBi
cmVhawoKICAgICAgICAgICAgICAgIHNlbGYudG9vbHMuYm9ycmFyY2MoIiVz
fCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbikpCiAgICAgICAgICAg
ICAgICBzZWxmLmNvbnQrPTEKICAgICAgICAgICAgICAgIGNvbnRlbyArPTEK
ICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHNlbGYudGV4
dF9jaGFuZ2VkLmVtaXQoJ0VMSU1JTkFORE8gUkFTVFJFQURPUkVTIScpCiAg
ICAgICAgICAgIGRyaXZlci5xdWl0KCkKICAgICAgICAgICAgY2xvc2VDaHJv
bWUoc2VsZikKICAgICAgICAgICAgaW5zdGFuY2VfZHJpdmVyID0gb3BlbkJy
b3dzZXIoMCxzZWxmLm51bTIpCiAgICAgICAgICAgICAKICAgICAgICBleGNl
cHQ6CiAgICAgICAgICAgIGRyaXZlci5xdWl0KCkKICAgICAgICAgICAgY2xv
c2VDaHJvbWUoc2VsZikKICAgICAgICAgICAgZXhjX3R5cGUsIGV4Y19vYmos
IGV4Y190YiA9IHN5cy5leGNfaW5mbygpO2ZuYW1lID0gb3MucGF0aC5zcGxp
dChleGNfdGIudGJfZnJhbWUuZl9jb2RlLmNvX2ZpbGVuYW1lKVsxXQogICAg
ICAgICAgICBlcnJvcl9tZXNzYWdlPSAoc3RyKGV4Y190eXBlKSsnICcrc3Ry
KGV4Y190Yi50Yl9saW5lbm8pKQogICAgICAgICAgICBzZWxmLnByaW50ZWQu
ZW1pdChlcnJvcl9tZXNzYWdlKQogICAgICAgICAgICBpZiAnc2VsZW5pdW0u
Y29tbW9uLmV4Y2VwdGlvbnMuVGltZW91dEV4Y2VwdGlvbicgaW4gZXJyb3Jf
bWVzc2FnZToKICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVt
aXQoJ0V4cGVyaW1lbnRhbmRvIGZhbGxhcyBkZSBjb25leGlvbiwgZWwgcHJv
Y2VzbyBzZWd1aXJhLCByZXZpc2EgdHUgY29uZXhpb24uJykKICAgICAgICAg
ICAgI3Byb3h5RXJyb3IgPSBwcm94eUVycm9yICsgMQogICAgICAgICAgICBp
bnN0YW5jZV9kcml2ZXIgPSBvcGVuQnJvd3NlcigwLHNlbGYubnVtMikKICAg
ICAgICAgICAgCiAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdURVNURU8g
RklOQUxJWkFETycpCgpkZWYgUGhhbnRvbShzZWxmLCBkcml2ZXIpOgoKICAg
IHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoIklOSUNJQU5ETyBHQVRFIFBIQU5U
T00iKQoKICAgIHdoaWxlIHNlbGYuY29udCA8IHNlbGYudG90YWxfbGluZXM6
CgogICAgICAgIGNvbnRlbyA9IDAKCiAgICAgICAgaWYgc2VsZi50b29scy52
YWxpZGF0ZV9jcmVkaXRvcyhzZWxmLnVzZXJuYW1lLHNlbGYucGFzc3dvcmQp
ID09IFRydWU6CiAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQo
J0NSRURJVE9TIElOU1VGSUNJRU5URVMgOi8nKQogICAgICAgICAgICByZXR1
cm4gTm9uZQogICAgICAgIAogICAgICAgIGVtYWlseCA9ICcnLmpvaW4ocmFu
ZG9tLmNob2ljZSgnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZn
aGlqa2xtbm9wcXJzdHd4eXonKSBmb3IgXyBpbiByYW5nZSgzKSkrc2VsZi5m
aXJzdDErJycuam9pbihyYW5kb20uY2hvaWNlKCdBQkNERUZHSElKS0xNTk9Q
UVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0d3h5ejAxMjM0NTY3ODkn
KSBmb3IgXyBpbiByYW5nZSgzKSkrJ0BnbWFpbC5jb20nCgogICAgICAgIGxp
bmtzID0gWwogICAgICAgICAgICAiaHR0cHM6Ly9waGFudG9tLnBlL2Z1bmtv
LXBvcC1sZW9uYXJkby1taWdodHktbW9ycGhpbi5odG1sIiwKICAgICAgICAg
ICAgImh0dHBzOi8vcGhhbnRvbS5wZS9mdW5rby1wb3AtZGMtd2hpdGUtbGFu
dGVybi1leGNsdXNpdm8tcGhhbnRvbS1mdW5rb24tMjAyMS5odG1sIiwKICAg
ICAgICAgICAgImh0dHBzOi8vcGhhbnRvbS5wZS9mdW5rby1wb3AtYW5uaXZl
cnNhcnktZnJlZGR5LWV4Y2x1c2l2by1waGFudG9tLmh0bWwiLAogICAgICAg
ICAgICAiaHR0cHM6Ly9waGFudG9tLnBlL2Z1bmtvLXBvcC16b21iaWVsYW5k
LXdpY2hpdGEuaHRtbCIsCiAgICAgICAgICAgICJodHRwczovL3BoYW50b20u
cGUvZnVua28tcG9wLXBva2Vtb24tdnVscGl4Lmh0bWwiLAogICAgICAgICAg
ICAiaHR0cHM6Ly9waGFudG9tLnBlL2Z1bmtvLXBvcC1mdW5rby1mcmVkZHkt
ZnVua28tZXhjbHVzaXZvLWRlLXBoYW50b20uaHRtbCIsCiAgICAgICAgICAg
ICJodHRwczovL3BoYW50b20ucGUvZnVua28tcG9wLW1hcnZlbC10YXNrbWFz
dGVyLmh0bWwiLAogICAgICAgICAgICAiaHR0cHM6Ly9waGFudG9tLnBlL2Z1
bmtvLXBvcC1mcmFzaWVyLWZyYXNpZXIuaHRtbCIsCiAgICAgICAgICAgICJo
dHRwczovL3BoYW50b20ucGUvZnVua28tcG9wLWJvcnV0by1zaGlua2kuaHRt
bCIsCiAgICAgICAgICAgICJodHRwczovL3BoYW50b20ucGUvZnVua28tcG9w
LXJvY2tzLWphbmlzLWpvcGxpbi5odG1sIgogICAgICAgIF0KCiAgICAgICAg
bGluayA9IHJhbmRvbS5jaG9pY2UobGlua3MpCgogICAgICAgIHRyeToKCiAg
ICAgICAgICAgIGluc3RhbmNlX2RyaXZlciA9IG9wZW5Ccm93c2VyKDAsc2Vs
Zi5udW0yKQoKICAgICAgICAgICAgZHJpdmVyID0gaW5zdGFuY2VfZHJpdmVy
CgogICAgICAgICAgICBkcml2ZXIuZ2V0KCdodHRwczovL3BoYW50b20ucGUv
Y3VzdG9tZXIvYWNjb3VudC9jcmVhdGUvJykKICAgICAgICAgICAgdGltZS5z
bGVlcChyYW5kb20ucmFuZGludCgyLCAzKSkKCiAgICAgICAgICAgIHNlbGYu
dGV4dF9jaGFuZ2VkLmVtaXQoJ1JFU09MVklFTkRPIENBUFRDSEEuLicpCgog
ICAgICAgICAgICBFbGVtZW50Q2FwdGNoYSA9IFdlYkRyaXZlcldhaXQoZHJp
dmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQo
KEJ5LlhQQVRILCAiLy9pbWdbQGNsYXNzPSdjYXB0Y2hhLWltZyddIikpKQog
ICAgICAgICAgICB1cmxDYXB0Y2hhID0gRWxlbWVudENhcHRjaGEuZ2V0X2F0
dHJpYnV0ZSgnc3JjJykKCiAgICAgICAgICAgIHJlc3BvbnNlID0gcmVxdWVz
dHMuZ2V0KHVybENhcHRjaGEpCgogICAgICAgICAgICBjYXB0Y2hhX2ltYWdl
X3BhdGggPSBvcy5wYXRoLmpvaW4oJ2NvbmZpZycsICdjYXB0Y2hhX2ltYWdl
LnBuZycpCgogICAgICAgICAgICAjIEd1YXJkYSBsYSBpbWFnZW4gZGVzY2Fy
Z2FkYSBlbiB1biBhcmNoaXZvIGxvY2FsCiAgICAgICAgICAgIHdpdGggb3Bl
bihjYXB0Y2hhX2ltYWdlX3BhdGgsICd3YicpIGFzIGY6CiAgICAgICAgICAg
ICAgICBmLndyaXRlKHJlc3BvbnNlLmNvbnRlbnQpCgogICAgICAgICAgICAj
IEVqZWN1dGFyIGFjY2lvbmVzIGVzcGVjw61maWNhcyBwYXJhIHVzdWFyaW9z
IFZJUAogICAgICAgICAgICB2aXBfaW5zdGFuY2UgPSBvcGVuQnJvd3Nlcigz
LFRydWUpCiAgICAgICAgICAgIHZpcF9kcml2ZXIgPSBWSVBVc2VyQWN0aW9u
cyh2aXBfaW5zdGFuY2UpCiAgICAgICAgICAgIHZpcF9kcml2ZXIubmF2ZWdh
cigpCgogICAgICAgICAgICBjYXB0Y2hhU291bmQoKQoKICAgICAgICAgICAg
IyBFc3BlcmFuZG8gcmVjaWJpciBzZW5hbCBkZSBjYXB0Y2hhIQogICAgICAg
ICAgICBwcmludCgnRXNwZXJhbmRvIGRhdG9zLi4nKQogICAgICAgICAgICBw
dXp6bGVfZWxlbWVudCAgPSBXZWJEcml2ZXJXYWl0KHZpcF9pbnN0YW5jZSwg
MTApLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnku
WFBBVEgsICIvLypbQGlkPSdjYXB0Y2hhLWlucHV0J10iKSkpCiAgICAgICAg
ICAgIHZpcF9pbnN0YW5jZS5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBd
LnNjcm9sbEludG9WaWV3KHRydWUpOyIsIHB1enpsZV9lbGVtZW50KQogICAg
ICAgICAgICBXZWJEcml2ZXJXYWl0KHZpcF9pbnN0YW5jZSwgMTAwKS51bnRp
bChFQy52aXNpYmlsaXR5X29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgs
ICIvL2RpdltAaWQ9J2NhcHRjaGEtZW52aWFkbyddIikpKQogICAgICAgICAg
ICBwdXp6bGVfdmFsdWUgPSBwdXp6bGVfZWxlbWVudC5nZXRfYXR0cmlidXRl
KCd2YWx1ZScpCgogICAgICAgICAgICBwcmludCgnRGF0b3MgcmVjaWJpZG9z
Li4nLCBwdXp6bGVfdmFsdWUpCgogICAgICAgICAgICB2aXBfaW5zdGFuY2Uu
cXVpdCgpCiAgICAgICAgICAgIGRldGVuZXJfc29uaWRvKCkKCiAgICAgICAg
ICAgIG5hbWUgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMu
cHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5w
dXRbQGlkPSdmaXJzdG5hbWUnXSIpKSkuc2VuZF9rZXlzKHNlbGYuZmlyc3Qx
KQogICAgICAgICAgICBsbmFtZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1
KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQ
QVRILCAiLy9pbnB1dFtAaWQ9J2xhc3RuYW1lJ10iKSkpLnNlbmRfa2V5cyhz
ZWxmLmxhc3QxKQoKICAgICAgICAgICAgbnVtZSA9IGYiMzF7cmFuZG9tLnJh
bmRpbnQoMCwgOSl9eycnLmpvaW4ocmFuZG9tLmNob2ljZXMoJzAxMjM0NTY3
ODknLCBrPTcpKX0iCiAgICAgICAgICAgIHBob25lID0gV2ViRHJpdmVyV2Fp
dChkcml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9j
YXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0ndGVsZXBob25lJ10iKSkp
LnNlbmRfa2V5cyhudW1lKQoKICAgICAgICAgICAgZG5pID0gcmFuZG9tLnJh
bmRpbnQoMSwgOTk5OTk5OTkpCiAgICAgICAgICAgIGlucHV0ZG5pID0gV2Vi
RHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2Vs
ZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0ndGF4dmF0
J10iKSkpLnNlbmRfa2V5cyhkbmkpCgogICAgICAgICAgICBlbWFpbCA9IFdl
YkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9l
bGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2VtYWls
X2FkZHJlc3MnXSIpKSkuc2VuZF9rZXlzKGVtYWlseCkKICAgICAgICAgICAg
cHNzd2QgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMucHJl
c2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRb
QGlkPSdwYXNzd29yZCddIikpKS5zZW5kX2tleXMoIlNub3dYMTIzKiIpCiAg
ICAgICAgICAgIHJwc3N3ZCA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51
bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRI
LCAiLy9pbnB1dFtAaWQ9J3Bhc3N3b3JkLWNvbmZpcm1hdGlvbiddIikpKS5z
ZW5kX2tleXMoIlNub3dYMTIzKiIpCgogICAgICAgICAgICBpbnB1dENhcHRj
aGEgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMucHJlc2Vu
Y2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlk
PSdjYXB0Y2hhX3VzZXJfY3JlYXRlJ10iKSkpLnNlbmRfa2V5cyhwdXp6bGVf
dmFsdWUpCgogICAgICAgICAgICBidG5DcmVhdGUgPSBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxl
KChCeS5YUEFUSCwgIi8vYnV0dG9uW0B0aXRsZT0nQ3JlYXIgdW5hIGN1ZW50
YSddIikpKQogICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFy
Z3VtZW50c1swXS5jbGljaygpOyIsIGJ0bkNyZWF0ZSkKICAgICAgICAgICAg
dGltZS5zbGVlcCgxKQoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAg
ICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNl
X29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2Rpdlt0ZXh0KCk9
J0luY29ycmVjdCBDQVBUQ0hBJ10iKSkpCiAgICAgICAgICAgICAgICBzZWxm
LnRleHRfY2hhbmdlZC5lbWl0KCdQVVpaTEUgRkFMTElETywgUkVJTlRFTlRB
TkRPLi4nKQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZXhj
ZXB0OgogICAgICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgn
UFVaWkxFIFZBTElEQURPISBTbm93WENoZWNrZXInKQoKICAgICAgICAgICAg
ZHJpdmVyLmdldChsaW5rKQogICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRv
bS5yYW5kaW50KDIsIDMpKQoKICAgICAgICAgICAgYnRuQWdnID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xp
Y2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0BpZD0ncHJvZHVjdC1hZGR0
b2NhcnQtYnV0dG9uJ10iKSkpCiAgICAgICAgICAgIGRyaXZlci5leGVjdXRl
X3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgYnRuQWdnKQogICAg
ICAgICAgICB0aW1lLnNsZWVwKDEpCgogICAgICAgICAgICBXZWJEcml2ZXJX
YWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2th
YmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0BpZD0ncHJvZHVjdC1hZGR0b2Nh
cnQtYnV0dG9uJ10iKSkpCgogICAgICAgICAgICBkcml2ZXIuZ2V0KCJodHRw
czovL3BoYW50b20ucGUvY2hlY2tvdXQvY2FydC8iKQogICAgICAgICAgICB0
aW1lLnNsZWVwKDUpCgogICAgICAgICAgICBidG5DaGVja291dCA9IFdlYkRy
aXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9j
bGlja2FibGUoKEJ5LlhQQVRILCAiLy9idXR0b25bQHRpdGxlPSdSZWFsaXph
ciBQZWRpZG8nXSIpKSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2Ny
aXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5DaGVja291dCkKICAg
ICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgyLCAzKSkKCiAg
ICAgICAgICAgICMgRGlyZWNjaW9uIGRlIGVudmlvCiAgICAgICAgICAgIHNl
bGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0dFTkVSQU5ETyBNRVRBLURBVE9TLi4n
KQogICAgICAgICAgICBhZGRyZXNzID0gZiJDYWxsZSB7cmFuZG9tLnJhbmRp
bnQoMSwgMTAwKX0gTiB7cmFuZG9tLnJhbmRpbnQoMSwgMTAwKX0iCiAgICAg
ICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxNSkudW50aWwoRUMucHJl
c2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRb
QG5hbWU9J3N0cmVldFswXSddIikpKS5zZW5kX2tleXMoYWRkcmVzcykKCiAg
ICAgICAgICAgIHNlbGVjdFN0YXRlID0gU2VsZWN0KGRyaXZlci5maW5kX2Vs
ZW1lbnQoYnk9QnkuWFBBVEgsIHZhbHVlPSIvL3NlbGVjdFtAbmFtZT0ncmVn
aW9uX2lkJ10iKSkuc2VsZWN0X2J5X3ZhbHVlKCc1MTAnKQogICAgICAgICAg
ICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgIHNlbGVjdFByb3ZpbmNlID0g
U2VsZWN0KGRyaXZlci5maW5kX2VsZW1lbnQoYnk9QnkuWFBBVEgsIHZhbHVl
PSIvL3NlbGVjdFtAbmFtZT0ncHJvdmluY2VfaWQnXSIpKS5zZWxlY3RfYnlf
dmFsdWUoJzEnKQogICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAg
ICAgIHNlbGVjdENpdHkgPSBTZWxlY3QoZHJpdmVyLmZpbmRfZWxlbWVudChi
eT1CeS5YUEFUSCwgdmFsdWU9Ii8vc2VsZWN0W0BuYW1lPSdjaXR5J10iKSku
c2VsZWN0X2J5X3ZhbHVlKCcxJykKCiAgICAgICAgICAgIGlucHV0WmlwID0g
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDE1KS51bnRpbChFQy5wcmVzZW5jZV9v
Zl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAbmFtZT0n
cG9zdGNvZGUnXSIpKSkuc2VuZF9rZXlzKCcwMTAwMCcpCiAgICAgICAgICAg
IGlucHV0UGhvbmUgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTUpLnVudGls
KEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIv
L2lucHV0W0BuYW1lPSd0ZWxlcGhvbmUnXSIpKSkuc2VuZF9rZXlzKG51bWUp
CgogICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDIsIDMp
KQoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgaW5wdXRFbnZp
byA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5lbGVtZW50
X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL3RkW2NvbnRhaW5zKHRl
eHQoKSwgJ0VudmlvICBhIGRvbWljaWxpbycpXSIpKSkKICAgICAgICAgICAg
ICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNr
KCk7IiwgaW5wdXRFbnZpbykKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAo
MSkKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcHJpbnQo
J25vIHJlY29naWRhIGVuY29udHJhZGEuJykKCiAgICAgICAgICAgIGJ0blNp
ZyA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxlbWVu
dF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9kaXZbQGlkPSdzaGlw
cGluZy1tZXRob2QtYnV0dG9ucy1jb250YWluZXInXS8vYnV0dG9uIikpKQog
ICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1sw
XS5jbGljaygpOyIsIGJ0blNpZykKCiAgICAgICAgICAgIHRpbWUuc2xlZXAo
cmFuZG9tLnJhbmRpbnQoMiwgMykpCgogICAgICAgICAgICB3aGlsZSBjb250
ZW8gPD0yNCBhbmQgc2VsZi5jb250IDwgc2VsZi50b3RhbF9saW5lczoKCiAg
ICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdJTklDSUFO
RE8gUFJPQ0VTTyBERSBQQUdPLicpCgogICAgICAgICAgICAgICAgZHJpdmVy
LmdldCgnaHR0cHM6Ly9waGFudG9tLnBlL2NoZWNrb3V0LyNwYXltZW50JykK
ICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMiwg
MykpCgogICAgICAgICAgICAgICAgc2VsZWN0Q2FyZCA9IFdlYkRyaXZlcldh
aXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2Fi
bGUoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J3Zpc2FuZXRfcGF5J10iKSkp
CiAgICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3Vt
ZW50c1swXS5jbGljaygpOyIsIHNlbGVjdENhcmQpCiAgICAgICAgICAgICAg
ICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDIsIDMpKQoKICAgICAgICAg
ICAgICAgIGNjcywgbWVzLCBhbm8sIGNjbiwgdHlwPSBzdHIoc2VsZi5jY3Nb
c2VsZi5jb250XSkuc3RyaXAoKSAsIHN0cihzZWxmLm1lc1tzZWxmLmNvbnRd
KS5zdHJpcCgpLCBzdHIoc2VsZi5hbmlvW3NlbGYuY29udF0pLnN0cmlwKCks
IHN0cihzZWxmLmN2dltzZWxmLmNvbnRdKS5zdHJpcCgpLCBzZWxmLnRvb2xz
LmJpbnR5cGUoc2VsZi5jY3Nbc2VsZi5jb250XSkKICAgICAgICAgICAgICAg
IGRlYWRtc2cgPSAiREVBRHxTTk9XWENIS3xEQVJLfCVzfCVzfCVzfCVzfCVz
XG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXApCiAgICAgICAgICAgICAgICBs
aXZlbXNnID0gIkxJVkV8U05PV1hDSEt8REFSS3wlc3wlc3wlc3wlc3wlc1xu
IiAlIChjY3MsbWVzLGFubyxjY24sdHlwKQogICAgICAgICAgICAgICAgZmVj
aGEgPSBzZWxmLm1lc1tzZWxmLmNvbnRdICsgc2VsZi5hbmlvW3NlbGYuY29u
dF1bMjo0XSAgICAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAg
dHJ5OgogICAgICAgICAgICAgICAgICAgIGlucHV0Q2FyZCA9IFdlYkRyaXZl
cldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50
X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2NoZWNrb3V0LWZy
YW1lcy1jYXJkLW51bWJlciddIikpKQogICAgICAgICAgICAgICAgICAgIGh1
bWFuX2tleXMoZHJpdmVyLCBzZWxmLmNjc1tzZWxmLmNvbnRdLCAiLy9pbnB1
dFtAaWQ9J2NoZWNrb3V0LWZyYW1lcy1jYXJkLW51bWJlciddIikKICAgICAg
ICAgICAgICAgICAgICBpbnB1dEV4cCA9IFdlYkRyaXZlcldhaXQoZHJpdmVy
LCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5
LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2NoZWNrb3V0LWZyYW1lcy1leHBpcnkt
ZGF0ZSddIikpKQogICAgICAgICAgICAgICAgICAgIGh1bWFuX2tleXMoZHJp
dmVyLCBmZWNoYSwgIi8vaW5wdXRbQGlkPSdjaGVja291dC1mcmFtZXMtZXhw
aXJ5LWRhdGUnXSIpCiAgICAgICAgICAgICAgICAgICAgaW5wdXRDdnYgPSBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMucHJlc2VuY2Vfb2Zf
ZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdjaGVj
a291dC1mcmFtZXMtY3Z2J10iKSkpCiAgICAgICAgICAgICAgICAgICAgaHVt
YW5fa2V5cyhkcml2ZXIsIHNlbGYuY3Z2W3NlbGYuY29udF0sICIvL2lucHV0
W0BpZD0nY2hlY2tvdXQtZnJhbWVzLWN2diddIikKICAgICAgICAgICAgICAg
ICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgICAgICAgICAgYnRuUGF5
ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMpLnVudGlsKEVDLmVsZW1lbnRf
dG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vZGl2W0BpZD0nZ2J1dHRv
biddIikpKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAg
ZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIHByaW50KCdQcmltZXJvIHBh
Z28gbm8gZW5jb250cmFkby4nKQogICAgICAgICAgICAgICAgICAgIGJ0blBh
eSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5lbGVtZW50
X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRvbltAY2xhc3M9
J3N0YXJ0LWpzLWJ0biBtb2RhbC1vcGVuZXIgZGVmYXVsdCddIikpKQoKICAg
ICAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRz
WzBdLmNsaWNrKCk7IiwgYnRuUGF5KQogICAgICAgICAgICAgICAgdGltZS5z
bGVlcChyYW5kb20ucmFuZGludCgyLCAzKSkKCiAgICAgICAgICAgICAgICBp
ZiBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmZyYW1lX3Rv
X2JlX2F2YWlsYWJsZV9hbmRfc3dpdGNoX3RvX2l0KChCeS5YUEFUSCwiLy9p
ZnJhbWVbQGlkPSd2aXNhTmV0SlMnXSIpKSk6CgogICAgICAgICAgICAgICAg
ICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMiwgMykpCgogICAgICAg
ICAgICAgICAgICAgIFNlbGVjdENhcmQyID0gV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDEwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnku
WFBBVEgsICIvL2xhYmVsW0BjbGFzcz0ncmFkaW8gc3RhdGUtc3VjY2Vzcydd
L2kiKSkpCiAgICAgICAgICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2Ny
aXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBTZWxlY3RDYXJkMikKICAg
ICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpCgogICAgICAgICAgICAg
ICAgICAgIGJ0bkNvbnRpbnVlID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEw
KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgs
ICIvL2J1dHRvbltAaWQ9J3BheW1lbnQtY29udGludWUnXSIpKSkKICAgICAg
ICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50
c1swXS5jbGljaygpOyIsIGJ0bkNvbnRpbnVlKQogICAgICAgICAgICAgICAg
ICAgIHRpbWUuc2xlZXAoMSkKCiAgICAgICAgICAgICAgICAgICAgaW5wdXRD
QyA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5j
ZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9
J251bWJlciddIikpKQogICAgICAgICAgICAgICAgICAgIGh1bWFuX2tleXMo
ZHJpdmVyLCBzZWxmLmNjc1tzZWxmLmNvbnRdLCAiLy9pbnB1dFtAaWQ9J251
bWJlciddIikKICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRv
bS5yYW5kaW50KDIsIDMpKQoKICAgICAgICAgICAgICAgICAgICBzbGVjdE1v
bmVkYSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxl
bWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiKC8vc3BhbltAY2xh
c3M9J2NoZWNrbWFyayddKVsyXSIpKSkKICAgICAgICAgICAgICAgICAgICBk
cml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIs
IHNsZWN0TW9uZWRhKQogICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAo
MSkKCiAgICAgICAgICAgICAgICAgICAgYnRuT2sgPSBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxl
KChCeS5YUEFUSCwgIi8vYnV0dG9uW0BpZD0nZGNjLWFjY2VwdCddIikpKQog
ICAgICAgICAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJn
dW1lbnRzWzBdLmNsaWNrKCk7IiwgYnRuT2spCiAgICAgICAgICAgICAgICAg
ICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgyLCAzKSkKCiAgICAgICAg
ICAgICAgICAgICAgaW5wdXRFeHBpcnkgPSBXZWJEcml2ZXJXYWl0KGRyaXZl
ciwgNSkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChC
eS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdleHBpcnknXSIpKSkKICAgICAgICAg
ICAgICAgICAgICBodW1hbl9rZXlzKGRyaXZlciwgZmVjaGEsICIvL2lucHV0
W0BpZD0nZXhwaXJ5J10iKQogICAgICAgICAgICAgICAgICAgIAoKICAgICAg
ICAgICAgICAgICAgICBpbnB1dEN2diA9IFdlYkRyaXZlcldhaXQoZHJpdmVy
LCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5
LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2N2YyddIikpKS5zZW5kX2tleXMoc2Vs
Zi5jdnZbc2VsZi5jb250XSkKICAgICAgICAgICAgICAgICAgICBpbnB1dE5h
bWUgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMucHJlc2Vu
Y2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlk
PSduYW1lJ10iKSkpLnNlbmRfa2V5cyhzZWxmLmZpcnN0MSkKICAgICAgICAg
ICAgICAgICAgICBpbnB1dExuYW1lID0gV2ViRHJpdmVyV2FpdChkcml2ZXIs
IDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnku
WFBBVEgsICIvL2lucHV0W0BpZD0nbGFzdG5hbWUnXSIpKSkuc2VuZF9rZXlz
KHNlbGYubGFzdDEpCiAgICAgICAgICAgICAgICAgICAgaW5wdXRFbWFpbCA9
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9v
Zl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2Vt
YWlsJ10iKSkpLnNlbmRfa2V5cyhlbWFpbHgpCiAgICAgICAgICAgICAgICAg
ICAgaW5wdXRDaXR5ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGls
KEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIv
L2lucHV0W0BpZD0nY2l0eSddIikpKS5zZW5kX2tleXMoJ0NvbG9tYmlhJykK
ICAgICAgICAgICAgICAgICAgICBpbnB1dENvdW50cnkgPSBXZWJEcml2ZXJX
YWl0KGRyaXZlciwgNSkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9s
b2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdjb3VudHJ5J10iKSkp
LnNlbmRfa2V5cygnQ29sb21iaWEnKQoKICAgICAgICAgICAgICAgICAgICB0
aW1lLnNsZWVwKDMpCgogICAgICAgICAgICAgICAgICAgIGJ0blN1Ym1pdCA9
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90
b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9idXR0b25bQGlkPSdidG4t
cGF5LXN1Ym1pdCddIikpKQogICAgICAgICAgICAgICAgICAgIGRyaXZlci5l
eGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgYnRuU3Vi
bWl0KQogICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJh
bmRpbnQoMiwgMykpCgogICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9j
aGFuZ2VkLmVtaXQoJ0FOQUxJWkFORE8gUkVTVUxUQURPUy4uJykKCiAgICAg
ICAgICAgICAgICAgICAgdHJ5OiAjIFJldmlzYXIgM0QKCiAgICAgICAgICAg
ICAgICAgICAgICAgIGlmIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50
aWwoRUMuZnJhbWVfdG9fYmVfYXZhaWxhYmxlX2FuZF9zd2l0Y2hfdG9faXQo
KEJ5LlhQQVRILCIvL2RpdltAaWQ9J0NhcmRpbmFsLUVsZW1lbnRDb250YWlu
ZXInXS8vaWZyYW1lW0BpZD0nQ2FyZGluYWwtQ0NBLUlGcmFtZSddIikpKToK
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnRW50cm8gYWwg
ZnJhbWUgM0QnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluQ0Mg
PSBzZWxmLmNjc1tzZWxmLmNvbnRdWzA6Nl0KICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHByaW50KGJpbkNDKQoKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMiwgMykpCgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi50b29scy5yZXBldGly
KGNjcykgPT0gVHJ1ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBwcmludCgnUkVMSVZFOicsIGxpdmVtc2cpCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgc2VsZi50ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZWxpZiAnNTMwMzcnIGluIGJpbkNDOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9saXZlLmVtaXQo
bGl2ZW1zZykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgoK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZnJhbWVfYm9keSA9
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMucHJlc2VuY2Vf
b2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vYm9keSIpKSkKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2dGcmFtZSA9IGlmcmFt
ZV9ib2R5LnRleHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBw
cmludChtc2dGcmFtZSkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgdWx0aSA9IHNlbGYuY2NzW3NlbGYuY29udF1bLTQ6XQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHBhbGFicmFzX2NsYXZlID0gWyJDYWxs
IG1lIGF0IiwgIlNNUyIsICJFTUFJTCIsICJDw7NkaWdvIGRlIFZlcmlmaWNh
Y2nDs24iLCAiRU5WSUFSIiwgIkF1dG9yaXphIHR1IGNvbXByYSBlbiB0dSBi
YW5jYSBkaWdpdGFsIiwgIkNsYXZlIE9UUCIsICJpbmdyZXNhIGVsIGPDs2Rp
Z28iLCB1bHRpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVu
Y29udHJhZGEgPSBhbnkocGFsYWJyYSBpbiBtc2dGcmFtZSBmb3IgcGFsYWJy
YSBpbiBwYWxhYnJhc19jbGF2ZSkKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBpZiBlbmNvbnRyYWRhOgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBzZWxmLnRleHRfbGl2ZS5lbWl0KGxpdmVtc2cpCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGRyaXZlci5zd2l0Y2hfdG8uZGVmYXVsdF9jb250ZW50KCkK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyaXZlci5yZWZyZXNoKCkK
CiAgICAgICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAg
ICAgICAgICBwcmludCgnRXJyb3IgZGVudHJvIGRlbCBmcmFtZScpCiAgICAg
ICAgICAgICAgICAgICAgICAgIGRyaXZlci5zd2l0Y2hfdG8uZGVmYXVsdF9j
b250ZW50KCkKICAgICAgICAgICAgICAgICAgICAgICAgYnRuSW1wcmltaXIg
PSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRf
dG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYVtAY2xhc3M9J2FjdGlv
biBwcmludCddIikpKQoKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Ogog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnRGVhZCA9IFdlYkRyaXZl
cldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50
X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9kaXZbY29udGFpbnModGV4dCgpLCdO
dW1lcm8gZGUgcGVkaWRvIGRlbCBjb21lcmNpbyBkdXBsaWNhZG8sIEFjdGlv
biBDb2RlOiAzMDAnKV0iKSkpLnRleHQKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHByaW50KG1zZ0RlYWQpCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBzZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRtc2cpCgogICAgICAgICAg
ICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYg
Y29udGVvID09IDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHByaW50KCdTYWx0YW5kbyBwcmltZXJhIGxpdmUuJykKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2RlYWQuZW1p
dChkZWFkbXNnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVs
c2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZ0xp
dmUgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNl
bmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2RpdltAY2xh
c3M9J21lc3NhZ2Utd2FybmluZyB3YXJuaW5nIG1lc3NhZ2UnXS9kaXYiKSkp
LnRleHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJp
bnQobXNnTGl2ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc2VsZi50ZXh0X2xpdmUuZW1pdChsaXZlbXNnKQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGxpdmVtc2csICdFcnJv
ciBvYnRlbmllbmRvIG1zZyBsaXZlJywgZSwgKQoKICAgICAgICAgICAgICAg
IHNlbGYudG9vbHMuYm9ycmFyY2MoIiVzfCVzfCVzfCVzXG4iICUgKGNjcyxt
ZXMsYW5vLGNjbikpCiAgICAgICAgICAgICAgICBzZWxmLmNvbnQrPTEKICAg
ICAgICAgICAgICAgIGNvbnRlbyArPTEKCiAgICAgICAgICAgIHNlbGYudGV4
dF9jaGFuZ2VkLmVtaXQoJ0VMSU1JTkFORE8gUkFTVFJFQURPUkVTIScpCiAg
ICAgICAgICAgIGRlc2Jhbihkcml2ZXIpCiAgICAgICAgICAgIGRyaXZlci5x
dWl0KCkKICAgICAgICAgICAgY2xvc2VDaHJvbWUoc2VsZikKICAgICAgICAg
ICAgCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAjZGVzYmFuKGRyaXZl
cikKICAgICAgICAgICAgZHJpdmVyLnF1aXQoKQogICAgICAgICAgICBjbG9z
ZUNocm9tZShzZWxmKQogICAgICAgICAgICAjaW5zdGFuY2VfZHJpdmVyID0g
b3BlbkJyb3dzZXIoMCxzZWxmLm51bTIpCiAgICAgICAgICAgIGV4Y190eXBl
LCBleGNfb2JqLCBleGNfdGIgPSBzeXMuZXhjX2luZm8oKTtmbmFtZSA9IG9z
LnBhdGguc3BsaXQoZXhjX3RiLnRiX2ZyYW1lLmZfY29kZS5jb19maWxlbmFt
ZSlbMV0KICAgICAgICAgICAgZXJyb3JfbWVzc2FnZT0gKHN0cihleGNfdHlw
ZSkrJyAnK3N0cihleGNfdGIudGJfbGluZW5vKSkKICAgICAgICAgICAgc2Vs
Zi5wcmludGVkLmVtaXQoZXJyb3JfbWVzc2FnZSkKICAgICAgICAgICAgaWYg
J3NlbGVuaXVtLmNvbW1vbi5leGNlcHRpb25zLlRpbWVvdXRFeGNlcHRpb24n
IGluIGVycm9yX21lc3NhZ2U6CiAgICAgICAgICAgICAgICBzZWxmLnRleHRf
Y2hhbmdlZC5lbWl0KCdFeHBlcmltZW50YW5kbyBmYWxsYXMgZGUgY29uZXhp
b24sIGVsIHByb2Nlc28gc2VndWlyYSwgcmV2aXNhIHR1IGNvbmV4aW9uLicp
CiAgICAgICAgICAgICNwcm94eUVycm9yID0gcHJveHlFcnJvciArIDEKICAg
ICAgICAgICAgaW5zdGFuY2VfZHJpdmVyID0gb3BlbkJyb3dzZXIoMCxzZWxm
Lm51bTIpCiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgIHNlbGYudGV4
dF9jaGFuZ2VkLmVtaXQoJ1RFU1RFTyBGSU5BTElaQURPJykKCmRlZiBJa2Vh
KHNlbGYsIGRyaXZlcik6CgogICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgi
SU5JQ0lBTkRPIEdBVEUgQ0lBTiIpCgogICAgd2hpbGUgc2VsZi5jb250IDwg
c2VsZi50b3RhbF9saW5lczoKCiAgICAgICAgY29udGVvID0gMAoKICAgICAg
ICBpZiBzZWxmLnRvb2xzLnZhbGlkYXRlX2NyZWRpdG9zKHNlbGYudXNlcm5h
bWUsc2VsZi5wYXNzd29yZCkgPT0gVHJ1ZToKICAgICAgICAgICAgc2VsZi50
ZXh0X2NoYW5nZWQuZW1pdCgnQ1JFRElUT1MgSU5TVUZJQ0lFTlRFUyA6Lycp
CiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgCiAgICAgICAgZW1h
aWx4ID0gJycuam9pbihyYW5kb20uY2hvaWNlKCdBQkNERUZHSElKS0xNTk9Q
UVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0d3h5ejAxMjM0NTY3ODkn
KSBmb3IgXyBpbiByYW5nZSgzKSkrc2VsZi5maXJzdDErJycuam9pbihyYW5k
b20uY2hvaWNlKCdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdo
aWprbG1ub3BxcnN0d3h5ejAxMjM0NTY3ODknKSBmb3IgXyBpbiByYW5nZSgz
KSkrJ0BnbWFpbC5jb20nCgogICAgICAgIHByb2R1Y3RzID0gWwogICAgICAg
ICAgICAgICAgJ2h0dHBzOi8vd3d3LmlrZWEuY29tL2NvL2VzL3AvdmFyZGFn
ZW4tdGF6b24tYm93bC12aWRyaW8taW5jb2xvcm8tMDAyODkyNjEvJywKICAg
ICAgICAgICAgICAgICdodHRwczovL3d3dy5pa2VhLmNvbS9jby9lcy9wL2Zl
amthLXBsYW50YS1hcnRpZmljaWFsLWNvbi1tYXRlcmEtaW50ZXJpb3ItZXh0
ZXJpb3Itc3VjdWxlbnRhLTgwNTE5NzY3LycsCiAgICAgICAgICAgICAgICAn
aHR0cHM6Ly93d3cuaWtlYS5jb20vY28vZXMvcC9maXNrYm8tbWFyY28tYmxh
bmNvLTAwMjk1NjUzLycsCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly93d3cu
aWtlYS5jb20vY28vZXMvcC9wb2thbC12YXNvLXZpZHJpby1pbmNvbG9yby0x
MDI3MDQ3OC8nLAogICAgICAgICAgICAgICAgJ2h0dHBzOi8vd3d3LmlrZWEu
Y29tL2NvL2VzL3Avc3ZhbXBpZy1lc3BvbmphLWJsYW5jby1ncmlzYWNlby02
MDI1NzYwNS8nLAogICAgICAgICAgICAgICAgJ2h0dHBzOi8vd3d3LmlrZWEu
Y29tL2NvL2VzL3AvaG9lbnNuYWV0LXNvcG9ydGUtcGFyYS10ZWxlZm9uby1j
ZWx1bGFyLWJlaWdlLTEwNTY0ODk1LycsCiAgICAgICAgICAgICAgICAnaHR0
cHM6Ly93d3cuaWtlYS5jb20vY28vZXMvcC9wcmlja2lnLXRhcGEtcGFyYS1t
aWNyb29uZGFzLWdyaXMtNzAxODYwOTAvJywKICAgICAgICAgICAgICAgICdo
dHRwczovL3d3dy5pa2VhLmNvbS9jby9lcy9wL2JpbGxpbmdlbi1hY2Nlc29y
aW8tcGFyYS1jYWpvbi1ibGFuY28tMzAyNzA0MDEvJwogICAgICAgICAgICBd
CgogICAgICAgIHByb2R1Y3QgPSByYW5kb20uY2hvaWNlKHByb2R1Y3RzKQog
ICAgICAgIAogICAgICAgIHRyeToKCiAgICAgICAgICAgIGRyaXZlci5nZXQo
cHJvZHVjdCkKICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGlu
dCgyLCAzKSkKCiAgICAgICAgICAgIGJ0bkFnZyA9IFdlYkRyaXZlcldhaXQo
ZHJpdmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUo
KEJ5LlhQQVRILCAiLy9idXR0b25bQGFyaWEtbGFiZWw9J0HDsWFkaXIgYSBs
YSBib2xzYSddIikpKQogICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3Jp
cHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0bkFnZykKICAgICAgICAg
ICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgyLCAzKSkKCiAgICAgICAg
ICAgIGJ0bkNhcnQgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGls
KEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYVtA
YXJpYS1sYWJlbD0nQ29udGludWFyIGFsIGNhcnJpdG8gZGUgY29tcHJhcydd
IikpKQogICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3Vt
ZW50c1swXS5jbGljaygpOyIsIGJ0bkNhcnQpCiAgICAgICAgICAgIHRpbWUu
c2xlZXAocmFuZG9tLnJhbmRpbnQoMSwgMikpCgogICAgICAgICAgICBidG5Q
YXkgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1l
bnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0BkYXRh
LXRlc3RpZD0nc3VtbWFyeS1jaGVja291dC1idXR0b24nXSIpKSkKICAgICAg
ICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xp
Y2soKTsiLCBidG5QYXkpCgogICAgICAgICAgICBidG5HdWVzdCA9IFdlYkRy
aXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9j
bGlja2FibGUoKEJ5LlhQQVRILCAiLy9idXR0b25bQGRhdGEtdGVzdGlkPSdj
b250aW51ZS1hcy1ndWVzdC1idXR0b24nXSIpKSkKICAgICAgICAgICAgZHJp
dmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBi
dG5HdWVzdCkKICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGlu
dCgyLCAzKSkKCiAgICAgICAgICAgICMgLy9pbnB1dFtAZGF0YS10ZXN0aWQ9
J2Zvcm0tZW1haWwnXQogICAgICAgICAgICBpbnB1dEVtYWlsID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1l
bnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0nZW1haWwnXSIp
KSkuc2VuZF9rZXlzKGVtYWlseCkKICAgICAgICAgICAgIyAvL2lucHV0W0Bk
YXRhLXRlc3RpZD0nZm9ybS1mdWxsTmFtZSddCiAgICAgICAgICAgIGZuYW1l
ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNl
X29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0n
ZnVsbE5hbWUnXSIpKSkuc2VuZF9rZXlzKHNlbGYuZmlyc3QxICsgJyAnICsg
c2VsZi5sYXN0MSkKCiAgICAgICAgICAgICMgLy9pbnB1dFtAZGF0YS10ZXN0
aWQ9J2hpZXJhcmNoaWNhbC1jaG9pY2VzLWNpdGl6ZW5zaGlwQ2FyZCddCiAg
ICAgICAgICAgIGRuaSA9IHJhbmRvbS5yYW5kaW50KDEsIDk5OTk5OTk5KQog
ICAgICAgICAgICBpbnB1dERuaSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1
KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQ
QVRILCAiLy9pbnB1dFtAaWQ9J2lkZW50aXR5VmFsdWUnXSIpKSkuc2VuZF9r
ZXlzKGRuaSkKCiAgICAgICAgICAgICMgLy9pbnB1dFtAZGF0YS10ZXN0aWQ9
J2Zvcm0tcGhvbmUnXQogICAgICAgICAgICBudW1lID0gZiIzMXtyYW5kb20u
cmFuZGludCgwLCA5KX17Jycuam9pbihyYW5kb20uY2hvaWNlcygnMDEyMzQ1
Njc4OScsIGs9NykpfSIKICAgICAgICAgICAgaW5wdXRQaG9uZSA9IFdlYkRy
aXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVt
ZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J3Bob25lJ10i
KSkpLnNlbmRfa2V5cyhudW1lKQoKICAgICAgICAgICAgYWN0aW9ucyA9IEFj
dGlvbkNoYWlucyhkcml2ZXIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFu
ZG9tLnJhbmRpbnQoMiwgMykpCgogICAgICAgICAgICBkZXBhcnRhbWVudG8g
PSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNlbmNl
X29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0n
Y291bnR5J10iKSkpLnNlbmRfa2V5cygnQk9HT1TDgSBELkMuJykKICAgICAg
ICAgICAgYWN0aW9ucy5zZW5kX2tleXMoS2V5cy5UQUIpLnBlcmZvcm0oKQog
ICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgIGFjdGlvbnMu
c2VuZF9rZXlzKEtleXMuRU5URVIpLnBlcmZvcm0oKQoKICAgICAgICAgICAg
dGltZS5zbGVlcChyYW5kb20ucmFuZGludCgyLCAzKSkKICAgICAgICAgICAg
aW5wdXRDaXR5ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChF
Qy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9p
bnB1dFtAaWQ9J2Rpc3RyaWN0J10iKSkpLnNlbmRfa2V5cygnQk9HT1TDgSBE
LkMuJykKICAgICAgICAgICAgYWN0aW9ucy5zZW5kX2tleXMoS2V5cy5UQUIp
LnBlcmZvcm0oKQogICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAg
ICAgIGFjdGlvbnMuc2VuZF9rZXlzKEtleXMuRU5URVIpLnBlcmZvcm0oKQoK
ICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgyLCAzKSkK
ICAgICAgICAgICAgaW5wdXRCYXJyaW8gPSBXZWJEcml2ZXJXYWl0KGRyaXZl
ciwgMTApLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgo
QnkuWFBBVEgsICIvL2lucHV0W0BpZD0ndG93biddIikpKS5zZW5kX2tleXMo
J0FOVE9OSU8gTkFSScORTycpCiAgICAgICAgICAgIGFjdGlvbnMuc2VuZF9r
ZXlzKEtleXMuVEFCKS5wZXJmb3JtKCkKICAgICAgICAgICAgdGltZS5zbGVl
cCgxKQogICAgICAgICAgICBhY3Rpb25zLnNlbmRfa2V5cyhLZXlzLkVOVEVS
KS5wZXJmb3JtKCkKCiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJh
bmRpbnQoMSwgMikpCiAgICAgICAgICAgIGFkZHJlc3MgPSBmIkNhbGxlIHty
YW5kb20ucmFuZGludCgxLCAxMDApfSBOIHtyYW5kb20ucmFuZGludCgxLCAx
MDApfSIKICAgICAgICAgICAgaW5wdXRBZGRycyA9IFdlYkRyaXZlcldhaXQo
ZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0
ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2FkZHJlc3NPbmUnXSIpKSku
c2VuZF9rZXlzKGFkZHJlc3MpCiAgICAgICAgICAgIAogICAgICAgICAgICB0
aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDEsIDIpKQogICAgICAgICAgICBi
dG5Db250aW51ZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwo
RUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9idXR0
b25bQGlkPSdzdWJtaXRJZGVudGl0eUZvcm1CdXR0b24nXSIpKSkKICAgICAg
ICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xp
Y2soKTsiLCBidG5Db250aW51ZSkKICAgICAgICAgICAgdGltZS5zbGVlcChy
YW5kb20ucmFuZGludCgxLCAyKSkKCiAgICAgICAgICAgIGJ0bkVudHJlZ2Eg
PSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRf
dG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0BkYXRhLXRl
c3RpZD0nYnV0dG9uLVRydWNrRGVsaXZlcnlTY2hlZHVsZWQnXSIpKSkKICAg
ICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0u
Y2xpY2soKTsiLCBidG5FbnRyZWdhKQogICAgICAgICAgICB0aW1lLnNsZWVw
KHJhbmRvbS5yYW5kaW50KDEsIDIpKQoKICAgICAgICAgICAgYnRuUGF5ID0g
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5lbGVtZW50X3Rv
X2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRvbltAaWQ9J3N1Ym1p
dC1zZXJ2aWNlcy1mb3JtLWJ1dHRvbiddIikpKQogICAgICAgICAgICBkcml2
ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0
blBheSkKICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgz
LCA1KSkKCiAgICAgICAgICAgIGluZm8gPSBzZWxmLnRvb2xzLmJpbnR5cGUo
c2VsZi5jY3Nbc2VsZi5jb250XSkKICAgICAgICAgICAgdHlwZV9jYXJkID0g
aW5mby5zcGxpdCgnfCcpWzBdCgogICAgICAgICAgICB0aW1lLnNsZWVwKHJh
bmRvbS5yYW5kaW50KDMsIDUpKQoKICAgICAgICAgICAgaWYgJ0RFQklUJyBp
biB0eXBlX2NhcmQ6CiAgICAgICAgICAgICAgICBidG5EZWJpdCA9IFdlYkRy
aXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9j
bGlja2FibGUoKEJ5LlhQQVRILCAiLy9kaXZbQGlkPSdERUJJVENBUkQnXSIp
KSkKICAgICAgICAgICAgICAgIGJ0bkRlYml0LmNsaWNrKCkKICAgICAgICAg
ICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNs
aWNrKCk7IiwgYnRuRGViaXQpCgogICAgICAgICAgICBlbHNlOgogICAgICAg
ICAgICAgICAgYnRuQ3JlZGl0ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIw
KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgs
ICIvL2RpdltAaWQ9J0NSRURJVENBUkQnXSIpKSkKICAgICAgICAgICAgICAg
IGJ0bkNyZWRpdC5jbGljaygpCiAgICAgICAgICAgICAgICBkcml2ZXIuZXhl
Y3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0bkNyZWRp
dCkKCiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMywg
NSkpCgogICAgICAgICAgICB3aGlsZSBjb250ZW8gPD00IGFuZCBzZWxmLmNv
bnQgPCBzZWxmLnRvdGFsX2xpbmVzOgoKICAgICAgICAgICAgICAgIGlmIHNl
bGYuY29udCA9PSA1MDoKICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRf
Y2hhbmdlZC5lbWl0KCfCoVRvbWFuZG8gdW4gcGVxdWXDsW8gcmVzcGlybyBw
YXJhIHByZXZlbmlyIGVycm9yZXMgeSBtYW50ZW5lciBlbCBzaXN0ZW1hIGVu
IG1hcmNoYSEnKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBOb25lCgog
ICAgICAgICAgICAgICAgY2NzLCBtZXMsIGFubywgY2NuLCB0eXA9IHN0cihz
ZWxmLmNjc1tzZWxmLmNvbnRdKS5zdHJpcCgpICwgc3RyKHNlbGYubWVzW3Nl
bGYuY29udF0pLnN0cmlwKCksIHN0cihzZWxmLmFuaW9bc2VsZi5jb250XSku
c3RyaXAoKSwgc3RyKHNlbGYuY3Z2W3NlbGYuY29udF0pLnN0cmlwKCksIHNl
bGYudG9vbHMuYmludHlwZShzZWxmLmNjc1tzZWxmLmNvbnRdKQogICAgICAg
ICAgICAgICAgZGVhZG1zZyA9ICJERUFEfFNOT1dYQ0hLfENJQU58JXN8JXN8
JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2NuLHR5cCkKICAgICAgICAg
ICAgICAgIGxpdmVtc2cgPSAiTElWRXxTTk9XWENIS3xDSUFOfCVzfCVzfCVz
fCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXApCiAgICAgICAgICAg
ICAgICBmZWNoYSA9IHNlbGYubWVzW3NlbGYuY29udF0gKyBzZWxmLmFuaW9b
c2VsZi5jb250XVsyOjRdICAgICAgICAgIAogICAgICAgICAgICAKCiAgICAg
ICAgICAgICAgICBpZiBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGls
KEVDLmZyYW1lX3RvX2JlX2F2YWlsYWJsZV9hbmRfc3dpdGNoX3RvX2l0KChC
eS5YUEFUSCwiLy9pZnJhbWVbc3RhcnRzLXdpdGgoQHNyYywgJ2h0dHBzOi8v
Z3cuZGlnaXRhbHBheW1lbnRzc3BhLmNvbS9hcGkvdG9rZW5pemF0aW9uL2Nv
L3YxJyldIikpKTogICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAg
ICAgIGlucHV0Q2FyZCA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRp
bChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAi
Ly9pbnB1dFtAaWQ9J3BhbiddIikpKS5zZW5kX2tleXMoc2VsZi5jY3Nbc2Vs
Zi5jb250XSkKICAgICAgICAgICAgICAgICAgICBpbnB1dEV4cCA9IFdlYkRy
aXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVt
ZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2V4cERhdGUn
XSIpKSkuc2VuZF9rZXlzKGZlY2hhKQogICAgICAgICAgICAgICAgICAgIGlu
cHV0Q3Z2ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnBy
ZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0
W0BpZD0nY3Z2J10iKSkpLnNlbmRfa2V5cyhzZWxmLmN2dltzZWxmLmNvbnRd
KQoKICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5k
aW50KDEsIDIpKQoKICAgICAgICAgICAgICAgICAgICBidG5QYXlDYXJkID0g
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5lbGVtZW50X3Rv
X2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRvbltAaWQ9J2J0bkNv
bmZpcm0nXSIpKSkKICAgICAgICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0
ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0blBheUNhcmQp
CgogICAgICAgICAgICAgICAgICAgIGRyaXZlci5zd2l0Y2hfdG8uZGVmYXVs
dF9jb250ZW50KCkKCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAg
IHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMywgNSkpCgogICAgICAgICAg
ICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGJ0bkRlYWQgPSBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVf
Y2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0BkYXRhLXRlc3RpZD0n
cmV0cnktc2Vjb25kYXJ5LWJ1dHRvbiddIikpKQogICAgICAgICAgICAgICAg
ICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykKICAgICAgICAgICAg
ICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5j
bGljaygpOyIsIGJ0bkRlYWQpCiAgICAgICAgICAgICAgICAgICAgCiAgICAg
ICAgICAgICAgICBleGNlcHQ6CgogICAgICAgICAgICAgICAgICAgIG1zZ0xp
dmUgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNl
bmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2Rpdltjb250
YWlucyhAY2xhc3MsICdza2FwYS13cmFwcGVyLXByZWZpeC10ZXh0JyldLy9w
IikpKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgcHJpbnQobXNnTGl2ZSkK
ICAgICAgICAgICAgICAgICAgICBidG5SZW1vdmUgPSBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxl
KChCeS5YUEFUSCwgIi8vYnV0dG9uW0BkYXRhLXRlc3RpZD0nY2FwdHVyZWRD
YXJkUmVtb3ZlSWQnXSIpKSkKICAgICAgICAgICAgICAgICAgICBpZiBzZWxm
LnRvb2xzLnJlcGV0aXIoY2NzKSA9PSBUcnVlOgogICAgICAgICAgICAgICAg
ICAgICAgICBzZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRtc2cpCiAgICAgICAg
ICAgICAgICAgICAgICAgIHByaW50KCdSRUxJVkU6JywgbGl2ZW1zZykKICAg
ICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAg
ICBzZWxmLnRleHRfbGl2ZS5lbWl0KGxpdmVtc2cpCiAgICAgICAgICAgICAg
ICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xp
Y2soKTsiLCBidG5SZW1vdmUpCgogICAgICAgICAgICAgICAgc2VsZi50b29s
cy5ib3JyYXJjYygiJXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2Nu
KSkKICAgICAgICAgICAgICAgIHNlbGYuY29udCs9MQogICAgICAgICAgICAg
ICAgY29udGVvICs9MQoKICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQu
ZW1pdCgnRUxJTUlOQU5ETyBSQVNUUkVBRE9SRVMhJykKICAgICAgICAgICAg
ZGVzYmFuKGRyaXZlcikKICAgICAgICAgICAgZHJpdmVyLnF1aXQoKQogICAg
ICAgICAgICBjbG9zZUNocm9tZShzZWxmKQogICAgICAgICAgICBpbnN0YW5j
ZV9kcml2ZXIgPSBvcGVuQnJvd3NlcigwLHNlbGYubnVtMikKICAgICAgICAg
ICAgIAogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgI2Rlc2Jhbihkcml2
ZXIpCiAgICAgICAgICAgIGRyaXZlci5xdWl0KCkKICAgICAgICAgICAgY2xv
c2VDaHJvbWUoc2VsZikKICAgICAgICAgICAgI2luc3RhbmNlX2RyaXZlciA9
IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0yKQogICAgICAgICAgICBleGNfdHlw
ZSwgZXhjX29iaiwgZXhjX3RiID0gc3lzLmV4Y19pbmZvKCk7Zm5hbWUgPSBv
cy5wYXRoLnNwbGl0KGV4Y190Yi50Yl9mcmFtZS5mX2NvZGUuY29fZmlsZW5h
bWUpWzFdCiAgICAgICAgICAgIGVycm9yX21lc3NhZ2U9IChzdHIoZXhjX3R5
cGUpKycgJytzdHIoZXhjX3RiLnRiX2xpbmVubykpCiAgICAgICAgICAgIHNl
bGYucHJpbnRlZC5lbWl0KGVycm9yX21lc3NhZ2UpCiAgICAgICAgICAgIGlm
ICdzZWxlbml1bS5jb21tb24uZXhjZXB0aW9ucy5UaW1lb3V0RXhjZXB0aW9u
JyBpbiBlcnJvcl9tZXNzYWdlOgogICAgICAgICAgICAgICAgc2VsZi50ZXh0
X2NoYW5nZWQuZW1pdCgnRXhwZXJpbWVudGFuZG8gZmFsbGFzIGRlIGNvbmV4
aW9uLCBlbCBwcm9jZXNvIHNlZ3VpcmEsIHJldmlzYSB0dSBjb25leGlvbi4n
KQogICAgICAgICAgICAjcHJveHlFcnJvciA9IHByb3h5RXJyb3IgKyAxCiAg
ICAgICAgICAgIGluc3RhbmNlX2RyaXZlciA9IG9wZW5Ccm93c2VyKDAsc2Vs
Zi5udW0yKQogICAgICAgICAgICAKICAgICAgICAgICAgCiAgICBzZWxmLnRl
eHRfY2hhbmdlZC5lbWl0KCdURVNURU8gRklOQUxJWkFETycpCgpkZWYgRmFs
YWJlbGxhKHNlbGYsIGRyaXZlcik6CgogICAgIyBBY2Nlc29zIHVzdWFyaW9z
IFZJUAogICAgaWYgbm90IHNlbGYudmlwOgoKICAgICAgICBzZWxmLnRleHRf
Y2hhbmdlZC5lbWl0KCdVTkVURSBBIE5VRVNUUk8gU0VSVklDSU8gVklQIScp
CgogICAgICAgICMgRWplY3V0YXIgYWNjaW9uZXMgZXNwZWPDrWZpY2FzIHBh
cmEgdXN1YXJpb3MgVklQCiAgICAgICAgdmlwX2luc3RhbmNlID0gb3BlbkJy
b3dzZXIoMyxUcnVlKQogICAgICAgIHZpcF9kcml2ZXIgPSBWSVBVc2VyQWN0
aW9ucyh2aXBfaW5zdGFuY2UpCiAgICAgICAgdmlwX2RyaXZlci5uYXZlZ2Fy
KCkKICAgICAgICByZXR1cm4gTm9uZSAgICAKCiAgICBzZWxmLnRleHRfY2hh
bmdlZC5lbWl0KCJJTklDSUFORE8gR0FURSBCTFVFIikKICAgIGluc3RhbmNl
X2RyaXZlciA9IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0yKQoKICAgIHdoaWxl
IHNlbGYuY29udCA8IHNlbGYudG90YWxfbGluZXM6CgogICAgICAgIGNvbnRl
byA9IDAKCiAgICAgICAgdHJ5OgoKICAgICAgICAgICAgaWYgc2VsZi50b29s
cy52YWxpZGF0ZV9jcmVkaXRvcyhzZWxmLnVzZXJuYW1lLHNlbGYucGFzc3dv
cmQpID09IFRydWU6CiAgICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdl
ZC5lbWl0KCdDUkVESVRPUyBJTlNVRklDSUVOVEVTIDovJykKICAgICAgICAg
ICAgICAgIHJldHVybiBOb25lCiAgICAgICAgICAgIAogICAgICAgICAgICBl
bWFpbHggPSBzZWxmLmxhc3QxKycnLmpvaW4ocmFuZG9tLmNob2ljZSgnQUJD
REVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHd4
eXowMTIzNDU2Nzg5JykgZm9yIF8gaW4gcmFuZ2UoMykpK3NlbGYuZmlyc3Qx
KycnLmpvaW4ocmFuZG9tLmNob2ljZSgnQUJDREVGR0hJSktMTU5PUFFSU1RV
VldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHd4eXowMTIzNDU2Nzg5JykgZm9y
IF8gaW4gcmFuZ2UoMykpKydAZ21haWwuY29tJwoKICAgICAgICAgICAgZHJp
dmVyID0gaW5zdGFuY2VfZHJpdmVyCgogICAgICAgICAgICBwcm9kdWN0cyA9
IFsKICAgICAgICAgICAgICAgICdodHRwczovL3d3dy5mYWxhYmVsbGEuY29t
LmNvL2ZhbGFiZWxsYS1jby9wcm9kdWN0LzEyMjUzNjQ4OS9TZXJ2aWxsZXRh
cy1GYW1pbGlhLVByYWN0aS1EaWFyaWFzLTE1MC1VbmlkYWRlcy8xMjI1MzY0
OTAnLAogICAgICAgICAgICAgICAgJ2h0dHBzOi8vd3d3LmZhbGFiZWxsYS5j
b20uY28vZmFsYWJlbGxhLWNvL3Byb2R1Y3QvMTMwNjc0NTU3L1RPTUEtQUVS
RUEtVERPTUVTLTE1QS1DT0RFTENBLUMtMDE5LzEzMDY3NDU1OCcsCiAgICAg
ICAgICAgICAgICAnaHR0cHM6Ly93d3cuZmFsYWJlbGxhLmNvbS5jby9mYWxh
YmVsbGEtY28vcHJvZHVjdC8xMjI1NDA2NTIvU2VydmlsbGV0YXMtRmFtaWxp
YS1QcmFjdGktRGlhcmlhcy1EZWNvcmFkYXMtMTUwVS8xMjI1NDA2NTMnLAog
ICAgICAgICAgICAgICAgJ2h0dHBzOi8vd3d3LmZhbGFiZWxsYS5jb20uY28v
ZmFsYWJlbGxhLWNvL3Byb2R1Y3QvMTIzMzU5Njk0L1NlcnZpbGxldGFzLUZh
bWlsaWEtRGVjb3JhZGFzLUdyZWVuLXgtMTAwLVVuaWRhZGVzLzEyMzM1OTY5
NScsCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly93d3cuZmFsYWJlbGxhLmNv
bS5jby9mYWxhYmVsbGEtY28vcHJvZHVjdC8xMTkyNzUwOTYvU2VydmlsbGV0
YXMtRmFtaWxpYS1BY29sY2hhbWF4LU1lZGlhbmEtMTAwLVVuaWRhZGVzLzEx
OTI3NTA5NycsCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly93d3cuZmFsYWJl
bGxhLmNvbS5jby9mYWxhYmVsbGEtY28vcHJvZHVjdC8xMTkxMjg3NzcvTGxh
dmUtcGFyYS1hYnJpci1jYXJjYXNhcy0xMC1yZXB1ZXN0by1maWx0cm8tYWd1
YS8xMTkxMjg3NzgnLAogICAgICAgICAgICAgICAgJ2h0dHBzOi8vd3d3LmZh
bGFiZWxsYS5jb20uY28vZmFsYWJlbGxhLWNvL3Byb2R1Y3QvMTE5MTI4Njc4
L0Fjb3BsZS1yYXBpZG8tMTQtcm9zY2EtMTQtZmlsdHJvcy1kZS1hZ3VhLzEx
OTEyODY3OScsCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly93d3cuZmFsYWJl
bGxhLmNvbS5jby9mYWxhYmVsbGEtY28vcHJvZHVjdC8xMjMxMjAzNjUvUGlj
YS1IaWVsby1EZS03LUVuLUFjZXJvLVRlbXBsYWRvLVdvbGZveC1Db24tTWFu
Z28tTWFkZXJhLzEyMzEyMDM2NicsCiAgICAgICAgICAgICAgICAnaHR0cHM6
Ly93d3cuZmFsYWJlbGxhLmNvbS5jby9mYWxhYmVsbGEtY28vcHJvZHVjdC8x
MjQ3ODA0ODIvU29wb3J0ZS1wYXJhLWh1ZXZvcy1oZXJ2aWRvcy8xMjQ3ODA0
ODMnCiAgICAgICAgICAgIF0KCiAgICAgICAgICAgIHByb2R1Y3QgPSByYW5k
b20uY2hvaWNlKHByb2R1Y3RzKQogICAgICAgICAgICBkcml2ZXIuZ2V0KHBy
b2R1Y3QpCgogICAgICAgICAgICAjZHJpdmVyLmdldCgnaHR0cHM6Ly93d3cu
ZmFsYWJlbGxhLmNvbS5jby9mYWxhYmVsbGEtY28vcHJvZHVjdC8xMTgxODcz
NTYvQm90YS1wYXJhLWNvbmVjdG9yLXJqNDUtdXRwLWNhcHVjaG9uLWF6dWwv
MTE4MTg3MzU3JykKICAgICAgICAgICAgI2RyaXZlci5nZXQoJ2h0dHBzOi8v
aG9tZWNlbnRlci5mYWxhYmVsbGEuY29tLmNvL2hvbWVjZW50ZXItY28vcHJv
ZHVjdC8xMTg2NTgwODAvUGVyaWxsYS1wYXJhLUN1YmllcnRhLUVsZWN0cmlj
YS1uZWdyby1ncmlzLzExODY1ODA4MycpCgogICAgICAgICAgICB0aW1lLnNs
ZWVwKHJhbmRvbS5yYW5kaW50KDEsIDMpKQoKICAgICAgICAgICAgYnRuQWdn
ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50
X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvLypbQGlkPSJwcm9kdWN0
LWIyYy11aSJdL2RpdlsxXS9kaXZbM10vZGl2L2Rpdi9kaXZbMl0vc2VjdGlv
blszXS9kaXYvZGl2L2Rpdi9kaXZbNF0vZGl2L2RpdlsyXS9kaXYvZGl2L2Rp
di9idXR0b24nKSkpCiAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3Njcmlw
dCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgYnRuQWdnKQoKICAgICAgICAg
ICAgYnRuQ2FydCA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwo
RUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAnLy8qW0Bp
ZD0ibGlua0J1dHRvbiJdJykpKQogICAgICAgICAgICBkcml2ZXIuZXhlY3V0
ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0bkNhcnQpCgog
ICAgICAgICAgICAjIC8vKltAaWQ9InBvcG92ZXItdHJpZ2dlci02Il0KICAg
ICAgICAgICAgYnRuQ29udGludWUgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
MjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFU
SCwgIi8vYnV0dG9uW2NvbnRhaW5zKEBpZCwgJ3BvcG92ZXItdHJpZ2dlci0n
KV0iKSkpCiAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJn
dW1lbnRzWzBdLmNsaWNrKCk7IiwgYnRuQ29udGludWUpCgogICAgICAgICAg
ICBpbnB1dEVtYWlsID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIpLnVudGls
KEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICcv
LypbQGlkPSJ0ZXN0SWQtSW5wdXQtZW1haWwiXScpKSkuc2VuZF9rZXlzKGVt
YWlseCkKICAgICAgICAgICAgdGltZS5zbGVlcCgxKQoKICAgICAgICAgICAg
YnRuQ29udGludWUgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGls
KEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8vKltA
aWQ9ImNvbnRpbnVlQnV0dG9uIl0nKSkpCiAgICAgICAgICAgIGRyaXZlci5l
eGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgYnRuQ29u
dGludWUpCgogICAgICAgICAgICBhY3Rpb25zID0gQWN0aW9uQ2hhaW5zKGRy
aXZlcikKICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgx
LCAzKSkKCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGlucHV0
RHB0byA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMucHJl
c2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRb
Y29udGFpbnMoQHBsYWNlaG9sZGVyLCAnRGVwYXJ0YW1lbnRvJykgYW5kIGNv
bnRhaW5zKEBjbGFzcywgJ2Ryb3Bkb3duLXBsYWNlaG9sZGVyJyldIikpKS5z
ZW5kX2tleXMoJ0JPR09Uw4EgRC5DLicpCiAgICAgICAgICAgIGV4Y2VwdDoK
ICAgICAgICAgICAgICAgIGJ0bkV4cHJlc3MgPSBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgNSkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5
LlhQQVRILCAnLy9idXR0b25bQGRhdGEtdGVzdGlkPSJhdmFpbGFibGUtc2hp
cG1lbnQtZXhwcmVzc1NhbWVEYXlEZWxpdmVyeSJdJykpKS5jbGljaygpCiAg
ICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdCQU4gREUg
SVAuLicpCiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgICAgICAg
ICAgYWN0aW9ucy5zZW5kX2tleXMoS2V5cy5UQUIpLnBlcmZvcm0oKQogICAg
ICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgIGFjdGlvbnMuc2Vu
ZF9rZXlzKEtleXMuRU5URVIpLnBlcmZvcm0oKQoKICAgICAgICAgICAgdGlt
ZS5zbGVlcChyYW5kb20ucmFuZGludCgxLCAzKSkKICAgICAgICAgICAgaW5w
dXRDaXR5ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnBy
ZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0
W0B0eXBlPSd0ZXh0JyBhbmQgQHBsYWNlaG9sZGVyPSdTZWxlY2Npb25hIHVu
YSBDaXVkYWQnXSIpKSkuc2VuZF9rZXlzKCdCT0dPVMOBIEQuQy4nKQoKICAg
ICAgICAgICAgYWN0aW9ucy5zZW5kX2tleXMoS2V5cy5UQUIpLnBlcmZvcm0o
KQogICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgIGFjdGlv
bnMuc2VuZF9rZXlzKEtleXMuRU5URVIpLnBlcmZvcm0oKQoKICAgICAgICAg
ICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgxLCAzKSkKICAgICAgICAg
ICAgaW5wdXRCYXJyaW8gPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50
aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwg
Ii8vaW5wdXRbQHBsYWNlaG9sZGVyPSdTZWxlY2Npb25hIHVuIEJhcnJpbydd
IikpKS5zZW5kX2tleXMoJ0JPU0EnKQoKICAgICAgICAgICAgYWN0aW9ucy5z
ZW5kX2tleXMoS2V5cy5UQUIpLnBlcmZvcm0oKQogICAgICAgICAgICB0aW1l
LnNsZWVwKDEpCiAgICAgICAgICAgIGFjdGlvbnMuc2VuZF9rZXlzKEtleXMu
RU5URVIpLnBlcmZvcm0oKQoKICAgICAgICAgICAgYWRkcmVzcyA9IGYiQ2Fs
bGUge3JhbmRvbS5yYW5kaW50KDEsIDEwMCl9IE4ge3JhbmRvbS5yYW5kaW50
KDEsIDEwMCl9IgogICAgICAgICAgICBpbnB1dEFkZHJlc3MgPSBXZWJEcml2
ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVu
dF9sb2NhdGVkKChCeS5YUEFUSCwgJy8vKltAaWQ9InRlc3RJZC1JbnB1dC1z
dHJlZXQiXScpKSkuc2VuZF9rZXlzKGFkZHJlc3MpCgogICAgICAgICAgICBp
bnB1dEFwdG8gPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMu
cHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgJy8vKltA
aWQ9InRlc3RJZC1JbnB1dC1kZXBhcnRtZW50Il0nKSkpLnNlbmRfa2V5cygn
QVBUTyAyMDUnKQoKICAgICAgICAgICAgYnRuQ29uZmlybSA9IFdlYkRyaXZl
cldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlj
a2FibGUoKEJ5LlhQQVRILCAnLy8qW0BpZD0idGVzdElkLWluZm9Nb2RhbEZv
b3Rlci1idXR0b24iXScpKSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVf
c2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5Db25maXJtKQoK
ICAgICAgICAgICAgYnRuU2F2ZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAy
MCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRI
LCAiLy9idXR0b25bdGV4dCgpPSdDb25maXJtYXIgeSBHdWFyZGFyJ10iKSkp
CiAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRz
WzBdLmNsaWNrKCk7IiwgYnRuU2F2ZSkKCiAgICAgICAgICAgIHRpbWUuc2xl
ZXAocmFuZG9tLnJhbmRpbnQoMSwgMykpCgogICAgICAgICAgICAjYnRuUGF5
ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50
X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvLypbQGlkPSJtb2JpbGUt
c3VtbWFyeSJdL2J1dHRvbicpKSkKICAgICAgICAgICAgYnRuUGF5ID0gV2Vi
RHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50X3RvX2Jl
X2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRvblt0ZXh0KCk9J0lyIGEg
cGFnYXInXSIpKSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0
KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5QYXkpCgogICAgICAgICAg
ICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdURVNURUFORE8sIEVTUEVSQS4u
JykKCiAgICAgICAgICAgIHdoaWxlIGNvbnRlbyA8PTQgYW5kIHNlbGYuY29u
dCA8IHNlbGYudG90YWxfbGluZXM6CgogICAgICAgICAgICAgICAgaWYgc2Vs
Zi5jb250ID09IDUwOgogICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9j
aGFuZ2VkLmVtaXQoJ8KhVG9tYW5kbyB1biBwZXF1ZcOxbyByZXNwaXJvIHBh
cmEgcHJldmVuaXIgZXJyb3JlcyB5IG1hbnRlbmVyIGVsIHNpc3RlbWEgZW4g
bWFyY2hhIScpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAg
ICAgICAgICAgICAgICBjY3MsIG1lcywgYW5vLCBjY24sIHR5cD0gc3RyKHNl
bGYuY2NzW3NlbGYuY29udF0pLnN0cmlwKCkgLCBzdHIoc2VsZi5tZXNbc2Vs
Zi5jb250XSkuc3RyaXAoKSwgc3RyKHNlbGYuYW5pb1tzZWxmLmNvbnRdKS5z
dHJpcCgpLCBzdHIoc2VsZi5jdnZbc2VsZi5jb250XSkuc3RyaXAoKSwgc2Vs
Zi50b29scy5iaW50eXBlKHNlbGYuY2NzW3NlbGYuY29udF0pCiAgICAgICAg
ICAgICAgICBkZWFkbXNnID0gIkRFQUR8U05PV1hDSEt8Q0lBTnwlc3wlc3wl
c3wlc3wlc1xuIiAlIChjY3MsbWVzLGFubyxjY24sdHlwKQogICAgICAgICAg
ICAgICAgbGl2ZW1zZyA9ICJMSVZFfFNOT1dYQ0hLfENJQU58JXN8JXN8JXN8
JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2NuLHR5cCkKCiAgICAgICAgICAg
ICAgICBkcml2ZXIuZ2V0KCdodHRwczovL3d3dy5mYWxhYmVsbGEuY29tLmNv
L2ZhbGFiZWxsYS1jby9jaGVja291dC9wYXltZW50P2Zyb209Y2F0YWx5c3Qn
KQogICAgICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgx
LCAzKSkKCiAgICAgICAgICAgICAgICBpbmZvID0gc2VsZi50b29scy5iaW50
eXBlKHNlbGYuY2NzW3NlbGYuY29udF0pCiAgICAgICAgICAgICAgICB0eXBl
X2NhcmQgPSBpbmZvLnNwbGl0KCd8JylbMF0KCiAgICAgICAgICAgICAgICBp
ZiB0eXBlX2NhcmQgPT0gJ0NSRURJVCc6CiAgICAgICAgICAgICAgICAKICAg
ICAgICAgICAgICAgICAgICBjcmVkaXRPcHQgPSBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChC
eS5YUEFUSCwgJy8vZGl2W0BkYXRhLXRlc3RpZD0idGVzdElkLXBheW1lbnRP
cHRpb24tRVhURVJOQUxfQ1JFRElUX0NBUkQiXScpKSkKICAgICAgICAgICAg
ICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5j
bGljaygpOyIsIGNyZWRpdE9wdCkKICAgICAgICAgICAgICAgIAogICAgICAg
ICAgICAgICAgZWxzZToKCiAgICAgICAgICAgICAgICAgICAgI2RlYml0T3B0
ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5lbGVtZW50
X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvLypbQGlkPSJfX25leHQi
XS9kaXYvZGl2L2RpdlsyXS9kaXZbMV0vZGl2WzFdL2Rpdi9kaXZbMl0vZGl2
WzRdL2Rpdi9kaXYnKSkpCiAgICAgICAgICAgICAgICAgICAgZGViaXRPcHQg
PSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRf
dG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vZGl2W0BkYXRhLXRlc3Rp
ZD0ndGVzdElkLXBheW1lbnRPcHRpb24tRVhURVJOQUxfREVCSVRfQ0FSRCdd
IikpKQogICAgICAgICAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3Njcmlw
dCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgZGViaXRPcHQpCgogICAgICAg
ICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgyLCA2KSkKCiAg
ICAgICAgICAgICAgICAjZnJhbWVkZWJpdCAgLy8qW0BpZD0iY2hha3JhLW1v
ZGFsLS1ib2R5LTgiXS9kaXYvZGl2L2Rpdi9pZnJhbWUKICAgICAgICAgICAg
ICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZnJhbWVf
dG9fYmVfYXZhaWxhYmxlX2FuZF9zd2l0Y2hfdG9faXQoKEJ5LlhQQVRILCIv
L2lmcmFtZVtAZGF0YS10ZXN0aWQ9J3Rlc3RJZC1FeHRlcm5hbENhcmRGb3Jt
SWZyYW1lJ10iKSkpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDIpCiAg
ICAgICAgICAgICAgICBpbnB1dGNjID0gV2ViRHJpdmVyV2FpdChkcml2ZXIs
IDIpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnku
WFBBVEgsICcvLypbQGlkPSJwYW4iXScpKSkuc2VuZF9rZXlzKHNlbGYuY2Nz
W3NlbGYuY29udF0pCiAgICAgICAgICAgICAgICBzZWxlY3RNZXMgPSBTZWxl
Y3QoZHJpdmVyLmZpbmRfZWxlbWVudChieT1CeS5YUEFUSCwgdmFsdWU9Jy8v
KltAaWQ9ImV4cE1vbnRoIl0nKSkuc2VsZWN0X2J5X3ZhbHVlKHNlbGYubWVz
W3NlbGYuY29udF0pCiAgICAgICAgICAgICAgICBzZWxlY3RZZWFyID0gU2Vs
ZWN0KGRyaXZlci5maW5kX2VsZW1lbnQoYnk9QnkuWFBBVEgsIHZhbHVlPSIv
L3NlbGVjdFtAaWQ9J2V4cFllYXInXSIpKS5zZWxlY3RfYnlfdmFsdWUoc2Vs
Zi5hbmlvW3NlbGYuY29udF1bMjo0XSkKICAgICAgICAgICAgICAgIGlucHV0
Y3Z2ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIpLnVudGlsKEVDLnByZXNl
bmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICcvLypbQGlkPSJj
dnYiXScpKSkuc2VuZF9rZXlzKHNlbGYuY3Z2W3NlbGYuY29udF0pCgogICAg
ICAgICAgICAgICAgYnRuVXNlQ0MgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
MjApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFU
SCwgJy8vKltAaWQ9ImJ0bkNvbmZpcm0iXScpKSkKICAgICAgICAgICAgICAg
IGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7
IiwgYnRuVXNlQ0MpCgogICAgICAgICAgICAgICAgIyBSRVZJU0FSCiAgICAg
ICAgICAgICAgICBkcml2ZXIuc3dpdGNoX3RvLmRlZmF1bHRfY29udGVudCgp
CgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHBy
aW50KCdSZXZpc2FuZG8uLicpCiAgICAgICAgICAgICAgICAgICAgdGltZS5z
bGVlcChyYW5kb20ucmFuZGludCgxLCA1KSkKICAgICAgICAgICAgICAgICAg
ICBidG5BY2VwdCA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChF
Qy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRv
bltAZGF0YS10ZXN0aWQ9J3Rlc3RJZC1BbGVydENvbnRpbnVlQnV0dG9uJ10i
KSkpCiAgICAgICAgICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0
KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5BY2VwdCkKICAgICAgICAg
ICAgICAgICAgICBzZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRtc2cpCgogICAg
ICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIHRyeTog
IyBSZXZpc2FuZG8gZGVhZCBwb3IgY2FzbyBkZSB0aWVtcG8KICAgICAgICAg
ICAgICAgICAgICAgICAgYnRuQWNlcHQgPSBXZWJEcml2ZXJXYWl0KGRyaXZl
ciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5Y
UEFUSCwgIi8vYnV0dG9uW0BkYXRhLXRlc3RpZD0ndGVzdElkLUFsZXJ0Q29u
dGludWVCdXR0b24nXSIpKSkKICAgICAgICAgICAgICAgICAgICAgICAgZHJp
dmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBi
dG5BY2VwdCkKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2Rl
YWQuZW1pdChkZWFkbXNnKQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoK
CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bkFkZENhcmQgPSBXZWJEcml2
ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xp
Y2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0BkYXRhLXRlc3RpZD0ndGVz
dElkLUFkZENhcmRCdXR0b24nXSIpKSkKCiAgICAgICAgICAgICAgICAgICAg
ICAgIGlmIHNlbGYudG9vbHMucmVwZXRpcihjY3MpID09IFRydWU6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnUkVMSVZFOicsIGxpdmVt
c2cpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfZGVh
ZC5lbWl0KGRlYWRtc2cpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnJlY2hlY2sg
PT0gVHJ1ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihF
Y29ub21pc3Qoc2VsZiwgbGl2ZW1zZywgZHJpdmVyKSk6CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGxpdmVtc2cgPSAiTElWRXxTTk9X
WENIS3xDSUFOQ0hBUkdFRHwlc3wlc3wlc3wlc3wlc1xuIiAlIChjY3MsbWVz
LGFubyxjY24sdHlwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBzZWxmLnRleHRfbGl2ZS5lbWl0KGxpdmVtc2cpCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2xpdmUuZW1pdChsaXZlbXNn
KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfbGl2ZS5lbWl0KGxp
dmVtc2cpCgogICAgICAgICAgICAgICAgc2VsZi50b29scy5ib3JyYXJjYygi
JXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2NuKSkKICAgICAgICAg
ICAgICAgIHNlbGYuY29udCs9MQogICAgICAgICAgICAgICAgY29udGVvICs9
MQoKICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnRUxJTUlO
QU5ETyBSQVNUUkVBRE9SRVMhJykKICAgICAgICAgICAgZGVzYmFuKGRyaXZl
cikKICAgICAgICAgICAgZHJpdmVyLnF1aXQoKQogICAgICAgICAgICBjbG9z
ZUNocm9tZShzZWxmKQogICAgICAgICAgICBpbnN0YW5jZV9kcml2ZXIgPSBv
cGVuQnJvd3NlcigwLHNlbGYubnVtMikKICAgICAgICAgICAgIAogICAgICAg
IGV4Y2VwdDoKICAgICAgICAgICAgI2Rlc2Jhbihkcml2ZXIpCiAgICAgICAg
ICAgIGRyaXZlci5xdWl0KCkKICAgICAgICAgICAgY2xvc2VDaHJvbWUoc2Vs
ZikKICAgICAgICAgICAgI2luc3RhbmNlX2RyaXZlciA9IG9wZW5Ccm93c2Vy
KDAsc2VsZi5udW0yKQogICAgICAgICAgICBleGNfdHlwZSwgZXhjX29iaiwg
ZXhjX3RiID0gc3lzLmV4Y19pbmZvKCk7Zm5hbWUgPSBvcy5wYXRoLnNwbGl0
KGV4Y190Yi50Yl9mcmFtZS5mX2NvZGUuY29fZmlsZW5hbWUpWzFdCiAgICAg
ICAgICAgIGVycm9yX21lc3NhZ2U9IChzdHIoZXhjX3R5cGUpKycgJytzdHIo
ZXhjX3RiLnRiX2xpbmVubykpCiAgICAgICAgICAgIHNlbGYucHJpbnRlZC5l
bWl0KGVycm9yX21lc3NhZ2UpCiAgICAgICAgICAgIGlmICdzZWxlbml1bS5j
b21tb24uZXhjZXB0aW9ucy5UaW1lb3V0RXhjZXB0aW9uJyBpbiBlcnJvcl9t
ZXNzYWdlOgogICAgICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1p
dCgnRXhwZXJpbWVudGFuZG8gZmFsbGFzIGRlIGNvbmV4aW9uLCBlbCBwcm9j
ZXNvIHNlZ3VpcmEsIHJldmlzYSB0dSBjb25leGlvbi4nKQogICAgICAgICAg
ICAjcHJveHlFcnJvciA9IHByb3h5RXJyb3IgKyAxCiAgICAgICAgICAgIGlu
c3RhbmNlX2RyaXZlciA9IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0yKQogICAg
ICAgICAgICAKICAgICAgICAgICAgCiAgICBzZWxmLnRleHRfY2hhbmdlZC5l
bWl0KCdURVNURU8gRklOQUxJWkFETycpCgpkZWYgVGVudmluaWxvKHNlbGYs
IGRyaXZlcik6CgogICAgIyBBY2Nlc29zIHVzdWFyaW9zIFZJUAogICAgaWYg
bm90IHNlbGYudmlwOgoKICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0
KCdVTkVURSBBIE5VRVNUUk8gU0VSVklDSU8gVklQIScpCgogICAgICAgICMg
RWplY3V0YXIgYWNjaW9uZXMgZXNwZWPDrWZpY2FzIHBhcmEgdXN1YXJpb3Mg
VklQCiAgICAgICAgdmlwX2luc3RhbmNlID0gb3BlbkJyb3dzZXIoMyxUcnVl
KQogICAgICAgIHZpcF9kcml2ZXIgPSBWSVBVc2VyQWN0aW9ucyh2aXBfaW5z
dGFuY2UpCiAgICAgICAgdmlwX2RyaXZlci5uYXZlZ2FyKCkKICAgICAgICBy
ZXR1cm4gTm9uZSAgICAKCiAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCJJ
TklDSUFORE8gR0FURSBEQVJLIikKICAgIGluc3RhbmNlX2RyaXZlciA9IG9w
ZW5Ccm93c2VyKDEsc2VsZi5udW0yKQogICAgcGFpcyA9IC0xCiAgICAKCiAg
ICB3aGlsZSBzZWxmLmNvbnQgPCBzZWxmLnRvdGFsX2xpbmVzOgoKICAgICAg
ICBwYWlzICs9MQogICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoIlJF
LUNPTkZJR1VSQU5ETyBNRVRBLURBVE9TLi4iKQogICAgICAgIGNvbnRlbyA9
IDAKCiAgICAgICAgdHJ5OgoKICAgICAgICAgICAgaWYgc2VsZi50b29scy52
YWxpZGF0ZV9jcmVkaXRvcyhzZWxmLnVzZXJuYW1lLHNlbGYucGFzc3dvcmQp
ID09IFRydWU6CiAgICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5l
bWl0KCdDUkVESVRPUyBJTlNVRklDSUVOVEVTIDovJykKICAgICAgICAgICAg
ICAgIHJldHVybiBOb25lCiAgICAgICAgICAgIAogICAgICAgICAgICBzZWxm
LnRleHRfY2hhbmdlZC5lbWl0KCJJTklDSUFSIENPTiBWUE4sIFBBUkEgRVZJ
VEFSIEVMIEJBTiBTSUxFTkNJT1NPLiIpCiAgICAgICAgICAgIAogICAgICAg
ICAgICBlbWFpbHggPSBzZWxmLmxhc3QxKycnLmpvaW4ocmFuZG9tLmNob2lj
ZSgnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9w
cXJzdHd4eXowMTIzNDU2Nzg5JykgZm9yIF8gaW4gcmFuZ2UoMykpK3NlbGYu
Zmlyc3QxKycnLmpvaW4ocmFuZG9tLmNob2ljZSgnQUJDREVGR0hJSktMTU5P
UFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHd4eXowMTIzNDU2Nzg5
JykgZm9yIF8gaW4gcmFuZ2UoMykpKydAZ21haWwuY29tJwoKICAgICAgICAg
ICAgZHJpdmVyID0gaW5zdGFuY2VfZHJpdmVyCgogICAgICAgICAgICAjIERl
ZmluaW1vcyBlbCBkaWNjaW9uYXJpbyBkZSB2YWxvcmVzIGRlIHBhw61zCiAg
ICAgICAgICAgIHZhbG9yZXNfcGFpcyA9IHsKICAgICAgICAgICAgICAgICdj
byc6ICcxMTAxMTEnLAogICAgICAgICAgICAgICAgJ2FyZ2VudGluYSc6ICc2
NDMwJywKICAgICAgICAgICAgICAgICdteCc6ICcyMDM2NycsCiAgICAgICAg
ICAgICAgICAncGUnOiAnMTA3MDAnLAogICAgICAgICAgICAgICAgJ2VjdWFk
b3InOiAnMjIwMzAzJywKICAgICAgICAgICAgICAgICdjaGlsZSc6ICcyOTEw
MDAwJywKICAgICAgICAgICAgICAgICd1eSc6ICcxMTgwMCcKICAgICAgICAg
ICAgfQoKICAgICAgICAgICAgemlwX3ZhbHVlcyA9IHsKICAgICAgICAgICAg
ICAgICcxMTAxMTEnOiAnQm9nb3TDoScsCiAgICAgICAgICAgICAgICAnNjQz
MCc6ICdCdWVub3MgQWlyZXMnLAogICAgICAgICAgICAgICAgJzIwMzY3Jzog
J0FndWFzY2FsaWVudGVzJywKICAgICAgICAgICAgICAgICcxMDcwMCc6ICdI
dcOhbnVjbycsCiAgICAgICAgICAgICAgICAnMjIwMzAzJzogJ09yZWxsYW5h
JywKICAgICAgICAgICAgICAgICcyOTEwMDAwICc6ICdDYWNoYXBvYWwnLAog
ICAgICAgICAgICAgICAgJzExODAwJzogJ01vbnRldmlkZW8nCiAgICAgICAg
ICAgIH0KCiAgICAgICAgICAgICMgTGlzdGEgZGUgbGlua3MKICAgICAgICAg
ICAgbGlua3MgPSBbCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly93d3cudGVu
dmluaWxvLmNvL3VzdWFyaW9zJywKICAgICAgICAgICAgICAgICdodHRwczov
L3d3dy50ZW52aW5pbG8udXkvdXN1YXJpb3MnLAogICAgICAgICAgICAgICAg
J2h0dHBzOi8vd3d3LnRlbnZpbmlsby5teC91c3VhcmlvcycsCiAgICAgICAg
ICAgICAgICAnaHR0cHM6Ly93d3cudGVudmluaWxvLnBlL3VzdWFyaW9zJywK
ICAgICAgICAgICAgICAgICdodHRwczovL3d3dy50ZW52aW5pbG8tZWN1YWRv
ci5jb20vdXN1YXJpb3MnLAogICAgICAgICAgICAgICAgJ2h0dHBzOi8vd3d3
LnRlbnZpbmlsby1jaGlsZS5jb20vdXN1YXJpb3MnLAogICAgICAgICAgICAg
ICAgJ2h0dHBzOi8vd3d3LnRlbnZpbmlsby1hcmdlbnRpbmEuY29tL3VzdWFy
aW9zJwogICAgICAgICAgICBdCgogICAgICAgICAgICBpZiBwYWlzIDwgbGVu
KGxpbmtzKSBhbmQgcGFpcyA8IDQ6CiAgICAgICAgICAgICAgICBrZXlEaWNj
ID0gbGlua3NbcGFpc10uc3BsaXQoJy4nKVsyXS5zcGxpdCgnLycpWzBdCiAg
ICAgICAgICAgICAgICB6aXBWYWx1ZSA9IHZhbG9yZXNfcGFpc1trZXlEaWNj
XQogICAgICAgICAgICAgICAgZGVwdFZhbHVlID0gemlwX3ZhbHVlc1t6aXBW
YWx1ZV0KICAgICAgICAgICAgICAgIGxpbmsgPSBsaW5rc1twYWlzXSArICcv
YWNjZXNvLz9yZWdpc3Rlcj10cnVlJwoKICAgICAgICAgICAgZWxpZiBwYWlz
IDwgbGVuKGxpbmtzKSBhbmQgcGFpcyA+IDM6CiAgICAgICAgICAgICAgICBr
ZXlEaWNjID0gbGlua3NbcGFpc10uc3BsaXQoJy0nKVsxXS5zcGxpdCgnLicp
WzBdCiAgICAgICAgICAgICAgICB6aXBWYWx1ZSA9IHZhbG9yZXNfcGFpc1tr
ZXlEaWNjXQogICAgICAgICAgICAgICAgZGVwdFZhbHVlID0gemlwX3ZhbHVl
c1t6aXBWYWx1ZV0KICAgICAgICAgICAgICAgIGxpbmsgPSBsaW5rc1twYWlz
XSArICcvYWNjZXNvLz9yZWdpc3Rlcj10cnVlJwoKICAgICAgICAgICAgZWxz
ZToKICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0JB
TiBERSBJUCEnKQogICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAg
ICAgICAgIHByaW50KCJFbCB2YWxvciBkZSBwYWlzIHBhcmEgZWwgbGluayIs
IGxpbmtzW3BhaXNdLCAiIFpJUDoiLCB6aXBWYWx1ZSwgIiBEZXBhcnRhbWVu
dG86IiwgZGVwdFZhbHVlKQoKICAgICAgICAgICAgZHJpdmVyLmdldChsaW5r
KQogICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDIsIDMp
KQoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgV2ViRHJpdmVy
V2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2th
YmxlKChCeS5YUEFUSCwgIi8vZGl2W0BjbGFzcz0nY29sLTEyIHB5LTIgZC1n
cmlkJ10vL2FbQGNsYXNzPSdidG4gYnRuLWxpbmsgYm9yZGVyLWRhcmsgcm91
bmRlZC0wIHRleHQtZGVjb3JhdGlvbi1ub25lIG9wdGlvbi1jb250aW51ZSdd
IikpKS5jbGljaygpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAg
ICAgIHByaW50KCdjYW1iaW8gZGUgcGFpcyBOTyBlbmNvbnRyYWRvLicpCgog
ICAgICAgICAgICAjYnRuUmVnaXN0ZXIgPSBXZWJEcml2ZXJXYWl0KGRyaXZl
ciwgNSkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQ
QVRILCAiLy9idXR0b25bY29udGFpbnMoQGNsYXNzLCAndXNlci1zaWduLXVw
JyldIikpKQogICAgICAgICAgICAjZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJh
cmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5SZWdpc3RlcikKICAgICAgICAg
ICAgI3RpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMiwgMykpCgogICAgICAg
ICAgICBhY3Rpb25zID0gQWN0aW9uQ2hhaW5zKGRyaXZlcikKCiAgICAgICAg
ICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoIlJFU1BVRVNUQSBFTiAxLTIg
TUlOVVRPUyBBUFJPWC4uIikKICAgICAgICAKICAgICAgICAgICAgaW5wdXRO
YW1lID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5wcmVz
ZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtA
bmFtZT0nbmFtZSddIikpKS5zZW5kX2tleXMoc2VsZi5maXJzdDEpCiAgICAg
ICAgICAgIGlucHV0RW1haWwgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTAp
LnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBB
VEgsICIvL2RpdltAY2xhc3M9J2NvbC0xMiBjb2wtbGctNiddLy9pbnB1dFtA
dHlwZT0nZW1haWwnXSIpKSkuc2VuZF9rZXlzKGVtYWlseCkKICAgICAgICAg
ICAgaW5wdXRSZW1haWwgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVu
dGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgs
ICIvL2lucHV0W0BuYW1lPSdyZXBlYXQtZW1haWwnXSIpKSkuc2VuZF9rZXlz
KGVtYWlseCkKICAgICAgICAgICAgaW5wdXRQc3N3ZCA9IFdlYkRyaXZlcldh
aXQoZHJpdmVyLCAxMCkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9s
b2NhdGVkKChCeS5YUEFUSCwgIi8vZGl2W0BjbGFzcz0nY29sLTEyIGNvbC1s
Zy02J10vL2lucHV0W0B0eXBlPSdwYXNzd29yZCddIikpKS5zZW5kX2tleXMo
J1Nub3dYQ2hlY2tlcjEyMyonKQogICAgICAgICAgICBpbnB1dFJwc3N3ZCA9
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMucHJlc2VuY2Vf
b2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQG5hbWU9
J3JlcGVhdC1wYXNzd29yZCddIikpKS5zZW5kX2tleXMoJ1Nub3dYQ2hlY2tl
cjEyMyonKQoKICAgICAgICAgICAgdGVybSA9IFdlYkRyaXZlcldhaXQoZHJp
dmVyLCA1KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnku
WFBBVEgsICIvL2lucHV0W0BuYW1lPSdwcml2YWN5J10iKSkpCiAgICAgICAg
ICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNr
KCk7IiwgdGVybSkKCiAgICAgICAgICAgIGJ0blJlZ2lzdGVyID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xp
Y2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0BkYXRhLWFuYWx5dGljcy1s
YWJlbD0nUmVnaXN0ZXInXSIpKSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1
dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5SZWdpc3Rl
cikKCiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMywg
NSkpCgogICAgICAgICAgICBsaW5rUGF5bWVudCA9IGxpbmtzW3BhaXNdLnNw
bGl0KCd1c3VhcmlvcycpWzBdCiAgICAgICAgICAgIGxpbmtQYXltZW50ID0g
bGlua1BheW1lbnQgKyAndmluaWxvcy1kZWNvcmF0aXZvcy9yZWxvai12aW5p
bG8tcGFyZWQtaG9yYXMtZGUtcHVudG9zLXBlcXVlbm9zLUEzOTA0MCcKICAg
ICAgICAgICAgcHJpbnQobGlua1BheW1lbnQpCiAgICAgICAgICAgIGRyaXZl
ci5nZXQobGlua1BheW1lbnQpCiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFu
ZG9tLnJhbmRpbnQoMiwgMykpCgogICAgICAgICAgICBidG5BZ2cgPSBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVf
Y2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0BjbGFzcz0nYnRuIGJ0
bi1ncmVlbiBidXR0b24gdy0xMDAgYnRuLWFkZC10by1jYXJ0IHRleHQtd2hp
dGUgcm91bmRlZC1waWxsJ10iKSkpCiAgICAgICAgICAgIGRyaXZlci5leGVj
dXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgYnRuQWdnKQog
ICAgICAgICAgICB0aW1lLnNsZWVwKDEpCgogICAgICAgICAgICB0cnk6CiAg
ICAgICAgICAgICAgICBpbnB1dFdpZHRoID0gV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDMpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgo
QnkuWFBBVEgsICIvL2RpdltAY2xhc3M9J2NvbC1hdXRvJ10vL2lucHV0W0Bu
YW1lPSdib3RoV2lkdGgnXSIpKSkuc2VuZF9rZXlzKCc1JykKICAgICAgICAg
ICAgICAgIGlucHV0SGVpZ2h0ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEw
KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQ
QVRILCAiLy9kaXZbQGNsYXNzPSdjb2wtYXV0byddLy9pbnB1dFtAbmFtZT0n
Ym90aEhlaWdodCddIikpKS5zZW5kX2tleXMoJzUnKQogICAgICAgICAgICAg
ICAgYnRuU2F2ZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChF
Qy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRv
bltAY2xhc3M9J2J0biBidG4taW5mbyBidXR0b24gc2hhZG93LW5vbmUgZnct
Ym9sZCByb3VuZGVkLXBpbGwgdy0xMDAgcHktMyBteS0zIGNvbnRpbnVlLWNv
bmZpZ3VyYXRpb24nXSIpKSkKICAgICAgICAgICAgZXhjZXB0OgogICAgICAg
ICAgICAgICAgaW5wdXRDb2xvciA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAz
KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgs
ICIvL2lucHV0W0BkYXRhLWNvbG9yLW5hbWU9J25lZ3JvIG1hdGUnXS9mb2xs
b3dpbmctc2libGluZzo6bGFiZWwiKSkpCiAgICAgICAgICAgICAgICBkcml2
ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGlu
cHV0Q29sb3IpCgogICAgICAgICAgICBidG5BZ2cgPSBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgNSkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUo
KEJ5LlhQQVRILCAiLy9idXR0b25bQGNsYXNzPSdidG4gYnRuLWdyZWVuIGJ1
dHRvbiB3LTEwMCBidG4tYWRkLXRvLWNhcnQgdGV4dC13aGl0ZSByb3VuZGVk
LXBpbGwnXSIpKSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0
KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5BZ2cpCiAgICAgICAgICAg
IHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMiwgMykpCgogICAgICAgICAg
ICBsaW5rY2hrID0gbGlua3NbcGFpc10uc3BsaXQoJ3VzdWFyaW9zJylbMF0K
ICAgICAgICAgICAgbGlua2NoayA9IGxpbmtjaGsgKyAnY29tcHJhL2NoZWNr
b3V0LycKICAgICAgICAgICAgZHJpdmVyLmdldChsaW5rY2hrKQogICAgICAg
ICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDIsIDMpKQoKICAgICAg
ICAgICAgaW5wdXRHZW5yZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCku
dW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAi
Ly9kaXZbQGNsYXNzPSdjb2wteHMtNSBjb2wtbWQtMyddLy9zcGFuW0BjbGFz
cz0nY2lyY2xlJ10iKSkpCiAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3Nj
cmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgaW5wdXRHZW5yZSkKCiAg
ICAgICAgICAgIGlucHV0QXBlbGxpZG8gPSBXZWJEcml2ZXJXYWl0KGRyaXZl
ciwgMTApLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgo
QnkuWFBBVEgsICIvL2lucHV0W0BpZD0nb3JkZXItc3VybmFtZXMnXSIpKSku
c2VuZF9rZXlzKHNlbGYubGFzdDEpCiAgICAgICAgICAgIAogICAgICAgICAg
ICBudW1lID0gZiIzMXtyYW5kb20ucmFuZGludCgwLCA5KX17Jycuam9pbihy
YW5kb20uY2hvaWNlcygnMDEyMzQ1Njc4OScsIGs9NykpfSIKICAgICAgICAg
ICAgaW5wdXRQaG9uZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50
aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwg
Ii8vZGl2W0BjbGFzcz0nZm9ybS1jb250cm9sLXdyYXBwZXInXS8vaW5wdXRb
QG5hbWU9J29yZGVyLXBob25lJ10iKSkpLnNlbmRfa2V5cyhudW1lKQoKICAg
ICAgICAgICAgaW5wdXRGdWxsTmFtZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVy
LCAxMCkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChC
eS5YUEFUSCwgIi8vZGl2W0BjbGFzcz0nY29sLXhzLTEyJ10vL2lucHV0W0Bu
YW1lPSdvcmRlci1hZGRyZXNzLW5hbWUnXSIpKSkuc2VuZF9rZXlzKHNlbGYu
Zmlyc3QxICsgJyAnICsgc2VsZi5sYXN0MSkKICAgICAgICAgICAgCiAgICAg
ICAgICAgIGFkZHJlc3MgPSBmIkNhbGxlIHtyYW5kb20ucmFuZGludCgxLCAx
MDApfSBOIHtyYW5kb20ucmFuZGludCgxLCAxMDApfSIKICAgICAgICAgICAg
aW5wdXRBZGRyZXMgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGls
KEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIv
L2RpdltAY2xhc3M9J2NvbC14cy0xMiBjb2wtbWQtNiddLy9pbnB1dFtAbmFt
ZT0nb3JkZXItYWRkcmVzcyddIikpKS5zZW5kX2tleXMoYWRkcmVzcykKICAg
ICAgICAgICAgaW5wdXRaaXAgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTAp
LnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBB
VEgsICIvL2RpdltAY2xhc3M9J2NvbC14cy0xMiBjb2wtbWQtNiddLy9pbnB1
dFtAbmFtZT0nb3JkZXItcG9zdGFsLWNvZGUnXSIpKSkuc2VuZF9rZXlzKHpp
cFZhbHVlKQogICAgICAgICAgICBpbnB1dENpdHkgPSBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9j
YXRlZCgoQnkuWFBBVEgsICIvL2RpdltAY2xhc3M9J2NvbC14cy0xMiBjb2wt
bWQtNiddLy9pbnB1dFtAbmFtZT0nb3JkZXItY2l0eSddIikpKS5zZW5kX2tl
eXMoJ0JPR09UQScpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAg
IHNlbGVjdERwdG8gPSBTZWxlY3QoZHJpdmVyLmZpbmRfZWxlbWVudChieT1C
eS5YUEFUSCwgdmFsdWU9Ii8vZGl2W0BjbGFzcz0nY29sLXhzLTEyIGNvbC1t
ZC02J10vL3NlbGVjdFtAbmFtZT0nb3JkZXItcHJvdmluY2UnXSIpKS5zZWxl
Y3RfYnlfdmlzaWJsZV90ZXh0KGRlcHRWYWx1ZSkKICAgICAgICAgICAgZXhj
ZXB0OgogICAgICAgICAgICAgICAgcHJpbnQoJ0Vycm9yIHNlbGVjY2lvbmFu
ZG8gZGVwdG8nKQogICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1MDApCgog
ICAgICAgICAgICB0aW1lLnNsZWVwKDEpCgogICAgICAgICAgICB0cnk6CiAg
ICAgICAgICAgICAgICBkbmkgPSByYW5kb20ucmFuZGludCgxLCA5OTk5OTk5
OSkKICAgICAgICAgICAgICAgIGlucHV0RE5JID0gV2ViRHJpdmVyV2FpdChk
cml2ZXIsIDMpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRl
ZCgoQnkuWFBBVEgsICIvL2RpdltAY2xhc3M9J2NvbC14cy0xMiBjb2wtbWQt
NiddLy9pbnB1dFtAbmFtZT0nb3JkZXItdmF0J10iKSkpLnNlbmRfa2V5cyhk
bmkpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAg
IGV4Y2VwdDoKICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgICAgIGJ0
blN1YiA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5lbGVt
ZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2RpdltAY2xhc3M9
J25leHRTdGVwJ10vL2lucHV0W0BpZD0nY2hlY2tvdXQtc3RlcC1zdWJtaXQn
XSIpKSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1
bWVudHNbMF0uY2xpY2soKTsiLCBidG5TdWIpCiAgICAgICAgICAgIHRpbWUu
c2xlZXAocmFuZG9tLnJhbmRpbnQoMiwgMykpCgogICAgICAgICAgICBidG5D
b250aW51ZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMu
ZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9pbnB1dFtA
aWQ9J2NoZWNrb3V0LXN0ZXAtc3VibWl0J10iKSkpCiAgICAgICAgICAgIGRy
aXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7Iiwg
YnRuQ29udGludWUpCiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJh
bmRpbnQoMiwgMykpICAgICAKCiAgICAgICAgICAgIHByaW50KCdDb3JyZW86
JyArIGVtYWlseCArICd8UHNzd2Q6U25vd1hDaGVja2VyMTIzKicpCgogICAg
ICAgICAgICBpbnB1dE5hbWVGID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEw
KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQ
QVRILCAnLy9kaXZbQGNsYXNzPSJhZHllbi1jaGVja291dF9fZmllbGQgYWR5
ZW4tY2hlY2tvdXRfX2NhcmRfX2hvbGRlck5hbWUiXS8vaW5wdXQnKSkpLnNl
bmRfa2V5cyhzZWxmLmZpcnN0MSArICcgJyArIHNlbGYubGFzdDEpCgogICAg
ICAgICAgICBCdG50ZXJtcyA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51
bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIv
L2RpdltAY2xhc3M9J2NoZWNrYm94IGNoZWNrYm94LXN1Y2Nlc3MnXS8vc3Bh
bltAY2xhc3M9J2NoZWNrYm94LW1hdGVyaWFsJ10iKSkpCiAgICAgICAgICAg
IGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7
IiwgQnRudGVybXMpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKCiAgICAg
ICAgICAgIHdoaWxlIGNvbnRlbyA8PTQgYW5kIHNlbGYuY29udCA8IHNlbGYu
dG90YWxfbGluZXM6CgogICAgICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5n
ZWQuZW1pdCgiwqFQcm90ZWdlIHR1IHNlcnZpY2lvIHkgdHUgcHJpdmFjaWRh
ZCEgQ29uw6ljdGF0ZSBjb24gdW5hIFZQTi4iKQoKICAgICAgICAgICAgICAg
IGNjcywgbWVzLCBhbm8sIGNjbiwgdHlwPSBzdHIoc2VsZi5jY3Nbc2VsZi5j
b250XSkuc3RyaXAoKSAsIHN0cihzZWxmLm1lc1tzZWxmLmNvbnRdKS5zdHJp
cCgpLCBzdHIoc2VsZi5hbmlvW3NlbGYuY29udF0pLnN0cmlwKCksIHN0cihz
ZWxmLmN2dltzZWxmLmNvbnRdKS5zdHJpcCgpLCBzZWxmLnRvb2xzLmJpbnR5
cGUoc2VsZi5jY3Nbc2VsZi5jb250XSkKICAgICAgICAgICAgICAgIGRlYWRt
c2cgPSAiREVBRHxTTk9XWENIS3xEQVJLfCVzfCVzfCVzfCVzfCVzXG4iICUg
KGNjcyxtZXMsYW5vLGNjbix0eXApCiAgICAgICAgICAgICAgICBsaXZlbXNn
ID0gIkxJVkV8U05PV1hDSEt8REFSS3wlc3wlc3wlc3wlc3wlc1xuIiAlIChj
Y3MsbWVzLGFubyxjY24sdHlwKQogICAgICAgICAgICAgICAgZmVjaGEgPSBz
ZWxmLm1lc1tzZWxmLmNvbnRdICsgc2VsZi5hbmlvW3NlbGYuY29udF1bMjo0
XSAKCiAgICAgICAgICAgICAgICBpZiBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
MTApLnVudGlsKEVDLmZyYW1lX3RvX2JlX2F2YWlsYWJsZV9hbmRfc3dpdGNo
X3RvX2l0KChCeS5YUEFUSCwiLy9pZnJhbWVbQHRpdGxlPSdJZnJhbWUgZGVs
IG7Dum1lcm8gZGUgdGFyamV0YSBhc2VndXJhZGEnXSIpKSk6CgogICAgICAg
ICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgICAg
ICBpbnB1dGNjID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChF
Qy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9p
bnB1dFtAZGF0YS1maWVsZHR5cGU9J2VuY3J5cHRlZENhcmROdW1iZXInXSIp
KSkKICAgICAgICAgICAgICAgICAgICBpbnB1dGNjLmNsZWFyKCkKICAgICAg
ICAgICAgICAgICAgICAjaW5wdXRjYy5zZW5kX2tleXMoc2VsZi5jY3Nbc2Vs
Zi5jb250XSkKICAgICAgICAgICAgICAgICAgICBodW1hbl9rZXlzKGRyaXZl
ciwgc2VsZi5jY3Nbc2VsZi5jb250XSwgIi8vaW5wdXRbQGRhdGEtZmllbGR0
eXBlPSdlbmNyeXB0ZWRDYXJkTnVtYmVyJ10iKQogICAgICAgICAgICAgICAg
ICAgIGRyaXZlci5zd2l0Y2hfdG8uZGVmYXVsdF9jb250ZW50KCkKCiAgICAg
ICAgICAgICAgICBpZiBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGls
KEVDLmZyYW1lX3RvX2JlX2F2YWlsYWJsZV9hbmRfc3dpdGNoX3RvX2l0KChC
eS5YUEFUSCwiLy9pZnJhbWVbQHRpdGxlPSdJZnJhbWUgZGUgbGEgZmVjaGEg
ZGUgY2FkdWNpZGFkIGRlIGxhIHRhcmpldGEgYXNlZ3VyYWRhJ10iKSkpOgoK
ICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAg
ICAgICAgICAgaW5wdXRmZWNoYSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAx
MCkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5Y
UEFUSCwgIi8vaW5wdXRbQGRhdGEtZmllbGR0eXBlPSdlbmNyeXB0ZWRFeHBp
cnlEYXRlJ10iKSkpCiAgICAgICAgICAgICAgICAgICAgaW5wdXRmZWNoYS5j
bGVhcigpCiAgICAgICAgICAgICAgICAgICAgaHVtYW5fa2V5cyhkcml2ZXIs
IGZlY2hhLCAiLy9pbnB1dFtAZGF0YS1maWVsZHR5cGU9J2VuY3J5cHRlZEV4
cGlyeURhdGUnXSIpCiAgICAgICAgICAgICAgICAgICAgZHJpdmVyLnN3aXRj
aF90by5kZWZhdWx0X2NvbnRlbnQoKQoKICAgICAgICAgICAgICAgIGlmIFdl
YkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZnJhbWVfdG9fYmVf
YXZhaWxhYmxlX2FuZF9zd2l0Y2hfdG9faXQoKEJ5LlhQQVRILCIvL2lmcmFt
ZVtAdGl0bGU9J0lmcmFtZSBkZWwgY8OzZGlnbyBkZSBzZWd1cmlkYWQgZGUg
bGEgdGFyamV0YSBhc2VndXJhZGEnXSIpKSk6CiAgICAgICAgICAgICAgICAK
ICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAg
ICAgICAgICAgaW5wdXRjdnYgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTAp
LnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBB
VEgsICIvL2lucHV0W0BkYXRhLWZpZWxkdHlwZT0nZW5jcnlwdGVkU2VjdXJp
dHlDb2RlJ10iKSkpCiAgICAgICAgICAgICAgICAgICAgaW5wdXRjdnYuY2xl
YXIoKQogICAgICAgICAgICAgICAgICAgIGh1bWFuX2tleXMoZHJpdmVyLCBz
ZWxmLmN2dltzZWxmLmNvbnRdLCAiLy9pbnB1dFtAZGF0YS1maWVsZHR5cGU9
J2VuY3J5cHRlZFNlY3VyaXR5Q29kZSddIikKICAgICAgICAgICAgICAgICAg
ICBkcml2ZXIuc3dpdGNoX3RvLmRlZmF1bHRfY29udGVudCgpCiAgICAgICAg
ICAgICAgICAKCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAg
ICAgICAgYnRuU2F2ZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRp
bChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvL2lu
cHV0W0BpZD0iY2hlY2tvdXQtc3RlcC1zdWJtaXQiIGFuZCBAdHlwZT0ic3Vi
bWl0Il0nKSkpLmNsaWNrKCkKICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAg
ICAgICAgICAgICAgICAgICBwcmludCgnQnRuIEZhbGxvLicpCiAgICAgICAg
ICAgICAgICAgICAgYnRuU2F2ZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1
KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgs
ICIvL2RpdltAY2xhc3M9J25leHRTdGVwJ10vL2lucHV0W0B0eXBlPSdzdWJt
aXQnXSIpKSkuY2xpY2soKQoKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAo
cmFuZG9tLnJhbmRpbnQoMiwgMykpCgogICAgICAgICAgICAgICAgV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDE1KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2Ns
aWNrYWJsZSgoQnkuWFBBVEgsICcvL2lucHV0W0BpZD0iY2hlY2tvdXQtc3Rl
cC1zdWJtaXQiIGFuZCBAdHlwZT0ic3VibWl0Il0nKSkpCgogICAgICAgICAg
ICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIG1zZ0RlYWQgPSBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNlbmNlX29mX2Vs
ZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICcvL2RpdltAaWQ9ImVycm9ycy1j
b250YWluZXIiXS9kaXZbY29udGFpbnModGV4dCgpLCAiZXJyb3IgYWwgcHJv
Y2VzYXIgZWwgcGFnbyIpXScpKSkudGV4dAogICAgICAgICAgICAgICAgICAg
IHByaW50KG1zZ0RlYWQpCiAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0
X2RlYWQuZW1pdChkZWFkbXNnKQogICAgICAgICAgICAgICAgZXhjZXB0Ogog
ICAgICAgICAgICAgICAgICAgIG1zZ0xpdmUgPSBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgMTApLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRl
ZCgoQnkuWFBBVEgsICIvL2RpdltAaWQ9J2Vycm9ycy1jb250YWluZXInXS9k
aXZbQGNsYXNzPSdhbGVydCBhbGVydC1kYW5nZXInIGFuZCBAaWQ9J2Vycm9y
cy1kYXRhJ11bY29udGFpbnModGV4dCgpLCAnQ1ZDJyldIikpKS50ZXh0CiAg
ICAgICAgICAgICAgICAgICAgcHJpbnQobXNnTGl2ZSkKCiAgICAgICAgICAg
ICAgICAgICAgaWYgc2VsZi50b29scy5yZXBldGlyKGNjcykgPT0gVHJ1ZToK
CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCdSRUxJVkU6JywgbGl2
ZW1zZykKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2RlYWQu
ZW1pdChkZWFkbXNnKQoKICAgICAgICAgICAgICAgICAgICBlbGlmIHNlbGYu
cmVjaGVjayA9PSBUcnVlOgoKICAgICAgICAgICAgICAgICAgICAgICAgaWYo
RWNvbm9taXN0KHNlbGYsIGxpdmVtc2csIGRyaXZlcikpOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgbGl2ZW1zZyA9ICJMSVZFfFNOT1dYQ0hLfERB
UktDSEFSR0VEfCVzfCVzfCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNj
bix0eXApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRf
bGl2ZS5lbWl0KGxpdmVtc2cpCiAgICAgICAgICAgICAgICAgICAgICAgIGVs
c2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfbGl2
ZS5lbWl0KGxpdmVtc2cpCgogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAg
ICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9saXZlLmVtaXQobGl2
ZW1zZykKCiAgICAgICAgICAgICAgICBzZWxmLnRvb2xzLmJvcnJhcmNjKCIl
c3wlc3wlc3wlc1xuIiAlIChjY3MsbWVzLGFubyxjY24pKQogICAgICAgICAg
ICAgICAgc2VsZi5jb250Kz0xCiAgICAgICAgICAgICAgICBjb250ZW8gKz0x
CiAgICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCJURVNU
RUFORE8gUE9SRkFWT1IgRVNQRVJBLi4iKQoKICAgICAgICAgICAgc2VsZi50
ZXh0X2NoYW5nZWQuZW1pdCgnRUxJTUlOQU5ETyBSQVNUUkVBRE9SRVMhJykK
ICAgICAgICAgICAgZGVzYmFuKGRyaXZlcikKICAgICAgICAgICAgZHJpdmVy
LnF1aXQoKQogICAgICAgICAgICBjbG9zZUNocm9tZShzZWxmKQogICAgICAg
ICAgICBpbnN0YW5jZV9kcml2ZXIgPSBvcGVuQnJvd3NlcigwLHNlbGYubnVt
MikKICAgICAgICAgICAgIAogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAg
I2Rlc2Jhbihkcml2ZXIpCiAgICAgICAgICAgIGRyaXZlci5xdWl0KCkKICAg
ICAgICAgICAgY2xvc2VDaHJvbWUoc2VsZikKICAgICAgICAgICAgI2luc3Rh
bmNlX2RyaXZlciA9IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0yKQogICAgICAg
ICAgICBleGNfdHlwZSwgZXhjX29iaiwgZXhjX3RiID0gc3lzLmV4Y19pbmZv
KCk7Zm5hbWUgPSBvcy5wYXRoLnNwbGl0KGV4Y190Yi50Yl9mcmFtZS5mX2Nv
ZGUuY29fZmlsZW5hbWUpWzFdCiAgICAgICAgICAgIGVycm9yX21lc3NhZ2U9
IChzdHIoZXhjX3R5cGUpKycgJytzdHIoZXhjX3RiLnRiX2xpbmVubykpCiAg
ICAgICAgICAgIHNlbGYucHJpbnRlZC5lbWl0KGVycm9yX21lc3NhZ2UpCiAg
ICAgICAgICAgIGlmICdzZWxlbml1bS5jb21tb24uZXhjZXB0aW9ucy5UaW1l
b3V0RXhjZXB0aW9uJyBpbiBlcnJvcl9tZXNzYWdlOgogICAgICAgICAgICAg
ICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnRXhwZXJpbWVudGFuZG8gZmFs
bGFzIGRlIGNvbmV4aW9uLCBlbCBwcm9jZXNvIHNlZ3VpcmEsIHJldmlzYSB0
dSBjb25leGlvbi4nKQogICAgICAgICAgICBpbnN0YW5jZV9kcml2ZXIgPSBv
cGVuQnJvd3NlcigwLHNlbGYubnVtMikKICAgICAgICAgICAgCiAgICAgICAg
ICAgIAogICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnVEVTVEVPIEZJTkFM
SVpBRE8nKQoKZGVmIENJSUQyKHNlbGYsIGRyaXZlcik6CgogICAgIyBBY2Nl
c29zIHVzdWFyaW9zIFZJUAogICAgaWYgbm90IHNlbGYudmlwOgoKICAgICAg
ICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdVTkVURSBBIE5VRVNUUk8gU0VS
VklDSU8gVklQIScpCgogICAgICAgICMgRWplY3V0YXIgYWNjaW9uZXMgZXNw
ZWPDrWZpY2FzIHBhcmEgdXN1YXJpb3MgVklQCiAgICAgICAgdmlwX2luc3Rh
bmNlID0gb3BlbkJyb3dzZXIoMyxUcnVlKQogICAgICAgIHZpcF9kcml2ZXIg
PSBWSVBVc2VyQWN0aW9ucyh2aXBfaW5zdGFuY2UpCiAgICAgICAgdmlwX2Ry
aXZlci5uYXZlZ2FyKCkKICAgICAgICByZXR1cm4gTm9uZSAgICAKCiAgICBz
ZWxmLnRleHRfY2hhbmdlZC5lbWl0KCJJTklDSUFORE8gR0FURSBEQVJLIikK
ICAgIGluc3RhbmNlX2RyaXZlciA9IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0y
KQogICAgCgogICAgd2hpbGUgc2VsZi5jb250IDwgc2VsZi50b3RhbF9saW5l
czoKCiAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgiUkUtQ09ORklH
VVJBTkRPIE1FVEEtREFUT1MuLiIpCiAgICAgICAgY29udGVvID0gMAoKICAg
ICAgICB0cnk6CgogICAgICAgICAgICBpZiBzZWxmLnRvb2xzLnZhbGlkYXRl
X2NyZWRpdG9zKHNlbGYudXNlcm5hbWUsc2VsZi5wYXNzd29yZCkgPT0gVHJ1
ZToKICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0NS
RURJVE9TIElOU1VGSUNJRU5URVMgOi8nKQogICAgICAgICAgICAgICAgcmV0
dXJuIE5vbmUKICAgICAgICAgICAgCiAgICAgICAgICAgIHNlbGYudGV4dF9j
aGFuZ2VkLmVtaXQoIklOSUNJQVIgQ09OIFZQTiwgUEFSQSBFVklUQVIgRUwg
QkFOIFNJTEVOQ0lPU08uIikKICAgICAgICAgICAgCiAgICAgICAgICAgIGVt
YWlseCA9IHNlbGYubGFzdDErJycuam9pbihyYW5kb20uY2hvaWNlKCdBQkNE
RUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0d3h5
ejAxMjM0NTY3ODknKSBmb3IgXyBpbiByYW5nZSgzKSkrc2VsZi5maXJzdDEr
Jycuam9pbihyYW5kb20uY2hvaWNlKCdBQkNERUZHSElKS0xNTk9QUVJTVFVW
V1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0d3h5ejAxMjM0NTY3ODknKSBmb3Ig
XyBpbiByYW5nZSgzKSkrJ0BnbWFpbC5jb20nCgogICAgICAgICAgICBkcml2
ZXIgPSBpbnN0YW5jZV9kcml2ZXIKCiAgICAgICAgICAgIGRyaXZlci5nZXQo
J2h0dHBzOi8vdGlzY2gtZW52LmNvbS9teS1hY2NvdW50LycpCiAgICAgICAg
ICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMiwgMykpCgogICAgICAg
ICAgICBidG5SZWdpc3RlciA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51
bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIv
L2J1dHRvbltAbmFtZT0ncmVnaXN0ZXInIGFuZCBAdmFsdWU9J1JlZ2lzdGVy
J10iKSkpCgogICAgICAgICAgICBpbnB1dEVtYWlsID0gV2ViRHJpdmVyV2Fp
dChkcml2ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xv
Y2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAbmFtZT0nZW1haWwnIGFuZCBA
aWQ9J3JlZ19lbWFpbCddIikpKS5zZW5kX2tleXMoZW1haWx4KQogICAgICAg
ICAgICBpbnB1dFBzc2QgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVu
dGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgs
ICIvL2lucHV0W0BuYW1lPSdwYXNzd29yZCcgYW5kIEBpZD0ncmVnX3Bhc3N3
b3JkJ10iKSkpLnNlbmRfa2V5cygnRGluZXJvMTIzKicpCiAgICAgICAgICAg
IHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2Ny
aXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5SZWdpc3RlcikKICAg
ICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgyLCAzKSkKCiAg
ICAgICAgICAgIG1zZ0hlbGxvID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEw
KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQ
QVRILCAiLy9kaXZbQGNsYXNzPSdhdmFkYS1teWFjY291bnQtdXNlci1jb2x1
bW4gdXNlcm5hbWUnXS8vc3Ryb25nIikpKS50ZXh0CiAgICAgICAgICAgIHBy
aW50KG1zZ0hlbGxvKQoKICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQu
ZW1pdCgiTUVUQS1EQVRPUyBDT05GSUdVUkFET1MgQ09SUkVDVEFNRU5URS4i
KQoKICAgICAgICAgICAgZHJpdmVyLmdldCgnaHR0cHM6Ly90aXNjaC1lbnYu
Y29tL215LWFjY291bnQvZWRpdC1hZGRyZXNzL2JpbGxpbmcvJykKICAgICAg
ICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgyLCAzKSkKCiAgICAg
ICAgICAgIGZuYW1lID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRp
bChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAi
Ly9pbnB1dFtAaWQ9J2JpbGxpbmdfZmlyc3RfbmFtZSddIikpKS5zZW5kX2tl
eXMoc2VsZi5maXJzdDEpCiAgICAgICAgICAgIGxuYW1lID0gV2ViRHJpdmVy
V2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50
X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2JpbGxpbmdfbGFz
dF9uYW1lJ10iKSkpLnNlbmRfa2V5cyhzZWxmLmZpcnN0MSkKICAgICAgICAg
ICAgdGltZS5zbGVlcCgxKQoKICAgICAgICAgICAgc2VsZWN0Q291bnRyeSA9
IFNlbGVjdChkcml2ZXIuZmluZF9lbGVtZW50KGJ5PUJ5LlhQQVRILCB2YWx1
ZT0iLy9sYWJlbFtjb250YWlucyh0ZXh0KCksICdDb3VudHJ5IC8gUmVnaW9u
JyldL2ZvbGxvd2luZy1zaWJsaW5nOjpzcGFuL3NlbGVjdCIpKS5zZWxlY3Rf
YnlfdmFsdWUoJ1VTJykKCiAgICAgICAgICAgIGFkZHJlc3MgPSBmIntyYW5k
b20ucmFuZGludCgxLCAxMDApfSBXaW5kaW5nIExha2UgTiB7cmFuZG9tLnJh
bmRpbnQoMSwgMTAwKX0iCiAgICAgICAgICAgIGlucHV0QWRkcnMgPSBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNlbmNlX29mX2Vs
ZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0nYmlsbGlu
Z19hZGRyZXNzXzEnXSIpKSkuc2VuZF9rZXlzKGFkZHJlc3MpCiAgICAgICAg
ICAgIGlucHV0Q2l0eSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50
aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwg
Ii8vaW5wdXRbQGlkPSdiaWxsaW5nX2NpdHknXSIpKSkuc2VuZF9rZXlzKCdT
dW5yaXNlJykKCiAgICAgICAgICAgIHNlbGVjdFN0YXRlID0gU2VsZWN0KGRy
aXZlci5maW5kX2VsZW1lbnQoYnk9QnkuWFBBVEgsIHZhbHVlPSIvL3NlbGVj
dFtAaWQ9J2JpbGxpbmdfc3RhdGUnXSIpKS5zZWxlY3RfYnlfdmFsdWUoJ0ZM
JykKICAgICAgICAgICAgCiAgICAgICAgICAgIGlucHV0WmlwID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVt
ZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2JpbGxpbmdf
cG9zdGNvZGUnXSIpKSkuc2VuZF9rZXlzKCczMzM1MScpCgogICAgICAgICAg
ICBudW1lID0gZiIzMXtyYW5kb20ucmFuZGludCgwLCA5KX17Jycuam9pbihy
YW5kb20uY2hvaWNlcygnMDEyMzQ1Njc4OScsIGs9NykpfSIKICAgICAgICAg
ICAgaW5wdXRQaG9uZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50
aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwg
Ii8vaW5wdXRbQGlkPSdiaWxsaW5nX3Bob25lJ10iKSkpLnNlbmRfa2V5cyhu
dW1lKQoKICAgICAgICAgICAgYnRuU2F2ZSA9IFdlYkRyaXZlcldhaXQoZHJp
dmVyLCA1KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnku
WFBBVEgsICIvL2J1dHRvbltAbmFtZT0nc2F2ZV9hZGRyZXNzJ10iKSkpCiAg
ICAgICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBd
LmNsaWNrKCk7IiwgYnRuU2F2ZSkKICAgICAgICAgICAgdGltZS5zbGVlcChy
YW5kb20ucmFuZGludCgyLCAzKSkKCiAgICAgICAgICAgIG1zZ1JlZ2lzdGVy
ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5j
ZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9kaXZbQGNsYXNz
PSd3b29jb21tZXJjZS1tZXNzYWdlJ10iKSkpLnRleHQKICAgICAgICAgICAg
cHJpbnQobXNnUmVnaXN0ZXIpCgogICAgICAgICAgICBkcml2ZXIuZ2V0KCdo
dHRwczovL3Rpc2NoLWVudi5jb20vbXktYWNjb3VudC9hZGQtcGF5bWVudC1t
ZXRob2QvJykKICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGlu
dCgyLCAzKSkKCiAgICAgICAgICAgIHdoaWxlIGNvbnRlbyA8PTIgYW5kIHNl
bGYuY29udCA8IHNlbGYudG90YWxfbGluZXM6CgogICAgICAgICAgICAgICAg
c2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgiwqFQcm90ZWdlIHR1IHNlcnZpY2lv
IHkgdHUgcHJpdmFjaWRhZCEgQ29uw6ljdGF0ZSBjb24gdW5hIFZQTi4iKQoK
ICAgICAgICAgICAgICAgIGNjcywgbWVzLCBhbm8sIGNjbiwgdHlwPSBzdHIo
c2VsZi5jY3Nbc2VsZi5jb250XSkuc3RyaXAoKSAsIHN0cihzZWxmLm1lc1tz
ZWxmLmNvbnRdKS5zdHJpcCgpLCBzdHIoc2VsZi5hbmlvW3NlbGYuY29udF0p
LnN0cmlwKCksIHN0cihzZWxmLmN2dltzZWxmLmNvbnRdKS5zdHJpcCgpLCBz
ZWxmLnRvb2xzLmJpbnR5cGUoc2VsZi5jY3Nbc2VsZi5jb250XSkKICAgICAg
ICAgICAgICAgIGRlYWRtc2cgPSAiREVBRHxTTk9XWENIS3xEQVJLfCVzfCVz
fCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXApCiAgICAgICAg
ICAgICAgICBsaXZlbXNnID0gIkxJVkV8U05PV1hDSEt8REFSS3wlc3wlc3wl
c3wlc3wlc1xuIiAlIChjY3MsbWVzLGFubyxjY24sdHlwKQogICAgICAgICAg
ICAgICAgZmVjaGEgPSBzZWxmLm1lc1tzZWxmLmNvbnRdICsgc2VsZi5hbmlv
W3NlbGYuY29udF1bMjo0XSAKCiAgICAgICAgICAgICAgICBpZiBXZWJEcml2
ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmZyYW1lX3RvX2JlX2F2YWls
YWJsZV9hbmRfc3dpdGNoX3RvX2l0KChCeS5YUEFUSCwiLy9pZnJhbWVbQGlk
PSdicmFpbnRyZWUtaG9zdGVkLWZpZWxkLW51bWJlciddIikpKToKICAgICAg
ICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkK
ICAgICAgICAgICAgICAgICAgICBpbnB1dGNjID0gV2ViRHJpdmVyV2FpdChk
cml2ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0
ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2NyZWRpdC1jYXJkLW51bWJl
ciddIikpKQogICAgICAgICAgICAgICAgICAgIGlucHV0Y2MuY2xlYXIoKQog
ICAgICAgICAgICAgICAgICAgIGlucHV0Y2Muc2VuZF9rZXlzKHNlbGYuY2Nz
W3NlbGYuY29udF0pCiAgICAgICAgICAgICAgICAgICAgZHJpdmVyLnN3aXRj
aF90by5kZWZhdWx0X2NvbnRlbnQoKQoKICAgICAgICAgICAgICAgIGlmIFdl
YkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZnJhbWVfdG9fYmVf
YXZhaWxhYmxlX2FuZF9zd2l0Y2hfdG9faXQoKEJ5LlhQQVRILCIvL2lmcmFt
ZVtAaWQ9J2JyYWludHJlZS1ob3N0ZWQtZmllbGQtZXhwaXJhdGlvbkRhdGUn
XSIpKSk6CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB0
aW1lLnNsZWVwKDEpCiAgICAgICAgICAgICAgICAgICAgaW5wdXRGZWNoYSA9
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMucHJlc2VuY2Vf
b2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdl
eHBpcmF0aW9uJ10iKSkpCiAgICAgICAgICAgICAgICAgICAgaW5wdXRGZWNo
YS5jbGVhcigpCiAgICAgICAgICAgICAgICAgICAgaW5wdXRGZWNoYS5zZW5k
X2tleXMoZmVjaGEpCiAgICAgICAgICAgICAgICAgICAgZHJpdmVyLnN3aXRj
aF90by5kZWZhdWx0X2NvbnRlbnQoKQoKICAgICAgICAgICAgICAgIGlmIFdl
YkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZnJhbWVfdG9fYmVf
YXZhaWxhYmxlX2FuZF9zd2l0Y2hfdG9faXQoKEJ5LlhQQVRILCIvL2lmcmFt
ZVtAaWQ9J2JyYWludHJlZS1ob3N0ZWQtZmllbGQtY3Z2J10iKSkpOgogICAg
ICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgx
KQogICAgICAgICAgICAgICAgICAgIGlucHV0Q1ZWID0gV2ViRHJpdmVyV2Fp
dChkcml2ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xv
Y2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2N2diddIikpKQogICAg
ICAgICAgICAgICAgICAgIGlucHV0Q1ZWLmNsZWFyKCkKICAgICAgICAgICAg
ICAgICAgICBpbnB1dENWVi5zZW5kX2tleXMoc2VsZi5jdnZbc2VsZi5jb250
XSkKICAgICAgICAgICAgICAgICAgICBkcml2ZXIuc3dpdGNoX3RvLmRlZmF1
bHRfY29udGVudCgpCgogICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKQoK
ICAgICAgICAgICAgICAgIGJ0bk9yZGVyID0gV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5Y
UEFUSCwgIi8vYnV0dG9uW0BpZD0ncGxhY2Vfb3JkZXInXSIpKSkKICAgICAg
ICAgICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBd
LmNsaWNrKCk7IiwgYnRuT3JkZXIpCiAgICAgICAgICAgICAgICB0aW1lLnNs
ZWVwKHJhbmRvbS5yYW5kaW50KDIsIDMpKQoKICAgICAgICAgICAgICAgICNl
c3BlcmFyIGlucHV0Y2MgcmVhZHkKICAgICAgICAgICAgICAgIHRyeToKICAg
ICAgICAgICAgICAgICAgICBpZiBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjAp
LnVudGlsKEVDLmZyYW1lX3RvX2JlX2F2YWlsYWJsZV9hbmRfc3dpdGNoX3Rv
X2l0KChCeS5YUEFUSCwiLy9pZnJhbWVbQGlkPSdicmFpbnRyZWUtaG9zdGVk
LWZpZWxkLW51bWJlciddIikpKToKICAgICAgICAgICAgICAgICAgICAgICAg
aW5wdXRjYyA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMu
cHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5w
dXRbQGlkPSdjcmVkaXQtY2FyZC1udW1iZXInXSIpKSkKICAgICAgICAgICAg
ICAgICAgICAgICAgZHJpdmVyLnN3aXRjaF90by5kZWZhdWx0X2NvbnRlbnQo
KQogICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAg
IHByaW50KCdFc3BlcmEgZGUgcmVzcHVlc3RhIGV4Y2VkaW8gbGltaXRlIGRl
IHRpZW1wby4nKQoKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAg
ICAgICAgICBtc2dXYWl0ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMpLnVu
dGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgs
ICIvL2RpdltAY2xhc3M9J3dvb2NvbW1lcmNlLW5vdGljZXMtd3JhcHBlcidd
Ly9saVtjb250YWlucyh0ZXh0KCksICcyMCBzZWNvbmRzJyldIikpKS50ZXh0
CiAgICAgICAgICAgICAgICAgICAgcHJpbnQobXNnV2FpdCkKICAgICAgICAg
ICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCJTSU5DUk9OSVpB
TkRPIFJJVE1PUy4uIikKICAgICAgICAgICAgICAgICAgICBkcml2ZXIucmVm
cmVzaCgpCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20u
cmFuZGludCgyLCAzKSkKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQog
ICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZXhjZXB0Ogog
ICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAg
ICAgbXNnRGVhZD0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDMpLnVudGlsKEVD
LnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL3Vs
W0BjbGFzcz0nd29vY29tbWVyY2UtZXJyb3InXS9saVtjb250YWlucyh0ZXh0
KCksICdETyBOT1QgVFJZIEFHQUlOJyldIikpKS50ZXh0CiAgICAgICAgICAg
ICAgICAgICAgICAgIHByaW50KG1zZ0RlYWQpCiAgICAgICAgICAgICAgICAg
ICAgICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykKCiAgICAgICAg
ICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgICAgICB0
cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2dMaXZlPSBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxl
bWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vdWxbQGNsYXNzPSd3b29jb21t
ZXJjZS1lcnJvciddL2xpW2NvbnRhaW5zKHRleHQoKSwgJ05FVyBBQ0NPVU5U
IElORk8nKV0iKSkpLnRleHQKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHByaW50KCdMSVZFOiAnLCBtc2dMaXZlKQoKICAgICAgICAgICAgICAgICAg
ICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNn
UmV2aXNhciA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5w
cmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9kaXZb
QGNsYXNzPSd3b29jb21tZXJjZS1ub3RpY2VzLXdyYXBwZXInXS8vbGkiKSkp
LnRleHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCdMSVZF
IFBPUiBSRVZJU0FSJywgbXNnUmV2aXNhcikKCiAgICAgICAgICAgICAgICAg
ICAgICAgIGlmICdyaXNrX3RocmVzaG9sZCcgaW4gbXNnUmV2aXNhcjoKCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfZGVhZC5lbWl0
KGRlYWRtc2cpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRl
eHRfY2hhbmdlZC5lbWl0KCJCQU4gREVURUNUQURPLCBDQU1CSUEgVFUgSVAg
WSBFWFRSQVBPTEFDSU9OLiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICByZXR1cm4gTm9uZQoKICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBz
ZWxmLnRvb2xzLnJlcGV0aXIoY2NzKSA9PSBUcnVlOgoKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHByaW50KCdSRUxJVkU6JywgbGl2ZW1zZykKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9kZWFkLmVtaXQo
ZGVhZG1zZykKCiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgc2VsZi5y
ZWNoZWNrID09IFRydWU6CgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
aWYoRWNvbm9taXN0KHNlbGYsIGxpdmVtc2csIGRyaXZlcikpOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGxpdmVtc2cgPSAiTElWRXxTTk9X
WENIS3xEQVJLQ0hBUkdFRHwlc3wlc3wlc3wlc3wlc1xuIiAlIChjY3MsbWVz
LGFubyxjY24sdHlwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHNlbGYudGV4dF9saXZlLmVtaXQobGl2ZW1zZykKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc2VsZi50ZXh0X2xpdmUuZW1pdChsaXZlbXNnKQoKICAgICAgICAg
ICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHNlbGYudGV4dF9saXZlLmVtaXQobGl2ZW1zZykKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHNlbGYudG9v
bHMuYm9ycmFyY2MoIiVzfCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNj
bikpCiAgICAgICAgICAgICAgICBzZWxmLmNvbnQrPTEKICAgICAgICAgICAg
ICAgIGNvbnRlbyArPTEKICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFu
Z2VkLmVtaXQoIlRFU1RFQU5ETyBQT1JGQVZPUiBFU1BFUkEuLiIpCiAgICAg
ICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDIsIDMpKQog
ICAgICAgICAgICAgICAgZHJpdmVyLnJlZnJlc2goKQogICAgICAgICAgICAg
ICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgyLCAzKSkKCiAgICAgICAg
ICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0VMSU1JTkFORE8gUkFTVFJF
QURPUkVTIScpCiAgICAgICAgICAgIGRlc2Jhbihkcml2ZXIpCiAgICAgICAg
ICAgIGRyaXZlci5xdWl0KCkKICAgICAgICAgICAgY2xvc2VDaHJvbWUoc2Vs
ZikKICAgICAgICAgICAgaW5zdGFuY2VfZHJpdmVyID0gb3BlbkJyb3dzZXIo
MCxzZWxmLm51bTIpCiAgICAgICAgICAgICAKICAgICAgICBleGNlcHQ6CiAg
ICAgICAgICAgICNkZXNiYW4oZHJpdmVyKQogICAgICAgICAgICBkcml2ZXIu
cXVpdCgpCiAgICAgICAgICAgIGNsb3NlQ2hyb21lKHNlbGYpCiAgICAgICAg
ICAgICNpbnN0YW5jZV9kcml2ZXIgPSBvcGVuQnJvd3NlcigwLHNlbGYubnVt
MikKICAgICAgICAgICAgZXhjX3R5cGUsIGV4Y19vYmosIGV4Y190YiA9IHN5
cy5leGNfaW5mbygpO2ZuYW1lID0gb3MucGF0aC5zcGxpdChleGNfdGIudGJf
ZnJhbWUuZl9jb2RlLmNvX2ZpbGVuYW1lKVsxXQogICAgICAgICAgICBlcnJv
cl9tZXNzYWdlPSAoc3RyKGV4Y190eXBlKSsnICcrc3RyKGV4Y190Yi50Yl9s
aW5lbm8pKQogICAgICAgICAgICBzZWxmLnByaW50ZWQuZW1pdChlcnJvcl9t
ZXNzYWdlKQogICAgICAgICAgICBpZiAnc2VsZW5pdW0uY29tbW9uLmV4Y2Vw
dGlvbnMuVGltZW91dEV4Y2VwdGlvbicgaW4gZXJyb3JfbWVzc2FnZToKICAg
ICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0V4cGVyaW1l
bnRhbmRvIGZhbGxhcyBkZSBjb25leGlvbiwgZWwgcHJvY2VzbyBzZWd1aXJh
LCByZXZpc2EgdHUgY29uZXhpb24uJykKICAgICAgICAgICAgaW5zdGFuY2Vf
ZHJpdmVyID0gb3BlbkJyb3dzZXIoMCxzZWxmLm51bTIpCiAgICAgICAgICAg
IAogICAgICAgICAgICAKICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ1RF
U1RFTyBGSU5BTElaQURPJykKCmRlZiBBcHBsZTMoc2VsZiwgZHJpdmVyKToK
CiAgICAjIEFjY2Vzb3MgdXN1YXJpb3MgVklQCiAgICBpZiBub3Qgc2VsZi52
aXA6CgogICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ1VORVRFIEEg
TlVFU1RSTyBTRVJWSUNJTyBWSVAhJykKCiAgICAgICAgIyBFamVjdXRhciBh
Y2Npb25lcyBlc3BlY8OtZmljYXMgcGFyYSB1c3VhcmlvcyBWSVAKICAgICAg
ICB2aXBfaW5zdGFuY2UgPSBvcGVuQnJvd3NlcigzLFRydWUpCiAgICAgICAg
dmlwX2RyaXZlciA9IFZJUFVzZXJBY3Rpb25zKHZpcF9pbnN0YW5jZSkKICAg
ICAgICB2aXBfZHJpdmVyLm5hdmVnYXIoKQogICAgICAgIHJldHVybiBOb25l
ICAgIAogICAgCgogICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgiSU5JQ0lB
TkRPIEdBVEUgREFSSyIpCiAgICBpbnN0YW5jZV9kcml2ZXIgPSBvcGVuQnJv
d3Nlcig1LHNlbGYubnVtMikKCiAgICB3aGlsZSBzZWxmLmNvbnQgPCBzZWxm
LnRvdGFsX2xpbmVzOgoKICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0
KCJSRS1DT05GSUdVUkFORE8gTUVUQS1EQVRPUy4uIikKICAgICAgICBjb250
ZW8gPSAwCgogICAgICAgIHRyeToKCiAgICAgICAgICAgIGlmIHNlbGYudG9v
bHMudmFsaWRhdGVfY3JlZGl0b3Moc2VsZi51c2VybmFtZSxzZWxmLnBhc3N3
b3JkKSA9PSBUcnVlOgogICAgICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5n
ZWQuZW1pdCgnQ1JFRElUT1MgSU5TVUZJQ0lFTlRFUyA6LycpCiAgICAgICAg
ICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICAgICAKICAgICAgICAgICAg
c2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgiSU5JQ0lBUiBDT04gVlBOLCBQQVJB
IEVWSVRBUiBFTCBCQU4gU0lMRU5DSU9TTy4iKQogICAgICAgICAgICAKICAg
ICAgICAgICAgZW1haWx4ID0gc2VsZi5sYXN0MSsnJy5qb2luKHJhbmRvbS5j
aG9pY2UoJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamts
bW5vcHFyc3R3eHl6MDEyMzQ1Njc4OScpIGZvciBfIGluIHJhbmdlKDMpKStz
ZWxmLmZpcnN0MSsnJy5qb2luKHJhbmRvbS5jaG9pY2UoJ0FCQ0RFRkdISUpL
TE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R3eHl6MDEyMzQ1
Njc4OScpIGZvciBfIGluIHJhbmdlKDMpKSsnQGdtYWlsLmNvbScKICAgICAg
ICAgICAgbnVtZSA9IGYiMzF7cmFuZG9tLnJhbmRpbnQoMCwgOSl9eycnLmpv
aW4ocmFuZG9tLmNob2ljZXMoJzAxMjM0NTY3ODknLCBrPTcpKX0iCiAgICAg
ICAgICAgIGFkZHJlc3MgPSBmIntyYW5kb20ucmFuZGludCgxLCAxMDApfSBX
aW5kaW5nIGxha2UgUmQge3JhbmRvbS5yYW5kaW50KDEsIDEwMCl9IgoKICAg
ICAgICAgICAgZHJpdmVyID0gaW5zdGFuY2VfZHJpdmVyCgogICAgICAgICAg
ICAjIExpc3RhIGRlIGVubGFjZXMKICAgICAgICAgICAgbGlua3MgPSBbCiAg
ICAgICAgICAgICAgICAiaHR0cHM6Ly93d3cuYXBwbGV0cmVlcXVpbHRpbmcu
Y29tL3Nob3AvTGF0ZXN0LUFycml2YWxzL3AvRmlzaC1UYWlscy0tLUZpc2gt
QmxlbmRlci0tLVRhbi0zMDA3MS1FLXg4MjA4NjAyOC5odG0iLAogICAgICAg
ICAgICAgICAgImh0dHBzOi8vd3d3LmFwcGxldHJlZXF1aWx0aW5nLmNvbS9z
aG9wL0xhdGVzdC1BcnJpdmFscy9wL01lb3ctZ2ljYWwtTmlnaHQtLS1QYWNr
ZWQtQ2F0cy0tLUJsYWNrLTMwMDgtOTY0NzUtOTk1LXg4MTc2MjcyMS5odG0i
LAogICAgICAgICAgICAgICAgImh0dHBzOi8vd3d3LmFwcGxldHJlZXF1aWx0
aW5nLmNvbS9zaG9wL0xhdGVzdC1BcnJpdmFscy9wL1dpemFyZHMtYW5kLVdh
cnJpb3JzLS0tQ2hhcmFjdGVyLVRvc3MtLS1NaWRuaWdodC0zMDI0MC1XLXg4
MjA4NjI4My5odG0iLAogICAgICAgICAgICAgICAgImh0dHBzOi8vd3d3LmFw
cGxldHJlZXF1aWx0aW5nLmNvbS9zaG9wL0xhdGVzdC1BcnJpdmFscy9wL1B1
bXBraW4tUGF0Y2gtLS1TZWVkLVBhY2tzLVRvc3MtLS1CbGFjay1DRDE0NTc5
LUJMQUNLLXg4MTg3MjY2Ni5odG0iLAogICAgICAgICAgICAgICAgImh0dHBz
Oi8vd3d3LmFwcGxldHJlZXF1aWx0aW5nLmNvbS9zaG9wL0xhdGVzdC1BcnJp
dmFscy9wL1dpemFyZHMtYW5kLVdhcnJpb3JzLS0tU3dvcmRzLWFuZC1TaGll
bGRzLS0tTmF2eS0zMDI0MS1OLXg4MjA4NjU3My5odG0iLAogICAgICAgICAg
ICAgICAgImh0dHBzOi8vd3d3LmFwcGxldHJlZXF1aWx0aW5nLmNvbS9zaG9w
L0xhdGVzdC1BcnJpdmFscy9wL1BBTkVMLVdpemFyZHMtYW5kLVdhcnJpb3Jz
LS0tQ2FzdGxlLVBhbmVsLS0tTmF2eS0zMDIzNy1OLXg4MjA4NjczNS5odG0i
CiAgICAgICAgICAgIF0KCiAgICAgICAgICAgICMgU2VsZWNjaW9uYXIgdW4g
ZW5sYWNlIGFsZWF0b3JpbwogICAgICAgICAgICBsaW5rID0gcmFuZG9tLmNo
b2ljZShsaW5rcykKCiAgICAgICAgICAgIGRyaXZlci5nZXQobGluaykKICAg
ICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgyLCAzKSkKCiAg
ICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGJ0bkFkZCA9IFdlYkRy
aXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2Ns
aWNrYWJsZSgoQnkuWFBBVEgsICIvL2FbY29udGFpbnModGV4dCgpLCAnQWRk
IHRvIENhcnQnKV0iKSkpCiAgICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0
ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0bkFkZCkgICAg
CiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDIs
IDMpKQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBtc2dC
YW4gPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNl
bmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2JvZHlbY29u
dGFpbnModGV4dCgpLCAncGxlYXNlIGNvbnRhY3Qgc3VwcG9ydC4nKV0iKSkp
LnRleHQKICAgICAgICAgICAgICAgIHByaW50KG1zZ0JhbikKICAgICAgICAg
ICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoIkJBTiBERSBJUCwgUE9S
RkFWT1IgUEFVU0EsIENBTUJJQSBERSBJUCB5IERBTEUgUExBWS4iKQogICAg
ICAgICAgICAgICAgcmV0dXJuIE5vbmUKCgogICAgICAgICAgICBkcml2ZXIu
Z2V0KCdodHRwczovL3d3dy5hcHBsZXRyZWVxdWlsdGluZy5jb20vbW9kdWxl
L3Byb2R1Y3QuaHRtP2NoZWNrb3V0PTMnKQoKICAgICAgICAgICAgYnRuQ2hr
b3V0ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLmVsZW1l
bnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0BpZD0n
Y2hlY2tvdXQtcmFpbiddIikpKQogICAgICAgICAgICBkcml2ZXIuZXhlY3V0
ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0bkNoa291dCkg
ICAgICAgICAgICAgCiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJh
bmRpbnQoMiwgMykpCgogICAgICAgICAgICBpbnB1dEVtYWlsID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVt
ZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2JpbGxpbmdf
ZW1haWwnIGFuZCBAdHlwZT0nZW1haWwnXSIpKSkuc2VuZF9rZXlzKGVtYWls
eCkKICAgICAgICAgICAgaW5wdXRQaG9uZSA9IFdlYkRyaXZlcldhaXQoZHJp
dmVyLCAxMCkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVk
KChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdiaWxsaW5nX3Bob25lJyBhbmQg
QHBob25lPScnXSIpKSkuc2VuZF9rZXlzKG51bWUpCgogICAgICAgICAgICBp
bnB1dEZuYW1lID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChF
Qy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9p
bnB1dFtAaWQ9J3NoaXBwaW5nX2ZpcnN0X25hbWUnXSIpKSkuc2VuZF9rZXlz
KHNlbGYuZmlyc3QxKQogICAgICAgICAgICBpbnB1dExuYW1lID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVt
ZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J3NoaXBwaW5n
X2xhc3RfbmFtZSddIikpKS5zZW5kX2tleXMoc2VsZi5sYXN0MSkKICAgICAg
ICAgICAgaW5wdXRBZGRycyA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCku
dW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFU
SCwgIi8vaW5wdXRbQGlkPSdzaGlwcGluZ19hZGRyZXNzXzEnXSIpKSkuc2Vu
ZF9rZXlzKGFkZHJlc3MpCiAgICAgICAgICAgIGlucHV0Q2l0eSA9IFdlYkRy
aXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxl
bWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdzaGlwcGlu
Z19jaXR5J10iKSkpLnNlbmRfa2V5cygnU3VucmlzZScpCiAgICAgICAgICAg
IHNlbGVjdFN0YXRlID0gU2VsZWN0KGRyaXZlci5maW5kX2VsZW1lbnQoYnk9
QnkuWFBBVEgsIHZhbHVlPSIvL3NlbGVjdFtAaWQ9J3NoaXBwaW5nX3N0YXRl
J10iKSkuc2VsZWN0X2J5X3Zpc2libGVfdGV4dCgnRmxvcmlkYScpCiAgICAg
ICAgICAgIGlucHV0WmlwID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51
bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRI
LCAiLy9pbnB1dFtAaWQ9J3NoaXBwaW5nX3ppcCddIikpKS5zZW5kX2tleXMo
JzMzMzUxJykKICAgICAgICAgICAgdGltZS5zbGVlcCgxKQoKICAgICAgICAg
ICAgaW5wdXRTaGlwcGluZyA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51
bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIv
L2lucHV0W0B0eXBlPSdyYWRpbycgYW5kIEBuYW1lPSdzaGlwcGluZ19vcHRp
b24nIGFuZCBAdmFsdWU9JzE5MDYnXSIpKSkKICAgICAgICAgICAgZHJpdmVy
LmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBpbnB1
dFNoaXBwaW5nKQogICAgICAgICAgICB0aW1lLnNsZWVwKDEpCgogICAgICAg
ICAgICBidG5Db250aW51ZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51
bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIv
L2J1dHRvbltAdHlwZT0nYnV0dG9uJyBhbmQgY29udGFpbnModGV4dCgpLCAn
Q29udGludWUnKV0iKSkpCiAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3Nj
cmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgYnRuQ29udGludWUpCiAg
ICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMiwgMykpCgog
ICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBpbnB1VGVybXMgPSBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMuZWxlbWVudF90b19i
ZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J1RBbmRDJ10i
KSkpCiAgICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFy
Z3VtZW50c1swXS5jbGljaygpOyIsIGlucHVUZXJtcykKCiAgICAgICAgICAg
IGV4Y2VwdDogIyBNT0RVTE8gQ0FQVENIQQoKICAgICAgICAgICAgICAgIG1z
Z0NhcHRjaGEgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVD
LnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2Rp
dltjb250YWlucyhAY2xhc3MsICdhbGVydC1kYW5nZXInKV0iKSkpLnRleHQK
CiAgICAgICAgICAgICAgICBpZiAnbm90IGEgcm9ib3QnIGluIG1zZ0NhcHRj
aGE6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQobXNnQ2FwdGNoYSkKCiAg
ICAgICAgICAgICAgICAgICAgaWYgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEw
KS51bnRpbChFQy5mcmFtZV90b19iZV9hdmFpbGFibGVfYW5kX3N3aXRjaF90
b19pdCgoQnkuWFBBVEgsIi8vaWZyYW1lW0B0aXRsZT0ncmVDQVBUQ0hBJ10i
KSkpOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdl
ZC5lbWl0KCJDQVBUQ0hBIERFVEVDVEFETywgRUpFQ1VUQU5ETyBNT0RVTE8g
QU5USS1CT1QiKQogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dENhcHRj
aGEgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMuZWxlbWVu
dF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9kaXZbQGlkPSdyYy1h
bmNob3ItY29udGFpbmVyJ10vL2RpdltAY2xhc3M9J3JlY2FwdGNoYS1jaGVj
a2JveC1jaGVja21hcmsnXSIpKSkKICAgICAgICAgICAgICAgICAgICAgICAg
ZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsi
LCBpbnB1dENhcHRjaGEpCgogICAgICAgICAgICAgICAgICAgICAgICB0aW1l
LnNsZWVwKHJhbmRvbS5yYW5kaW50KDIsIDMpKQoKICAgICAgICAgICAgICAg
ICAgICAgICAgZHJpdmVyLnN3aXRjaF90by5kZWZhdWx0X2NvbnRlbnQoKQoK
ICAgICAgICAgICAgICAgICAgICBhY3Rpb25zID0gQWN0aW9uQ2hhaW5zKGRy
aXZlcikKICAgICAgICAgICAgICAgICAgICBhY3Rpb25zLnNlbmRfa2V5cyhL
ZXlzLlRBQikucGVyZm9ybSgpCiAgICAgICAgICAgICAgICAgICAgdGltZS5z
bGVlcCgxKQogICAgICAgICAgICAgICAgICAgIGFjdGlvbnMuc2VuZF9rZXlz
KEtleXMuVEFCKS5wZXJmb3JtKCkKICAgICAgICAgICAgICAgICAgICB0aW1l
LnNsZWVwKDEpCiAgICAgICAgICAgICAgICAgICAgYWN0aW9ucy5zZW5kX2tl
eXMoS2V5cy5FTlRFUikucGVyZm9ybSgpCgogICAgICAgICAgICAgICAgICAg
IHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoNSwgNikpCgogICAgICAgICAg
ICAgICAgICAgIGJ0bkNvbnRpbnVlID0gV2ViRHJpdmVyV2FpdChkcml2ZXIs
IDUpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFU
SCwgIi8vYnV0dG9uW0B0eXBlPSdidXR0b24nIGFuZCBjb250YWlucyh0ZXh0
KCksICdDb250aW51ZScpXSIpKSkKICAgICAgICAgICAgICAgICAgICBkcml2
ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0
bkNvbnRpbnVlKQogICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAocmFu
ZG9tLnJhbmRpbnQoMiwgMykpCgogICAgICAgICAgICAgICAgICAgIHRyeToK
CiAgICAgICAgICAgICAgICAgICAgICAgIGlucHVUZXJtcyA9IFdlYkRyaXZl
cldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNr
YWJsZSgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0nVEFuZEMnXSIpKSkKICAg
ICAgICAgICAgICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJh
cmd1bWVudHNbMF0uY2xpY2soKTsiLCBpbnB1VGVybXMpCgogICAgICAgICAg
ICAgICAgICAgIGV4Y2VwdDoKCiAgICAgICAgICAgICAgICAgICAgICAgIHNl
bGYudGV4dF9jaGFuZ2VkLmVtaXQoIkRldGVjdGFuZG8gYWN0aXZpZGFkIHNv
c3BlY2hvc2EuIEVqZWN1dGFuZG8gcHJvdG9jb2xvIGRlIHNlZ3VyaWRhZCBj
b250cmEgYm90cy4iKQogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNs
ZWVwKDQpCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFu
Z2VkLmVtaXQoIkVzcGVyYW5kbyBhanVzdGVzIGRlIHNlZ3VyaWRhZCBhZGlj
aW9uYWxlcy4iKQogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVw
KDQpCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2Vk
LmVtaXQoIlBlcm1pdGllbmRvIHVuIHRpZW1wbyBkZSBlc3BlcmEgcGFyYSBw
cm9jZXNhciBsYXMgdHJhbnNhY2Npb25lcyBkZSBmb3JtYSBzZWd1cmEuIikK
ICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAg
ICAgICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCJTZSBy
ZWNvbWllbmRhIHV0aWxpemFyIHVuYSBkaXJlY2Npw7NuIElQIG51ZXZhIHBh
cmEgZXZpdGFyIGVsIHVzbyBkZSBlc3RlIG3Ds2R1bG8geSBhaG9ycmFyIHRp
ZW1wby4iKQogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUp
CgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAg
dGltZS5zbGVlcCgxKQoKICAgICAgICAgICAgd2hpbGUgY29udGVvIDw9OCBh
bmQgc2VsZi5jb250IDwgc2VsZi50b3RhbF9saW5lczoKCiAgICAgICAgICAg
ICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCLCoVByb3RlZ2UgdHUgc2Vy
dmljaW8geSB0dSBwcml2YWNpZGFkISBDb27DqWN0YXRlIGNvbiB1bmEgVlBO
LiIpCgogICAgICAgICAgICAgICAgY2NzLCBtZXMsIGFubywgY2NuLCB0eXA9
IHN0cihzZWxmLmNjc1tzZWxmLmNvbnRdKS5zdHJpcCgpICwgc3RyKHNlbGYu
bWVzW3NlbGYuY29udF0pLnN0cmlwKCksIHN0cihzZWxmLmFuaW9bc2VsZi5j
b250XSkuc3RyaXAoKSwgc3RyKHNlbGYuY3Z2W3NlbGYuY29udF0pLnN0cmlw
KCksIHNlbGYudG9vbHMuYmludHlwZShzZWxmLmNjc1tzZWxmLmNvbnRdKQog
ICAgICAgICAgICAgICAgZGVhZG1zZyA9ICJERUFEfFNOT1dYQ0hLfERBUkt8
JXN8JXN8JXN8JXN8JXNcbiIgJSAoY2NzLG1lcyxhbm8sY2NuLHR5cCkKICAg
ICAgICAgICAgICAgIGxpdmVtc2cgPSAiTElWRXxTTk9XWENIS3xEQVJLfCVz
fCVzfCVzfCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXApCiAgICAg
ICAgICAgICAgICBmZWNoYSA9IHNlbGYubWVzW3NlbGYuY29udF0gKyBzZWxm
LmFuaW9bc2VsZi5jb250XVsyOjRdIAoKICAgICAgICAgICAgICAgIGlmIFdl
YkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZnJhbWVfdG9fYmVf
YXZhaWxhYmxlX2FuZF9zd2l0Y2hfdG9faXQoKEJ5LlhQQVRILCIvL2lmcmFt
ZVtjb250YWlucyhAc3JjLCAnY2hlY2tvdXRzaG9wcGVyLWxpdmUnKV0iKSkp
OgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHRp
bWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgICAgICBpbnB1dENhcmQgPSBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9f
YmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdlbmNyeXB0
ZWRDYXJkTnVtYmVyJ10iKSkpCiAgICAgICAgICAgICAgICAgICAgCiAgICAg
ICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBp
bnB1dENhcmQuY2xlYXIoKQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoK
ICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ0Vycm9yIGFsIGJvcnJh
ciBkYXRvcyBkZSBpbnB1dC4nKQoKICAgICAgICAgICAgICAgICAgICBpbnB1
dENhcmQuc2VuZF9rZXlzKHNlbGYuY2NzW3NlbGYuY29udF0pCiAgICAgICAg
ICAgICAgICAgICAgZHJpdmVyLnN3aXRjaF90by5kZWZhdWx0X2NvbnRlbnQo
KQoKICAgICAgICAgICAgICAgIGlmIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAx
MCkudW50aWwoRUMuZnJhbWVfdG9fYmVfYXZhaWxhYmxlX2FuZF9zd2l0Y2hf
dG9faXQoKEJ5LlhQQVRILCIvL2lmcmFtZVtAdGl0bGU9J0lmcmFtZSBmb3Ig
c2VjdXJlZCBjYXJkIGV4cGlyeSBkYXRlJ10iKSkpOgogICAgICAgICAgICAg
ICAgICAgIAogICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAg
ICAgICAgICAgICAgICAgICBpbnB1dEZlY2hhID0gV2ViRHJpdmVyV2FpdChk
cml2ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0
ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2VuY3J5cHRlZEV4cGlyeURh
dGUnXSIpKSkKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAg
ICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0RmVjaGEu
Y2xlYXIoKQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAg
ICAgICAgICAgICAgICAgcHJpbnQoJ0Vycm9yIGFsIGJvcnJhciBkYXRvcyBk
ZSBpbnB1dC4nKQoKICAgICAgICAgICAgICAgICAgICBpbnB1dEZlY2hhLnNl
bmRfa2V5cyhmZWNoYSkKICAgICAgICAgICAgICAgICAgICBkcml2ZXIuc3dp
dGNoX3RvLmRlZmF1bHRfY29udGVudCgpCgogICAgICAgICAgICAgICAgaWYg
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5mcmFtZV90b19i
ZV9hdmFpbGFibGVfYW5kX3N3aXRjaF90b19pdCgoQnkuWFBBVEgsIi8vaWZy
YW1lW0B0aXRsZT0nSWZyYW1lIGZvciBzZWN1cmVkIGNhcmQgc2VjdXJpdHkg
Y29kZSddIikpKToKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAg
ICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgICAgICAgICAgaW5w
dXRDVlYgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLnBy
ZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0
W0BpZD0nZW5jcnlwdGVkU2VjdXJpdHlDb2RlJ10iKSkpCiAgICAgICAgICAg
ICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAg
ICAgICAgICAgICAgICBpbnB1dENWVi5jbGVhcigpCiAgICAgICAgICAgICAg
ICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgn
RXJyb3IgYWwgYm9ycmFyIGRhdG9zIGRlIGlucHV0LicpCgogICAgICAgICAg
ICAgICAgICAgIGlucHV0Q1ZWLnNlbmRfa2V5cyhzZWxmLmN2dltzZWxmLmNv
bnRdKQogICAgICAgICAgICAgICAgICAgIGRyaXZlci5zd2l0Y2hfdG8uZGVm
YXVsdF9jb250ZW50KCkKCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEp
CgogICAgICAgICAgICAgICAgYnRuT3JkZXIgPSBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgNSkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5
LlhQQVRILCAiLy9idXR0b25bQGNsYXNzPSdidG4gYnRuLWxnIGJ0bi1zdWNj
ZXNzIGNoZWNrb3V0LWJ0biBuZy1zY29wZSddLy9zcGFuIikpKQogICAgICAg
ICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0u
Y2xpY2soKTsiLCBidG5PcmRlcikKCiAgICAgICAgICAgICAgICB0aW1lLnNs
ZWVwKHJhbmRvbS5yYW5kaW50KDIsIDMpKQoKICAgICAgICAgICAgICAgIFdl
YkRyaXZlcldhaXQoZHJpdmVyLCAxNSkudW50aWwoRUMuZWxlbWVudF90b19i
ZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9idXR0b25bQGNsYXNzPSdidG4g
YnRuLWxnIGJ0bi1zdWNjZXNzIGNoZWNrb3V0LWJ0biBuZy1zY29wZSddLy9z
cGFuIikpKQoKICAgICAgICAgICAgICAgIHRyeToKCiAgICAgICAgICAgICAg
ICAgICAgbXNnRGVhZCA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50
aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwg
Ii8vZGl2W2NvbnRhaW5zKEBjbGFzcywgJ2FsZXJ0LWRhbmdlcicpXSIpKSku
dGV4dAogICAgICAgICAgICAgICAgICAgIHByaW50KG1zZ0RlYWQpCgogICAg
ICAgICAgICAgICAgICAgIGlmICdDVkMnIGluIG1zZ0RlYWQ6CiAgICAgICAg
ICAgICAgICAgICAgICAgIGlmIHNlbGYudG9vbHMucmVwZXRpcihjY3MpID09
IFRydWU6CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ1JF
TElWRTonLCBsaXZlbXNnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
c2VsZi50ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQoKICAgICAgICAgICAgICAg
ICAgICAgICAgZWxpZiBzZWxmLnJlY2hlY2sgPT0gVHJ1ZToKCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBpZihFY29ub21pc3Qoc2VsZiwgbGl2ZW1z
ZywgZHJpdmVyKSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
bGl2ZW1zZyA9ICJMSVZFfFNOT1dYQ0hLfERBUktDSEFSR0VEfCVzfCVzfCVz
fCVzfCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXApCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2xpdmUuZW1pdChsaXZl
bXNnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfbGl2ZS5lbWl0
KGxpdmVtc2cpCgogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2xpdmUuZW1pdChs
aXZlbXNnKQoKICAgICAgICAgICAgICAgICAgICBlbGlmICdQbGVhc2UgZW50
ZXIgYSB2YWxpZCBjcmVkaXQgY2FyZCBudW1iZXIuJyBpbiBtc2dEZWFkOgoK
ICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ0Vycm9yIGFsIGVzY3Jp
YmlyIHRhcmpldGEuJykKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsK
CiAgICAgICAgICAgICAgICAgICAgZWxpZiAnYmVjYXVzZSBvZiByaXNrJyBp
biBtc2dEZWFkIG9yICdlcnJvciBwcm9jZXNzaW5nIHlvdXIgcGF5bWVudCwg
cGxlYXNlIHRyeSBhZ2FpbiBsYXRlcicgaW4gbXNnRGVhZDoKCiAgICAgICAg
ICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoIkRldGVj
dGFuZG8gYWN0aXZpZGFkIHNvc3BlY2hvc2EuIEVqZWN1dGFuZG8gcHJvdG9j
b2xvIGRlIHNlZ3VyaWRhZCBjb250cmEgYm90cy4iKQogICAgICAgICAgICAg
ICAgICAgICAgICB0aW1lLnNsZWVwKDQpCiAgICAgICAgICAgICAgICAgICAg
ICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoIkVzcGVyYW5kbyBhanVzdGVz
IGRlIHNlZ3VyaWRhZCBhZGljaW9uYWxlcy4iKQogICAgICAgICAgICAgICAg
ICAgICAgICB0aW1lLnNsZWVwKDQpCiAgICAgICAgICAgICAgICAgICAgICAg
IHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoIlBlcm1pdGllbmRvIHVuIHRpZW1w
byBkZSBlc3BlcmEgcGFyYSBwcm9jZXNhciBsYXMgdHJhbnNhY2Npb25lcyBk
ZSBmb3JtYSBzZWd1cmEuIikKICAgICAgICAgICAgICAgICAgICAgICAgdGlt
ZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRf
Y2hhbmdlZC5lbWl0KCJTZSByZWNvbWllbmRhIHV0aWxpemFyIHVuYSBkaXJl
Y2Npw7NuIElQIG51ZXZhIHBhcmEgZXZpdGFyIGVsIHVzbyBkZSBlc3RlIG3D
s2R1bG8geSBhaG9ycmFyIHRpZW1wby4iKQogICAgICAgICAgICAgICAgICAg
ICAgICB0aW1lLnNsZWVwKDUpCgogICAgICAgICAgICAgICAgICAgICAgICBi
cmVhawoKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAg
ICAgICAgICAgICBzZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRtc2cpCgogICAg
ICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAg
ICAgICAgICAgIHByaW50KCdFcnJvciBhbCByZXZpc2FyLicsIGUpCgogICAg
ICAgICAgICAgICAgc2VsZi50b29scy5ib3JyYXJjYygiJXN8JXN8JXN8JXNc
biIgJSAoY2NzLG1lcyxhbm8sY2NuKSkKICAgICAgICAgICAgICAgIHNlbGYu
Y29udCs9MQogICAgICAgICAgICAgICAgY29udGVvICs9MQogICAgICAgICAg
ICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgiVEVTVEVBTkRPIFBPUkZB
Vk9SIEVTUEVSQS4uIikKCiAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2Vk
LmVtaXQoJ0VMSU1JTkFORE8gUkFTVFJFQURPUkVTIScpCiAgICAgICAgICAg
IGRlc2Jhbihkcml2ZXIpCiAgICAgICAgICAgIGRyaXZlci5xdWl0KCkKICAg
ICAgICAgICAgY2xvc2VDaHJvbWUoc2VsZikKICAgICAgICAgICAgaW5zdGFu
Y2VfZHJpdmVyID0gb3BlbkJyb3dzZXIoNSxzZWxmLm51bTIpCiAgICAgICAg
ICAgICAKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIGRlc2Jhbihkcml2
ZXIpCiAgICAgICAgICAgIGRyaXZlci5xdWl0KCkKICAgICAgICAgICAgY2xv
c2VDaHJvbWUoc2VsZikKICAgICAgICAgICAgZXhjX3R5cGUsIGV4Y19vYmos
IGV4Y190YiA9IHN5cy5leGNfaW5mbygpO2ZuYW1lID0gb3MucGF0aC5zcGxp
dChleGNfdGIudGJfZnJhbWUuZl9jb2RlLmNvX2ZpbGVuYW1lKVsxXQogICAg
ICAgICAgICBlcnJvcl9tZXNzYWdlPSAoc3RyKGV4Y190eXBlKSsnICcrc3Ry
KGV4Y190Yi50Yl9saW5lbm8pKQogICAgICAgICAgICBzZWxmLnByaW50ZWQu
ZW1pdChlcnJvcl9tZXNzYWdlKQogICAgICAgICAgICBpZiAnc2VsZW5pdW0u
Y29tbW9uLmV4Y2VwdGlvbnMuVGltZW91dEV4Y2VwdGlvbicgaW4gZXJyb3Jf
bWVzc2FnZToKICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVt
aXQoJ0V4cGVyaW1lbnRhbmRvIGZhbGxhcyBkZSBjb25leGlvbiwgZWwgcHJv
Y2VzbyBzZWd1aXJhLCByZXZpc2EgdHUgY29uZXhpb24uJykKICAgICAgICAg
ICAgaW5zdGFuY2VfZHJpdmVyID0gb3BlbkJyb3dzZXIoNSxzZWxmLm51bTIp
CiAgICAgICAgICAgIAogICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnVEVT
VEVPIEZJTkFMSVpBRE8nKQoKZGVmIHNsaXBTdHJlYW0oc2VsZiwgZHJpdmVy
KToKCiAgICAjIEFjY2Vzb3MgdXN1YXJpb3MgVklQCiAgICBpZiBub3Qgc2Vs
Zi52aXA6CgogICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoJ1VORVRF
IEEgTlVFU1RSTyBTRVJWSUNJTyBWSVAhJykKCiAgICAgICAgIyBFamVjdXRh
ciBhY2Npb25lcyBlc3BlY8OtZmljYXMgcGFyYSB1c3VhcmlvcyBWSVAKICAg
ICAgICB2aXBfaW5zdGFuY2UgPSBvcGVuQnJvd3NlcigzLFRydWUpCiAgICAg
ICAgdmlwX2RyaXZlciA9IFZJUFVzZXJBY3Rpb25zKHZpcF9pbnN0YW5jZSkK
ICAgICAgICB2aXBfZHJpdmVyLm5hdmVnYXIoKQogICAgICAgIHJldHVybiBO
b25lICAgIAogICAgCgogICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgiSU5J
Q0lBTkRPIEdBVEUgREFSSyIpCiAgICBpbnN0YW5jZV9kcml2ZXIgPSBvcGVu
QnJvd3Nlcig1LHNlbGYubnVtMikKCiAgICB3aGlsZSBzZWxmLmNvbnQgPCBz
ZWxmLnRvdGFsX2xpbmVzOgoKICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5l
bWl0KCJSRS1DT05GSUdVUkFORE8gTUVUQS1EQVRPUy4uIikKICAgICAgICBj
b250ZW8gPSAwCgogICAgICAgIHRyeToKCiAgICAgICAgICAgIGlmIHNlbGYu
dG9vbHMudmFsaWRhdGVfY3JlZGl0b3Moc2VsZi51c2VybmFtZSxzZWxmLnBh
c3N3b3JkKSA9PSBUcnVlOgogICAgICAgICAgICAgICAgc2VsZi50ZXh0X2No
YW5nZWQuZW1pdCgnQ1JFRElUT1MgSU5TVUZJQ0lFTlRFUyA6LycpCiAgICAg
ICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICAgICAKICAgICAgICAg
ICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgiSU5JQ0lBUiBDT04gVlBOLCBQ
QVJBIEVWSVRBUiBFTCBCQU4gU0lMRU5DSU9TTy4iKQogICAgICAgICAgICAK
ICAgICAgICAgICAgZW1haWx4ID0gc2VsZi5sYXN0MSsnJy5qb2luKHJhbmRv
bS5jaG9pY2UoJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hp
amtsbW5vcHFyc3R3eHl6MDEyMzQ1Njc4OScpIGZvciBfIGluIHJhbmdlKDMp
KStzZWxmLmZpcnN0MSsnJy5qb2luKHJhbmRvbS5jaG9pY2UoJ0FCQ0RFRkdI
SUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R3eHl6MDEy
MzQ1Njc4OScpIGZvciBfIGluIHJhbmdlKDMpKSsnQGdtYWlsLmNvbScKICAg
ICAgICAgICAgbnVtZSA9IGYiMzF7cmFuZG9tLnJhbmRpbnQoMCwgOSl9eycn
LmpvaW4ocmFuZG9tLmNob2ljZXMoJzAxMjM0NTY3ODknLCBrPTcpKX0iCiAg
ICAgICAgICAgIGFkZHJlc3MgPSBmIntyYW5kb20ucmFuZGludCgxLCAxMDAp
fSBXaW5kaW5nIGxha2UgUmQge3JhbmRvbS5yYW5kaW50KDEsIDEwMCl9IgoK
ICAgICAgICAgICAgZHJpdmVyID0gaW5zdGFuY2VfZHJpdmVyCgogICAgICAg
ICAgICBkcml2ZXIuZ2V0KCdodHRwczovL3NsaXAuc3RyZWFtL3ByaWNpbmcn
KQogICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDQsIDYp
KQoKICAgICAgICAgICAgY2hrQm94ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIs
IDEwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBB
VEgsICIvL3NwYW5bY29udGFpbnMoQGNsYXNzLCAnU3dpdGNoX3NsaWRlcl9f
JyldIikpKQogICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFy
Z3VtZW50c1swXS5jbGljaygpOyIsIGNoa0JveCkKCiAgICAgICAgICAgIHRy
eToKICAgICAgICAgICAgICAgIGJ0bkVudGVyRW1haWwgPSBXZWJEcml2ZXJX
YWl0KGRyaXZlciwgMykudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2Fi
bGUoKEJ5LlhQQVRILCAiLy9idXR0b25bY29udGFpbnMoQGNsYXNzLCAnUHJv
dmlkZXJCdXR0b25TdHlsZXNfZW1haWxfXycpXSIpKSkKICAgICAgICAgICAg
ZXhjZXB0OgogICAgICAgICAgICAgICAgYnRuTW9udGggPSBXZWJEcml2ZXJX
YWl0KGRyaXZlciwgMykudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2Fi
bGUoKEJ5LlhQQVRILCAiLy9hW2NvbnRhaW5zKEBjbGFzcywgJ1Byb0J1dHRv
blN0eWxlc19yb290X18nKV0iKSkpCiAgICAgICAgICAgICAgICBkcml2ZXIu
ZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0bk1v
bnRoKQogICAgICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGlu
dCgyLCAzKSkKICAgICAgICAgICAgICAgIGJ0bkVudGVyRW1haWwgPSBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMuZWxlbWVudF90b19iZV9j
bGlja2FibGUoKEJ5LlhQQVRILCAiLy9idXR0b25bY29udGFpbnMoQGNsYXNz
LCAnUHJvdmlkZXJCdXR0b25TdHlsZXNfZW1haWxfXycpXSIpKSkKCiAgICAg
ICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMiwgMykpCiAgICAg
ICAgICAgIGJ0bkVudGVyRW1haWwuY2xpY2soKQogICAgICAgICAgICBkcml2
ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0
bkVudGVyRW1haWwpCgogICAgICAgICAgICB0aW1lLnNsZWVwKDEpCgogICAg
ICAgICAgICBpbnB1dEZOYW1lID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUp
LnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBB
VEgsICIvL2lucHV0W0BpZD0nZmlyc3ROYW1lJ10iKSkpLnNlbmRfa2V5cyhz
ZWxmLmZpcnN0MSkKICAgICAgICAgICAgaW5wdXRMTmFtZSA9IFdlYkRyaXZl
cldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50
X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2xhc3ROYW1lJ10i
KSkpLnNlbmRfa2V5cyhzZWxmLmxhc3QxKQogICAgICAgICAgICBpbnB1dEVt
YWlsID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnByZXNl
bmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0Bp
ZD0nZW1haWwnXSIpKSkuc2VuZF9rZXlzKGVtYWlseCkKICAgICAgICAgICAg
aW5wdXRQc3N3ZCA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChF
Qy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiLy9p
bnB1dFtAaWQ9J3Bhc3N3b3JkJ10iKSkpLnNlbmRfa2V5cygnU25vd1gxMjMq
JykKCiAgICAgICAgICAgIGJ0bkNyZWF0ZSA9IFdlYkRyaXZlcldhaXQoZHJp
dmVyLCAzKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnku
WFBBVEgsICIvL2J1dHRvbltjb250YWlucyhAY2xhc3MsICdUZXh0QnV0dG9u
U3R5bGVzX3ZhcmlhbnRQcmltYXJ5X18nKSBhbmQgY29udGFpbnMoQGNsYXNz
LCAnVGV4dEJ1dHRvblN0eWxlc19zaXplUmVndWxhcl9fJyldIikpKQogICAg
ICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5j
bGljaygpOyIsIGJ0bkNyZWF0ZSkKCiAgICAgICAgICAgIHRpbWUuc2xlZXAo
MSkKCiAgICAgICAgICAgIHdoaWxlIGNvbnRlbyA8PTkgYW5kIHNlbGYuY29u
dCA8IHNlbGYudG90YWxfbGluZXM6CgogICAgICAgICAgICAgICAgc2VsZi50
ZXh0X2NoYW5nZWQuZW1pdCgiwqFQcm90ZWdlIHR1IHNlcnZpY2lvIHkgdHUg
cHJpdmFjaWRhZCEgQ29uw6ljdGF0ZSBjb24gdW5hIFZQTi4iKQoKICAgICAg
ICAgICAgICAgIGNjcywgbWVzLCBhbm8sIGNjbiwgdHlwPSBzdHIoc2VsZi5j
Y3Nbc2VsZi5jb250XSkuc3RyaXAoKSAsIHN0cihzZWxmLm1lc1tzZWxmLmNv
bnRdKS5zdHJpcCgpLCBzdHIoc2VsZi5hbmlvW3NlbGYuY29udF0pLnN0cmlw
KCksIHN0cihzZWxmLmN2dltzZWxmLmNvbnRdKS5zdHJpcCgpLCBzZWxmLnRv
b2xzLmJpbnR5cGUoc2VsZi5jY3Nbc2VsZi5jb250XSkKICAgICAgICAgICAg
ICAgIGRlYWRtc2cgPSAiREVBRHxTTk9XWENIS3xEQVJLfCVzfCVzfCVzfCVz
fCVzXG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXApCiAgICAgICAgICAgICAg
ICBsaXZlbXNnID0gIkxJVkV8U05PV1hDSEt8REFSS3wlc3wlc3wlc3wlc3wl
c1xuIiAlIChjY3MsbWVzLGFubyxjY24sdHlwKQogICAgICAgICAgICAgICAg
ZmVjaGEgPSBzZWxmLm1lc1tzZWxmLmNvbnRdICsgc2VsZi5hbmlvW3NlbGYu
Y29udF1bMjo0XQoKICAgICAgICAgICAgICAgIGlmIFdlYkRyaXZlcldhaXQo
ZHJpdmVyLCAxMCkudW50aWwoRUMuZnJhbWVfdG9fYmVfYXZhaWxhYmxlX2Fu
ZF9zd2l0Y2hfdG9faXQoKEJ5LlhQQVRILCIvL2lmcmFtZVtjb250YWlucyhA
bmFtZSwgJ19fcHJpdmF0ZVN0cmlwZUZyYW1lJyldIikpKToKCiAgICAgICAg
ICAgICAgICAgICAgaW5wdXRDQyA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1
KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQ
QVRILCAiLy9pbnB1dFtAaWQ9J0ZpZWxkLW51bWJlcklucHV0J10iKSkpLnNl
bmRfa2V5cyhzZWxmLmNjc1tzZWxmLmNvbnRdKQogICAgICAgICAgICAgICAg
ICAgIGlucHV0RmVjaGEgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50
aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwg
Ii8vaW5wdXRbQGlkPSdGaWVsZC1leHBpcnlJbnB1dCddIikpKS5zZW5kX2tl
eXMoZmVjaGEpCiAgICAgICAgICAgICAgICAgICAgaW5wdXRDdnYgPSBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxl
bWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdGaWVsZC1j
dmNJbnB1dCddIikpKS5zZW5kX2tleXMoc2VsZi5hbmlvW3NlbGYuY29udF0p
CgogICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRp
bnQoMiwgMykpCgogICAgICAgICAgICAgICAgICAgIGlucHV0RW1haWxTID0g
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29m
X2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0nRmll
bGQtbGlua0VtYWlsSW5wdXQnXSIpKSkuc2VuZF9rZXlzKGVtYWlseCkKICAg
ICAgICAgICAgICAgICAgICBpbnB1dFBob25lID0gV2ViRHJpdmVyV2FpdChk
cml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRl
ZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0nRmllbGQtbGlua01vYmlsZVBo
b25lSW5wdXQnXSIpKSkuc2VuZF9rZXlzKG51bWUpCiAgICAgICAgICAgICAg
ICAgICAgaW5wdXRGdWxsbmFtZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1
KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQ
QVRILCAiLy9pbnB1dFtAaWQ9J0ZpZWxkLWxpbmtMZWdhbE5hbWVJbnB1dCdd
IikpKS5zZW5kX2tleXMoc2VsZi5maXJzdDEgKyAnICcgKyBzZWxmLmxhc3Qx
KQoKICAgICAgICAgICAgICAgICAgICBkcml2ZXIuc3dpdGNoX3RvLmRlZmF1
bHRfY29udGVudCgpCgogICAgICAgICAgICAgICAgYnRuUGF5ID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2Ns
aWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRvbltjb250YWlucyhAY2xhc3Ms
ICdUZXh0QnV0dG9uU3R5bGVzX3ZhcmlhbnRQcmltYXJ5X18nKV0iKSkpCiAg
ICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50
c1swXS5jbGljaygpOyIsIGJ0blBheSkKCiAgICAgICAgICAgICAgICB0aW1l
LnNsZWVwKHJhbmRvbS5yYW5kaW50KDIsIDMpKQoKICAgICAgICAgICAgICAg
IHRyeTogIyBNT0RVTE8gQU5USUNBUFRDSEEKCiAgICAgICAgICAgICAgICAg
ICAgaWYgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5mcmFt
ZV90b19iZV9hdmFpbGFibGVfYW5kX3N3aXRjaF90b19pdCgoQnkuWFBBVEgs
Ii8vaWZyYW1lW2NvbnRhaW5zKEBuYW1lLCAnX19wcml2YXRlU3RyaXBlRnJh
bWUnKV0iKSkpOgoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5mcmFtZV90b19iZV9hdmFp
bGFibGVfYW5kX3N3aXRjaF90b19pdCgoQnkuWFBBVEgsIi8vaWZyYW1lW2Nv
bnRhaW5zKEBzcmMsICdIQ2FwdGNoYScpXSIpKSk6CgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgcHJpbnQoJ0VudHJvIDIgZnJhbWUnKQoKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGlmIFdlYkRyaXZlcldhaXQoZHJpdmVy
LCAxMCkudW50aWwoRUMuZnJhbWVfdG9fYmVfYXZhaWxhYmxlX2FuZF9zd2l0
Y2hfdG9faXQoKEJ5LlhQQVRILCIvL2lmcmFtZVtjb250YWlucyhAc3JjLCAn
aGNhcHRjaGEnKV0iKSkpOgoKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBidG5DaGVja0IgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVu
dGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8v
ZGl2W0BpZD0nY2hlY2tib3gnXSIpKSkKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1sw
XS5jbGljaygpOyIsIGJ0bkNoZWNrQikKCiAgICAgICAgICAgICAgICBleGNl
cHQ6CgogICAgICAgICAgICAgICAgICAgIHByaW50KCdObyBjYXB0Y2hhIGRl
dGVjdGFkby4nKQoKICAgICAgICAgICAgICAgIHRyeToKCiAgICAgICAgICAg
ICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5l
bGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRvbltj
b250YWlucyhAY2xhc3MsICdUZXh0QnV0dG9uU3R5bGVzX3ZhcmlhbnRQcmlt
YXJ5X18nKV0iKSkpCiAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2Rl
YWQuZW1pdChkZWFkbXNnKQoKICAgICAgICAgICAgICAgIGV4Y2VwdDoKCiAg
ICAgICAgICAgICAgICAgICAgaWYgc2VsZi50b29scy5yZXBldGlyKGNjcykg
PT0gVHJ1ZToKCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCdSRUxJ
VkU6JywgbGl2ZW1zZykKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50
ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQoKICAgICAgICAgICAgICAgICAgICBl
bHNlOgoKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgoKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIG1zZ0xpdmUgPSBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgMTUpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRl
ZCgoQnkuWFBBVEgsICIvaHRtbC9ib2R5L2RpdlsxXS9kaXZbMV0vZGl2L2Rp
di9zZWN0aW9uL21haW4vZGl2L3NwYW4vcC9mb250L2ZvbnQiKSkpLnRleHQK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KG1zZ0xpdmUpCgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5yZWNoZWNrID09
IFRydWU6CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEVj
b25vbWlzdChzZWxmLCBsaXZlbXNnLCBkcml2ZXIpKToKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgbGl2ZW1zZyA9ICJMSVZFfFNOT1dY
Q0hLfERBUktDSEFSR0VEfCVzfCVzfCVzfCVzfCVzXG4iICUgKGNjcyxtZXMs
YW5vLGNjbix0eXApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHNlbGYudGV4dF9saXZlLmVtaXQobGl2ZW1zZykKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzZWxmLnRleHRfbGl2ZS5lbWl0KGxpdmVtc2cp
CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfbGl2ZS5lbWl0KGxp
dmVtc2cpCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAg
ICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBwcmludCgnRXJyb3IgcmV2aXNhbmRvIGxpdmUnKSAgICAgICAgICAgICAg
ICAKCiAgICAgICAgICAgICAgICBzZWxmLnRvb2xzLmJvcnJhcmNjKCIlc3wl
c3wlc3wlc1xuIiAlIChjY3MsbWVzLGFubyxjY24pKQogICAgICAgICAgICAg
ICAgc2VsZi5jb250Kz0xCiAgICAgICAgICAgICAgICBjb250ZW8gKz0xCiAg
ICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCJURVNURUFO
RE8gUE9SRkFWT1IgRVNQRVJBLi4iKQoKICAgICAgICAgICAgc2VsZi50ZXh0
X2NoYW5nZWQuZW1pdCgnRUxJTUlOQU5ETyBSQVNUUkVBRE9SRVMhJykKICAg
ICAgICAgICAgZGVzYmFuKGRyaXZlcikKICAgICAgICAgICAgZHJpdmVyLnF1
aXQoKQogICAgICAgICAgICBjbG9zZUNocm9tZShzZWxmKQogICAgICAgICAg
ICBpbnN0YW5jZV9kcml2ZXIgPSBvcGVuQnJvd3Nlcig1LHNlbGYubnVtMikK
ICAgICAgICAgICAgIAogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgZGVz
YmFuKGRyaXZlcikKICAgICAgICAgICAgZHJpdmVyLnF1aXQoKQogICAgICAg
ICAgICBjbG9zZUNocm9tZShzZWxmKQogICAgICAgICAgICBleGNfdHlwZSwg
ZXhjX29iaiwgZXhjX3RiID0gc3lzLmV4Y19pbmZvKCk7Zm5hbWUgPSBvcy5w
YXRoLnNwbGl0KGV4Y190Yi50Yl9mcmFtZS5mX2NvZGUuY29fZmlsZW5hbWUp
WzFdCiAgICAgICAgICAgIGVycm9yX21lc3NhZ2U9IChzdHIoZXhjX3R5cGUp
KycgJytzdHIoZXhjX3RiLnRiX2xpbmVubykpCiAgICAgICAgICAgIHNlbGYu
cHJpbnRlZC5lbWl0KGVycm9yX21lc3NhZ2UpCiAgICAgICAgICAgIGlmICdz
ZWxlbml1bS5jb21tb24uZXhjZXB0aW9ucy5UaW1lb3V0RXhjZXB0aW9uJyBp
biBlcnJvcl9tZXNzYWdlOgogICAgICAgICAgICAgICAgc2VsZi50ZXh0X2No
YW5nZWQuZW1pdCgnRXhwZXJpbWVudGFuZG8gZmFsbGFzIGRlIGNvbmV4aW9u
LCBlbCBwcm9jZXNvIHNlZ3VpcmEsIHJldmlzYSB0dSBjb25leGlvbi4nKQog
ICAgICAgICAgICBpbnN0YW5jZV9kcml2ZXIgPSBvcGVuQnJvd3Nlcig1LHNl
bGYubnVtMikKICAgICAgICAgICAgCiAgICBzZWxmLnRleHRfY2hhbmdlZC5l
bWl0KCdURVNURU8gRklOQUxJWkFETycpCgpkZWYgbXVzaWNiZWQoc2VsZiwg
ZHJpdmVyKToKCiAgICAjIEFjY2Vzb3MgdXN1YXJpb3MgVklQCiAgICBpZiBu
b3Qgc2VsZi52aXA6CgogICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQo
J1VORVRFIEEgTlVFU1RSTyBTRVJWSUNJTyBWSVAhJykKCiAgICAgICAgIyBF
amVjdXRhciBhY2Npb25lcyBlc3BlY8OtZmljYXMgcGFyYSB1c3VhcmlvcyBW
SVAKICAgICAgICB2aXBfaW5zdGFuY2UgPSBvcGVuQnJvd3NlcigzLFRydWUp
CiAgICAgICAgdmlwX2RyaXZlciA9IFZJUFVzZXJBY3Rpb25zKHZpcF9pbnN0
YW5jZSkKICAgICAgICB2aXBfZHJpdmVyLm5hdmVnYXIoKQogICAgICAgIHJl
dHVybiBOb25lICAgIAogICAgCgogICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1p
dCgiSU5JQ0lBTkRPIEdBVEUgREFSS1BSTyIpCiAgICAjaW5zdGFuY2VfZHJp
dmVyID0gb3BlbkJyb3dzZXIoMixzZWxmLm51bTIpCgogICAgd2hpbGUgc2Vs
Zi5jb250IDwgc2VsZi50b3RhbF9saW5lczoKCiAgICAgICAgc2VsZi50ZXh0
X2NoYW5nZWQuZW1pdCgiUkUtQ09ORklHVVJBTkRPIE1FVEEtREFUT1MuLiIp
CiAgICAgICAgY29udGVvID0gMAoKICAgICAgICB0cnk6CgogICAgICAgICAg
ICBpZiBzZWxmLnRvb2xzLnZhbGlkYXRlX2NyZWRpdG9zKHNlbGYudXNlcm5h
bWUsc2VsZi5wYXNzd29yZCkgPT0gVHJ1ZToKICAgICAgICAgICAgICAgIHNl
bGYudGV4dF9jaGFuZ2VkLmVtaXQoJ0NSRURJVE9TIElOU1VGSUNJRU5URVMg
Oi8nKQogICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICAgICAg
CiAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQoIlNFIFJFQ09N
SUVOREEgSU5JQ0lBUiBDT04gVlBOLCBQQVJBIEVWSVRBUiBFTCBCQU4gU0lM
RU5DSU9TTy4iKQogICAgICAgICAgICAKICAgICAgICAgICAgcmVzcG9uc2Ug
PSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vc25vd3hhcHAtNTA1NjBkOTI5NzUw
Lmhlcm9rdWFwcC5jb20vbWFpbCIpCiAgICAgICAgICAgIGRhdGEgPSByZXNw
b25zZS5qc29uKCkKICAgICAgICAgICAgZW1haWx4ID0gZGF0YVsiY29ycmVv
Il0KICAgICAgICAgICAgcHJpbnQoIlZhbG9yIGRlIGVtYWlseDoiLCBlbWFp
bHgpCiAgICAgICAgICAgIAogICAgICAgICAgICBudW1lID0gZiIzMXtyYW5k
b20ucmFuZGludCgwLCA5KX17Jycuam9pbihyYW5kb20uY2hvaWNlcygnMDEy
MzQ1Njc4OScsIGs9NykpfSIKICAgICAgICAgICAgYWRkcmVzcyA9IGYie3Jh
bmRvbS5yYW5kaW50KDEsIDEwMCl9IFdpbmRpbmcgbGFrZSBSZCB7cmFuZG9t
LnJhbmRpbnQoMSwgMTAwKX0iCgogICAgICAgICAgICBkcml2ZXIuZ2V0KCdo
dHRwczovL3d3dy5tdXNpY2JlZC5jb20vcHJpY2luZycpCiAgICAgICAgICAg
IHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMiwgMykpCgogICAgICAgICAg
ICBidG5WaWV3ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChF
Qy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIvL2J1dHRv
bltAZGF0YS1jeT0nX1BsYW5HcmlkX1BsYW5CdXR0b24nXSIpKSkKICAgICAg
ICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xp
Y2soKTsiLCBidG5WaWV3KQogICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRv
bS5yYW5kaW50KDIsIDMpKQoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAg
ICAgICAgYnRuWW91VHViZXIgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTAp
LnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwg
Ii8vZGl2W0BkYXRhLWN5PSdfRW50aXR5VHlwZVF1ZXN0aW9uX2Rpdl8yJ10i
KSkpCiAgICAgICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFy
Z3VtZW50c1swXS5jbGljaygpOyIsIGJ0bllvdVR1YmVyKQogICAgICAgICAg
ICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICBleGNlcHQ6CiAgICAg
ICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCJFeHBlcmVtaWVu
dGFuZG8gZmFsbGFzIGVuIGVsIHByb2Nlc28sIHBvcmZhdm9yIGNhbWJpYSB0
dSBJUCEiKQogICAgICAgICAgICAgICAgaWYgc2VsZi51c2VybmFtZSA9PSAn
d29ybGRrcm9yeSc6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAg
ICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJu
IE5vbmUKCiAgICAgICAgICAgIGJ0blVubGltaXRlZCA9IFdlYkRyaXZlcldh
aXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2Fi
bGUoKEJ5LlhQQVRILCAiLy9kaXZbQGRhdGEtY3k9J19QcmljaW5nU2VsZWN0
aW9uX2RpdiddIikpKQogICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3Jp
cHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0blVubGltaXRlZCkKICAg
ICAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgICAgICAKICAgICAgICAg
ICAgYWN0aW9ucyA9IEFjdGlvbkNoYWlucyhkcml2ZXIpCiAgICAgICAgICAg
IGFjdGlvbnMuc2VuZF9rZXlzKEtleXMuRU5URVIpLnBlcmZvcm0oKQogICAg
ICAgICAgICB0aW1lLnNsZWVwKDIpCgogICAgICAgICAgICBidG5BZGQgPSBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9f
YmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0BkYXRhLWN5PSdf
UHJpY2luZ1NlbGVjdGlvbl9CdXR0b24nXSIpKSkKICAgICAgICAgICAgZHJp
dmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBi
dG5BZGQpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKCiAgICAgICAgICAg
IGlucHV0TmFtZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxNSkudW50aWwo
RUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8v
aW5wdXRbQG5hbWU9J25hbWUnXSIpKSkuc2VuZF9rZXlzKHNlbGYuZmlyc3Qx
KQogICAgICAgICAgICBpbnB1dEVtYWlsID0gV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgo
QnkuWFBBVEgsICIvL2lucHV0W0BuYW1lPSdlbWFpbCddIikpKS5zZW5kX2tl
eXMoZW1haWx4KQogICAgICAgICAgICBpbnB1dFBzc2QgPSBXZWJEcml2ZXJX
YWl0KGRyaXZlciwgNSkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9s
b2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQG5hbWU9J3Bhc3N3b3JkJ10i
KSkpLnNlbmRfa2V5cygnU25vd1gxMjMqJykKICAgICAgICAgICAgdGltZS5z
bGVlcCgxKQoKICAgICAgICAgICAgYnRuUmVnaXN0ZXIgPSBXZWJEcml2ZXJX
YWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2th
YmxlKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdSZWdpc3RlciddIikpKQog
ICAgICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1sw
XS5jbGljaygpOyIsIGJ0blJlZ2lzdGVyKQogICAgICAgICAgICB0aW1lLnNs
ZWVwKDEpCgogICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50
KDIsIDMpKQogICAgICAgICAgICAKICAgICAgICAgICAgaW5wdXRMTmFtZSA9
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxNSkudW50aWwoRUMucHJlc2VuY2Vf
b2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQG5hbWU9
J2xhc3RfbmFtZSddIikpKS5zZW5kX2tleXMoc2VsZi5sYXN0MSkKICAgICAg
ICAgICAgaW5wdXRQaG9uZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51
bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRI
LCAiLy9pbnB1dFtAbmFtZT0ncGhvbmUnXSIpKSkuc2VuZF9rZXlzKG51bWUp
CgogICAgICAgICAgICBhZGRyZXNzID0gZiJ7cmFuZG9tLnJhbmRpbnQoMSwg
MTAwKX0gV2luZGluZyBsYWtlIHJkIHtyYW5kb20ucmFuZGludCgxLCAxMDAp
fSIKICAgICAgICAgICAgaW5wdXRBZGRycz0gV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgo
QnkuWFBBVEgsICIvL2lucHV0W0BjbGFzcz0nSW5wdXQgbG9jYXRpb24tc2Vh
cmNoLWlucHV0JyBhbmQgQG5hbWU9J2FkZHJlc3MnXSIpKSkuc2VuZF9rZXlz
KGFkZHJlc3MpCiAgICAgICAgICAgIGlucHV0Q2l0eSA9IFdlYkRyaXZlcldh
aXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xv
Y2F0ZWQoKEJ5LlhQQVRILCAiLy9pbnB1dFtAY2xhc3M9J0lucHV0IHVuZGVm
aW5lZCcgYW5kIEBuYW1lPSdjaXR5J10iKSkpLnNlbmRfa2V5cygnU3Vucmlz
ZScpCiAgICAgICAgICAgIGlucHV0UmVnaW9uID0gV2ViRHJpdmVyV2FpdChk
cml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRl
ZCgoQnkuWFBBVEgsICIvL2lucHV0W0BjbGFzcz0nSW5wdXQgdW5kZWZpbmVk
JyBhbmQgQG5hbWU9J3JlZ2lvbiddIikpKS5zZW5kX2tleXMoJ0Zsb3JpZGEn
KQogICAgICAgICAgICBpbnB1dFppcCA9IFdlYkRyaXZlcldhaXQoZHJpdmVy
LCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5
LlhQQVRILCAiLy9pbnB1dFtAY2xhc3M9J0lucHV0IHVuZGVmaW5lZCcgYW5k
IEBuYW1lPSdwb3N0YWxfY29kZSddIikpKS5zZW5kX2tleXMoJzMzMzUxJykK
ICAgICAgICAgICAgdGltZS5zbGVlcCgxKQoKICAgICAgICAgICAgYnRuQ29u
dGludWUgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVs
ZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0B0
eXBlPSdzdWJtaXQnIGFuZCBAZGF0YS1jeT0nX0FjdGlvbkJ1dHRvbl9CdXR0
b24nXSIpKSkKICAgICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJh
cmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5Db250aW51ZSkKCiAgICAgICAg
ICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMiwgMykpCgogICAgICAg
ICAgICBpbnB1dFRlcm1zID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51
bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICIv
L2RpdltAY2xhc3M9J2Vtb3Rpb24tMWVwNmNoYyBlMXZocW84djEnXS8vbGFi
ZWxbQGZvcj0nYW5udWFsVGVybXMnXSIpKSkKICAgICAgICAgICAgZHJpdmVy
LmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBpbnB1
dFRlcm1zKQogICAgICAgICAgICB0aW1lLnNsZWVwKDEpCgogICAgICAgICAg
ICBpbnB1dFRlcm1zMiA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50
aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9k
aXZbQGNsYXNzPSdlbW90aW9uLTFlcDZjaGMgZTF2aHFvOHYxJ10vL2xhYmVs
W0Bmb3I9J2F1dG9SZW5ld2FsJ10iKSkpCiAgICAgICAgICAgIGRyaXZlci5l
eGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgaW5wdXRU
ZXJtczIpCgogICAgICAgICAgICB3aGlsZSBjb250ZW8gPD0yOSBhbmQgc2Vs
Zi5jb250IDwgc2VsZi50b3RhbF9saW5lczoKCiAgICAgICAgICAgICAgICBz
ZWxmLnRleHRfY2hhbmdlZC5lbWl0KCLCoVByb3RlZ2UgdHUgc2VydmljaW8g
eSB0dSBwcml2YWNpZGFkISBDb27DqWN0YXRlIGNvbiB1bmEgVlBOLiIpCgoK
ICAgICAgICAgICAgICAgIGlmIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCku
dW50aWwoRUMuZnJhbWVfdG9fYmVfYXZhaWxhYmxlX2FuZF9zd2l0Y2hfdG9f
aXQoKEJ5LlhQQVRILCIvL2lmcmFtZVtjb250YWlucyhAbmFtZSwgJ3JlY3Vy
bHktZWxlbWVudCcpXSIpKSk6CgogICAgICAgICAgICAgICAgICAgIGNjcywg
bWVzLCBhbm8sIGNjbiwgdHlwPSBzdHIoc2VsZi5jY3Nbc2VsZi5jb250XSku
c3RyaXAoKSAsIHN0cihzZWxmLm1lc1tzZWxmLmNvbnRdKS5zdHJpcCgpLCBz
dHIoc2VsZi5hbmlvW3NlbGYuY29udF0pLnN0cmlwKCksIHN0cihzZWxmLmN2
dltzZWxmLmNvbnRdKS5zdHJpcCgpLCBzZWxmLnRvb2xzLmJpbnR5cGUoc2Vs
Zi5jY3Nbc2VsZi5jb250XSkKICAgICAgICAgICAgICAgICAgICBkZWFkbXNn
ID0gIkRFQUR8U05PV1hDSEt8REFSS1BST3wlc3wlc3wlc3wlc3wlc1xuIiAl
IChjY3MsbWVzLGFubyxjY24sdHlwKQogICAgICAgICAgICAgICAgICAgIGxp
dmVtc2cgPSAiTElWRXxTTk9XWENIS3xEQVJLUFJPfCVzfCVzfCVzfCVzfCVz
XG4iICUgKGNjcyxtZXMsYW5vLGNjbix0eXApCiAgICAgICAgICAgICAgICAg
ICAgZmVjaGEgPSBzZWxmLm1lc1tzZWxmLmNvbnRdICsgc2VsZi5hbmlvW3Nl
bGYuY29udF1bMjo0XQoKICAgICAgICAgICAgICAgICAgICBpbnB1dENDID0g
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29m
X2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0ncmVj
dXJseS1ob3N0ZWQtZmllbGQtaW5wdXQnXSIpKSkKICAgICAgICAgICAgICAg
ICAgICBpbnB1dENDLmNsZWFyKCkKICAgICAgICAgICAgICAgICAgICBpbnB1
dENDLnNlbmRfa2V5cyhzZWxmLmNjc1tzZWxmLmNvbnRdKQogICAgICAgICAg
ICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlucHV0RmVjaGEgPSBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMucHJlc2VuY2Vfb2Zf
ZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbY29udGFpbnMo
QGNsYXNzLCAncmVjdXJseS1ob3N0ZWQtZmllbGQtaW5wdXQtZXhwaXJ5Jykg
YW5kIEB0eXBlPSd0ZXh0J10iKSkpCiAgICAgICAgICAgICAgICAgICAgaW5w
dXRGZWNoYS5jbGVhcigpCiAgICAgICAgICAgICAgICAgICAgaW5wdXRGZWNo
YS5zZW5kX2tleXMoZmVjaGEpCiAgICAgICAgICAgICAgICAgICAgCiAgICAg
ICAgICAgICAgICAgICAgaW5wdXRDVlYgPSBXZWJEcml2ZXJXYWl0KGRyaXZl
ciwgNSkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChC
eS5YUEFUSCwgIi8vaW5wdXRbY29udGFpbnMoQGNsYXNzLCAncmVjdXJseS1o
b3N0ZWQtZmllbGQtaW5wdXQtY3Z2JykgYW5kIEB0eXBlPSd0ZXh0J10iKSkp
CiAgICAgICAgICAgICAgICAgICAgaW5wdXRDVlYuY2xlYXIoKQogICAgICAg
ICAgICAgICAgICAgIGlucHV0Q1ZWLnNlbmRfa2V5cyhzZWxmLmN2dltzZWxm
LmNvbnRdKQoKICAgICAgICAgICAgICAgICAgICBkcml2ZXIuc3dpdGNoX3Rv
LmRlZmF1bHRfY29udGVudCgpCgogICAgICAgICAgICAgICAgdGltZS5zbGVl
cChyYW5kb20ucmFuZGludCgyLCAzKSkKCiAgICAgICAgICAgICAgICBidG5Q
YXkgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLmVsZW1l
bnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYnV0dG9uW0BkYXRh
LWN5PSdfQWN0aW9uQnV0dG9uX0J1dHRvbiddIikpKQogICAgICAgICAgICAg
ICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2so
KTsiLCBidG5QYXkpCgogICAgICAgICAgICAgICAgdGltZS5zbGVlcChyYW5k
b20ucmFuZGludCg0LCA2KSkKCiAgICAgICAgICAgICAgICBtc2ogPSBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgMjUpLnVudGlsKEVDLnByZXNlbmNlX29mX2Vs
ZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL3BbQGRhdGEtY3k9J19TdWJz
Y3JpcHRpb25DaGVja291dF9UZXh0JyBhbmQgQHNpemU9JzE0JyBhbmQgQGNv
bG9yPSdkYW5nZXInXSIpKSkudGV4dAogICAgICAgICAgICAgICAgcHJpbnQo
bXNqKQoKICAgICAgICAgICAgICAgIGJyYW5kID0gc2VsZi5jY3Nbc2VsZi5j
b250XVswOjFdCiAgICAgICAgICAgICAgICBiaW5DQyA9IHNlbGYuY2NzW3Nl
bGYuY29udF1bMDo2XQoKICAgICAgICAgICAgICAgIGlmICdZb3VyIHRyYW5z
YWN0aW9uIHdhcyBkZWNsaW5lZC4gUGxlYXNlIHVzZSBhIGRpZmZlcmVudCBj
YXJkIG9yIGNvbnRhY3QgeW91ciBiYW5rLicgaW4gbXNqOgogICAgICAgICAg
ICAgICAgICAgIHNlbGYudGV4dF9kZWFkLmVtaXQoZGVhZG1zZykKICAgICAg
ICAgICAgICAgICAgICAjcHJpbnQoZGVhZG1zZywgbXNqKQoKICAgICAgICAg
ICAgICAgIGVsaWYgJ1BsZWFzZSBjb250YWN0IHlvdXIgYmFuayBmb3IgZnVy
dGhlciBkZXRhaWxzIG9yIHRyeSBhbm90aGVyIGNhcmQuJyBpbiBtc2o6CiAg
ICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2RlYWQuZW1pdChkZWFkbXNn
KQogICAgICAgICAgICAgICAgICAgICNwcmludChkZWFkbXNnLCBtc2opCgog
ICAgICAgICAgICAgICAgZWxpZiAnWW91ciBhY2NvdW50IG51bWJlciBpcyBu
b3QgdmFsaWQuIFBsZWFzZSB1cGRhdGUgeW91ciBhY2NvdW50IG51bWJlci4n
IGluIG1zajoKICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfZGVhZC5l
bWl0KGRlYWRtc2cpCiAgICAgICAgICAgICAgICAgICAgI3ByaW50KGRlYWRt
c2csIG1zaikKCiAgICAgICAgICAgICAgICBlbGlmICdUaGUgc2VjdXJpdHkg
Y29kZSB5b3UgZW50ZXJlZCBkb2VzIG5vdCBtYXRjaC4gUGxlYXNlIHVwZGF0
ZSB0aGUgQ1ZWIGFuZCB0cnkgYWdhaW4uJyBpbiBtc2o6CgogICAgICAgICAg
ICAgICAgICAgIGlmIGJyYW5kID09ICc0JzoKICAgICAgICAgICAgICAgICAg
ICAgICAgc2VsZi50ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAgICAgICAg
ICAgICAgICAgICAgICAjcHJpbnQoZGVhZG1zZywgbXNqKQoKICAgICAgICAg
ICAgICAgICAgICBlbGlmIGJyYW5kID09ICc1JzoKCiAgICAgICAgICAgICAg
ICAgICAgICAgIGlmIHNlbGYudG9vbHMucmVwZXRpcihjY3MpID09IFRydWU6
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfZGVhZC5l
bWl0KGRlYWRtc2cpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmlu
dCgnUkVMSVZFOicsIGxpdmVtc2csIG1zaikKICAgICAgICAgICAgICAgICAg
ICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNl
bGYucmVjaGVjayA9PSBUcnVlOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGlmKFp1b3JhKHNlbGYsIGxpdmVtc2csIGRyaXZlcikpOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXZlbXNnID0gIkxJ
VkV8U05PV1hDSEt8REFSS0NIQVJHRUR8JXN8JXN8JXN8JXN8JXNcbiIgJSAo
Y2NzLG1lcyxhbm8sY2NuLHR5cCkKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc2VsZi50ZXh0X2xpdmUuZW1pdChsaXZlbXNnKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9saXZlLmVtaXQo
bGl2ZW1zZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0X2xpdmUu
ZW1pdChsaXZlbXNnKQoKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAg
ICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRt
c2cpCiAgICAgICAgICAgICAgICAgICAgICAgICNwcmludCgnUkVWSVNBUics
IG1zaiwgc2VsZi5jY3Nbc2VsZi5jb250XSkKCiAgICAgICAgICAgICAgICBl
bGlmICdZb3VyIHRyYW5zYWN0aW9uIHdhcyBkZWNsaW5lZCBkdWUgdG8gaW5z
dWZmaWNpZW50IGZ1bmRzIGluIHlvdXIgYWNjb3VudC4gUGxlYXNlIHVzZSBh
IGRpZmZlcmVudCBjYXJkIG9yIGNvbnRhY3QgeW91ciBiYW5rLicgaW4gbXNq
OgoKICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnRvb2xzLnJlcGV0aXIo
Y2NzKSA9PSBUcnVlOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRl
eHRfZGVhZC5lbWl0KGRlYWRtc2cpCiAgICAgICAgICAgICAgICAgICAgICAg
ICNwcmludCgnUkVMSVZFOicsIGxpdmVtc2csIG1zaikKICAgICAgICAgICAg
ICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRl
eHRfbGl2ZS5lbWl0KGxpdmVtc2cpCiAgICAgICAgICAgICAgICAgICAgICAg
ICNwcmludChsaXZlbXNnLCBtc2opIAoKICAgICAgICAgICAgICAgIGVsaWYg
J1BsZWFzZSB2YWxpZGF0ZSBpbmZvcm1hdGlvbiBhbmQgdHJ5IGFnYWluLiBJ
ZiB0aGUgcHJvYmxlbSBwZXJzaXN0cywgcGxlYXNlIGNvbnRhY3QgeW91ciBi
YW5rLicgaW4gbXNqOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAg
ICAgICAgICAgICAgICAgICAgaWYgc2VsZi50b29scy5yZXBldGlyKGNjcykg
PT0gVHJ1ZToKCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCdSRUxJ
VkU6JywgbGl2ZW1zZywgbXNqKQogICAgICAgICAgICAgICAgICAgICAgICBz
ZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRtc2cpCiAgICAgICAgICAgICAgICAg
ICAgICAgIAogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAg
ICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRl
eHRfbGl2ZS5lbWl0KGxpdmVtc2cpCgogICAgICAgICAgICAgICAgZWxpZiAn
WW91ciBjYXJkIGlzIG5vdCBhbGxvd2VkIHRvIGNvbXBsZXRlIHRoaXMgdHJh
bnNhY3Rpb24nIGluIG1zajoKCiAgICAgICAgICAgICAgICAgICAgc2VsZi50
ZXh0X2RlYWQuZW1pdChkZWFkbXNnKQogICAgICAgICAgICAgICAgICAgIHBy
aW50KCdSRVZJU0FSJywgbXNqLCBzZWxmLmNjc1tzZWxmLmNvbnRdKQoKICAg
ICAgICAgICAgICAgIGVsaWYgJ1RoZSB0cmFuc2FjdGlvbiB3YXMgZGVjbGlu
ZWQuIFBsZWFzZSBjb250YWN0IHN1cHBvcnQuJyBpbiBtc2o6CgogICAgICAg
ICAgICAgICAgICAgIGlmIGNvbnRlbyA9PSAwIG9yIGNvbnRlbyA9PSAxOToK
CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVt
aXQoJ0JBTiBERSBJUCEnKQoKICAgICAgICAgICAgICAgICAgICBkcml2ZXIu
cXVpdCgpCiAgICAgICAgICAgICAgICAgICAgY2xvc2VDaHJvbWUoc2VsZikK
ICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9kcml2ZXIgPSBvcGVuQnJv
d3NlcigwLHNlbGYubnVtMikKCiAgICAgICAgICAgICAgICBlbHNlOgogICAg
ICAgICAgICAgICAgICAgIHByaW50KG1zaikKICAgICAgICAgICAgICAgICAg
ICBzb3VuZExpdmUoc2VsZikKICAgICAgICAgICAgICAgICAgICB0aW1lLnNs
ZWVwKDUwMCkKCiAgICAgICAgICAgICAgICBzZWxmLnRvb2xzLmJvcnJhcmNj
KCIlc3wlc3wlc3wlc1xuIiAlIChjY3MsbWVzLGFubyxjY24pKQogICAgICAg
ICAgICAgICAgc2VsZi5jb250Kz0xCiAgICAgICAgICAgICAgICBjb250ZW8g
Kz0xCgogICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdFTElN
SU5BTkRPIFJBU1RSRUFET1JFUyEnKQogICAgICAgICAgICBkZXNiYW4oZHJp
dmVyKQogICAgICAgICAgICBkcml2ZXIucXVpdCgpCiAgICAgICAgICAgIGNs
b3NlQ2hyb21lKHNlbGYpCiAgICAgICAgICAgIGRyaXZlciA9IG9wZW5Ccm93
c2VyKDIsc2VsZi5udW0yKQogICAgICAgICAgICAKICAgICAgICAgICAgCiAg
ICAgICAgZXhjZXB0OgogICAgICAgICAgICAjZGVzYmFuKGRyaXZlcikKICAg
ICAgICAgICAgZHJpdmVyLnF1aXQoKQogICAgICAgICAgICBjbG9zZUNocm9t
ZShzZWxmKQogICAgICAgICAgICAjaW5zdGFuY2VfZHJpdmVyID0gb3BlbkJy
b3dzZXIoMCxzZWxmLm51bTIpCiAgICAgICAgICAgIGV4Y190eXBlLCBleGNf
b2JqLCBleGNfdGIgPSBzeXMuZXhjX2luZm8oKTtmbmFtZSA9IG9zLnBhdGgu
c3BsaXQoZXhjX3RiLnRiX2ZyYW1lLmZfY29kZS5jb19maWxlbmFtZSlbMV0K
ICAgICAgICAgICAgZXJyb3JfbWVzc2FnZT0gKHN0cihleGNfdHlwZSkrJyAn
K3N0cihleGNfdGIudGJfbGluZW5vKSkKICAgICAgICAgICAgc2VsZi5wcmlu
dGVkLmVtaXQoZXJyb3JfbWVzc2FnZSkKICAgICAgICAgICAgaWYgJ3NlbGVu
aXVtLmNvbW1vbi5leGNlcHRpb25zLlRpbWVvdXRFeGNlcHRpb24nIGluIGVy
cm9yX21lc3NhZ2U6CiAgICAgICAgICAgICAgICBzZWxmLnRleHRfY2hhbmdl
ZC5lbWl0KCdFeHBlcmltZW50YW5kbyBmYWxsYXMgZGUgY29uZXhpb24sIGVs
IHByb2Nlc28gc2VndWlyYSwgcmV2aXNhIHR1IGNvbmV4aW9uLicpCiAgICAg
ICAgICAgICNwcm94eUVycm9yID0gcHJveHlFcnJvciArIDEKICAgICAgICAg
ICAgZHJpdmVyID0gb3BlbkJyb3dzZXIoMixzZWxmLm51bTIpCiAgICAgICAg
ICAgIAogICAgICAgICAgICAKICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQo
J1RFU1RFTyBGSU5BTElaQURPJykKCgoKCgoKIyBHQVRFUyBQQVJBIFJFQ0hF
Q0sKICAgIApkZWYgSW5kaWdvKHNlbGYsIGxpdmUsIGRyaXZlcik6CiAgICAK
ICAgIGlmIHNlbGYudG9vbHMudmFsaWRhdGVfY3JlZGl0b3Moc2VsZi51c2Vy
bmFtZSxzZWxmLnBhc3N3b3JkKSA9PSBUcnVlOgogICAgICAgIHNlbGYudGV4
dF9jaGFuZ2VkLmVtaXQoJ0NSRURJVE9TIElOU1VGSUNJRU5URVMgOi8nKQog
ICAgICAgIHJldHVybiBOb25lCiAgICAKICAgIGRyaXZlciA9IG9wZW5Ccm93
c2VyKDEsc2VsZi5udW0yKQoKICAgIGxpbmtzID0gWydodHRwczovL3d3dy5p
bmRpZ28uY2EvZW4tY2EvYmx1ZXktZGFkZHktcHV0ZG93bi85NzgwNTkzNzUw
ODY1Lmh0bWwnLCAnaHR0cHM6Ly93d3cuaW5kaWdvLmNhL2VuLWNhL21pbmkt
Ymx1ZXktYS1ibHVleS1zdG9yeWJvb2svOTc4MDU5Mzc1MjgxNC5odG1sJywg
J2h0dHBzOi8vd3d3LmluZGlnby5jYS9lbi1jYS9jaGFuZ2VzLWZvci1yaWxl
eS1kaXNuZXklMkZwaXhhci1pbnNpZGUtb3V0LTIvOTc4MDczNjQ0NDQyMi5o
dG1sJywgJ2h0dHBzOi8vd3d3LmluZGlnby5jYS9lbi1jYS9yaWxleXMtbmV3
LXdvcmxkLWRpc25leSUyRnBpeGFyLWluc2lkZS1vdXQtMi85NzgwNzM2NDQ0
NDQ2Lmh0bWwnLCAnaHR0cHM6Ly93d3cuaW5kaWdvLmNhL2VuLWNhL2RyZWFt
d29ya3MtdGhlLWJhZC1ndXlzLWEtdmVyeS1iYWQtaG9saWRheS1ub3ZlbGl6
YXRpb24vOTc4MTMzOTAyMzc5My5odG1sJywgJ2h0dHBzOi8vd3d3LmluZGln
by5jYS9lbi1jYS90aGUtc3Rpbmt5LXdvbmt5LWRvbmtleS1hLXdvbmt5LWRv
bmtleS1ib29rLzk3ODEzMzkwMTUxMDEuaHRtbCcsICdodHRwczovL3d3dy5p
bmRpZ28uY2EvZW4tY2EvdGhlLXN0aW5reS13b25reS1kb25rZXktYS13b25r
eS1kb25rZXktYm9vay85NzgxMzM5MDE1MTAxLmh0bWwnLCAnaHR0cHM6Ly93
d3cuaW5kaWdvLmNhL2VuLWNhL3N0YXJ0LXBvbGlzaC1uZXctZWRpdGlvbi1s
ZWFybi1wb2xpc2gtd2l0aC10aGUtbWljaGVsLXRob21hcy1tZXRob2QvOTc4
MTUyOTMzMDU3MS5odG1sJ10KICAgIHByb2R1Y3QgPSByYW5kb20uY2hvaWNl
KGxpbmtzKQoKICAgIGRyaXZlci5nZXQocHJvZHVjdCkKCiAgICBzZWxmLnRl
eHRfY2hhbmdlZC5lbWl0KCJJTklDSUFORE8gUkVDSEVDSyBTSUxWRVIiKQoK
ICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMSwgMikpCgogICAgdHJ5
OgogICAgICAgICMgU2VwYXJhbW9zIGxhIGNhZGVuYSBkZSBsYSB0YXJqZXRh
CiAgICAgICAgcGFydGVzID0gbGl2ZS5zcGxpdCgifCIpCgogICAgICAgIGlm
IGxlbihwYXJ0ZXMpID49IDQ6CiAgICAgICAgICAgIGNhcmQgPSBwYXJ0ZXNb
M10KICAgICAgICAgICAgbWVzID0gcGFydGVzWzRdCiAgICAgICAgICAgIHN1
YnllYXIgPSBwYXJ0ZXNbNV1bMjpdCiAgICAgICAgICAgIGZlY2hhID0gbWVz
ICsgc3VieWVhcgogICAgICAgICAgICBjdnYgPSAnMDAwJwogICAgZXhjZXB0
OgogICAgICAgIHByaW50KCJQb3JmYXZvciBjb3JyaWdhIGVsIGZvcm1hdG8g
ZGUgbGEgdGFyamV0YSBhc2k6IGNjfG1vbnRofHllYXIiKQogICAgCiAgICBl
bWFpbGYgPSAnJy5qb2luKHJhbmRvbS5jaG9pY2UoJ0FCQ0RFRkdISUpLTE1O
T1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R3eHl6MDEyMzQ1Njc4
OScpIGZvciBfIGluIHJhbmdlKDMpKStzZWxmLmZpcnN0MSsnJy5qb2luKHJh
bmRvbS5jaG9pY2UoJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVm
Z2hpamtsbW5vcHFyc3R3eHl6MDEyMzQ1Njc4OScpIGZvciBfIGluIHJhbmdl
KDMpKSsnQGdtYWlsLmNvbScKICAgIGNpY2xvID0gVHJ1ZQogICAgY29udGFy
ID0gMAogICAgbnVtZSA9IGYiMzF7cmFuZG9tLnJhbmRpbnQoMCwgOSl9eycn
LmpvaW4ocmFuZG9tLmNob2ljZXMoJzAxMjM0NTY3ODknLCBrPTcpKX0iCiAg
ICBmZWNoYSA9IHNlbGYubWVzW3NlbGYuY29udF0gKyBzZWxmLmFuaW9bc2Vs
Zi5jb250XVsyOjRdCgogICAgdHJ5OgogICAgICAgIHNlbGYudGV4dF9jaGFu
Z2VkLmVtaXQoJ09CVEVOSUVORE8gTUVUQS1EQVRPUyEnKQogICAgICAgIGRp
cmVjY2lvbiA9IGdldEFkZHJlc3MoKQogICAgICAgIHBsYWNlcyA9IGRpcmVj
Y2lvblsicGxhY2VzIl0KICAgICAgICBwbGFjZXMgPSBwbGFjZXNbMF0KICAg
ICAgICBudW1TdHJlZXQgPSBwbGFjZXNbImxhdGl0dWRlIl0uc3BsaXQoIi4i
KVsxXQogICAgICAgIGNpdHkgPSBwbGFjZXNbInBsYWNlIG5hbWUiXQogICAg
ICAgIHN0cmVldCA9IG51bVN0cmVldCArICcgcm9hZCAnICsgY2l0eQogICAg
ICAgIHN0YXRlID0gcGxhY2VzWydzdGF0ZSddCiAgICAgICAgemlwY29kZSA9
IGRpcmVjY2lvblsicG9zdCBjb2RlIl0KCiAgICAgICAgc2VsZi50ZXh0X2No
YW5nZWQuZW1pdCgnVEVTVEVBTkRPLCBFU1BFUkEuLicpCgogICAgICAgIGRy
aXZlci5nZXQoImh0dHBzOi8vd3d3LmluZGlnby5jYS9lbi1jYS9jYXZlLW9m
LXRoZS1jcnlzdGFsLWRyYWdvbi1hLWJyYW5jaGVzLWJvb2stZHJhZ29uLW1h
c3RlcnMtMjYvOTc4MTMzOTAyMjM3Ni5odG1sIikKICAgICAgICB0aW1lLnNs
ZWVwKDMpCgogICAgICAgIGJ1dHRvbkFkZCA9IFdlYkRyaXZlcldhaXQoZHJp
dmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5
LlhQQVRILCAiLy9idXR0b25bQGNsYXNzPSdhZGQtdG8tY2FydCBidG4gYnRu
LXByaW1hcnkgYnRuLWxnIGJ0bi1ibG9jayddIikpKQoKICAgICAgICBjbGtz
dG9yZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxl
bWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAnLy8qW0BpZD0ibWFp
bmNvbnRlbnQiXS9kaXZbM10vZGl2WzJdL2RpdlsyXS9kaXZbNV0vZGl2WzRd
L2Rpdi9kaXZbMl0vZGl2L2Rpdi9kaXYvcFsyXS9hJykpKQogICAgICAgIGRy
aXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7Iiwg
Y2xrc3RvcmUpCiAgICAgICAgYnRuU2VhcmNoID0gV2ViRHJpdmVyV2FpdChk
cml2ZXIsIDEwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgo
QnkuWFBBVEgsICcvLypbQGlkPSJzdG9yZUxvY2F0b3JEcmF3ZXIiXS9kaXYv
ZGl2L2RpdlsyXS9kaXYvZGl2WzFdL2RpdlsxXS9kaXYvZGl2L2Rpdi9idXR0
b25bMl0nKSkpCiAgICAgICAgICAgIAogICAgICAgIGxpc3RhU3RvcmVzID0g
WydIMlAgMkgxJywgJ0w0VCAxQjUnLCAnTTVCIDJINicsICdKN1QgMkI1Jywg
J0gyWSAzQzMnLCAnTDJFIDZCOCddCiAgICAgICAgbGlzdGFQID0gWycvLypb
QGlkPSIwMjgyIl0vZGl2L2RpdlszXS9kaXZbMl0vYScsICcvLypbQGlkPSIw
MzQ1Il0vZGl2L2RpdlszXS9kaXZbMl0vYScsICcvLypbQGlkPSIwMjg3Il0v
ZGl2L2RpdlszXS9kaXZbMl0vYScsICcvLypbQGlkPSIwNzk0Il0vZGl2L2Rp
dlszXS9kaXZbMl0vYScsICcvLypbQGlkPSIwMjgyIl0vZGl2L2RpdlszXS9k
aXZbMl0vYScsICcvLypbQGlkPSIwMDEyIl0vZGl2L2RpdlszXS9kaXZbMl0v
YSddCiAgICAgICAgaW5kaWNlID0gcmFuZG9tLnJhbmRpbnQoMCwgbGVuKGxp
c3RhU3RvcmVzKSAtIDEpCiAgICAgICAgc3RvcmUgPSBsaXN0YVN0b3Jlc1tp
bmRpY2VdCiAgICAgICAgcnV0YSA9IGxpc3RhUFtpbmRpY2VdCgogICAgICAg
IGh1bWFuX2tleXMoZHJpdmVyLCBzdG9yZSwgJy8vKltAaWQ9InN0b3JlU2Vh
cmNoSW5wdXQiXScpCiAgICAgICAgICAgIAogICAgICAgIHNlbGYudGV4dF9j
aGFuZ2VkLmVtaXQoJ0FHUkVHQU5ETyBESVJFQ0NJT04hJykKCiAgICAgICAg
I3ByaW50KCdIdW1hbml6YW5kbycpCiAgICAgICAgdGltZS5zbGVlcChyYW5k
b20ucmFuZGludCgxLCA1KSkKICAgICAgICBhY3Rpb25zID0gQWN0aW9uQ2hh
aW5zKGRyaXZlcikKICAgICAgICBhY3Rpb25zLnNlbmRfa2V5cyhLZXlzLkVO
VEVSKS5wZXJmb3JtKCkKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAg
YWN0aW9ucy5zZW5kX2tleXMoS2V5cy5BUlJPV19ET1dOKS5wZXJmb3JtKCkK
ICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgYWN0aW9ucy5zZW5kX2tl
eXMoS2V5cy5FTlRFUikucGVyZm9ybSgpCiAgICAgICAgdGltZS5zbGVlcCgx
KQogICAgICAgIGJ0blNlYXJjaC5jbGljaygpCgogICAgICAgIHRyeToKICAg
ICAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5l
bGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsIHJ1dGEpKSkuY2xp
Y2soKQogICAgICAgIGV4Y2VwdDoKCiAgICAgICAgICAgIGlucHV0RGlyID0g
V2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29m
X2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICcvLypbQGlkPSJzdG9yZVNl
YXJjaElucHV0Il0nKSkpCiAgICAgICAgICAgIGlucHV0RGlyLmNsZWFyKCkK
ICAgICAgICAgICAgaHVtYW5fa2V5cyhkcml2ZXIsc3RvcmUsICcvLypbQGlk
PSJzdG9yZVNlYXJjaElucHV0Il0nKQoKICAgICAgICAgICAgdGltZS5zbGVl
cChyYW5kb20ucmFuZGludCgxLCA1KSkKICAgICAgICAgICAgYWN0aW9ucyA9
IEFjdGlvbkNoYWlucyhkcml2ZXIpCiAgICAgICAgICAgIGFjdGlvbnMuc2Vu
ZF9rZXlzKEtleXMuQVJST1dfRE9XTikucGVyZm9ybSgpCiAgICAgICAgICAg
IHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgYWN0aW9ucy5zZW5kX2tleXMo
S2V5cy5FTlRFUikucGVyZm9ybSgpCiAgICAgICAgICAgIHRpbWUuc2xlZXAo
MSkKICAgICAgICAgICAgYnRuU2VhcmNoLmNsaWNrKCkKCiAgICAgICAgdGlt
ZS5zbGVlcCgxKQogICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJn
dW1lbnRzWzBdLmNsaWNrKCk7IiwgYnV0dG9uQWRkKQoKICAgICAgICB0aW1l
LnNsZWVwKDUpCgogICAgICAgIGRyaXZlci5nZXQoJ2h0dHBzOi8vd3d3Lmlu
ZGlnby5jYS9lbi1jYS9jYXJ0P2RlbGl2ZXJ5TWV0aG9kPXBpY2t1cCcpCiAg
ICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgxLCAzKSkKCiAgICAg
ICAgdHJ5OgogICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSku
dW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAi
Ly9idXR0b25bQHR5cGU9J2J1dHRvbicgYW5kIEBjbGFzcz0nY2xvc2UnXSIp
KSkKICAgICAgICAgICAgcHJpbnQoJ0Vycm9yIGVuIGNoa291dCcsIHN0b3Jl
KQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwogICAgICAgICAg
ICAKICAgICAgICBjbGsgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVu
dGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8v
KltAaWQ9Im1haW5jb250ZW50Il0vZGl2WzJdL2RpdlsxXS9kaXZbMl0vZGl2
WzEzXS9kaXZbMl0vZGl2L2EnKSkpCiAgICAgICAgZHJpdmVyLmV4ZWN1dGVf
c2NyaXB0KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBjbGspCgogICAgICAg
IGJ0bkNvbnRpbnVlID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRp
bChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvLypb
QGlkPSJjaGVja291dC1tYWluIl0vZGl2WzJdL2RpdlsxXS9kaXZbMTBdL2Rp
di9idXR0b25bMV0nKSkpCgogICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVy
LCAxMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQ
QVRILCAnLy8qW0BpZD0iZW1haWwiXScpKSkuc2VuZF9rZXlzKGVtYWlsZikK
ICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgIAogICAgICAgICMg
SGFjZXIgc2Nyb2xsIGhhc3RhIHF1ZSBlbCBlbGVtZW50byBzZWEgdmlzaWJs
ZQogICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBd
LnNjcm9sbEludG9WaWV3KCk7IiwgYnRuQ29udGludWUpCiAgICAgICAgYnRu
Q29udGludWUuY2xpY2soKQoKICAgICAgICBidG5Db250aW51ZUEgPSBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgMTUpLnVudGlsKEVDLmVsZW1lbnRfdG9fYmVf
Y2xpY2thYmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9ImNoZWNrb3V0LW1haW4i
XS9kaXZbMl0vZGl2WzFdL2RpdlsxMF0vZGl2L2J1dHRvblsyXScpKSkKICAg
ICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGlj
aygpOyIsIGJ0bkNvbnRpbnVlQSkKCiAgICAgICAgIyBJTlRFTlRPIERFIFBB
R08KICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdBR1JFR0FORE8g
REFUT1MgREUgUEFHTyEnKQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGJ0
bk9yZGVyID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDIwKS51bnRpbChFQy5l
bGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgsICcvLypbQGlkPSJj
aGVja291dC1tYWluIl0vZGl2WzJdL2RpdlsxXS9kaXZbMTBdL2Rpdi9idXR0
b25bM10nKSkpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCiAg
ICAgICAgCiAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGls
KEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICcv
LypbQGlkPSJiaWxsaW5nRmlyc3ROYW1lIl0nKSkpLnNlbmRfa2V5cyhzZWxm
LmZpcnN0MSkKICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50
aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwg
Jy8vKltAaWQ9ImJpbGxpbmdMYXN0TmFtZSJdJykpKS5zZW5kX2tleXMoc2Vs
Zi5sYXN0MSkKICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50
aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwg
Jy8vKltAaWQ9ImJpbGxpbmdBZGRyZXNzT25lIl0nKSkpLnNlbmRfa2V5cyhz
dHJlZXQpCgogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZWN0X2NvdW50
cnkgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNl
bmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICcvLypbQGlkPSJi
aWxsaW5nQ291bnRyeSJdJykpKQogICAgICAgICAgICBpbnB1dF9jb3VudHJ5
ID0gU2VsZWN0KHNlbGVjdF9jb3VudHJ5KQogICAgICAgICAgICBpbnB1dF9j
b3VudHJ5LnNlbGVjdF9ieV92YWx1ZSgiVVMiKQogICAgICAgIGV4Y2VwdDoK
ICAgICAgICAgICAgc2VsZi5wcmludGVkLmVtaXQoJ0Vycm9yIGFsIHNlbGVj
Y2lvbmFyIHBhaXMhJykKCiAgICAgICAgdGltZS5zbGVlcCgxKQoKICAgICAg
ICBTZWxlY3QoZHJpdmVyLmZpbmRfZWxlbWVudChieT1CeS5YUEFUSCwgdmFs
dWU9Jy8vKltAaWQ9ImJpbGxpbmdTdGF0ZSJdJykpLnNlbGVjdF9ieV92aXNp
YmxlX3RleHQoc3RhdGUpCiAgICAgICAgICAgIAogICAgICAgIFdlYkRyaXZl
cldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50
X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0iYmlsbGluZ0FkZHJlc3ND
aXR5Il0nKSkpLnNlbmRfa2V5cyhjaXR5KQogICAgICAgIFdlYkRyaXZlcldh
aXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xv
Y2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0iYmlsbGluZ1ppcENvZGUiXScp
KSkuc2VuZF9rZXlzKHppcGNvZGUpCiAgICAgICAgV2ViRHJpdmVyV2FpdChk
cml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRl
ZCgoQnkuWFBBVEgsICcvLypbQGlkPSJwaG9uZU51bWJlciJdJykpKS5zZW5k
X2tleXMobnVtZSkKICAgICAgICAgICAgICAgIAoKCiAgICAgICAgaWYgc2Vs
Zi50b29scy52YWxpZGF0ZV9jcmVkaXRvcyhzZWxmLnVzZXJuYW1lLHNlbGYu
cGFzc3dvcmQpID09IFRydWU6CiAgICAgICAgICAgIHNlbGYudGV4dF9jaGFu
Z2VkLmVtaXQoJ0NSRURJVE9TIElOU1VGSUNJRU5URVMgOi8nKQogICAgICAg
ICAgICByZXR1cm4gTm9uZQogICAgICAgIAogICAgICAgIGlmIHNlbGYuY29u
dCA9PSAxMDA6CiAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVtaXQo
J0JBTiBERSBJUCEsIHBvcmZhdm9yIGNhbWJpYSBsYSBpcCB5IHJlaW5pY2ll
IGVsIHByb2Nlc28uJykKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAg
ICAKCiAgICAgICAgaW5wdXROYW1lID0gV2ViRHJpdmVyV2FpdChkcml2ZXIs
IDEwKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5
LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2NhcmRPd25lciddIikpKQogICAgICAg
IGlucHV0TmFtZS5jbGVhcigpCiAgICAgICAgaW5wdXROYW1lLnNlbmRfa2V5
cyhzZWxmLmZpcnN0MSkgIAoKICAgICAgICAjIGZyYW1lCiAgICAgICAgV2Vi
RHJpdmVyV2FpdChkcml2ZXIsIDEwLCAxKS51bnRpbChFQy5mcmFtZV90b19i
ZV9hdmFpbGFibGVfYW5kX3N3aXRjaF90b19pdCgoQnkuWFBBVEgsJy8vKltA
aWQ9Im1vbmVyaXNGcmFtZSJdJykpKQoKICAgICAgICBpbnB1dGNjID0gV2Vi
RHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2Vs
ZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICcvLypbQGlkPSJtb25lcmlzRGF0
YUlucHV0Il0nKSkpCiAgICAgICAgaW5wdXRjYy5jbGVhcigpCiAgICAgICAg
aW5wdXRjYy5zZW5kX2tleXMoY2FyZCkKCiAgICAgICAgaW5wdXRmZWNoYSA9
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9v
Zl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0ibW9uZXJp
c0V4cElucHV0Il0nKSkpCiAgICAgICAgaW5wdXRmZWNoYS5jbGVhcigpCiAg
ICAgICAgaW5wdXRmZWNoYS5zZW5kX2tleXMoZmVjaGEpCgogICAgICAgIGlu
cHV0Y3Z2ID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnBy
ZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICcvLypbQGlk
PSJtb25lcmlzQ1ZESW5wdXQiXScpKSkKICAgICAgICBpbnB1dGN2di5jbGVh
cigpCiAgICAgICAgaW5wdXRjdnYuc2VuZF9rZXlzKCcwMDAnKQoKICAgICAg
ICAjIHZvbHZlciBhIG5vcm1hbAoKICAgICAgICBkcml2ZXIuc3dpdGNoX3Rv
LmRlZmF1bHRfY29udGVudCgpCgogICAgICAgIHRpbWUuc2xlZXAoMSkKICAg
ICAgICBidG5SZXZpZXcgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVu
dGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8v
KltAaWQ9ImNoZWNrb3V0LW1haW4iXS9kaXZbMl0vZGl2WzFdL2RpdlsxMF0v
ZGl2L2J1dHRvblszXScpKSkKICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3Jp
cHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGJ0blJldmlldykKICAgICAg
ICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDEsIDMpKQoKICAgICAgICB0
cnk6CiAgICAgICAgICAgIGJ0bk9yZGVyID0gIFdlYkRyaXZlcldhaXQoZHJp
dmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5
LlhQQVRILCAiLy9idXR0b25bQGNsYXNzPSdidG4gYnRuLXByaW1hcnkgYnRu
LWxnIGJ0bi1ibG9jayBwbGFjZS1vcmRlciddIikpKQogICAgICAgICAgICBk
cml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIs
IGJ0bk9yZGVyKQoKICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFu
ZGludCgzLCA1KSkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHVybCA9
IGRyaXZlci5jdXJyZW50X3VybAogICAgICAgICAgICBpZiAncGxhY2VPcmRl
cicgaW4gdXJsOgogICAgICAgICAgICAgICAgcGFzcyAgCiAgICAgICAgICAg
IGVsc2U6CiAgICAgICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAg
ICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVt
ZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0icGhvbmVJbnZhbGlk
TWVzc2FnZSJdJykpKQogICAgICAgICAgICAgICAgICAgICAgICBudW1lID0g
ZiIzMXtyYW5kb20ucmFuZGludCgwLCA5KX17Jycuam9pbihyYW5kb20uY2hv
aWNlcygnMDEyMzQ1Njc4OScsIGs9NykpfSIKICAgICAgICAgICAgICAgICAg
ICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnByZXNl
bmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICcvLypbQGlkPSJw
aG9uZU51bWJlciJdJykpKS5jbGVhcigpCiAgICAgICAgICAgICAgICAgICAg
ICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5j
ZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0icGhv
bmVOdW1iZXIiXScpKSkuc2VuZF9rZXlzKG51bWUpCiAgICAgICAgICAgICAg
ICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgICAgICAg
ICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLmVsZW1lbnRf
dG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgJy8vKltAaWQ9ImNoZWNrb3V0
LW1haW4iXS9kaXZbMl0vZGl2WzFdL2RpdlsxMF0vZGl2L2J1dHRvblszXScp
KSkuY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVw
KDUpCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAg
ICAgICAgICAgICBicmVhawogICAgICAgIAogICAgICAgICMgRXNwZXJhbmRv
IHJlc3B1ZXN0YQogICAgICAgIGJ0bk9yZGVyID0gIFdlYkRyaXZlcldhaXQo
ZHJpdmVyLCAyMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUo
KEJ5LlhQQVRILCAiLy9idXR0b25bQGNsYXNzPSdidG4gYnRuLXByaW1hcnkg
YnRuLWxnIGJ0bi1ibG9jayBwbGFjZS1vcmRlciddIikpKQogICAgICAgIAog
ICAgICAgIHRyeTogIyBSRVZJU0FORE8gREVBRAogICAgICAgICAgICBtc2dQ
YXkgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNl
bmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL3BbQGNsYXNz
PSdlcnJvci1tZXNzYWdlLXRleHQnXSIpKSkudGV4dAogICAgICAgICAgICBw
cmludChtc2dQYXkpCiAgICAgICAgICAgIHNlbGYudGV4dF9jaGFuZ2VkLmVt
aXQoJ0NDIENPTiBTQUxETyBJTlNVRklDSUVOVEUhJykKICAgICAgICAgICAg
ZGVzYmFuKGRyaXZlcikKICAgICAgICAgICAgZHJpdmVyLnF1aXQoKQogICAg
ICAgICAgICBjbG9zZUZveChzZWxmKQogICAgICAgICAgICByZXR1cm4gRmFs
c2UKCgogICAgICAgIGV4Y2VwdDogIyBSRVZJU0FORE8gTElWRQogICAgICAg
ICAgICB1cmwgPSBkcml2ZXIuY3VycmVudF91cmwKICAgICAgICAgICAgcHJp
bnQodXJsKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNlbmNlX29mX2Vs
ZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICcvaHRtbC9ib2R5L2RpdlsyXS9k
aXYvZGl2WzJdL2Rpdi9kaXZbMV0vZGl2WzFdL2gxJykpKQogICAgICAgICAg
ICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnRUxJTUlOQU5ETyBSQVNU
UkVBRE9SRVMgUkVDSEVDSyEnKQogICAgICAgICAgICAgICAgZGVzYmFuKGRy
aXZlcikKICAgICAgICAgICAgICAgIGRyaXZlci5xdWl0KCkKICAgICAgICAg
ICAgICAgIGNsb3NlRm94KHNlbGYpCiAgICAgICAgICAgICAgICByZXR1cm4g
VHJ1ZQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBwcmlu
dCgnRXJyb3IgZW5jb250cmFuZG8gZWxlbWVudG8gbGl2ZS4nKQoKICAgICAg
ICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdSRUNIRUNLIEZJTkFMSVpBRE8n
KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICBleGNlcHQ6CiAg
ICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnUkVDSEVDSyBGQUxMSURP
IScpCiAgICAgICAgcHJpbnQoJ1JlY2hlY2sgRmFsbGlkbyEnKQogICAgICAg
IGV4Y190eXBlLCBleGNfb2JqLCBleGNfdGIgPSBzeXMuZXhjX2luZm8oKTtm
bmFtZSA9IG9zLnBhdGguc3BsaXQoZXhjX3RiLnRiX2ZyYW1lLmZfY29kZS5j
b19maWxlbmFtZSlbMV0KICAgICAgICBlcnJvcl9tZXNzYWdlPSAoc3RyKGV4
Y190eXBlKSsnICcrc3RyKGV4Y190Yi50Yl9saW5lbm8pKQogICAgICAgIHNl
bGYucHJpbnRlZC5lbWl0KGVycm9yX21lc3NhZ2UpCiAgICAgICAgdGltZS5z
bGVlcCg1KQogICAgICAgIGRlc2Jhbihkcml2ZXIpCiAgICAgICAgZHJpdmVy
LnF1aXQoKQogICAgICAgIGNsb3NlRm94KHNlbGYpCiAgICAgICAgcmV0dXJu
IEZhbHNlCgpkZWYgWnVvcmEoc2VsZiwgbGl2ZSwgZHJpdmVyKToKCiAgICBl
bWFpbGYgPSBzZWxmLmxhc3QxKycnLmpvaW4ocmFuZG9tLmNob2ljZSgnQUJD
REVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHd4
eXowMTIzNDU2Nzg5JykgZm9yIF8gaW4gcmFuZ2UoMykpK3NlbGYuZmlyc3Qx
KycnLmpvaW4ocmFuZG9tLmNob2ljZSgnQUJDREVGR0hJSktMTU5PUFFSU1RV
VldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHd4eXowMTIzNDU2Nzg5JykgZm9y
IF8gaW4gcmFuZ2UoMykpKydAZ21haWwuY29tJwogICAgCiAgICBkZWYgcmV2
QWxlcnRhKGRyaXZlcik6CiAgICAgICAgdHJ5OiAgICAKICAgICAgICAgICAg
IyBFc3BlcmFyIGhhc3RhIDEwIHNlZ3VuZG9zIHBhcmEgcXVlIGFwYXJlemNh
IGxhIGFsZXJ0YQogICAgICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
MykudW50aWwoRUMuYWxlcnRfaXNfcHJlc2VudCgpKQogICAgICAgICAgICBh
bGVydCA9IGRyaXZlci5zd2l0Y2hfdG8uYWxlcnQKICAgICAgICAgICAgdGV4
dG9fZGVsX2FsZXJ0ID0gYWxlcnQudGV4dAogICAgICAgICAgICBhbGVydC5h
Y2NlcHQoKQogICAgICAgICAgICBkcml2ZXIucmVmcmVzaCgpCiAgICAgICAg
ICAgIHJldHVybiB0ZXh0b19kZWxfYWxlcnQKICAgICAgICBleGNlcHQ6CiAg
ICAgICAgICAgIHJldHVybiAnRVJST1InCgogICAgdHJ5OgogICAgICAgIHRy
eToKCiAgICAgICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgid2luZG93
Lm9wZW4oJycsICdfYmxhbmsnKTsiKQogICAgICAgICAgICBkcml2ZXIuc3dp
dGNoX3RvLndpbmRvdyhkcml2ZXIud2luZG93X2hhbmRsZXNbMV0pCiAgICAg
ICAgICAgIGRyaXZlci5nZXQoImh0dHBzOi8vc2VjdXJlLm1pbmR2YWxsZXku
Y29tL2NoZWNrb3V0L3o/cGxhbnM9MmM5MmEwZmQ1MjhkZGVmZTAxNTJhMWE2
MjQ3MjFiNjMlMkMyYzkyYTBmYjUxYjQyNzE1MDE1MWM4ZGFiNjk2NmI3YiZ0
YWdzPVplbndhcmQlMkNkaWdpdGFsJTJDc3Vic2NyaXB0aW9uJTJDbW9udGhs
eV9wYXltZW50JTJDWmVud2FyZF9TdWJzY3JpYmVQYWdlX0phbl8yMDE2JmRp
c2NvdW50PSZ6cGg9ZWQ3MGM0NzI2Y2QxNTAzYWMwOTFlNjY1Mzc0YjYwZmQm
YWZ0ZXJzYWxlPTAmYWZmX3RhZ3M9JnJldHVybj1odHRwcyUzQSUyRiUyRnpl
bndhcmQuY29tJTJGbXYtc2VydmljZSUyRkFmdGVyc2FsZSUyRkluaXRpYWxp
emVyJnJldHVybl9vZmZsaW5lPWh0dHBzJTNBJTJGJTJGemVud2FyZC5jb20l
MkZwcm9kdWN0cyUyRm9mZmxpbmUmX19oc3RjPTE0NDY4MjAyNi5jNGE1Nzcw
MjljNDllNDRiNzNiZDNiZWU2ZmEzODU2NS4xNzA1MTkwNDAwMTU1LjE3MDUx
OTA0MDAxNTYuMTcwNTE5MDQwMDE1Ny4xJl9faHNzYz0xNDQ2ODIwMjYuMS4x
NzA1MTkwNDAwMTU4Jl9faHNmcD0yMjMxNjIzMjgyI2V4cGlyYXRpb24iKQog
ICAgICAgICAgICAKICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAg
ICAgICBtc2dCaWxsaW5nID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVu
dGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgs
ICcvLypbQGlkPSJ6dW9yYV9mb3JtIl0vaDYnKSkpLnRleHQKCiAgICAgICAg
ZXhjZXB0OgogICAgICAgICAgICBtc2dBbGVydGEgPSByZXZBbGVydGEoZHJp
dmVyKQoKICAgICAgICB0cnk6CiAgICAgICAgICAgICMgU2VwYXJhbW9zIGxh
IGNhZGVuYSBkZSBsYSB0YXJqZXRhCiAgICAgICAgICAgIHBhcnRlcyA9IGxp
dmUuc3BsaXQoInwiKQoKICAgICAgICAgICAgaWYgbGVuKHBhcnRlcykgPj0g
NDoKICAgICAgICAgICAgICAgIGNhcmQgPSBwYXJ0ZXNbM10KICAgICAgICAg
ICAgICAgIG1lcyA9IHBhcnRlc1s0XQogICAgICAgICAgICAgICAgc3VieWVh
ciA9IHBhcnRlc1s1XVsyOl0KICAgICAgICAgICAgICAgIGZlY2hhID0gbWVz
ICsgc3VieWVhcgogICAgICAgICAgICAgICAgY3Z2ID0gJzAwMCcKICAgICAg
ICBleGNlcHQ6CiAgICAgICAgICAgIHByaW50KCJQb3JmYXZvciBjb3JyaWdh
IGVsIGZvcm1hdG8gZGUgbGEgdGFyamV0YSBhc2k6IGNjfG1vbnRofHllYXIi
KQoKICAgICAgICBwcmludChjYXJkLCBtZXMsIGZlY2hhKQogICAgICAgIHRp
bWUuc2xlZXAoNSkKCiAgICAgICAgIyBpbnB1dCBuYW1lIC8vKltAaWQ9Imlu
Zm8tLWZpcnN0bmFtZSJdCiAgICAgICAgaW5wdXROYW1lID0gV2ViRHJpdmVy
V2FpdChkcml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRf
bG9jYXRlZCgoQnkuWFBBVEgsICcvLypbQGlkPSJpbmZvLS1maXJzdG5hbWUi
XScpKSkKICAgICAgICBpbnB1dE5hbWUuY2xlYXIoKQogICAgICAgIGlucHV0
TmFtZS5zZW5kX2tleXMoc2VsZi5maXJzdDEpCgogICAgICAgICMgaW5wdXQg
bG5hbWUgLy8qW0BpZD0iaW5mby0tbGFzdG5hbWUiXQogICAgICAgIGlucHV0
TG5hbWUgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMucHJl
c2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgJy8vKltAaWQ9
ImluZm8tLWxhc3RuYW1lIl0nKSkpCiAgICAgICAgaW5wdXRMbmFtZS5jbGVh
cigpCiAgICAgICAgaW5wdXRMbmFtZS5zZW5kX2tleXMoc2VsZi5sYXN0MSkK
CiAgICAgICAgIyBpbnB1dCBlbWFpbCAvLypbQGlkPSJzdWJzY3JpcHRpb25f
ZW1haWwiXQogICAgICAgIGlucHV0RW1haWwgPSBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgNSkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVk
KChCeS5YUEFUSCwgJy8vKltAaWQ9InN1YnNjcmlwdGlvbl9lbWFpbCJdJykp
KQogICAgICAgIGlucHV0RW1haWwuY2xlYXIoKQogICAgICAgIGlucHV0RW1h
aWwuc2VuZF9rZXlzKGVtYWlsZikKCiAgICAgICAgIyB6aXBjb2RlIC8vKltA
aWQ9InN1YnNjcmlwdGlvbl9iaWxsaW5nX3ppcF9jb2RlIl0KICAgICAgICBp
bnB1dFppcGNvZGUgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwo
RUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgJy8v
KltAaWQ9InN1YnNjcmlwdGlvbl9iaWxsaW5nX3ppcF9jb2RlIl0nKSkpCiAg
ICAgICAgaW5wdXRaaXBjb2RlLmNsZWFyKCkKICAgICAgICBpbnB1dFppcGNv
ZGUuc2VuZF9rZXlzKCIzMzM1MSIpCgogICAgICAgICMgc2VsZWN0IGVzdGFk
byAvLypbQGlkPSJiaWxsaW5nX3N0YXRlIl0KICAgICAgICB0cnk6ICAgCiAg
ICAgICAgICAgIHNlbGVjdF9zdGF0ZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVy
LCAxMCkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChC
eS5YUEFUSCwgJy8vKltAaWQ9ImJpbGxpbmdfc3RhdGUiXScpKSkKICAgICAg
ICAgICAgaW5wdXRfc3RhdGUgPSBTZWxlY3Qoc2VsZWN0X3N0YXRlKQogICAg
ICAgICAgICBpbnB1dF9zdGF0ZS5zZWxlY3RfYnlfdmFsdWUoIkZMIikKICAg
ICAgICBleGNlcHQ6CiAgICAgICAgICAgIHByaW50KCdFcnJvciBhbCBzZWxl
Y2Npb25hciBlc3RhZG8gZW4gVmFsbGV5JykKCiAgICAgICAgdGltZS5zbGVl
cCgyKQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmcmFtZSA9IFdlYkRy
aXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVt
ZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0iel9ocHBtX2lmcmFt
ZSJdJykpKSAjIGZpcmFtZQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAg
ZHJpdmVyLnJlZnJlc2goKQogICAgICAgICAgICB0aW1lLnNsZWVwKDUpCgog
ICAgICAgIHRyeToKICAgICAgICAgICAgaWZyYW1lID0gV2ViRHJpdmVyV2Fp
dChkcml2ZXIsIDUpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9j
YXRlZCgoQnkuWFBBVEgsICcvLypbQGlkPSJ6X2hwcG1faWZyYW1lIl0nKSkp
ICMgZmlyYW1lCiAgICAgICAgICAgIGRyaXZlci5zd2l0Y2hfdG8uZnJhbWUo
aWZyYW1lKQoKICAgICAgICAgICAgIyBjYXJkbmFtZSAvLypbQGlkPSJpbnB1
dC1jcmVkaXRDYXJkSG9sZGVyTmFtZSJdCiAgICAgICAgICAgIFdlYkRyaXZl
cldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50
X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0iaW5wdXQtY3JlZGl0Q2Fy
ZEhvbGRlck5hbWUiXScpKSkuc2VuZF9rZXlzKHNlbGYuZmlyc3QxICsgJyAn
ICsgc2VsZi5sYXN0MSkKICAgICAgICAgICAgIyBpbnB1dCBjYXJkbnVtYmVy
IC8vKltAaWQ9ImlucHV0LWNyZWRpdENhcmROdW1iZXIiXQogICAgICAgICAg
ICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMucHJlc2VuY2Vf
b2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgJy8vKltAaWQ9ImlucHV0
LWNyZWRpdENhcmROdW1iZXIiXScpKSkuc2VuZF9rZXlzKGNhcmQpCiAgICAg
ICAgICAgICMgc2VsZWN0IG1lcyAvLypbQGlkPSJpbnB1dC1jcmVkaXRDYXJk
RXhwaXJhdGlvbk1vbnRoIl0KICAgICAgICBleGNlcHQ6CiAgICAgICAgICAg
IHByaW50KCJFcnJvciBjb24gZnJhbWUgZGUgcGFnby4iKQoKICAgICAgICAK
ICAgICAgICB0cnk6ICAgCiAgICAgICAgICAgIHNlbGVjdF9tZXMgPSBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVDLnByZXNlbmNlX29mX2Vs
ZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICcvLypbQGlkPSJpbnB1dC1jcmVk
aXRDYXJkRXhwaXJhdGlvbk1vbnRoIl0nKSkpCiAgICAgICAgICAgIGlucHV0
X21lcyA9IFNlbGVjdChzZWxlY3RfbWVzKQogICAgICAgICAgICBpbnB1dF9t
ZXMuc2VsZWN0X2J5X3ZhbHVlKG1lcykKICAgICAgICBleGNlcHQ6CiAgICAg
ICAgICAgIHByaW50KCdFcnJvciBhbCBzZWxlY2Npb25hciBtZXMgZW4gVmFs
bGV5JykKCiAgICAgICAgIyBzZWxlY3QgeWVhciAvLypbQGlkPSJpbnB1dC1j
cmVkaXRDYXJkRXhwaXJhdGlvblllYXIiXQogICAgICAgIHRyeTogICAKICAg
ICAgICAgICAgc2VsZWN0X3llYXIgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
MTApLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnku
WFBBVEgsICcvLypbQGlkPSJpbnB1dC1jcmVkaXRDYXJkRXhwaXJhdGlvblll
YXIiXScpKSkKICAgICAgICAgICAgaW5wdXRfeWVhciA9IFNlbGVjdChzZWxl
Y3RfeWVhcikKICAgICAgICAgICAgeWVhciA9ICIyMCIgKyBzdWJ5ZWFyCiAg
ICAgICAgICAgIGlucHV0X3llYXIuc2VsZWN0X2J5X3ZhbHVlKHllYXIpCiAg
ICAgICAgZXhjZXB0OgogICAgICAgICAgICBwcmludCgnRXJyb3IgYWwgc2Vs
ZWNjaW9uYXIgeWVhciBlbiBWYWxsZXknKQoKICAgICAgICAjIGlucHV0IGN2
diAvLypbQGlkPSJpbnB1dC1jYXJkU2VjdXJpdHlDb2RlIl0KICAgICAgICBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMucHJlc2VuY2Vfb2Zf
ZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgJy8vKltAaWQ9ImlucHV0LWNh
cmRTZWN1cml0eUNvZGUiXScpKSkuc2VuZF9rZXlzKCIwMDAiKQogICAgICAg
IAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAjIGEgY29tcGxldGUg
Ly8qW0BpZD0ic3VibWl0QnV0dG9uIl0gCiAgICAgICAgYnRuQ29tcGxldGUg
PSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMjApLnVudGlsKEVDLmVsZW1lbnRf
dG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vYVtAaWQ9J3N1Ym1pdEJ1
dHRvbiddIikpKQogICAgICAgIGRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJn
dW1lbnRzWzBdLmNsaWNrKCk7IiwgYnRuQ29tcGxldGUpCiAgICAgICAgI1dl
YkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9l
bGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0ic3VibWl0QnV0
dG9uIl0nKSkpLmNsaWNrKCkKCiAgICAgICAgdHJ5OgogICAgICAgICAgICAj
IGJhbiAvLypbQGlkPSJlcnJvciJdIFRoZXJlIHNlZW1zIHRvIGJlIGEgcHJv
YmxlbSB3aXRoIHlvdXIgb3JkZXIuIFBsZWFzZSB2aXNpdCBodHRwczovL3N1
cHBvcnQubWluZHZhbGxleS5jb20vCiAgICAgICAgICAgIG1zZ0JhbiA9IFdl
YkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRpbChFQy5wcmVzZW5jZV9vZl9l
bGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0iZXJyb3IiXScp
KSkudGV4dAogICAgICAgICAgICBpZiAicHJvYmxlbSB3aXRoIHlvdXIgb3Jk
ZXIiIGluIG1zZ0JhbjoKICAgICAgICAgICAgICAgIHByaW50KCJEZXRlY3Rh
bmRvIEJBTiBFVkVSVEVDSCIpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAg
ICBwYXNzCgogICAgICAgIGRyaXZlci5zd2l0Y2hfdG8uZGVmYXVsdF9jb250
ZW50KCkKCiAgICAgICAgICAgIAogICAgICAgIG1zZ0xpdmUgPSAicHVyY2hh
c2UvYWNjZXNzL3N1bW1hcnk/UFN1YnNjcmlwdGlvbklEIgogICAgICAgIHRy
eToKICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICB0cnk6
CiAgICAgICAgICAgICAgICB1cmwgPSBkcml2ZXIuY3VycmVudF91cmwKICAg
ICAgICAgICAgICAgIHdoaWxlIG1zZ0xpdmUgbm90IGluIHVybCBhbmQgInRv
a2VuIiBub3QgaW4gdXJsOgogICAgICAgICAgICAgICAgICAgIHJldkFsZXJ0
YShkcml2ZXIpCiAgICAgICAgICAgICAgICAgICAgdXJsID0gZHJpdmVyLmN1
cnJlbnRfdXJsCiAgICAgICAgICAgICAgICAgICAgaWYgInNlY3VyZSIgaW4g
dXJsIG9yICJiYXJrYm94IiBpbiB1cmw6CiAgICAgICAgICAgICAgICAgICAg
ICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAg
ICAgICAgICAgICAgICAgcHJpbnQoIkVzcGVyYW5kby4uIikKICAgICAgICAg
ICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgIGV4Y2VwdCBF
eGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICNwcmludCgiRXJyb3Ig
ZW4gd2hpbGUuIikKICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgZXhj
ZXB0OgogICAgICAgICAgICBwcmludChkcml2ZXIuY3VycmVudF91cmwpCiAg
ICAgICAgICAgIHByaW50KCJFcnJvciBlc3BlcmFuZG8gcmVzcHVlc3RhIikK
CiAgICAgICAgdHJ5OgogICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAg
ICAgICAgICMgQ2FtYmlhciBhbCBhbGVydAogICAgICAgICAgICBhbGVydCA9
IGRyaXZlci5zd2l0Y2hfdG8uYWxlcnQKCiAgICAgICAgICAgICMgT2J0ZW5l
ciBlbCB0ZXh0byBkZWwgYWxlcnQKICAgICAgICAgICAgdGV4dG9fZGVsX2Fs
ZXJ0ID0gYWxlcnQudGV4dAogICAgICAgICAgICBwb3NpY2lvbiA9IHRleHRv
X2RlbF9hbGVydC5maW5kKCJ5b3VyIENyZWRpdCBDYXJkIHdhcyBkZWNsaW5l
ZC4iKQoKICAgICAgICAgICAgIyBWZXJpZmljYXIgc2kgc2UgZW5jb250csOz
IGxhIHN1YmNhZGVuYQogICAgICAgICAgICBpZiBwb3NpY2lvbiAhPSAtMToK
ICAgICAgICAgICAgICAgICMgRXh0cmFlciBsYSBwYXJ0ZSBxdWUgZGVzZWFz
CiAgICAgICAgICAgICAgICBtc2dNaW5kID0gdGV4dG9fZGVsX2FsZXJ0W3Bv
c2ljaW9uOl0KICAgICAgICAgICAgICAgIG1zZ01pbmQgPSBtc2dNaW5kLnNw
bGl0KCIuIilbMF0KICAgICAgICAgICAgICAgIHByaW50KG1zZ01pbmQpCiAg
ICAgICAgICAgICAgICBkcml2ZXIuY2xvc2UoKQogICAgICAgICAgICAgICAg
ZHJpdmVyLnN3aXRjaF90by53aW5kb3coZHJpdmVyLndpbmRvd19oYW5kbGVz
WzBdKQogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAg
IGVsaWYgbXNnTGl2ZSBpbiB1cmw6CiAgICAgICAgICAgICAgICBkcml2ZXIu
Y2xvc2UoKQogICAgICAgICAgICAgICAgZHJpdmVyLnN3aXRjaF90by53aW5k
b3coZHJpdmVyLndpbmRvd19oYW5kbGVzWzBdKQogICAgICAgICAgICAgICAg
cmV0dXJuIFRydWUgICAgICAgICAgICAgIAogICAgICAgICAgICBlbHNlOgog
ICAgICAgICAgICAgICAgcHJpbnQoIkxhIHN1YmNhZGVuYSBubyBmdWUgZW5j
b250cmFkYSBlbiBlbCBtZW5zYWplLiIpCiAgICAgICAgICAgIHRpbWUuc2xl
ZXAoMSkKICAgICAgICAgICAgYWxlcnQuYWNjZXB0KCkgICMgUGFyYSBhY2Vw
dGFyIGVsIGFsZXJ0CgogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFz
cwogICAgICAgICAgICAjcHJpbnQoIkFsZXJ0YSBubyBlbmNvbnRyYWRhIikK
CiAgICAgICAgdGltZS5zbGVlcCgxKQoKICAgICAgICB1cmwgPSBkcml2ZXIu
Y3VycmVudF91cmwKCiAgICAgICAgaWYgInRva2VuIiBpbiB1cmw6CiAgICAg
ICAgICAgICNwcmludChGb3JlLllFTExPVyArICJDaGFyZ3VlZCBEZWNsaW5l
ZCB8IEJsZXNzZWRHYXRlIHwgIiArIHRhcmpldGEgKyAiICIgKyBtc2dNaW5k
ICsgRm9yZS5XSElURSkKICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAg
ICAgICAgICBkcml2ZXIuY2xvc2UoKQogICAgICAgICAgICBkcml2ZXIuc3dp
dGNoX3RvLndpbmRvdyhkcml2ZXIud2luZG93X2hhbmRsZXNbMF0pCiAgICAg
ICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGVsaWYgbXNnTGl2ZSBpbiB1
cmw6CiAgICAgICAgICAgICNwcmludChGb3JlLkdSRUVOICsgIkNoYXJndWVk
IEFwcHJvdmVkIHwgQmxlc3NlZEdhdGUgfCAiICsgdGFyamV0YSArIEZvcmUu
V0hJVEUpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAg
ZHJpdmVyLmNsb3NlKCkKICAgICAgICAgICAgZHJpdmVyLnN3aXRjaF90by53
aW5kb3coZHJpdmVyLndpbmRvd19oYW5kbGVzWzBdKQogICAgICAgICAgICBy
ZXR1cm4gVHJ1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHRyeToKICAg
ICAgICAgICAgICAgICMgZnJhbWUgcGFnbyBiYW4gLy8qW0BpZD0iel9ocHBt
X2lmcmFtZSJdCiAgICAgICAgICAgICAgICBpZnJhbWUgPSBXZWJEcml2ZXJX
YWl0KGRyaXZlciwgNSkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9s
b2NhdGVkKChCeS5YUEFUSCwgJy8vKltAaWQ9InpfaHBwbV9pZnJhbWUiXScp
KSkgIyBmaXJhbWUKICAgICAgICAgICAgICAgIGRyaXZlci5zd2l0Y2hfdG8u
ZnJhbWUoaWZyYW1lKQogICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKQog
ICAgICAgICAgICAgICAgIyBiYW4gLy8qW0BpZD0iZXJyb3IiXSBUaGVyZSBz
ZWVtcyB0byBiZSBhIHByb2JsZW0gd2l0aCB5b3VyIG9yZGVyLiBQbGVhc2Ug
dmlzaXQgaHR0cHM6Ly9zdXBwb3J0Lm1pbmR2YWxsZXkuY29tLwogICAgICAg
ICAgICAgICAgbXNnQmFuID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDUpLnVu
dGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgs
ICcvLypbQGlkPSJlcnJvciJdJykpKS50ZXh0CiAgICAgICAgICAgICAgICBk
cml2ZXIuc3dpdGNoX3RvLmRlZmF1bHRfY29udGVudCgpCiAgICAgICAgICAg
ICAgICBpZiAicHJvYmxlbSB3aXRoIHlvdXIgb3JkZXIiIGluIG1zZ0JhbjoK
ICAgICAgICAgICAgICAgICAgICBwcmludCgiRGV0ZWN0YW5kbyBCQU4sIHBv
cmZhdm9yIGNhbWJpYSBsYSBpcCIpCiAgICAgICAgICAgICAgICAgICAgIyBJ
bmRpY2FyIGFsIHVzdWFyaW8gcXVlIHByZXNpb25lIEVudGVyIHBhcmEgY29u
dGludWFyCiAgICAgICAgICAgICAgICAgICAgI2lucHV0KCJQcmVzaW9uYSBF
bnRlciBjdWFuZG8gaGF5YXMgY2FtYmlhZG8gbGEgSVAgcGFyYSBjb250aW51
YXIuLi4iKQogICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAg
ICAgICAgICAgZHJpdmVyLmNsb3NlKCkKICAgICAgICAgICAgICAgIGRyaXZl
ci5zd2l0Y2hfdG8ud2luZG93KGRyaXZlci53aW5kb3dfaGFuZGxlc1swXSkK
ICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcHJpbnQoIlJl
dmlzYXIgbGl2ZS4iLCB1cmwpCiAgICAgICAgICAgIAogICAgICAgICAgICBz
ZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdFTElNSU5BTkRPIFJBU1RSRUFET1JF
UyEnKQogICAgICAgICAgICBkcml2ZXIucXVpdCgpCiAgICAgICAgICAgIGNs
b3NlQ2hyb21lKHNlbGYpCiAgICAgICAgICAgIGluc3RhbmNlX2RyaXZlciA9
IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0yKSAKICAgICAgICAgICAgICAgIAog
ICAgZXhjZXB0OgogICAgICAgIGRlc2Jhbihkcml2ZXIpCiAgICAgICAgZHJp
dmVyLnF1aXQoKQogICAgICAgIGNsb3NlQ2hyb21lKHNlbGYpCiAgICAgICAg
aW5zdGFuY2VfZHJpdmVyID0gb3BlbkJyb3dzZXIoMCxzZWxmLm51bTIpIAog
ICAgICAgIGV4Y190eXBlLCBleGNfb2JqLCBleGNfdGIgPSBzeXMuZXhjX2lu
Zm8oKTtmbmFtZSA9IG9zLnBhdGguc3BsaXQoZXhjX3RiLnRiX2ZyYW1lLmZf
Y29kZS5jb19maWxlbmFtZSlbMV0KICAgICAgICBlcnJvcl9tZXNzYWdlPSAo
c3RyKGV4Y190eXBlKSsnICcrc3RyKGV4Y190Yi50Yl9saW5lbm8pKQogICAg
ICAgIHNlbGYucHJpbnRlZC5lbWl0KGVycm9yX21lc3NhZ2UpCiAgICBzZWxm
LnRleHRfY2hhbmdlZC5lbWl0KCdURVNURU8gRklOQUxJWkFETycpICAgCgpk
ZWYgQmx1ZUNoZWNrKHNlbGYsIGxpdmUsIGRyaXZlcik6CgogICAgc2VsZi50
ZXh0X2NoYW5nZWQuZW1pdCgnSU5JQ0lBTkRPIFJFQ0hFQ0sgQkxVRScpCiAg
ICBlbWFpbHggPSBzZWxmLmxhc3QxKycnLmpvaW4ocmFuZG9tLmNob2ljZSgn
QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJz
dHd4eXowMTIzNDU2Nzg5JykgZm9yIF8gaW4gcmFuZ2UoOCkpKydAZ21haWwu
Y29tJwoKICAgIHRyeToKCiAgICAgICAgdHJ5OgogICAgICAgICAgICAjIFNl
cGFyYW1vcyBsYSBjYWRlbmEgZGUgbGEgdGFyamV0YQogICAgICAgICAgICBw
YXJ0ZXMgPSBsaXZlLnNwbGl0KCJ8IikKCiAgICAgICAgICAgIGlmIGxlbihw
YXJ0ZXMpID49IDQ6CiAgICAgICAgICAgICAgICBjYXJkID0gcGFydGVzWzNd
CiAgICAgICAgICAgICAgICBtZXMgPSBwYXJ0ZXNbNF0KICAgICAgICAgICAg
ICAgIHN1YnllYXIgPSBwYXJ0ZXNbNV1bMjpdCiAgICAgICAgICAgICAgICBm
ZWNoYSA9IG1lcyArIHN1YnllYXIKICAgICAgICAgICAgICAgIGN2diA9ICcw
MDAnCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwcmludCgiUG9yZmF2
b3IgY29ycmlnYSBlbCBmb3JtYXRvIGRlIGxhIHRhcmpldGEgYXNpOiBjY3xt
b250aHx5ZWFyIikKCiAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJ3
aW5kb3cub3BlbignJywgJ19ibGFuaycpOyIpCiAgICAgICAgZHJpdmVyLnN3
aXRjaF90by53aW5kb3coZHJpdmVyLndpbmRvd19oYW5kbGVzWzFdKQogICAg
ICAgIGRyaXZlci5nZXQoImh0dHBzOi8vb3JkZXIudmVlcG4uY29tL2VzL3By
aWNpbmcvIikKCiAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgx
LCAyKSkKCiAgICAgICAgY2xrID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEw
KS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNrYWJsZSgoQnkuWFBBVEgs
ICcvLypbQGlkPSJhcHAiXS9kaXYvbWFpbi9kaXZbMl0vc2VjdGlvbi91bC9s
aVsyXScpKSkKICAgICAgICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3Vt
ZW50c1swXS5jbGljaygpOyIsIGNsaykKCiAgICAgICAgdGltZS5zbGVlcChy
YW5kb20ucmFuZGludCgxLCAyKSkKCiAgICAgICAgY2xrID0gV2ViRHJpdmVy
V2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5lbGVtZW50X3RvX2JlX2NsaWNr
YWJsZSgoQnkuWFBBVEgsICIvL2J1dHRvbltAY2xhc3M9J3BsYW5zX19tb2It
YnRuIGJhc2UtYnV0dG9uIHRleHQtd2VpZ2h0LWJvbGQgYmFzZS1idXR0b24t
LXhsIGJhc2UtYnV0dG9uLS1zZWNvbmRhcnkgdGV4dC1ib2R5IHBsYW5zX19t
b2ItYnRuJ10iKSkpCiAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJh
cmd1bWVudHNbMF0uY2xpY2soKTsiLCBjbGspCgogICAgICAgIHRpbWUuc2xl
ZXAocmFuZG9tLnJhbmRpbnQoMSwgMikpCgogICAgICAgIGNsayA9IFdlYkRy
aXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9j
bGlja2FibGUoKEJ5LlhQQVRILCAnLy8qW0BpZD0idW5kZXItZm9vdGVyLXRl
bGVwb3J0Il0vZGl2L2J1dHRvblsyXScpKSkKICAgICAgICBkcml2ZXIuZXhl
Y3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygpOyIsIGNsaykKCiAg
ICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgxLCAyKSkKCiAgICAg
ICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5j
ZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAnLy8qW0BpZD0iYXBw
Il0vZGl2L21haW4vZGl2WzJdL3NlY3Rpb24vZGl2WzFdL2Zvcm0vbGFiZWwv
ZGl2L2lucHV0JykpKS5zZW5kX2tleXMoZW1haWx4KQogICAgICAgIAogICAg
ICAgIGNsayA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMu
ZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9kaXZbQGNs
YXNzPSdleHBhbnNpb24tcGFuZWxfX2hlYWRlciddIikpKQogICAgICAgIGRy
aXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7Iiwg
Y2xrKQoKICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDIsIDYp
KQoKICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVD
LmZyYW1lX3RvX2JlX2F2YWlsYWJsZV9hbmRfc3dpdGNoX3RvX2l0KChCeS5Y
UEFUSCwiLy9pZnJhbWVbQGlkPSdibHVlc25hcC1ob3N0ZWQtaWZyYW1lLWNj
biddIikpKQogICAgICAgIGlucHV0Q0MgPSBXZWJEcml2ZXJXYWl0KGRyaXZl
ciwgMykudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChC
eS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdjY24nXSIpKSkuc2VuZF9rZXlzKGNh
cmQpCiAgICAgICAgCiAgICAgICAgZHJpdmVyLnN3aXRjaF90by5kZWZhdWx0
X2NvbnRlbnQoKQoKCiAgICAgICAgV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEw
KS51bnRpbChFQy5mcmFtZV90b19iZV9hdmFpbGFibGVfYW5kX3N3aXRjaF90
b19pdCgoQnkuWFBBVEgsIi8vaWZyYW1lW0BpZD0nYmx1ZXNuYXAtaG9zdGVk
LWlmcmFtZS1leHAnXSIpKSkKICAgICAgICBpbnB1dEZlY2hhID0gV2ViRHJp
dmVyV2FpdChkcml2ZXIsIDMpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1l
bnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lucHV0W0BpZD0nZXhwJ10iKSkp
LnNlbmRfa2V5cyhmZWNoYSkKICAgICAgICAKICAgICAgICBkcml2ZXIuc3dp
dGNoX3RvLmRlZmF1bHRfY29udGVudCgpCgogICAgICAgIFdlYkRyaXZlcldh
aXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZnJhbWVfdG9fYmVfYXZhaWxhYmxl
X2FuZF9zd2l0Y2hfdG9faXQoKEJ5LlhQQVRILCIvL2lmcmFtZVtAaWQ9J2Js
dWVzbmFwLWhvc3RlZC1pZnJhbWUtY3Z2J10iKSkpCiAgICAgICAgaW5wdXRD
dnYgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMucHJlc2Vu
Y2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlk
PSdjdnYnXSIpKSkuc2VuZF9rZXlzKCcwMDAnKQoKICAgICAgICBkcml2ZXIu
c3dpdGNoX3RvLmRlZmF1bHRfY29udGVudCgpCgogICAgICAgIGlucHV0TmFt
ZSA9IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5wcmVzZW5j
ZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiL2h0bWwvYm9keS9k
aXZbMl0vZGl2L21haW4vZGl2WzJdL3NlY3Rpb24vZGl2WzNdL2RpdlsyXS9k
aXZbMl0vZGl2L2Zvcm1bMV0vZGl2WzFdL2xhYmVsWzFdL2Rpdi9pbnB1dCIp
KSkuc2VuZF9rZXlzKHNlbGYuZmlyc3QxKQogICAgICAgIGlucHV0TmFtZSA9
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAzKS51bnRpbChFQy5wcmVzZW5jZV9v
Zl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRILCAiL2h0bWwvYm9keS9kaXZb
Ml0vZGl2L21haW4vZGl2WzJdL3NlY3Rpb24vZGl2WzNdL2RpdlsyXS9kaXZb
Ml0vZGl2L2Zvcm1bMV0vZGl2WzFdL2xhYmVsWzJdL2Rpdi9pbnB1dCIpKSku
c2VuZF9rZXlzKHNlbGYubGFzdDEpCgogICAgICAgIHRpbWUuc2xlZXAocmFu
ZG9tLnJhbmRpbnQoMSwgNCkpCgogICAgICAgIGJ0blBheSA9IFdlYkRyaXZl
cldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlj
a2FibGUoKEJ5LlhQQVRILCAiLy9idXR0b25bQGNsYXNzPSdwYXltZW50LWZv
cm1fX3N1Ym1pdCBiYXNlLWJ1dHRvbiB0ZXh0LXdlaWdodC1ib2xkIGJhc2Ut
YnV0dG9uLS1sZyBiYXNlLWJ1dHRvbi0tc2Vjb25kYXJ5IHRleHQtYm9keSBw
YXltZW50LWZvcm1fX3N1Ym1pdCddIikpKQogICAgICAgIGRyaXZlci5leGVj
dXRlX3NjcmlwdCgiYXJndW1lbnRzWzBdLmNsaWNrKCk7IiwgYnRuUGF5KQoK
ICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDIsIDYpKQoKICAg
ICAgICB0cnk6CiAgICAgICAgICAgIGJ0bkhvbWUgPSBXZWJEcml2ZXJXYWl0
KGRyaXZlciwgNSkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUo
KEJ5LlhQQVRILCAnLy8qW0BpZD0iYXBwIl0vZGl2L21haW4vZGl2L2EnKSkp
CiAgICAgICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICAgICAgZHJpdmVy
LmNsb3NlKCkKICAgICAgICAgICAgZHJpdmVyLnN3aXRjaF90by53aW5kb3co
ZHJpdmVyLndpbmRvd19oYW5kbGVzWzBdKQogICAgICAgICAgICByZXR1cm4g
RmFsc2UKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHRyeToKICAgICAg
ICAgICAgICAgIG1zZ0xpdmUgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgNSku
dW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFU
SCwgJy8vKltAaWQ9IndyYXBwZXIiXS9kaXYvZGl2L2Rpdi9kaXYvc2VjdGlv
blsxXS9kaXYvaDEnKSkpLnRleHQKICAgICAgICAgICAgICAgIGlmICdZb3Ug
cHVyY2hhc2Ugd2FzIHN1Y2Nlc3NmdWwnIGluIG1zZ0xpdmU6CiAgICAgICAg
ICAgICAgICAgICAgZHJpdmVyLmNsb3NlKCkKICAgICAgICAgICAgICAgICAg
ICBkcml2ZXIuc3dpdGNoX3RvLndpbmRvdyhkcml2ZXIud2luZG93X2hhbmRs
ZXNbMF0pCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAg
ICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgdXJsID0gZHJpdmVyLmN1
cnJlbnRfdXJsCiAgICAgICAgICAgICAgICBpZiAncGFzc3dvcmQvY3JlYXRl
JyBpbiB1cmw6CiAgICAgICAgICAgICAgICAgICAgZHJpdmVyLmNsb3NlKCkK
ICAgICAgICAgICAgICAgICAgICBkcml2ZXIuc3dpdGNoX3RvLndpbmRvdyhk
cml2ZXIud2luZG93X2hhbmRsZXNbMF0pCiAgICAgICAgICAgICAgICAgICAg
cmV0dXJuIFRydWUKCiAgICAgICAgICAgIHByaW50KCdSRVZJU0FSJywgY2Fy
ZCkKICAgICAgICAgICAgdGltZS5zbGVlcCg1MDApIAoKICAgIGV4Y2VwdDoK
ICAgICAgICBkZXNiYW4oZHJpdmVyKQogICAgICAgIGRyaXZlci5xdWl0KCkK
ICAgICAgICBjbG9zZUNocm9tZShzZWxmKQogICAgICAgIGluc3RhbmNlX2Ry
aXZlciA9IG9wZW5Ccm93c2VyKDAsc2VsZi5udW0yKSAKICAgICAgICBleGNf
dHlwZSwgZXhjX29iaiwgZXhjX3RiID0gc3lzLmV4Y19pbmZvKCk7Zm5hbWUg
PSBvcy5wYXRoLnNwbGl0KGV4Y190Yi50Yl9mcmFtZS5mX2NvZGUuY29fZmls
ZW5hbWUpWzFdCiAgICAgICAgZXJyb3JfbWVzc2FnZT0gKHN0cihleGNfdHlw
ZSkrJyAnK3N0cihleGNfdGIudGJfbGluZW5vKSkKICAgICAgICBzZWxmLnBy
aW50ZWQuZW1pdChlcnJvcl9tZXNzYWdlKQogICAgc2VsZi50ZXh0X2NoYW5n
ZWQuZW1pdCgnVEVTVEVPIEZJTkFMSVpBRE8nKSAgIAoKZGVmIEVjb25vbWlz
dChzZWxmLCBsaXZlLCBkcml2ZXIpOgoKICAgIHRyeToKCiAgICAgICAgaWYg
c2VsZi50b29scy52YWxpZGF0ZV9jcmVkaXRvcyhzZWxmLnVzZXJuYW1lLHNl
bGYucGFzc3dvcmQpID09IFRydWU6CiAgICAgICAgICAgIHNlbGYudGV4dF9j
aGFuZ2VkLmVtaXQoJ0NSRURJVE9TIElOU1VGSUNJRU5URVMgOi8nKQogICAg
ICAgICAgICByZXR1cm4gTm9uZQoKICAgICAgICBzZWxmLnRleHRfY2hhbmdl
ZC5lbWl0KCJJTklDSUFORE8gUkVDSEVDSyBDSUFOIikKCiAgICAgICAgdHJ5
OgogICAgICAgICAgICAjIFNlcGFyYW1vcyBsYSBjYWRlbmEgZGUgbGEgdGFy
amV0YQogICAgICAgICAgICBwYXJ0ZXMgPSBsaXZlLnNwbGl0KCJ8IikKCiAg
ICAgICAgICAgIGlmIGxlbihwYXJ0ZXMpID49IDQ6CiAgICAgICAgICAgICAg
ICBjYXJkID0gcGFydGVzWzNdCiAgICAgICAgICAgICAgICBtZXMgPSBwYXJ0
ZXNbNF0KICAgICAgICAgICAgICAgIHN1YnllYXIgPSBwYXJ0ZXNbNV1bMjpd
CiAgICAgICAgICAgICAgICBmZWNoYSA9IG1lcyArIHN1YnllYXIKICAgICAg
ICAgICAgICAgIGN2diA9ICcwMDAnCiAgICAgICAgZXhjZXB0OgogICAgICAg
ICAgICBwcmludCgiUG9yZmF2b3IgY29ycmlnYSBlbCBmb3JtYXRvIGRlIGxh
IHRhcmpldGEgYXNpOiBjY3xtb250aHx5ZWFyIikKCiAgICAgICAgZHJpdmVy
LmV4ZWN1dGVfc2NyaXB0KCJ3aW5kb3cub3BlbignJywgJ19ibGFuaycpOyIp
CiAgICAgICAgZHJpdmVyLnN3aXRjaF90by53aW5kb3coZHJpdmVyLndpbmRv
d19oYW5kbGVzWzFdKQoKICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5k
aW50KDEsIDIpKQoKICAgICAgICBjb250ZW8gPSAwCiAgICAgICAgZW1haWxm
ID0gJycuam9pbihyYW5kb20uY2hvaWNlKCdBQkNERUZHSElKS0xNTk9QUVJT
VFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0d3h5ejAxMjM0NTY3ODknKSBm
b3IgXyBpbiByYW5nZSgzKSkrc2VsZi5maXJzdDErJycuam9pbihyYW5kb20u
Y2hvaWNlKCdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWpr
bG1ub3BxcnN0d3h5ejAxMjM0NTY3ODknKSBmb3IgXyBpbiByYW5nZSgzKSkr
J0BnbWFpbC5jb20nCiAgICAgICAgcGFzc2YgPSAnQzIqIycrJycuam9pbihy
YW5kb20uY2hvaWNlKCdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2Rl
ZmdoaWprbG1ub3BxcnN0d3h5ejAxMjM0NTY3ODkqIycpIGZvciBfIGluIHJh
bmdlKDgpKQogICAgICAgICNhY2NvdW50cyA9IFsnZ29uemF2YW5lNzdAZ21h
aWwuY29tJywgJ2xhdXJhMjhnb25AZ21haWwuY29tJywgJ2Nhc2hyb2RyaTI4
OUBnbWFpbC5jb20nLCAnbG9uZ2xpZmU3N0BnbWFpbC5jb20nXQogICAgICAg
ICNlbWFpbHggPSByYW5kb20uY2hvaWNlKGFjY291bnRzKQoKICAgICAgICBk
cml2ZXIuZ2V0KCJodHRwczovL3N1YnNjcmliZW5vdy5lY29ub21pc3QuY29t
Lz9zdGF0ZT1zdGF0ZS0zNjI5YjEwMjhkZWU2MDIxZmIyNjdkYjdiNjY5NGU0
MCIpCgogICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoMSwgMykp
CgogICAgICAgIFNlbGVjdChkcml2ZXIuZmluZF9lbGVtZW50KGJ5PUJ5LlhQ
QVRILCB2YWx1ZT0iLy9kaXZbQGlkPSdnYXRzYnktZm9jdXMtd3JhcHBlcidd
Ly9kaXYvL21haW4vL2Rpdi8vZGl2Ly9kaXYvL2hlYWRlci8vZGl2Ly9sYWJl
bC8vc2VsZWN0IikpLnNlbGVjdF9ieV92YWx1ZSgnQ08nKQoKICAgICAgICB0
cnk6CiAgICAgICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCA1KS51bnRp
bChFQy5mcmFtZV90b19iZV9hdmFpbGFibGVfYW5kX3N3aXRjaF90b19pdCgo
QnkuWFBBVEgsICIvL2lmcmFtZVtjb250YWlucyhAaWQsICdzcF9tZXNzYWdl
X2lmcmFtZV8nKV0iKSkpCiAgICAgICAgICAgIGJ0bkFjZXB0VGVybXMgPSBX
ZWJEcml2ZXJXYWl0KGRyaXZlciwgMykudW50aWwoRUMuZWxlbWVudF90b19i
ZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9idXR0b25bQHRpdGxlPSdBY2Nl
cHQgYWxsJyBhbmQgQGFyaWEtbGFiZWw9J0FjY2VwdCBhbGwnXSIpKSkKICAg
ICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0u
Y2xpY2soKTsiLCBidG5BY2VwdFRlcm1zKQogICAgICAgICAgICBkcml2ZXIu
c3dpdGNoX3RvLmRlZmF1bHRfY29udGVudCgpCiAgICAgICAgZXhjZXB0Ogog
ICAgICAgICAgICBwcmludCgnTm8gdGVybWlub3MgZGV0ZWN0YWRvcy4nKQoK
ICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDEsIDMpKQoKICAg
ICAgICBjbGsgPSBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGlsKEVD
LmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwgIi8vZGl2W0Bj
bGFzcz0naW5kZXgtbW9kdWxlX3RhYl9fYXN2a2InIGFuZCBoNFtAaWQ9J3By
b2R1Y3QtdG9nZ2xlLWxhYmVsLWJ1bmRsZS10aXRsZSddXSIpKSkKICAgICAg
ICBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoImFyZ3VtZW50c1swXS5jbGljaygp
OyIsIGNsaykKICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50KDEs
IDMpKQogICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwo
RUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9oNFtA
aWQ9J29mZmVyLXRvZ2dsZS1idW5kbGUtbGFiZWwtMC10aXRsZScgYW5kIGNv
bnRhaW5zKEBjbGFzcywgJ2luZGV4LW1vZHVsZV9wcmljZV9fMjRZaHonKV0i
KSkpLmNsaWNrKCkKICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTAp
LnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwg
Ii9odG1sL2JvZHkvZGl2WzFdL2RpdlsxXS9kaXYvbWFpbi9kaXYvZGl2WzJd
L2Rpdi9kaXZbMl0vZGl2L2RpdlszXS9kaXYvZGl2WzNdL2J1dHRvbiIpKSku
Y2xpY2soKQoKICAgICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCJURVNU
RUFORE8uLiIpCgogICAgICAgICNXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTAp
LnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwg
Ii8vaDRbQGlkPSdvZmZlci10b2dnbGUtZGlnaXRhbC1sYWJlbC0wLWhlYWRp
bmcnXSIpKSkuY2xpY2soKQogICAgICAgIGFjdGlvbnMgPSBBY3Rpb25DaGFp
bnMoZHJpdmVyKQogICAgICAgICNhY3Rpb25zLnNlbmRfa2V5cyhLZXlzLlRB
QikucGVyZm9ybSgpCiAgICAgICAgI2FjdGlvbnMuc2VuZF9rZXlzKEtleXMu
RU5URVIpLnBlcmZvcm0oKQoKICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5y
YW5kaW50KDEsIDUpKQoKICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwg
MjApLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnku
WFBBVEgsICIvL2lucHV0W0BuYW1lPSdmaXJzdG5hbWUnXSIpKSkuc2VuZF9r
ZXlzKHNlbGYuZmlyc3QxKQogICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVy
LCAxMCkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChC
eS5YUEFUSCwgIi8vaW5wdXRbQG5hbWU9J2xhc3RuYW1lJ10iKSkpLnNlbmRf
a2V5cyhzZWxmLmxhc3QxKQogICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVy
LCAxMCkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChC
eS5YUEFUSCwgIi8vaW5wdXRbQG5hbWU9J2VtYWlsQWRkcmVzcyddIikpKS5z
ZW5kX2tleXMoZW1haWxmKQogICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVy
LCAxMCkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxlbWVudF9sb2NhdGVkKChC
eS5YUEFUSCwgIi8vaW5wdXRbQG5hbWU9J3Bhc3N3b3JkJ10iKSkpLnNlbmRf
a2V5cyhwYXNzZikKICAgICAgICBhY3Rpb25zLnNlbmRfa2V5cyhLZXlzLkVO
VEVSKS5wZXJmb3JtKCkKCiAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFu
ZGludCg2LCAxMCkpCgogICAgICAgIGFkZHJlc3MgPSBmIkNhbGxlIHtyYW5k
b20ucmFuZGludCgxLCAxMDApfSBOIHtyYW5kb20ucmFuZGludCgxLCAxMDAp
fSIKICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTUpLnVudGlsKEVD
LnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIvL2lu
cHV0W0BpZD0nZGVsaXZlcnlBZGRyZXNzMSddIikpKS5zZW5kX2tleXMoYWRk
cmVzcykKICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGls
KEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIv
L2lucHV0W0BpZD0nZGVsaXZlcnlDaXR5J10iKSkpLnNlbmRfa2V5cygnQm9n
b3RhJykKICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTApLnVudGls
KEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRlZCgoQnkuWFBBVEgsICIv
L2lucHV0W0BpZD0nZGVsaXZlcnlQb3N0YWxDb2RlJ10iKSkpLnNlbmRfa2V5
cygnMTExMTAnKQoKICAgICAgICBXZWJEcml2ZXJXYWl0KGRyaXZlciwgMTAp
LnVudGlsKEVDLmVsZW1lbnRfdG9fYmVfY2xpY2thYmxlKChCeS5YUEFUSCwg
Ii8vbGFiZWxbbm9ybWFsaXplLXNwYWNlKCk9J0NyZWRpdCAvIERlYml0IENh
cmQnXSIpKSkuY2xpY2soKQoKICAgICAgICBpZiBzZWxmLnRvb2xzLnZhbGlk
YXRlX2NyZWRpdG9zKHNlbGYudXNlcm5hbWUsc2VsZi5wYXNzd29yZCkgPT0g
VHJ1ZToKICAgICAgICAgICAgc2VsZi50ZXh0X2NoYW5nZWQuZW1pdCgnQ1JF
RElUT1MgSU5TVUZJQ0lFTlRFUyA6LycpCiAgICAgICAgICAgIHJldHVybiBO
b25lCgogICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRpbnQoNSwgOCkp
CgogICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAyMCkudW50aWwoRUMu
ZnJhbWVfdG9fYmVfYXZhaWxhYmxlX2FuZF9zd2l0Y2hfdG9faXQoKEJ5LlhQ
QVRILCAiL2h0bWwvYm9keS9kaXZbMV0vZGl2WzFdL2Rpdi9tYWluL2Rpdi9k
aXZbMl0vZGl2L2Rpdls0XS9kaXYvZGl2L3NlY3Rpb25bMV0vZGl2WzJdL3Nl
Y3Rpb24vZm9ybS9kaXZbMV0vZGl2L2Rpdi9kaXZbMl0vaWZyYW1lIikpKQog
ICAgICAgIFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxl
bWVudF90b19iZV9jbGlja2FibGUoKEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9
J2lucHV0LWNyZWRpdENhcmRIb2xkZXJOYW1lJ10iKSkpLnNlbmRfa2V5cyhz
ZWxmLmZpcnN0MSsnICcrc2VsZi5sYXN0MSkKCiAgICAgICAgaW5wdXRDQyA9
IFdlYkRyaXZlcldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMucHJlc2VuY2Vf
b2ZfZWxlbWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vaW5wdXRbQGlkPSdp
bnB1dC1jcmVkaXRDYXJkTnVtYmVyJ10iKSkpCiAgICAgICAgaW5wdXRDQy5j
bGVhcigpCiAgICAgICAgaW5wdXRDQy5zZW5kX2tleXMoc2VsZi5jY3Nbc2Vs
Zi5jb250XSkKICAgICAgICAKICAgICAgICBTZWxlY3QoZHJpdmVyLmZpbmRf
ZWxlbWVudChieT1CeS5YUEFUSCwgdmFsdWU9Ii8vc2VsZWN0W0BpZD0naW5w
dXQtY3JlZGl0Q2FyZEV4cGlyYXRpb25Nb250aCddIikpLnNlbGVjdF9ieV92
YWx1ZSgoc2VsZi5tZXNbc2VsZi5jb250XSkpCiAgICAgICAgU2VsZWN0KGRy
aXZlci5maW5kX2VsZW1lbnQoYnk9QnkuWFBBVEgsIHZhbHVlPSIvL3NlbGVj
dFtAaWQ9J2lucHV0LWNyZWRpdENhcmRFeHBpcmF0aW9uWWVhciddIikpLnNl
bGVjdF9ieV92aXNpYmxlX3RleHQoc2VsZi5hbmlvW3NlbGYuY29udF0pCgog
ICAgICAgIGlucHV0Q1ZWID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEwKS51
bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQQVRI
LCAiLy9pbnB1dFtAaWQ9J2lucHV0LWNhcmRTZWN1cml0eUNvZGUnXSIpKSkK
ICAgICAgICBpbnB1dENWVi5jbGVhcigpCiAgICAgICAgaW5wdXRDVlYuc2Vu
ZF9rZXlzKCcwMDAnKQoKICAgICAgICBkcml2ZXIuc3dpdGNoX3RvLmRlZmF1
bHRfY29udGVudCgpCgogICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnJhbmRp
bnQoMSwgNSkpCgogICAgICAgIHRlcm1zID0gV2ViRHJpdmVyV2FpdChkcml2
ZXIsIDEwKS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQo
KEJ5LlhQQVRILCAiLy9pbnB1dFtAaWQ9J2dlbmVyaWNfdGVybXNfdGVybXMn
XSIpKSkKICAgICAgICBpZiBub3QgdGVybXMuaXNfc2VsZWN0ZWQoKToKICAg
ICAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJhcmd1bWVudHNbMF0u
Y2xpY2soKTsiLCB0ZXJtcykKCiAgICAgICAgYnRuU2F2ZSA9IFdlYkRyaXZl
cldhaXQoZHJpdmVyLCAxMCkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlj
a2FibGUoKEJ5LlhQQVRILCAiLy9idXR0b25bbm9ybWFsaXplLXNwYWNlKCk9
J0NoZWNrb3V0J10iKSkpCiAgICAgICAgZHJpdmVyLmV4ZWN1dGVfc2NyaXB0
KCJhcmd1bWVudHNbMF0uY2xpY2soKTsiLCBidG5TYXZlKQoKICAgICAgICAj
IFJFVklTQU5ETwoKICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS5yYW5kaW50
KDIsIDYpKQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIG1zZyA9ICBXZWJE
cml2ZXJXYWl0KGRyaXZlciwgNSkudW50aWwoRUMucHJlc2VuY2Vfb2ZfZWxl
bWVudF9sb2NhdGVkKChCeS5YUEFUSCwgIi8vcFtAY2xhc3M9J0Vycm9yJ10i
KSkpLnRleHQKICAgICAgICAgICAgaWYgJ09vcHMhIFNvbWV0aGluZyB3ZW50
IHdyb25nLiBQbGVhc2Ugd2FpdCBhIG1vbWVudCBhbmQgdHJ5IGFnYWluLicg
aW4gbXNnOgoKICAgICAgICAgICAgICAgIHByaW50KG1zZykKICAgICAgICAg
ICAgICAgIGRyaXZlci5jbG9zZSgpCiAgICAgICAgICAgICAgICBkcml2ZXIu
c3dpdGNoX3RvLndpbmRvdyhkcml2ZXIud2luZG93X2hhbmRsZXNbMF0pCiAg
ICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgICAgICNz
ZWxmLnRleHRfZGVhZC5lbWl0KGRlYWRtc2cpCgoKICAgICAgICAgICAgZWxz
ZToKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcHJpbnQoJ1JF
VklTQVInLCBtc2cpCiAgICAgICAgICAgICAgICBkcml2ZXIuY2xvc2UoKQog
ICAgICAgICAgICAgICAgZHJpdmVyLnN3aXRjaF90by53aW5kb3coZHJpdmVy
LndpbmRvd19oYW5kbGVzWzBdKQogICAgICAgICAgICAgICAgcmV0dXJuIEZh
bHNlCiAgICAgICAgICAgICAgICAjc2VsZi50ZXh0X2RlYWQuZW1pdChkZWFk
bXNnKQoKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHRyeToKICAgICAg
ICAgICAgICAgIG1zZ1NhbGRvID0gV2ViRHJpdmVyV2FpdChkcml2ZXIsIDEw
KS51bnRpbChFQy5wcmVzZW5jZV9vZl9lbGVtZW50X2xvY2F0ZWQoKEJ5LlhQ
QVRILCAiLy9wW2NvbnRhaW5zKHRleHQoKSwgJ1dlIGFyZSBzb3JyeSB3ZSBh
cmUgdW5hYmxlIHRvIHByb2Nlc3MgdGhlIG9yZGVyIGF0IHRoaXMgdGltZS4g
UGxlYXNlIHRyeSBhZ2FpbiBpbiBhIGZldyBtaW51dGVzLicpXSIpKSkudGV4
dAogICAgICAgICAgICAgICAgcHJpbnQobXNnU2FsZG8pCiAgICAgICAgICAg
ICAgICBzZWxmLnRleHRfY2hhbmdlZC5lbWl0KCdDQyBDT04gU0FMRE8gSU5T
VUZJQ0lFTlRFIScpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAg
ICAgIHRyeToKICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRv
bS5yYW5kaW50KDQsIDYpKQogICAgICAgICAgICAgICAgICAgIHVybCA9IGRy
aXZlci5jdXJyZW50X3VybAogICAgICAgICAgICAgICAgICAgIHByaW50KHVy
bCkKICAgICAgICAgICAgICAgICAgICBpZiAnZ2V0LXN0YXJ0ZWQnIGluIHVy
bDoKICAgICAgICAgICAgICAgICAgICAgICAgZHJpdmVyLmNsb3NlKCkKICAg
ICAgICAgICAgICAgICAgICAgICAgZHJpdmVyLnN3aXRjaF90by53aW5kb3co
ZHJpdmVyLndpbmRvd19oYW5kbGVzWzBdKQogICAgICAgICAgICAgICAgICAg
ICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICAgICAgICAgIAogICAgICAg
ICAgICAgICAgICAgICNidG5Db250aW51ZSA9IFdlYkRyaXZlcldhaXQoZHJp
dmVyLCAxNSkudW50aWwoRUMuZWxlbWVudF90b19iZV9jbGlja2FibGUoKEJ5
LlhQQVRILCAnLy8qW0BpZD0iYm9keSJdL2RpdlsyXS9kaXYvZGl2L2Rpdi9k
aXYvZGl2L2J1dHRvbicpKSkKICAgICAgICAgICAgICAgICAgICB0cnk6CiAg
ICAgICAgICAgICAgICAgICAgICAgIG1zZyA9ICBXZWJEcml2ZXJXYWl0KGRy
aXZlciwgMTUpLnVudGlsKEVDLnByZXNlbmNlX29mX2VsZW1lbnRfbG9jYXRl
ZCgoQnkuWFBBVEgsICcvLypbQGlkPSJib2R5Il0vZGl2WzJdL2Rpdi9kaXYv
ZGl2L2Rpdi9oMS9wJykpKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgZXhj
ZXB0OgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnTWVuc2FqZSBu
byBlbmNvbnRyYWRvLicpCiAgICAgICAgICAgICAgICAgICAgI3NlbGYudGV4
dF9kZWFkLmVtaXQobGl2ZW1zZykgCiAgICAgICAgICAgICAgICBleGNlcHQ6
CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ0Vycm9yIGNvbiBtZW5zYWpl
IGRlIHJlc3B1ZXN0YSEnLCBkcml2ZXIuY3VycmVudF91cmwpCgogICAgICAg
ICAgICAgICAgZHJpdmVyLmNsb3NlKCkKICAgICAgICAgICAgICAgIGRyaXZl
ci5zd2l0Y2hfdG8ud2luZG93KGRyaXZlci53aW5kb3dfaGFuZGxlc1swXSkK
ICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGV4Y2VwdDoKICAg
ICAgICBleGNfdHlwZSwgZXhjX29iaiwgZXhjX3RiID0gc3lzLmV4Y19pbmZv
KCk7Zm5hbWUgPSBvcy5wYXRoLnNwbGl0KGV4Y190Yi50Yl9mcmFtZS5mX2Nv
ZGUuY29fZmlsZW5hbWUpWzFdCiAgICAgICAgZXJyb3JfbWVzc2FnZT0gKHN0
cihleGNfdHlwZSkrJyAnK3N0cihleGNfdGIudGJfbGluZW5vKSkKICAgICAg
ICBzZWxmLnByaW50ZWQuZW1pdChlcnJvcl9tZXNzYWdlKSAgICAgICAgICAg
IAogICAgICAgIHJldHVybiBGYWxzZQoKCgoKIyBQUkFDVElDQU5ETyBNT0RV
TE8gUk9MRVMKICAgIApjbGFzcyBWSVBVc2VyQWN0aW9uczoKCiAgICBmcm9t
IHNlbGVuaXVtLndlYmRyaXZlci5jb21tb24ucHJveHkgaW1wb3J0IFByb3h5
LCBQcm94eVR5cGUKCiAgICBkZWYgX19pbml0X18oc2VsZiwgZHJpdmVyKToK
ICAgICAgICBzZWxmLmRyaXZlciA9IGRyaXZlcgoKICAgIGRlZiBuYXZlZ2Fy
KHNlbGYpOgoKICAgICAgICAjIFVSTCBkZWwgYXJjaGl2byBlbiBlbCByZXBv
c2l0b3JpbyBkZSBHaXRIdWIKICAgICAgICBnaXRodWJfdXJsID0gJ2h0dHBz
Oi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS93b3JsZGtyb3J5L1dpemFy
ZERvd25sb2FkL2Rldi9yc2MvdmlwX2luZGV4Lmh0bWwnCgogICAgICAgICMg
UnV0YSByZWxhdGl2YSBhbCBhcmNoaXZvIEhUTUwgbG9jYWwgZW4gbGEgY2Fy
cGV0YSAnY29uZmlnJwogICAgICAgIGNvbmZpZ19mb2xkZXIgPSAnY29uZmln
JwogICAgICAgIGZpbGVfbmFtZSA9ICd2aXBfaW5kZXguaHRtbCcKICAgICAg
ICBmaWxlX3BhdGggPSBvcy5wYXRoLmpvaW4oY29uZmlnX2ZvbGRlciwgZmls
ZV9uYW1lKQogICAgICAgIAogICAgICAgICMgRGVzY2FyZ2FyIGVsIGFyY2hp
dm8gZGUgR2l0SHViCiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQo
Z2l0aHViX3VybCkKICAgICAgICBpZiByZXNwb25zZS5zdGF0dXNfY29kZSA9
PSAyMDA6CiAgICAgICAgICAgIHdpdGggb3BlbihmaWxlX3BhdGgsICd3Jywg
ZW5jb2Rpbmc9J3V0Zi04JykgYXMgZmlsZToKICAgICAgICAgICAgICAgIGZp
bGUud3JpdGUocmVzcG9uc2UudGV4dCkKICAgICAgICAgICAgcHJpbnQoZiJB
cmNoaXZvIGRlc2NhcmdhZG8geSBndWFyZGFkbyBlbjoge2ZpbGVfcGF0aH0i
KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGYiRXJyb3IgYWwg
ZGVzY2FyZ2FyIGVsIGFyY2hpdm86IHtyZXNwb25zZS5zdGF0dXNfY29kZX0i
KQoKCiAgICAgICAgIyBDb252ZXJ0aXIgbGEgcnV0YSByZWxhdGl2YSBhIHVu
YSBydXRhIGFic29sdXRhCiAgICAgICAgYWJzb2x1dGVfZmlsZV9wYXRoID0g
b3MucGF0aC5hYnNwYXRoKGZpbGVfcGF0aCkKCiAgICAgICAgIyBBYnJpciBs
YSBww6FnaW5hIHdlYgogICAgICAgICNzZWxmLmRyaXZlci5nZXQoImh0dHBz
Oi8vc25vd3hjaGVja2VyLm15LmNhbnZhLnNpdGUvaW5mbyIpCiAgICAgICAg
IyBBYnJpciBlbCBhcmNoaXZvIEhUTUwgbG9jYWxtZW50ZQogICAgICAgIHNl
bGYuZHJpdmVyLmdldChmImZpbGU6Ly97YWJzb2x1dGVfZmlsZV9wYXRofSIp
CgogICAgICAgICMgRW5jb250cmFyIGVsIGVsZW1lbnRvIHBvciBJRCB5IGhh
Y2VyIHNjcm9sbCBoYXN0YSDDqWwKICAgICAgICAjZWxlbWVudCA9IHNlbGYu
ZHJpdmVyLmZpbmRfZWxlbWVudChCeS5JRCwgImtZUVdWSVN0QmdZS0pJRVQi
KQogICAgICAgICNzZWxmLmRyaXZlci5leGVjdXRlX3NjcmlwdCgiYXJndW1l
bnRzWzBdLnNjcm9sbEludG9WaWV3KHRydWUpOyIsIGVsZW1lbnQpCgogICAg
ICAgICMgRGV0ZWN0YXIgc2kgZHJpdmVyVklQIHNpZ3VlIGFiaWVydG8KCgo=
